<!DOCTYPE HTML>
<html lang="zh-CN" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Rust - 100å¤©ä»æ–°æ‰‹åˆ°å¤§å¸ˆ</title>
        <meta name="robots" content="noindex">


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon-de23e50b.svg">
        <link rel="shortcut icon" href="favicon-8114d1fc.png">
        <link rel="stylesheet" href="css/variables-8adf115d.css">
        <link rel="stylesheet" href="css/general-2459343d.css">
        <link rel="stylesheet" href="css/chrome-ae938929.css">
        <link rel="stylesheet" href="css/print-9e4910d8.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="fonts/fonts-9644e21d.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="mdbook-highlight-css" href="highlight-493f70e1.css">
        <link rel="stylesheet" id="mdbook-tomorrow-night-css" href="tomorrow-night-4c0ae647.css">
        <link rel="stylesheet" id="mdbook-ayu-highlight-css" href="ayu-highlight-3fdfc3ac.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "searchindex-db38cd84.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc-cec6f113.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>â†</kbd> or <kbd>â†’</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="mdbook-body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="mdbook-sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("mdbook-sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="mdbook-sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="mdbook-sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="mdbook-page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="mdbook-menu-bar-hover-placeholder"></div>
                <div id="mdbook-menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="mdbook-sidebar-toggle" class="icon-button" for="mdbook-sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="mdbook-sidebar">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"/></svg></span>
                        </label>
                        <button id="mdbook-theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="mdbook-theme-list">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M371.3 367.1c27.3-3.9 51.9-19.4 67.2-42.9L600.2 74.1c12.6-19.5 9.4-45.3-7.6-61.2S549.7-4.4 531.1 9.6L294.4 187.2c-24 18-38.2 46.1-38.4 76.1L371.3 367.1zm-19.6 25.4l-116-104.4C175.9 290.3 128 339.6 128 400c0 3.9 .2 7.8 .6 11.6c1.8 17.5-10.2 36.4-27.8 36.4H96c-17.7 0-32 14.3-32 32s14.3 32 32 32H240c61.9 0 112-50.1 112-112c0-2.5-.1-5-.2-7.5z"/></svg></span>
                        </button>
                        <ul id="mdbook-theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-ayu">Ayu</button></li>
                        </ul>
                        <button id="mdbook-search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="mdbook-searchbar">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352c79.5 0 144-64.5 144-144s-64.5-144-144-144S64 128.5 64 208s64.5 144 144 144z"/></svg></span>
                        </button>
                    </div>

                    <h1 class="menu-title">Rust - 100å¤©ä»æ–°æ‰‹åˆ°å¤§å¸ˆ</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <span class=fa-svg id="print-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M128 0C92.7 0 64 28.7 64 64v96h64V64H354.7L384 93.3V160h64V93.3c0-17-6.7-33.3-18.7-45.3L400 18.7C388 6.7 371.7 0 354.7 0H128zM384 352v32 64H128V384 368 352H384zm64 32h32c17.7 0 32-14.3 32-32V256c0-35.3-28.7-64-64-64H64c-35.3 0-64 28.7-64 64v96c0 17.7 14.3 32 32 32H64v64c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V384zm-16-88c-13.3 0-24-10.7-24-24s10.7-24 24-24s24 10.7 24 24s-10.7 24-24 24z"/></svg></span>
                        </a>
                        <a href="https://github.com/byteappua/rust-100" title="Git repository" aria-label="Git repository">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span>
                        </a>

                    </div>
                </div>

                <div id="mdbook-search-wrapper" class="hidden">
                    <form id="mdbook-searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="mdbook-searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="mdbook-searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <span class=fa-svg id="fa-spin"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M304 48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zm0 416c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM48 304c26.5 0 48-21.5 48-48s-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48zm464-48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM142.9 437c18.7-18.7 18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zm0-294.2c18.7-18.7 18.7-49.1 0-67.9S93.7 56.2 75 75s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zM369.1 437c18.7 18.7 49.1 18.7 67.9 0s18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9z"/></svg></span>
                            </div>
                        </div>
                    </form>
                    <div id="mdbook-searchresults-outer" class="searchresults-outer hidden">
                        <div id="mdbook-searchresults-header" class="searchresults-header"></div>
                        <ul id="mdbook-searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('mdbook-sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('mdbook-sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#mdbook-sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="mdbook-content" class="content">
                    <main>
                        <h1 id="rust---100å¤©ä»æ–°æ‰‹åˆ°å¤§å¸ˆ"><a class="header" href="#rust---100å¤©ä»æ–°æ‰‹åˆ°å¤§å¸ˆ">Rust - 100å¤©ä»æ–°æ‰‹åˆ°å¤§å¸ˆ</a></h1>
<blockquote>
<p>è¿™æ˜¯ä¸€ä¸ªå— <a href="https://github.com/jackfrued/Python-100-Days">Python - 100å¤©ä»æ–°æ‰‹åˆ°å¤§å¸ˆ</a> å¯å‘çš„ Rust è¯­è¨€å­¦ä¹ è®¡åˆ’ã€‚</p>
</blockquote>
<p>Rust æ˜¯ä¸€é—¨èµ‹äºˆæ¯ä¸ªäººæ„å»ºå¯é ä¸”é«˜æ•ˆè½¯ä»¶èƒ½åŠ›çš„ç³»ç»Ÿç¼–ç¨‹è¯­è¨€ã€‚å®ƒæ³¨é‡å†…å­˜å®‰å…¨ã€çº¿ç¨‹å®‰å…¨å’Œé«˜æ€§èƒ½ã€‚æœ¬é¡¹ç›®çš„ç›®æ ‡æ˜¯é€šè¿‡100å¤©çš„å­¦ä¹ ï¼Œå¸®åŠ©æ–°æ‰‹æŒæ¡ Rust è¯­è¨€ï¼Œå¹¶èƒ½å¤Ÿä½¿ç”¨ Rust è¿›è¡Œå®é™…çš„é¡¹ç›®å¼€å‘ã€‚</p>
<h2 id="ç›®å½•"><a class="header" href="#ç›®å½•">ç›®å½•</a></h2>
<h3 id="-çŸ¥è¯†å›¾è°±-knowledge-map"><a class="header" href="#-çŸ¥è¯†å›¾è°±-knowledge-map">ğŸ—ºï¸ <a href="KNOWLEDGE_MAP.html">çŸ¥è¯†å›¾è°± (Knowledge Map)</a></a></h3>
<p>æŒ‰æ¦‚å¿µåˆ†ç±»çš„ Rust çŸ¥è¯†ç‚¹ç´¢å¼•ï¼Œå¸®åŠ©ä½ å¿«é€Ÿæ‰¾åˆ°å¯¹åº” Day çš„å­¦ä¹ å†…å®¹ã€‚</p>
<h3 id="ç¬¬ä¸€é˜¶æ®µrust-è¯­è¨€åŸºç¡€-day-01---15"><a class="header" href="#ç¬¬ä¸€é˜¶æ®µrust-è¯­è¨€åŸºç¡€-day-01---15">ç¬¬ä¸€é˜¶æ®µï¼šRust è¯­è¨€åŸºç¡€ (Day 01 - 15)</a></h3>
<ul>
<li><strong>Day 01</strong>: åˆè¯† Rust - ç¯å¢ƒæ­å»ºã€Cargo ä½¿ç”¨ã€Hello World</li>
<li><strong>Day 02</strong>: å˜é‡ä¸æ•°æ®ç±»å‹ - å˜é‡ç»‘å®šã€å¯å˜æ€§ã€åŸºæœ¬ç±»å‹</li>
<li><strong>Day 03</strong>: å‡½æ•°ä¸æ§åˆ¶æµ - å‡½æ•°å®šä¹‰ã€if/elseã€å¾ªç¯</li>
<li><strong>Day 04</strong>: æ‰€æœ‰æƒ (Ownership) - Rust çš„æ ¸å¿ƒæ¦‚å¿µ</li>
<li><strong>Day 05</strong>: å¼•ç”¨ä¸å€Ÿç”¨ (References &amp; Borrowing)</li>
<li><strong>Day 06</strong>: åˆ‡ç‰‡ (Slices) ç±»å‹</li>
<li><strong>Day 07</strong>: ç»“æ„ä½“ (Structs) - å®šä¹‰ä¸å®ä¾‹åŒ–</li>
<li><strong>Day 08</strong>: æšä¸¾ (Enums) ä¸æ¨¡å¼åŒ¹é… (Match)</li>
<li><strong>Day 09</strong>: æ¨¡å—ç³»ç»Ÿ (Modules) - åŒ…ã€Crateã€æ¨¡å—</li>
<li><strong>Day 10</strong>: å¸¸ç”¨é›†åˆ - Vector, String, HashMap</li>
<li><strong>Day 11</strong>: é”™è¯¯å¤„ç† - Result ä¸ Panic</li>
<li><strong>Day 12</strong>: æ³›å‹ (Generics)</li>
<li><strong>Day 13</strong>: Trait - å®šä¹‰å…±äº«è¡Œä¸º</li>
<li><strong>Day 14</strong>: ç”Ÿå‘½å‘¨æœŸ (Lifetimes) åŸºç¡€</li>
<li><strong>Day 15</strong>: è‡ªåŠ¨åŒ–æµ‹è¯•</li>
</ul>
<h3 id="ç¬¬äºŒé˜¶æ®µè¿›é˜¶æ¦‚å¿µ-day-16---30"><a class="header" href="#ç¬¬äºŒé˜¶æ®µè¿›é˜¶æ¦‚å¿µ-day-16---30">ç¬¬äºŒé˜¶æ®µï¼šè¿›é˜¶æ¦‚å¿µ (Day 16 - 30)</a></h3>
<ul>
<li><strong>Day 16</strong>: é—­åŒ… (Closures)</li>
<li><strong>Day 17</strong>: è¿­ä»£å™¨ (Iterators)</li>
<li><strong>Day 18</strong>: Cargo è¿›é˜¶ä¸ Crates.io</li>
<li><strong>Day 19</strong>: æ™ºèƒ½æŒ‡é’ˆ (Smart Pointers) - Box</li>
<li><strong>Day 20</strong>: æ™ºèƒ½æŒ‡é’ˆ - Rc ä¸ RefCell</li>
<li><strong>Day 21</strong>: å†…éƒ¨å¯å˜æ€§æ¨¡å¼</li>
<li><strong>Day 22</strong>: å¼•ç”¨å¾ªç¯ä¸å†…å­˜æ³„æ¼</li>
<li><strong>Day 23</strong>: å¹¶å‘ç¼–ç¨‹ - çº¿ç¨‹</li>
<li><strong>Day 24</strong>: æ¶ˆæ¯ä¼ é€’ (Channels)</li>
<li><strong>Day 25</strong>: å…±äº«çŠ¶æ€å¹¶å‘ (Mutex, Arc)</li>
<li><strong>Day 26</strong>: Sync ä¸ Send Trait</li>
<li><strong>Day 27</strong>: é¢å‘å¯¹è±¡ç¼–ç¨‹ç‰¹æ€§</li>
<li><strong>Day 28</strong>: æ¨¡å¼åŒ¹é…è¿›é˜¶</li>
<li><strong>Day 29</strong>: é«˜çº§ Trait</li>
<li><strong>Day 30</strong>: é«˜çº§ç±»å‹</li>
</ul>
<h3 id="ç¬¬ä¸‰é˜¶æ®µå®ä¸ä¸å®‰å…¨ä»£ç -day-31---40"><a class="header" href="#ç¬¬ä¸‰é˜¶æ®µå®ä¸ä¸å®‰å…¨ä»£ç -day-31---40">ç¬¬ä¸‰é˜¶æ®µï¼šå®ä¸ä¸å®‰å…¨ä»£ç  (Day 31 - 40)</a></h3>
<ul>
<li><strong>Day 31</strong>: Unsafe Rust ä»‹ç»</li>
<li><strong>Day 32</strong>: é«˜çº§å‡½æ•°ä¸é—­åŒ…</li>
<li><strong>Day 33</strong>: å® (Macros) - å£°æ˜å®</li>
<li><strong>Day 34</strong>: è¿‡ç¨‹å® (Procedural Macros)</li>
<li><strong>Day 35</strong>: FFI - ä¸ C è¯­è¨€äº¤äº’</li>
<li><strong>Day 36-40</strong>: é˜¶æ®µæ€§é¡¹ç›®ç»ƒä¹  (æ„å»ºä¸€ä¸ªç®€å•çš„ CLI å·¥å…·)</li>
</ul>
<h3 id="ç¬¬å››é˜¶æ®µç”Ÿæ€ç³»ç»Ÿä¸å¼‚æ­¥ç¼–ç¨‹-day-41---60"><a class="header" href="#ç¬¬å››é˜¶æ®µç”Ÿæ€ç³»ç»Ÿä¸å¼‚æ­¥ç¼–ç¨‹-day-41---60">ç¬¬å››é˜¶æ®µï¼šç”Ÿæ€ç³»ç»Ÿä¸å¼‚æ­¥ç¼–ç¨‹ (Day 41 - 60)</a></h3>
<ul>
<li><strong>Day 41</strong>: å¼‚æ­¥ç¼–ç¨‹åŸºç¡€ (Async/Await)</li>
<li><strong>Day 42</strong>: Tokio è¿è¡Œæ—¶ä»‹ç»</li>
<li><strong>Day 43</strong>: æ„å»ºå¼‚æ­¥ Web æœåŠ¡å™¨ (Hyper/Axum)</li>
<li><strong>Day 44</strong>: åºåˆ—åŒ–ä¸ååºåˆ—åŒ– (Serde)</li>
<li><strong>Day 45</strong>: æ•°æ®åº“äº¤äº’ (SQLx / Diesel)</li>
<li><strong>Day 46</strong>: æ—¥å¿—ä¸ç›‘æ§ (Tracing)</li>
<li><strong>Day 47</strong>: é”™è¯¯å¤„ç†æœ€ä½³å®è·µ (Anyhow / Thiserror)</li>
<li><strong>Day 48</strong>: é…ç½®ç®¡ç†</li>
<li><strong>Day 49</strong>: å‘½ä»¤è¡Œå‚æ•°è§£æ (Clap)</li>
<li><strong>Day 50</strong>: HTTP å®¢æˆ·ç«¯ (Reqwest)</li>
<li><strong>Day 51-60</strong>: å¼‚æ­¥ç½‘ç»œé¡¹ç›®å®æˆ˜ (å¦‚ï¼šç®€æ˜“ Redis å…‹éš†)</li>
</ul>
<h3 id="ç¬¬äº”é˜¶æ®µweb-å¼€å‘å®æˆ˜-day-61---80"><a class="header" href="#ç¬¬äº”é˜¶æ®µweb-å¼€å‘å®æˆ˜-day-61---80">ç¬¬äº”é˜¶æ®µï¼šWeb å¼€å‘å®æˆ˜ (Day 61 - 80)</a></h3>
<ul>
<li><strong>Day 61</strong>: Web å¼€å‘æ¦‚è§ˆ</li>
<li><strong>Day 62-65</strong>: ä½¿ç”¨ Actix-web æˆ– Axum æ„å»º RESTful API</li>
<li><strong>Day 66-68</strong>: æ•°æ®åº“é›†æˆä¸è¿ç§»</li>
<li><strong>Day 69-70</strong>: èº«ä»½è®¤è¯ä¸æˆæƒ (JWT)</li>
<li><strong>Day 71-72</strong>: çŠ¶æ€ç®¡ç†</li>
<li><strong>Day 73-75</strong>: å‰ç«¯äº¤äº’ (Templates / WASM ç®€ä»‹)</li>
<li><strong>Day 76-80</strong>: å®Œæ•´ Web é¡¹ç›®å®æˆ˜ (å¦‚ï¼šåšå®¢ç³»ç»Ÿ)</li>
</ul>
<h3 id="ç¬¬å…­é˜¶æ®µç³»ç»Ÿç¼–ç¨‹ä¸æ‹“å±•-day-81---90"><a class="header" href="#ç¬¬å…­é˜¶æ®µç³»ç»Ÿç¼–ç¨‹ä¸æ‹“å±•-day-81---90">ç¬¬å…­é˜¶æ®µï¼šç³»ç»Ÿç¼–ç¨‹ä¸æ‹“å±• (Day 81 - 90)</a></h3>
<ul>
<li><strong>Day 81</strong>: æ“ä½œç³»ç»Ÿæ¦‚å¿µå›é¡¾</li>
<li><strong>Day 82</strong>: æ–‡ä»¶ç³»ç»Ÿæ“ä½œ</li>
<li><strong>Day 83</strong>: è¿›ç¨‹ä¸ä¿¡å·å¤„ç†</li>
<li><strong>Day 84</strong>: ç½‘ç»œç¼–ç¨‹ (TCP/UDP)</li>
<li><strong>Day 85</strong>: WebAssembly (WASM) æ·±å…¥</li>
<li><strong>Day 86</strong>: åµŒå…¥å¼ Rust ç®€ä»‹</li>
<li><strong>Day 87</strong>: æ€§èƒ½åˆ†æä¸ä¼˜åŒ–</li>
<li><strong>Day 88</strong>: CI/CD æŒç»­é›†æˆ</li>
<li><strong>Day 89</strong>: å‘å¸ƒä¸éƒ¨ç½²</li>
<li><strong>Day 90</strong>: Rust æœªæ¥å±•æœ›</li>
</ul>
<h3 id="ç¬¬ä¸ƒé˜¶æ®µæ¯•ä¸šè®¾è®¡-day-91---100"><a class="header" href="#ç¬¬ä¸ƒé˜¶æ®µæ¯•ä¸šè®¾è®¡-day-91---100">ç¬¬ä¸ƒé˜¶æ®µï¼šæ¯•ä¸šè®¾è®¡ (Day 91 - 100)</a></h3>
<ul>
<li><strong>Day 91-100</strong>: ç»¼åˆé¡¹ç›®å¼€å‘ (è‡ªé€‰é¢˜ç›®ï¼Œå¦‚ï¼šåˆ†å¸ƒå¼ç³»ç»Ÿã€é«˜æ€§èƒ½æœåŠ¡å™¨ã€æ¸¸æˆå¼•æ“ç»„ä»¶ç­‰)</li>
</ul>
<h2 id="å¦‚ä½•ä½¿ç”¨"><a class="header" href="#å¦‚ä½•ä½¿ç”¨">å¦‚ä½•ä½¿ç”¨</a></h2>
<p>å»ºè®®æŒ‰ç…§å¤©æ•°é¡ºåºå­¦ä¹ ã€‚æ¯ä¸€å¤©çš„æ–‡ä»¶å¤¹ä¸­åŒ…å«äº†å½“å¤©çš„å­¦ä¹ ç¬”è®°ã€ä»£ç ç¤ºä¾‹å’Œç»ƒä¹ é¢˜ã€‚</p>
<h2 id="-é¢å¤–èµ„æº"><a class="header" href="#-é¢å¤–èµ„æº">ğŸ é¢å¤–èµ„æº</a></h2>
<h3 id="-ç•ªå¤–ç¯‡"><a class="header" href="#-ç•ªå¤–ç¯‡">ğŸ“– ç•ªå¤–ç¯‡</a></h3>
<p>æ·±å…¥æ¢è®¨ Rust ç¼–ç¨‹çš„é‡è¦ä¸»é¢˜:</p>
<ul>
<li><a href="extras/rust-zen.html">Rust ä¹‹ç¦… - Rust ç¼–ç¨‹å“²å­¦</a></li>
<li><a href="extras/common-pitfalls.html">é‚£äº›å¹´æˆ‘ä»¬è¸©è¿‡çš„å‘</a></li>
<li><a href="extras/README.html">æ›´å¤šä¸“é¢˜æ–‡ç« â€¦</a></li>
</ul>
<h3 id="-ç»ƒä¹ é¢˜åº“"><a class="header" href="#-ç»ƒä¹ é¢˜åº“">ğŸ‹ï¸ ç»ƒä¹ é¢˜åº“</a></h3>
<p>æ¯ä¸ª Day éƒ½é…æœ‰ç»ƒä¹ é¢˜,å¸®åŠ©å·©å›ºçŸ¥è¯†:</p>
<ul>
<li><a href="Day01-15/01.Introduction/exercises/README.html">Day 01 ç»ƒä¹ é¢˜</a></li>
<li>æ›´å¤šç»ƒä¹ é¢˜æŒç»­æ›´æ–°ä¸­â€¦</li>
</ul>
<h3 id="-é¡¹ç›®æ¨¡æ¿"><a class="header" href="#-é¡¹ç›®æ¨¡æ¿">ğŸ¨ é¡¹ç›®æ¨¡æ¿</a></h3>
<p>å¿«é€Ÿå¯åŠ¨å„ç±» Rust é¡¹ç›®:</p>
<ul>
<li><a href="templates/cli-app">CLI åº”ç”¨æ¨¡æ¿</a></li>
<li><a href="templates/web-api">Web API æ¨¡æ¿</a></li>
<li><a href="templates/README.html">æ›´å¤šæ¨¡æ¿â€¦</a></li>
</ul>
<h2 id="-å­¦ä¹ èµ„æº"><a class="header" href="#-å­¦ä¹ èµ„æº">ğŸ“š å­¦ä¹ èµ„æº</a></h2>
<h3 id="å®˜æ–¹èµ„æº"><a class="header" href="#å®˜æ–¹èµ„æº">å®˜æ–¹èµ„æº</a></h3>
<ul>
<li><a href="https://doc.rust-lang.org/book/">The Rust Programming Language (Rust Book)</a></li>
<li><a href="https://doc.rust-lang.org/rust-by-example/">Rust by Example</a></li>
<li><a href="https://doc.rust-lang.org/std/">Rust Standard Library Documentation</a></li>
<li><a href="https://crates.io/">Crates.io</a></li>
</ul>
<h3 id="ç¤¾åŒºèµ„æº"><a class="header" href="#ç¤¾åŒºèµ„æº">ç¤¾åŒºèµ„æº</a></h3>
<ul>
<li><a href="https://rustcc.cn/">Rust ä¸­æ–‡ç¤¾åŒº</a></li>
<li><a href="https://users.rust-lang.org/">Rust å®˜æ–¹è®ºå›</a></li>
<li><a href="https://www.reddit.com/r/rust/">Reddit r/rust</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="rust-100-å¤©å­¦ä¹ è®¡åˆ’---å¿«é€Ÿå¼€å§‹"><a class="header" href="#rust-100-å¤©å­¦ä¹ è®¡åˆ’---å¿«é€Ÿå¼€å§‹">Rust 100 å¤©å­¦ä¹ è®¡åˆ’ - å¿«é€Ÿå¼€å§‹</a></h1>
<h2 id="-å¿«é€Ÿå¼€å§‹"><a class="header" href="#-å¿«é€Ÿå¼€å§‹">ğŸš€ å¿«é€Ÿå¼€å§‹</a></h2>
<h3 id="ç¯å¢ƒå‡†å¤‡"><a class="header" href="#ç¯å¢ƒå‡†å¤‡">ç¯å¢ƒå‡†å¤‡</a></h3>
<h4 id="1-å®‰è£…-rust"><a class="header" href="#1-å®‰è£…-rust">1. å®‰è£… Rust</a></h4>
<pre><code class="language-bash"># Linux/macOS
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh

# Windows
# ä¸‹è½½å¹¶è¿è¡Œ https://rustup.rs/
</code></pre>
<h4 id="2-éªŒè¯å®‰è£…"><a class="header" href="#2-éªŒè¯å®‰è£…">2. éªŒè¯å®‰è£…</a></h4>
<pre><code class="language-bash">rustc --version
cargo --version
</code></pre>
<h4 id="3-é…ç½®ç¼–è¾‘å™¨"><a class="header" href="#3-é…ç½®ç¼–è¾‘å™¨">3. é…ç½®ç¼–è¾‘å™¨</a></h4>
<p><strong>VS Code æ¨èæ’ä»¶ï¼š</strong></p>
<ul>
<li>rust-analyzer</li>
<li>CodeLLDB</li>
<li>crates</li>
<li>Even Better TOML</li>
</ul>
<p><strong>é…ç½®æ–‡ä»¶ (.vscode/settings.json):</strong></p>
<pre><code class="language-json">{
    "rust-analyzer.checkOnSave.command": "clippy",
    "editor.formatOnSave": true
}
</code></pre>
<h3 id="å­¦ä¹ è·¯å¾„"><a class="header" href="#å­¦ä¹ è·¯å¾„">å­¦ä¹ è·¯å¾„</a></h3>
<h4 id="ç¬¬ä¸€å‘¨åŸºç¡€å…¥é—¨-days-1-7"><a class="header" href="#ç¬¬ä¸€å‘¨åŸºç¡€å…¥é—¨-days-1-7">ç¬¬ä¸€å‘¨ï¼šåŸºç¡€å…¥é—¨ (Days 1-7)</a></h4>
<pre><code class="language-bash"># Day 1: Hello World
cargo new hello_world
cd hello_world
cargo run

# Day 2: å˜é‡å’Œç±»å‹
cd Day01-15/02.VariablesAndTypes/variables
cargo run

# Day 3: å‡½æ•°å’Œæ§åˆ¶æµ
cd Day01-15/03.FunctionsAndControlFlow/branches_and_loops
cargo run
</code></pre>
<p><strong>æ¯æ—¥å­¦ä¹ è®¡åˆ’ï¼š</strong></p>
<ol>
<li>é˜…è¯»å½“å¤©çš„ README.md (30åˆ†é’Ÿ)</li>
<li>è¿è¡Œç¤ºä¾‹ä»£ç  (30åˆ†é’Ÿ)</li>
<li>å®Œæˆç»ƒä¹ é¢˜ (60åˆ†é’Ÿ)</li>
<li>æ€»ç»“ç¬”è®° (15åˆ†é’Ÿ)</li>
</ol>
<h4 id="ç¬¬äºŒå‘¨æ ¸å¿ƒæ¦‚å¿µ-days-8-15"><a class="header" href="#ç¬¬äºŒå‘¨æ ¸å¿ƒæ¦‚å¿µ-days-8-15">ç¬¬äºŒå‘¨ï¼šæ ¸å¿ƒæ¦‚å¿µ (Days 8-15)</a></h4>
<p><strong>é‡ç‚¹å†…å®¹ï¼š</strong></p>
<ul>
<li>Day 4-6: æ‰€æœ‰æƒç³»ç»Ÿ â­â­â­</li>
<li>Day 7-8: ç»“æ„ä½“å’Œæšä¸¾</li>
<li>Day 11: é”™è¯¯å¤„ç† â­â­</li>
<li>Day 13: Traits â­â­</li>
</ul>
<pre><code class="language-bash"># æ‰€æœ‰æƒç»ƒä¹ 
cd Day01-15/04.Ownership/ownership_demo
cargo run

# é”™è¯¯å¤„ç†
cd Day01-15/11.ErrorHandling/error_handling_demo
cargo run
</code></pre>
<h4 id="ç¬¬ä¸‰-å››å‘¨è¿›é˜¶ç‰¹æ€§-days-16-30"><a class="header" href="#ç¬¬ä¸‰-å››å‘¨è¿›é˜¶ç‰¹æ€§-days-16-30">ç¬¬ä¸‰-å››å‘¨ï¼šè¿›é˜¶ç‰¹æ€§ (Days 16-30)</a></h4>
<p><strong>é‡ç‚¹å†…å®¹ï¼š</strong></p>
<ul>
<li>Day 16-17: é—­åŒ…å’Œè¿­ä»£å™¨ â­â­</li>
<li>Day 22-25: å¹¶å‘ç¼–ç¨‹ â­â­â­</li>
<li>Day 28-30: é«˜çº§ç‰¹æ€§</li>
</ul>
<pre><code class="language-bash"># å¹¶å‘ç¼–ç¨‹
cd Day16-30/22.Threads
cargo run

# æ¶ˆæ¯ä¼ é€’
cd Day16-30/23.MessagePassing
cargo run
</code></pre>
<h4 id="ç¬¬äº”-å…­å‘¨å®ç”¨æŠ€èƒ½-days-31-45"><a class="header" href="#ç¬¬äº”-å…­å‘¨å®ç”¨æŠ€èƒ½-days-31-45">ç¬¬äº”-å…­å‘¨ï¼šå®ç”¨æŠ€èƒ½ (Days 31-45)</a></h4>
<p><strong>é‡ç‚¹å†…å®¹ï¼š</strong></p>
<ul>
<li>Day 35: Async/Await â­â­â­</li>
<li>Day 39: Tokio æ·±å…¥ â­â­</li>
<li>Day 41: æ•°æ®åº“æ“ä½œ â­â­</li>
</ul>
<pre><code class="language-bash"># å¼‚æ­¥ç¼–ç¨‹
cd Day31-45/35.AsyncAwait
cargo run

# æ•°æ®åº“
cd Day31-45/41.Database_SQLx
cargo run
</code></pre>
<h4 id="ç¬¬ä¸ƒ-å…«å‘¨redis-é¡¹ç›®-days-46-60"><a class="header" href="#ç¬¬ä¸ƒ-å…«å‘¨redis-é¡¹ç›®-days-46-60">ç¬¬ä¸ƒ-å…«å‘¨ï¼šRedis é¡¹ç›® (Days 46-60)</a></h4>
<p><strong>é¡¹ç›®é‡Œç¨‹ç¢‘ï¼š</strong></p>
<ul>
<li>Day 46-50: åŸºç¡€åŠŸèƒ½</li>
<li>Day 51-55: é«˜çº§åŠŸèƒ½</li>
<li>Day 56-60: é›†ç¾¤å’Œéƒ¨ç½²</li>
</ul>
<pre><code class="language-bash"># è¿è¡Œ Redis å…‹éš†
cd Day46-60/60.CICD
cargo run --release

# è¿è¡Œæµ‹è¯•
cargo test

# è¿è¡ŒåŸºå‡†æµ‹è¯•
cargo bench
</code></pre>
<h4 id="ç¬¬ä¹-åå‘¨web-å¼€å‘-days-61-80"><a class="header" href="#ç¬¬ä¹-åå‘¨web-å¼€å‘-days-61-80">ç¬¬ä¹-åå‘¨ï¼šWeb å¼€å‘ (Days 61-80)</a></h4>
<p><strong>é¡¹ç›®é‡Œç¨‹ç¢‘ï¼š</strong></p>
<ul>
<li>Day 61-65: Web æ¡†æ¶åŸºç¡€</li>
<li>Day 66-70: æ•°æ®åº“å’Œè®¤è¯</li>
<li>Day 76-80: åšå®¢ç³»ç»Ÿ</li>
</ul>
<pre><code class="language-bash"># Web æœåŠ¡å™¨
cd Day61-80/62.AxumActix
cargo run

# JWT è®¤è¯
cd Day61-80/69.JWT
cargo run
</code></pre>
<h2 id="-å­¦ä¹ èµ„æº-1"><a class="header" href="#-å­¦ä¹ èµ„æº-1">ğŸ“š å­¦ä¹ èµ„æº</a></h2>
<h3 id="å®˜æ–¹æ–‡æ¡£"><a class="header" href="#å®˜æ–¹æ–‡æ¡£">å®˜æ–¹æ–‡æ¡£</a></h3>
<ul>
<li><a href="https://doc.rust-lang.org/book/">The Rust Book</a></li>
<li><a href="https://doc.rust-lang.org/rust-by-example/">Rust by Example</a></li>
<li><a href="https://github.com/rust-lang/rustlings">Rustlings</a></li>
</ul>
<h3 id="è§†é¢‘æ•™ç¨‹"><a class="header" href="#è§†é¢‘æ•™ç¨‹">è§†é¢‘æ•™ç¨‹</a></h3>
<ul>
<li><a href="https://www.youtube.com/c/LetsGetRusty">Letâ€™s Get Rusty</a></li>
<li><a href="https://www.youtube.com/c/JonGjengset">Jon Gjengset</a></li>
</ul>
<h3 id="ä¹¦ç±æ¨è"><a class="header" href="#ä¹¦ç±æ¨è">ä¹¦ç±æ¨è</a></h3>
<ul>
<li>Programming Rust (Oâ€™Reilly)</li>
<li>Rust for Rustaceans</li>
<li>Zero To Production In Rust</li>
</ul>
<h2 id="-å¸¸ç”¨å‘½ä»¤"><a class="header" href="#-å¸¸ç”¨å‘½ä»¤">ğŸ› ï¸ å¸¸ç”¨å‘½ä»¤</a></h2>
<h3 id="cargo-å‘½ä»¤"><a class="header" href="#cargo-å‘½ä»¤">Cargo å‘½ä»¤</a></h3>
<pre><code class="language-bash"># åˆ›å»ºæ–°é¡¹ç›®
cargo new project_name
cargo new --lib library_name

# æ„å»ºå’Œè¿è¡Œ
cargo build              # è°ƒè¯•æ¨¡å¼
cargo build --release    # å‘å¸ƒæ¨¡å¼
cargo run                # è¿è¡Œ
cargo run --release      # å‘å¸ƒæ¨¡å¼è¿è¡Œ

# æµ‹è¯•
cargo test               # è¿è¡Œæ‰€æœ‰æµ‹è¯•
cargo test test_name     # è¿è¡Œç‰¹å®šæµ‹è¯•
cargo test -- --nocapture  # æ˜¾ç¤ºæ‰“å°è¾“å‡º

# æ–‡æ¡£
cargo doc --open         # ç”Ÿæˆå¹¶æ‰“å¼€æ–‡æ¡£

# ä»£ç æ£€æŸ¥
cargo check              # å¿«é€Ÿæ£€æŸ¥
cargo clippy             # Lint æ£€æŸ¥
cargo fmt                # æ ¼å¼åŒ–ä»£ç 

# ä¾èµ–ç®¡ç†
cargo update             # æ›´æ–°ä¾èµ–
cargo tree               # æŸ¥çœ‹ä¾èµ–æ ‘
</code></pre>
<h3 id="rustup-å‘½ä»¤"><a class="header" href="#rustup-å‘½ä»¤">Rustup å‘½ä»¤</a></h3>
<pre><code class="language-bash"># æ›´æ–° Rust
rustup update

# å®‰è£…å·¥å…·é“¾
rustup toolchain install stable
rustup toolchain install nightly

# åˆ‡æ¢å·¥å…·é“¾
rustup default stable
rustup default nightly

# æ·»åŠ ç›®æ ‡å¹³å°
rustup target add wasm32-unknown-unknown

# å®‰è£…ç»„ä»¶
rustup component add rustfmt
rustup component add clippy
</code></pre>
<h2 id="-å­¦ä¹ æŠ€å·§"><a class="header" href="#-å­¦ä¹ æŠ€å·§">ğŸ¯ å­¦ä¹ æŠ€å·§</a></h2>
<h3 id="1-ç†è§£æ‰€æœ‰æƒç³»ç»Ÿ"><a class="header" href="#1-ç†è§£æ‰€æœ‰æƒç³»ç»Ÿ">1. ç†è§£æ‰€æœ‰æƒç³»ç»Ÿ</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// âŒ é”™è¯¯ï¼šå€¼è¢«ç§»åŠ¨
let s1 = String::from("hello");
let s2 = s1;
println!("{}", s1);  // ç¼–è¯‘é”™è¯¯

// âœ… æ­£ç¡®ï¼šä½¿ç”¨å¼•ç”¨
let s1 = String::from("hello");
let s2 = &amp;s1;
println!("{}", s1);  // OK
<span class="boring">}</span></code></pre>
<h3 id="2-å–„ç”¨ç¼–è¯‘å™¨æç¤º"><a class="header" href="#2-å–„ç”¨ç¼–è¯‘å™¨æç¤º">2. å–„ç”¨ç¼–è¯‘å™¨æç¤º</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// ç¼–è¯‘å™¨ä¼šç»™å‡ºè¯¦ç»†çš„é”™è¯¯ä¿¡æ¯å’Œå»ºè®®
// ä»”ç»†é˜…è¯»é”™è¯¯ä¿¡æ¯ï¼Œå®ƒä»¬é€šå¸¸å¾ˆæœ‰å¸®åŠ©
<span class="boring">}</span></code></pre>
<h3 id="3-ä½¿ç”¨-clippy"><a class="header" href="#3-ä½¿ç”¨-clippy">3. ä½¿ç”¨ Clippy</a></h3>
<pre><code class="language-bash"># Clippy ä¼šç»™å‡ºä»£ç æ”¹è¿›å»ºè®®
cargo clippy

# ç¤ºä¾‹è¾“å‡ºï¼š
# warning: you seem to be trying to use `match` for destructuring a single pattern
# help: try this: `if let Some(x) = option { ... }`
</code></pre>
<h3 id="4-é˜…è¯»æ ‡å‡†åº“æºç "><a class="header" href="#4-é˜…è¯»æ ‡å‡†åº“æºç ">4. é˜…è¯»æ ‡å‡†åº“æºç </a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// åœ¨ VS Code ä¸­ï¼ŒæŒ‰ä½ Ctrl ç‚¹å‡»ç±»å‹å
// å¯ä»¥è·³è½¬åˆ°å®šä¹‰æŸ¥çœ‹æºç 
let v = Vec::new();  // Ctrl+ç‚¹å‡» Vec
<span class="boring">}</span></code></pre>
<h3 id="5-å®è·µé¡¹ç›®"><a class="header" href="#5-å®è·µé¡¹ç›®">5. å®è·µé¡¹ç›®</a></h3>
<ul>
<li>æ¯å‘¨å®Œæˆä¸€ä¸ªå°é¡¹ç›®</li>
<li>å‚ä¸å¼€æºé¡¹ç›®</li>
<li>è§£å†³ LeetCode Rust é¢˜ç›®</li>
</ul>
<h2 id="-å¸¸è§é—®é¢˜"><a class="header" href="#-å¸¸è§é—®é¢˜">ğŸ› å¸¸è§é—®é¢˜</a></h2>
<h3 id="1-å€Ÿç”¨æ£€æŸ¥å™¨é”™è¯¯"><a class="header" href="#1-å€Ÿç”¨æ£€æŸ¥å™¨é”™è¯¯">1. å€Ÿç”¨æ£€æŸ¥å™¨é”™è¯¯</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// é—®é¢˜ï¼šåŒæ—¶å­˜åœ¨å¯å˜å’Œä¸å¯å˜å¼•ç”¨
let mut v = vec![1, 2, 3];
let first = &amp;v[0];
v.push(4);  // é”™è¯¯ï¼
println!("{}", first);

// è§£å†³ï¼šç¼©çŸ­å¼•ç”¨çš„ç”Ÿå‘½å‘¨æœŸ
let mut v = vec![1, 2, 3];
{
    let first = &amp;v[0];
    println!("{}", first);
}
v.push(4);  // OK
<span class="boring">}</span></code></pre>
<h3 id="2-ç”Ÿå‘½å‘¨æœŸæ³¨è§£"><a class="header" href="#2-ç”Ÿå‘½å‘¨æœŸæ³¨è§£">2. ç”Ÿå‘½å‘¨æœŸæ³¨è§£</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// é—®é¢˜ï¼šç¼–è¯‘å™¨æ— æ³•æ¨æ–­ç”Ÿå‘½å‘¨æœŸ
fn longest(x: &amp;str, y: &amp;str) -&gt; &amp;str {  // é”™è¯¯
    if x.len() &gt; y.len() { x } else { y }
}

// è§£å†³ï¼šæ·»åŠ ç”Ÿå‘½å‘¨æœŸæ³¨è§£
fn longest&lt;'a&gt;(x: &amp;'a str, y: &amp;'a str) -&gt; &amp;'a str {
    if x.len() &gt; y.len() { x } else { y }
}
<span class="boring">}</span></code></pre>
<h3 id="3-å¼‚æ­¥è¿è¡Œæ—¶"><a class="header" href="#3-å¼‚æ­¥è¿è¡Œæ—¶">3. å¼‚æ­¥è¿è¡Œæ—¶</a></h3>
<pre class="playground"><code class="language-rust">// é—®é¢˜ï¼šæ²¡æœ‰è¿è¡Œæ—¶
async fn hello() {
    println!("Hello");
}

fn main() {
    hello();  // ä¸ä¼šæ‰§è¡Œ
}

// è§£å†³ï¼šä½¿ç”¨ Tokio
#[tokio::main]
async fn main() {
    hello().await;  // OK
}</code></pre>
<h2 id="-è¿›åº¦è¿½è¸ª"><a class="header" href="#-è¿›åº¦è¿½è¸ª">ğŸ“Š è¿›åº¦è¿½è¸ª</a></h2>
<h3 id="æ¯æ—¥æ£€æŸ¥æ¸…å•"><a class="header" href="#æ¯æ—¥æ£€æŸ¥æ¸…å•">æ¯æ—¥æ£€æŸ¥æ¸…å•</a></h3>
<ul>
<li><input disabled="" type="checkbox"> é˜…è¯»å½“å¤©æ•™ç¨‹</li>
<li><input disabled="" type="checkbox"> è¿è¡Œç¤ºä¾‹ä»£ç </li>
<li><input disabled="" type="checkbox"> å®Œæˆç»ƒä¹ é¢˜</li>
<li><input disabled="" type="checkbox"> è®°å½•å­¦ä¹ ç¬”è®°</li>
<li><input disabled="" type="checkbox"> æäº¤ä»£ç åˆ° Git</li>
</ul>
<h3 id="æ¯å‘¨æ£€æŸ¥æ¸…å•"><a class="header" href="#æ¯å‘¨æ£€æŸ¥æ¸…å•">æ¯å‘¨æ£€æŸ¥æ¸…å•</a></h3>
<ul>
<li><input disabled="" type="checkbox"> å¤ä¹ æœ¬å‘¨å†…å®¹</li>
<li><input disabled="" type="checkbox"> å®Œæˆå‘¨é¡¹ç›®</li>
<li><input disabled="" type="checkbox"> å‚ä¸ç¤¾åŒºè®¨è®º</li>
<li><input disabled="" type="checkbox"> é˜…è¯»ç›¸å…³æ–‡ç« </li>
<li><input disabled="" type="checkbox"> æ›´æ–°å­¦ä¹ åšå®¢</li>
</ul>
<h3 id="é˜¶æ®µæ£€æŸ¥æ¸…å•"><a class="header" href="#é˜¶æ®µæ£€æŸ¥æ¸…å•">é˜¶æ®µæ£€æŸ¥æ¸…å•</a></h3>
<ul>
<li><input disabled="" type="checkbox"> ç¬¬ä¸€é˜¶æ®µ (Days 1-15): åŸºç¡€æŒæ¡</li>
<li><input disabled="" type="checkbox"> ç¬¬äºŒé˜¶æ®µ (Days 16-30): è¿›é˜¶ç‰¹æ€§</li>
<li><input disabled="" type="checkbox"> ç¬¬ä¸‰é˜¶æ®µ (Days 31-45): å®ç”¨æŠ€èƒ½</li>
<li><input disabled="" type="checkbox"> ç¬¬å››é˜¶æ®µ (Days 46-60): Redis é¡¹ç›®</li>
<li><input disabled="" type="checkbox"> ç¬¬äº”é˜¶æ®µ (Days 61-80): Web å¼€å‘</li>
<li><input disabled="" type="checkbox"> ç¬¬å…­é˜¶æ®µ (Days 81-90): ç³»ç»Ÿç¼–ç¨‹</li>
<li><input disabled="" type="checkbox"> ç¬¬ä¸ƒé˜¶æ®µ (Days 91-100): æ¯•ä¸šè®¾è®¡</li>
</ul>
<h2 id="-è®¤è¯å’Œæˆå°±"><a class="header" href="#-è®¤è¯å’Œæˆå°±">ğŸ“ è®¤è¯å’Œæˆå°±</a></h2>
<h3 id="å®Œæˆæ ‡å‡†"><a class="header" href="#å®Œæˆæ ‡å‡†">å®Œæˆæ ‡å‡†</a></h3>
<p>æ¯ä¸ªé˜¶æ®µå®Œæˆåï¼Œç¡®ä¿ï¼š</p>
<ol>
<li>ç†è§£æ ¸å¿ƒæ¦‚å¿µ</li>
<li>èƒ½å¤Ÿç‹¬ç«‹ç¼–å†™ä»£ç </li>
<li>å®Œæˆæ‰€æœ‰ç»ƒä¹ </li>
<li>é€šè¿‡é˜¶æ®µæµ‹è¯•</li>
</ol>
<h3 id="é¡¹ç›®å±•ç¤º"><a class="header" href="#é¡¹ç›®å±•ç¤º">é¡¹ç›®å±•ç¤º</a></h3>
<ul>
<li>åœ¨ GitHub ä¸Šåˆ›å»ºé¡¹ç›®ä»“åº“</li>
<li>ç¼–å†™å®Œæ•´çš„ README</li>
<li>æ·»åŠ æµ‹è¯•å’Œæ–‡æ¡£</li>
<li>åˆ†äº«åˆ°ç¤¾åŒº</li>
</ul>
<h2 id="-è·å–å¸®åŠ©"><a class="header" href="#-è·å–å¸®åŠ©">ğŸ’¬ è·å–å¸®åŠ©</a></h2>
<h3 id="ç¤¾åŒºèµ„æº-1"><a class="header" href="#ç¤¾åŒºèµ„æº-1">ç¤¾åŒºèµ„æº</a></h3>
<ul>
<li><a href="https://users.rust-lang.org/">Rust å®˜æ–¹è®ºå›</a></li>
<li><a href="https://www.reddit.com/r/rust/">Reddit r/rust</a></li>
<li><a href="https://rustcc.cn/">Rust ä¸­æ–‡ç¤¾åŒº</a></li>
<li><a href="https://discord.gg/rust-lang">Discord</a></li>
</ul>
<h3 id="æé—®æŠ€å·§"><a class="header" href="#æé—®æŠ€å·§">æé—®æŠ€å·§</a></h3>
<ol>
<li>æä¾›å®Œæ•´çš„é”™è¯¯ä¿¡æ¯</li>
<li>åˆ†äº«æœ€å°å¯å¤ç°ç¤ºä¾‹</li>
<li>è¯´æ˜å·²å°è¯•çš„è§£å†³æ–¹æ¡ˆ</li>
<li>ä½¿ç”¨ <a href="https://play.rust-lang.org/">Rust Playground</a></li>
</ol>
<h2 id="-å¼€å§‹å­¦ä¹ "><a class="header" href="#-å¼€å§‹å­¦ä¹ ">ğŸš€ å¼€å§‹å­¦ä¹ </a></h2>
<pre><code class="language-bash"># å…‹éš†é¡¹ç›®
git clone https://github.com/yourusername/rust-100-days.git
cd rust-100-days

# å¼€å§‹ Day 1
cd Day01-15/01.Introduction/hello_world
cargo run

# ç¥ä½ å­¦ä¹ æ„‰å¿«ï¼ğŸ¦€
</code></pre>
<hr>
<p><strong>è®°ä½ï¼šå­¦ä¹  Rust éœ€è¦è€å¿ƒï¼Œä½†å›æŠ¥æ˜¯å€¼å¾—çš„ï¼</strong></p>
<p><strong>Happy Coding! ğŸ¦€</strong></p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="rust-100-å¤©å­¦ä¹ è®¡åˆ’---å®Œæ•´æŒ‡å—"><a class="header" href="#rust-100-å¤©å­¦ä¹ è®¡åˆ’---å®Œæ•´æŒ‡å—">Rust 100 å¤©å­¦ä¹ è®¡åˆ’ - å®Œæ•´æŒ‡å—</a></h1>
<h2 id="-é¡¹ç›®æ¦‚è¿°"><a class="header" href="#-é¡¹ç›®æ¦‚è¿°">ğŸ“š é¡¹ç›®æ¦‚è¿°</a></h2>
<p>è¿™æ˜¯ä¸€ä¸ªå…¨é¢çš„ Rust å­¦ä¹ è®¡åˆ’ï¼Œä»é›¶åŸºç¡€åˆ°ç”Ÿäº§çº§é¡¹ç›®å¼€å‘ï¼Œæ¶µç›– 100 å¤©çš„ç³»ç»ŸåŒ–å­¦ä¹ å†…å®¹ã€‚</p>
<h2 id="-å­¦ä¹ ç›®æ ‡"><a class="header" href="#-å­¦ä¹ ç›®æ ‡">ğŸ¯ å­¦ä¹ ç›®æ ‡</a></h2>
<ul>
<li>æŒæ¡ Rust æ ¸å¿ƒæ¦‚å¿µå’Œè¯­æ³•</li>
<li>ç†è§£æ‰€æœ‰æƒã€å€Ÿç”¨å’Œç”Ÿå‘½å‘¨æœŸ</li>
<li>ç†Ÿç»ƒä½¿ç”¨ Rust æ ‡å‡†åº“å’Œç”Ÿæ€ç³»ç»Ÿ</li>
<li>å®Œæˆå¤šä¸ªå®æˆ˜é¡¹ç›®</li>
<li>å…·å¤‡ç”Ÿäº§ç¯å¢ƒå¼€å‘èƒ½åŠ›</li>
</ul>
<h2 id="-å­¦ä¹ è·¯çº¿å›¾"><a class="header" href="#-å­¦ä¹ è·¯çº¿å›¾">ğŸ“… å­¦ä¹ è·¯çº¿å›¾</a></h2>
<h3 id="ç¬¬ä¸€é˜¶æ®µåŸºç¡€å…¥é—¨-days-1-15"><a class="header" href="#ç¬¬ä¸€é˜¶æ®µåŸºç¡€å…¥é—¨-days-1-15">ç¬¬ä¸€é˜¶æ®µï¼šåŸºç¡€å…¥é—¨ (Days 1-15)</a></h3>
<p><strong>ç›®æ ‡ï¼šæŒæ¡ Rust åŸºç¡€è¯­æ³•å’Œæ ¸å¿ƒæ¦‚å¿µ</strong></p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>å¤©æ•°</th><th>ä¸»é¢˜</th><th>æ ¸å¿ƒå†…å®¹</th></tr>
</thead>
<tbody>
<tr><td>Day 01</td><td>Introduction</td><td>Hello World, Cargo åŸºç¡€</td></tr>
<tr><td>Day 02</td><td>Variables and Types</td><td>å˜é‡ã€æ•°æ®ç±»å‹ã€å¸¸é‡</td></tr>
<tr><td>Day 03</td><td>Functions and Control Flow</td><td>å‡½æ•°ã€if/loop/while/for</td></tr>
<tr><td>Day 04</td><td>Ownership</td><td>æ‰€æœ‰æƒè§„åˆ™ã€ç§»åŠ¨è¯­ä¹‰</td></tr>
<tr><td>Day 05</td><td>References and Borrowing</td><td>å¼•ç”¨ã€å¯å˜å¼•ç”¨ã€å€Ÿç”¨è§„åˆ™</td></tr>
<tr><td>Day 06</td><td>Slices</td><td>å­—ç¬¦ä¸²åˆ‡ç‰‡ã€æ•°ç»„åˆ‡ç‰‡</td></tr>
<tr><td>Day 07</td><td>Structs</td><td>ç»“æ„ä½“å®šä¹‰ã€æ–¹æ³•ã€å…³è”å‡½æ•°</td></tr>
<tr><td>Day 08</td><td>Enums</td><td>æšä¸¾ã€Optionã€Result</td></tr>
<tr><td>Day 09</td><td>Modules</td><td>æ¨¡å—ç³»ç»Ÿã€å¯è§æ€§ã€use</td></tr>
<tr><td>Day 10</td><td>Common Collections</td><td>Vec, String, HashMap</td></tr>
<tr><td>Day 11</td><td>Error Handling</td><td>panic!, Result, ? æ“ä½œç¬¦</td></tr>
<tr><td>Day 12</td><td>Generics</td><td>æ³›å‹å‡½æ•°ã€ç»“æ„ä½“ã€æšä¸¾</td></tr>
<tr><td>Day 13</td><td>Traits</td><td>trait å®šä¹‰ã€å®ç°ã€trait bounds</td></tr>
<tr><td>Day 14</td><td>Lifetimes</td><td>ç”Ÿå‘½å‘¨æœŸæ³¨è§£ã€è§„åˆ™</td></tr>
<tr><td>Day 15</td><td>Testing</td><td>å•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ã€æ–‡æ¡£æµ‹è¯•</td></tr>
</tbody>
</table>
</div>
<p><strong>å­¦ä¹ æˆæœï¼š</strong></p>
<ul>
<li>âœ… ç†è§£ Rust æ ¸å¿ƒæ¦‚å¿µ</li>
<li>âœ… èƒ½å¤Ÿç¼–å†™åŸºæœ¬çš„ Rust ç¨‹åº</li>
<li>âœ… æŒæ¡æ‰€æœ‰æƒç³»ç»Ÿ</li>
<li>âœ… ç†Ÿæ‚‰é”™è¯¯å¤„ç†æ¨¡å¼</li>
</ul>
<h3 id="ç¬¬äºŒé˜¶æ®µè¿›é˜¶ç‰¹æ€§-days-16-30"><a class="header" href="#ç¬¬äºŒé˜¶æ®µè¿›é˜¶ç‰¹æ€§-days-16-30">ç¬¬äºŒé˜¶æ®µï¼šè¿›é˜¶ç‰¹æ€§ (Days 16-30)</a></h3>
<p><strong>ç›®æ ‡ï¼šæŒæ¡ Rust é«˜çº§ç‰¹æ€§å’Œå¹¶å‘ç¼–ç¨‹</strong></p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>å¤©æ•°</th><th>ä¸»é¢˜</th><th>æ ¸å¿ƒå†…å®¹</th></tr>
</thead>
<tbody>
<tr><td>Day 16</td><td>Closures</td><td>é—­åŒ…è¯­æ³•ã€æ•è·ç¯å¢ƒ</td></tr>
<tr><td>Day 17</td><td>Iterators</td><td>è¿­ä»£å™¨ã€é€‚é…å™¨ã€æ¶ˆè´¹å™¨</td></tr>
<tr><td>Day 18</td><td>Cargo and Crates</td><td>ä¾èµ–ç®¡ç†ã€å‘å¸ƒ crate</td></tr>
<tr><td>Day 19</td><td>Smart Pointers - Box</td><td><code>Box&lt;T&gt;</code>, é€’å½’ç±»å‹</td></tr>
<tr><td>Day 20</td><td>Smart Pointers - Rc/RefCell</td><td>å¼•ç”¨è®¡æ•°ã€å†…éƒ¨å¯å˜æ€§</td></tr>
<tr><td>Day 21</td><td>Reference Cycles</td><td>å¾ªç¯å¼•ç”¨ã€<code>Weak&lt;T&gt;</code></td></tr>
<tr><td>Day 22</td><td>Threads</td><td>çº¿ç¨‹åˆ›å»ºã€join</td></tr>
<tr><td>Day 23</td><td>Message Passing</td><td>channel, mpsc</td></tr>
<tr><td>Day 24</td><td>Shared State</td><td>Mutex, Arc</td></tr>
<tr><td>Day 25</td><td>Send and Sync</td><td>å¹¶å‘ trait</td></tr>
<tr><td>Day 26</td><td>OOP - Trait Objects</td><td>åŠ¨æ€åˆ†å‘ã€trait å¯¹è±¡</td></tr>
<tr><td>Day 27</td><td>Patterns</td><td>æ¨¡å¼åŒ¹é…ã€è§£æ„</td></tr>
<tr><td>Day 28</td><td>Advanced Traits</td><td>å…³è”ç±»å‹ã€é»˜è®¤æ³›å‹å‚æ•°</td></tr>
<tr><td>Day 29</td><td>Advanced Types</td><td>newtype, ç±»å‹åˆ«å</td></tr>
<tr><td>Day 30</td><td>Advanced Functions and Macros</td><td>å‡½æ•°æŒ‡é’ˆã€å®</td></tr>
</tbody>
</table>
</div>
<p><strong>å­¦ä¹ æˆæœï¼š</strong></p>
<ul>
<li>âœ… æŒæ¡æ™ºèƒ½æŒ‡é’ˆä½¿ç”¨</li>
<li>âœ… ç†è§£å¹¶å‘ç¼–ç¨‹æ¨¡å‹</li>
<li>âœ… ç†Ÿæ‚‰é«˜çº§ç±»å‹ç³»ç»Ÿ</li>
<li>âœ… èƒ½å¤Ÿç¼–å†™å®</li>
</ul>
<h3 id="ç¬¬ä¸‰é˜¶æ®µå®ç”¨æŠ€èƒ½-days-31-45"><a class="header" href="#ç¬¬ä¸‰é˜¶æ®µå®ç”¨æŠ€èƒ½-days-31-45">ç¬¬ä¸‰é˜¶æ®µï¼šå®ç”¨æŠ€èƒ½ (Days 31-45)</a></h3>
<p><strong>ç›®æ ‡ï¼šæŒæ¡å®é™…å¼€å‘ä¸­çš„å¸¸ç”¨æŠ€èƒ½</strong></p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>å¤©æ•°</th><th>ä¸»é¢˜</th><th>æ ¸å¿ƒå†…å®¹</th></tr>
</thead>
<tbody>
<tr><td>Day 31</td><td>File I/O</td><td>æ–‡ä»¶è¯»å†™ã€è·¯å¾„æ“ä½œ</td></tr>
<tr><td>Day 32</td><td>Serialization - Serde</td><td>JSON, TOML åºåˆ—åŒ–</td></tr>
<tr><td>Day 33</td><td>Minigrep</td><td>CLI å·¥å…·é¡¹ç›®</td></tr>
<tr><td>Day 34</td><td>Network - TCP</td><td>TCP å®¢æˆ·ç«¯/æœåŠ¡å™¨</td></tr>
<tr><td>Day 35</td><td>Async/Await</td><td>å¼‚æ­¥ç¼–ç¨‹åŸºç¡€</td></tr>
<tr><td>Day 36</td><td>Unsafe Rust</td><td>unsafe ä»£ç ã€FFI</td></tr>
<tr><td>Day 37</td><td>Procedural Macros</td><td>è¿‡ç¨‹å®ã€derive å®</td></tr>
<tr><td>Day 38</td><td>FFI</td><td>C äº’æ“ä½œ</td></tr>
<tr><td>Day 39</td><td>Tokio Deep Dive</td><td>Tokio è¿è¡Œæ—¶è¯¦è§£</td></tr>
<tr><td>Day 40</td><td>Async Web Server</td><td>å¼‚æ­¥ HTTP æœåŠ¡å™¨</td></tr>
<tr><td>Day 41</td><td>Database - SQLx</td><td>æ•°æ®åº“æ“ä½œ</td></tr>
<tr><td>Day 42</td><td>Tracing</td><td>æ—¥å¿—å’Œè¿½è¸ª</td></tr>
<tr><td>Day 43</td><td>Error Handling</td><td>thiserror, anyhow</td></tr>
<tr><td>Day 44</td><td>Clap</td><td>å‘½ä»¤è¡Œå‚æ•°è§£æ</td></tr>
<tr><td>Day 45</td><td>Reqwest</td><td>HTTP å®¢æˆ·ç«¯</td></tr>
</tbody>
</table>
</div>
<p><strong>å­¦ä¹ æˆæœï¼š</strong></p>
<ul>
<li>âœ… æŒæ¡æ–‡ä»¶å’Œç½‘ç»œ I/O</li>
<li>âœ… ç†Ÿç»ƒä½¿ç”¨å¼‚æ­¥ç¼–ç¨‹</li>
<li>âœ… èƒ½å¤Ÿæ“ä½œæ•°æ®åº“</li>
<li>âœ… æŒæ¡å¸¸ç”¨ç¬¬ä¸‰æ–¹åº“</li>
</ul>
<h3 id="ç¬¬å››é˜¶æ®µé¡¹ç›®å®æˆ˜---redis-å…‹éš†-days-46-60"><a class="header" href="#ç¬¬å››é˜¶æ®µé¡¹ç›®å®æˆ˜---redis-å…‹éš†-days-46-60">ç¬¬å››é˜¶æ®µï¼šé¡¹ç›®å®æˆ˜ - Redis å…‹éš† (Days 46-60)</a></h3>
<p><strong>ç›®æ ‡ï¼šæ„å»ºä¸€ä¸ªå®Œæ•´çš„ Redis å…‹éš†é¡¹ç›®</strong></p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>å¤©æ•°</th><th>ä¸»é¢˜</th><th>æ ¸å¿ƒå†…å®¹</th></tr>
</thead>
<tbody>
<tr><td>Day 46</td><td>Project Init</td><td>é¡¹ç›®æ¶æ„è®¾è®¡</td></tr>
<tr><td>Day 47</td><td>RESP Parsing</td><td>RESP åè®®è§£æ</td></tr>
<tr><td>Day 48</td><td>Command Architecture</td><td>å‘½ä»¤æ¨¡å¼è®¾è®¡</td></tr>
<tr><td>Day 49</td><td>Storage Engine</td><td>å†…å­˜å­˜å‚¨å¼•æ“</td></tr>
<tr><td>Day 50</td><td>Async Network</td><td>å¼‚æ­¥ç½‘ç»œå¤„ç†</td></tr>
<tr><td>Day 51</td><td>Concurrency</td><td>å¹¶å‘æ§åˆ¶</td></tr>
<tr><td>Day 52</td><td>Persistence</td><td>AOF æŒä¹…åŒ–</td></tr>
<tr><td>Day 53</td><td>Pub/Sub</td><td>å‘å¸ƒè®¢é˜…</td></tr>
<tr><td>Day 54</td><td>Client SDK</td><td>å®¢æˆ·ç«¯ SDK</td></tr>
<tr><td>Day 55</td><td>Benchmark</td><td>æ€§èƒ½æµ‹è¯•</td></tr>
<tr><td>Day 56</td><td>Cluster Mode</td><td>é›†ç¾¤æ¨¡å¼</td></tr>
<tr><td>Day 57</td><td>Sentinel</td><td>å“¨å…µæ¨¡å¼</td></tr>
<tr><td>Day 58</td><td>TLS</td><td>TLS åŠ å¯†</td></tr>
<tr><td>Day 59</td><td>Documentation</td><td>æ–‡æ¡£ç¼–å†™</td></tr>
<tr><td>Day 60</td><td>CI/CD</td><td>æŒç»­é›†æˆ/éƒ¨ç½²</td></tr>
</tbody>
</table>
</div>
<p><strong>é¡¹ç›®ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>âœ… æ”¯æŒåŸºæœ¬ Redis å‘½ä»¤</li>
<li>âœ… AOF æŒä¹…åŒ–</li>
<li>âœ… å‘å¸ƒè®¢é˜…</li>
<li>âœ… é›†ç¾¤æ¨¡å¼</li>
<li>âœ… å®Œæ•´çš„æµ‹è¯•è¦†ç›–</li>
</ul>
<h3 id="ç¬¬äº”é˜¶æ®µweb-å¼€å‘å®æˆ˜-days-61-80"><a class="header" href="#ç¬¬äº”é˜¶æ®µweb-å¼€å‘å®æˆ˜-days-61-80">ç¬¬äº”é˜¶æ®µï¼šWeb å¼€å‘å®æˆ˜ (Days 61-80)</a></h3>
<p><strong>ç›®æ ‡ï¼šæŒæ¡ Rust Web å¼€å‘å…¨æ ˆæŠ€èƒ½</strong></p>
<h4 id="week-1-web-æ¡†æ¶åŸºç¡€-days-61-65"><a class="header" href="#week-1-web-æ¡†æ¶åŸºç¡€-days-61-65">Week 1: Web æ¡†æ¶åŸºç¡€ (Days 61-65)</a></h4>
<ul>
<li>Day 61: Rust Web å¼€å‘æ¦‚è§ˆ</li>
<li>Day 62: Axum/Actix-web å…¥é—¨</li>
<li>Day 63: è·¯ç”±ä¸è¯·æ±‚å¤„ç†</li>
<li>Day 64: ä¸­é—´ä»¶å¼€å‘</li>
<li>Day 65: è¯·æ±‚çŠ¶æ€ç®¡ç†</li>
</ul>
<h4 id="week-2-æ•°æ®åº“ä¸ä¸šåŠ¡é€»è¾‘-days-66-70"><a class="header" href="#week-2-æ•°æ®åº“ä¸ä¸šåŠ¡é€»è¾‘-days-66-70">Week 2: æ•°æ®åº“ä¸ä¸šåŠ¡é€»è¾‘ (Days 66-70)</a></h4>
<ul>
<li>Day 66: æ•°æ®åº“è¿ç§» (Migrations)</li>
<li>Day 67: CRUD æ“ä½œå®æˆ˜</li>
<li>Day 68: å¤æ‚æŸ¥è¯¢ä¸äº‹åŠ¡</li>
<li>Day 69: ç”¨æˆ·è®¤è¯ (JWT)</li>
<li>Day 70: æƒé™æ§åˆ¶ (RBAC)</li>
</ul>
<h4 id="week-3-å‰ç«¯äº¤äº’ä¸éƒ¨ç½²-days-71-75"><a class="header" href="#week-3-å‰ç«¯äº¤äº’ä¸éƒ¨ç½²-days-71-75">Week 3: å‰ç«¯äº¤äº’ä¸éƒ¨ç½² (Days 71-75)</a></h4>
<ul>
<li>Day 71: æ¨¡æ¿å¼•æ“ (Askama/Tera)</li>
<li>Day 72: WebAssembly (WASM) ç®€ä»‹</li>
<li>Day 73: å‰ç«¯é›†æˆå®æˆ˜</li>
<li>Day 74: API æ–‡æ¡£ç”Ÿæˆ (OpenAPI)</li>
<li>Day 75: å®¹å™¨åŒ–éƒ¨ç½² (Docker)</li>
</ul>
<h4 id="week-4-å®Œæ•´é¡¹ç›®---åšå®¢ç³»ç»Ÿ-days-76-80"><a class="header" href="#week-4-å®Œæ•´é¡¹ç›®---åšå®¢ç³»ç»Ÿ-days-76-80">Week 4: å®Œæ•´é¡¹ç›® - åšå®¢ç³»ç»Ÿ (Days 76-80)</a></h4>
<ul>
<li>Day 76: éœ€æ±‚åˆ†æä¸è®¾è®¡</li>
<li>Day 77: æ ¸å¿ƒä¸šåŠ¡å®ç°</li>
<li>Day 78: API æ¥å£å¼€å‘</li>
<li>Day 79: æµ‹è¯•ä¸ä¼˜åŒ–</li>
<li>Day 80: é¡¹ç›®æ€»ç»“ä¸å±•ç¤º</li>
</ul>
<p><strong>æŠ€æœ¯æ ˆï¼š</strong></p>
<ul>
<li>Axum - Web æ¡†æ¶</li>
<li>SQLx - æ•°æ®åº“</li>
<li>JWT - è®¤è¯</li>
<li>Docker - éƒ¨ç½²</li>
</ul>
<h3 id="ç¬¬å…­é˜¶æ®µç³»ç»Ÿç¼–ç¨‹ä¸æ‹“å±•-days-81-90"><a class="header" href="#ç¬¬å…­é˜¶æ®µç³»ç»Ÿç¼–ç¨‹ä¸æ‹“å±•-days-81-90">ç¬¬å…­é˜¶æ®µï¼šç³»ç»Ÿç¼–ç¨‹ä¸æ‹“å±• (Days 81-90)</a></h3>
<p><strong>ç›®æ ‡ï¼šæ·±å…¥ç³»ç»Ÿåº•å±‚å’Œæ€§èƒ½ä¼˜åŒ–</strong></p>
<h4 id="week-1-ç³»ç»Ÿç¼–ç¨‹-days-81-85"><a class="header" href="#week-1-ç³»ç»Ÿç¼–ç¨‹-days-81-85">Week 1: ç³»ç»Ÿç¼–ç¨‹ (Days 81-85)</a></h4>
<ul>
<li>Day 81: æ“ä½œç³»ç»Ÿæ¦‚å¿µå›é¡¾</li>
<li>Day 82: æ–‡ä»¶ç³»ç»Ÿæ“ä½œæ·±å…¥</li>
<li>Day 83: è¿›ç¨‹ç®¡ç†ä¸ä¿¡å·å¤„ç†</li>
<li>Day 84: åŸå§‹å¥—æ¥å­— (Raw Sockets)</li>
<li>Day 85: åµŒå…¥å¼ Rust ç®€ä»‹</li>
</ul>
<h4 id="week-2-æ€§èƒ½ä¸å·¥ç¨‹åŒ–-days-86-90"><a class="header" href="#week-2-æ€§èƒ½ä¸å·¥ç¨‹åŒ–-days-86-90">Week 2: æ€§èƒ½ä¸å·¥ç¨‹åŒ– (Days 86-90)</a></h4>
<ul>
<li>Day 86: æ€§èƒ½åˆ†æå·¥å…· (Flamegraph)</li>
<li>Day 87: å†…å­˜ä¼˜åŒ–æŠ€å·§</li>
<li>Day 88: SIMD ä¸åº•å±‚ä¼˜åŒ–</li>
<li>Day 89: æŒç»­é›†æˆæµæ°´çº¿</li>
<li>Day 90: Rust ç¼–è¯‘ä¼˜åŒ–ä¸é…ç½®</li>
</ul>
<p><strong>å­¦ä¹ é‡ç‚¹ï¼š</strong></p>
<ul>
<li>ç³»ç»Ÿçº§ç¼–ç¨‹</li>
<li>æ€§èƒ½åˆ†æå’Œä¼˜åŒ–</li>
<li>å·¥ç¨‹åŒ–å®è·µ</li>
<li>CI/CD æµç¨‹</li>
</ul>
<h3 id="ç¬¬ä¸ƒé˜¶æ®µæ¯•ä¸šè®¾è®¡-days-91-100"><a class="header" href="#ç¬¬ä¸ƒé˜¶æ®µæ¯•ä¸šè®¾è®¡-days-91-100">ç¬¬ä¸ƒé˜¶æ®µï¼šæ¯•ä¸šè®¾è®¡ (Days 91-100)</a></h3>
<p><strong>ç›®æ ‡ï¼šå®Œæˆä¸€ä¸ªç”Ÿäº§çº§åˆ«çš„å®Œæ•´é¡¹ç›®</strong></p>
<ul>
<li>Day 91: é€‰é¢˜ä¸æ¶æ„è®¾è®¡</li>
<li>Day 92: åŸå‹éªŒè¯ (PoC)</li>
<li>Day 93-94: æ ¸å¿ƒæ¨¡å—å¼€å‘</li>
<li>Day 95: å¤–å›´æ¨¡å—ä¸é›†æˆ</li>
<li>Day 96: æ€§èƒ½æµ‹è¯•ä¸è°ƒä¼˜</li>
<li>Day 97: æ–‡æ¡£ç¼–å†™ä¸ä»£ç æ¸…ç†</li>
<li>Day 98: å‘å¸ƒå‡†å¤‡ä¸ç‰ˆæœ¬ç®¡ç†</li>
<li>Day 99: é¡¹ç›®å±•ç¤ºä¸å¤ç›˜</li>
<li>Day 100: æˆä¸º Rustacean ä¹‹è·¯</li>
</ul>
<p><strong>é¡¹ç›®é€‰é¢˜ï¼š</strong></p>
<ol>
<li>åˆ†å¸ƒå¼ä»»åŠ¡è°ƒåº¦ç³»ç»Ÿ</li>
<li>å®æ—¶èŠå¤©ç³»ç»Ÿ</li>
<li>å¾®æœåŠ¡ API ç½‘å…³</li>
<li>é«˜æ€§èƒ½ KV å­˜å‚¨</li>
</ol>
<h2 id="-æŠ€æœ¯æ ˆæ€»è§ˆ"><a class="header" href="#-æŠ€æœ¯æ ˆæ€»è§ˆ">ğŸ› ï¸ æŠ€æœ¯æ ˆæ€»è§ˆ</a></h2>
<h3 id="æ ¸å¿ƒå·¥å…·"><a class="header" href="#æ ¸å¿ƒå·¥å…·">æ ¸å¿ƒå·¥å…·</a></h3>
<ul>
<li><strong>Rust</strong>: 1.75+</li>
<li><strong>Cargo</strong>: åŒ…ç®¡ç†å™¨</li>
<li><strong>rustfmt</strong>: ä»£ç æ ¼å¼åŒ–</li>
<li><strong>clippy</strong>: ä»£ç æ£€æŸ¥</li>
</ul>
<h3 id="web-å¼€å‘"><a class="header" href="#web-å¼€å‘">Web å¼€å‘</a></h3>
<ul>
<li><strong>Axum</strong>: Web æ¡†æ¶</li>
<li><strong>Actix-web</strong>: é«˜æ€§èƒ½ Web æ¡†æ¶</li>
<li><strong>Tower</strong>: ä¸­é—´ä»¶</li>
<li><strong>Hyper</strong>: HTTP å®ç°</li>
</ul>
<h3 id="å¼‚æ­¥è¿è¡Œæ—¶"><a class="header" href="#å¼‚æ­¥è¿è¡Œæ—¶">å¼‚æ­¥è¿è¡Œæ—¶</a></h3>
<ul>
<li><strong>Tokio</strong>: å¼‚æ­¥è¿è¡Œæ—¶</li>
<li><strong>async-std</strong>: å¼‚æ­¥æ ‡å‡†åº“</li>
</ul>
<h3 id="æ•°æ®åº“"><a class="header" href="#æ•°æ®åº“">æ•°æ®åº“</a></h3>
<ul>
<li><strong>SQLx</strong>: SQL å·¥å…·åŒ…</li>
<li><strong>Diesel</strong>: ORM</li>
<li><strong>Redis</strong>: ç¼“å­˜</li>
</ul>
<h3 id="åºåˆ—åŒ–"><a class="header" href="#åºåˆ—åŒ–">åºåˆ—åŒ–</a></h3>
<ul>
<li><strong>Serde</strong>: åºåˆ—åŒ–æ¡†æ¶</li>
<li><strong>serde_json</strong>: JSON æ”¯æŒ</li>
</ul>
<h3 id="æµ‹è¯•"><a class="header" href="#æµ‹è¯•">æµ‹è¯•</a></h3>
<ul>
<li><strong>cargo test</strong>: æµ‹è¯•æ¡†æ¶</li>
<li><strong>criterion</strong>: åŸºå‡†æµ‹è¯•</li>
<li><strong>proptest</strong>: å±æ€§æµ‹è¯•</li>
</ul>
<h3 id="å·¥å…·"><a class="header" href="#å·¥å…·">å·¥å…·</a></h3>
<ul>
<li><strong>tracing</strong>: æ—¥å¿—è¿½è¸ª</li>
<li><strong>clap</strong>: CLI å‚æ•°è§£æ</li>
<li><strong>reqwest</strong>: HTTP å®¢æˆ·ç«¯</li>
<li><strong>anyhow</strong>: é”™è¯¯å¤„ç†</li>
</ul>
<h2 id="-å­¦ä¹ è¿›åº¦è¿½è¸ª"><a class="header" href="#-å­¦ä¹ è¿›åº¦è¿½è¸ª">ğŸ“Š å­¦ä¹ è¿›åº¦è¿½è¸ª</a></h2>
<h3 id="ç¬¬ä¸€é˜¶æ®µ-days-1-15"><a class="header" href="#ç¬¬ä¸€é˜¶æ®µ-days-1-15">ç¬¬ä¸€é˜¶æ®µ (Days 1-15)</a></h3>
<ul>
<li><input disabled="" type="checkbox" checked=""> Day 01-15 å®Œæˆ</li>
<li><input disabled="" type="checkbox" checked=""> åŸºç¡€æ¦‚å¿µæŒæ¡</li>
<li><input disabled="" type="checkbox" checked=""> æ‰€æœ‰æƒç³»ç»Ÿç†è§£</li>
<li><input disabled="" type="checkbox" checked=""> åŸºç¡€é¡¹ç›®å®Œæˆ</li>
</ul>
<h3 id="ç¬¬äºŒé˜¶æ®µ-days-16-30"><a class="header" href="#ç¬¬äºŒé˜¶æ®µ-days-16-30">ç¬¬äºŒé˜¶æ®µ (Days 16-30)</a></h3>
<ul>
<li><input disabled="" type="checkbox" checked=""> Day 16-30 å®Œæˆ</li>
<li><input disabled="" type="checkbox" checked=""> å¹¶å‘ç¼–ç¨‹æŒæ¡</li>
<li><input disabled="" type="checkbox" checked=""> é«˜çº§ç‰¹æ€§ç†è§£</li>
<li><input disabled="" type="checkbox" checked=""> æ™ºèƒ½æŒ‡é’ˆä½¿ç”¨</li>
</ul>
<h3 id="ç¬¬ä¸‰é˜¶æ®µ-days-31-45"><a class="header" href="#ç¬¬ä¸‰é˜¶æ®µ-days-31-45">ç¬¬ä¸‰é˜¶æ®µ (Days 31-45)</a></h3>
<ul>
<li><input disabled="" type="checkbox" checked=""> Day 31-45 å®Œæˆ</li>
<li><input disabled="" type="checkbox" checked=""> å¼‚æ­¥ç¼–ç¨‹æŒæ¡</li>
<li><input disabled="" type="checkbox" checked=""> æ•°æ®åº“æ“ä½œç†Ÿç»ƒ</li>
<li><input disabled="" type="checkbox" checked=""> å¸¸ç”¨åº“ä½¿ç”¨</li>
</ul>
<h3 id="ç¬¬å››é˜¶æ®µ-days-46-60"><a class="header" href="#ç¬¬å››é˜¶æ®µ-days-46-60">ç¬¬å››é˜¶æ®µ (Days 46-60)</a></h3>
<ul>
<li><input disabled="" type="checkbox" checked=""> Day 46-60 å®Œæˆ</li>
<li><input disabled="" type="checkbox" checked=""> Redis å…‹éš†å®Œæˆ</li>
<li><input disabled="" type="checkbox" checked=""> é›†ç¾¤æ¨¡å¼å®ç°</li>
<li><input disabled="" type="checkbox" checked=""> CI/CD é…ç½®</li>
</ul>
<h3 id="ç¬¬äº”é˜¶æ®µ-days-61-80"><a class="header" href="#ç¬¬äº”é˜¶æ®µ-days-61-80">ç¬¬äº”é˜¶æ®µ (Days 61-80)</a></h3>
<ul>
<li><input disabled="" type="checkbox"> Day 61-80 è¿›è¡Œä¸­</li>
<li><input disabled="" type="checkbox"> Web æ¡†æ¶æŒæ¡</li>
<li><input disabled="" type="checkbox"> è®¤è¯æˆæƒå®ç°</li>
<li><input disabled="" type="checkbox"> åšå®¢ç³»ç»Ÿå®Œæˆ</li>
</ul>
<h3 id="ç¬¬å…­é˜¶æ®µ-days-81-90"><a class="header" href="#ç¬¬å…­é˜¶æ®µ-days-81-90">ç¬¬å…­é˜¶æ®µ (Days 81-90)</a></h3>
<ul>
<li><input disabled="" type="checkbox"> Day 81-90 å¾…å¼€å§‹</li>
<li><input disabled="" type="checkbox"> ç³»ç»Ÿç¼–ç¨‹æŒæ¡</li>
<li><input disabled="" type="checkbox"> æ€§èƒ½ä¼˜åŒ–å®è·µ</li>
<li><input disabled="" type="checkbox"> å·¥ç¨‹åŒ–å®Œå–„</li>
</ul>
<h3 id="ç¬¬ä¸ƒé˜¶æ®µ-days-91-100"><a class="header" href="#ç¬¬ä¸ƒé˜¶æ®µ-days-91-100">ç¬¬ä¸ƒé˜¶æ®µ (Days 91-100)</a></h3>
<ul>
<li><input disabled="" type="checkbox"> Day 91-100 å¾…å¼€å§‹</li>
<li><input disabled="" type="checkbox"> æ¯•ä¸šé¡¹ç›®å®Œæˆ</li>
<li><input disabled="" type="checkbox"> ç”Ÿäº§éƒ¨ç½²æˆåŠŸ</li>
<li><input disabled="" type="checkbox"> æˆä¸º Rustacean</li>
</ul>
<h2 id="-å­¦ä¹ èµ„æº-2"><a class="header" href="#-å­¦ä¹ èµ„æº-2">ğŸ“ å­¦ä¹ èµ„æº</a></h2>
<h3 id="å®˜æ–¹èµ„æº-1"><a class="header" href="#å®˜æ–¹èµ„æº-1">å®˜æ–¹èµ„æº</a></h3>
<ul>
<li><a href="https://doc.rust-lang.org/book/">The Rust Programming Language</a></li>
<li><a href="https://doc.rust-lang.org/rust-by-example/">Rust by Example</a></li>
<li><a href="https://doc.rust-lang.org/cargo/">The Cargo Book</a></li>
<li><a href="https://rust-lang.github.io/api-guidelines/">Rust API Guidelines</a></li>
</ul>
<h3 id="æ¨èä¹¦ç±"><a class="header" href="#æ¨èä¹¦ç±">æ¨èä¹¦ç±</a></h3>
<ul>
<li><strong>Programming Rust</strong> (2nd Edition)</li>
<li><strong>Rust for Rustaceans</strong></li>
<li><strong>Zero To Production In Rust</strong></li>
<li><strong>The Rustonomicon</strong></li>
</ul>
<h3 id="åœ¨çº¿è¯¾ç¨‹"><a class="header" href="#åœ¨çº¿è¯¾ç¨‹">åœ¨çº¿è¯¾ç¨‹</a></h3>
<ul>
<li><a href="https://www.youtube.com/c/JonGjengset">Rust Course by Jon Gjengset</a></li>
<li><a href="https://www.youtube.com/c/LetsGetRusty">Letâ€™s Get Rusty</a></li>
<li><a href="https://www.udemy.com/course/rust-lang/">Rust Programming Course</a></li>
</ul>
<h3 id="ç¤¾åŒº"><a class="header" href="#ç¤¾åŒº">ç¤¾åŒº</a></h3>
<ul>
<li><a href="https://users.rust-lang.org/">Rust å®˜æ–¹è®ºå›</a></li>
<li><a href="https://www.reddit.com/r/rust/">Reddit r/rust</a></li>
<li><a href="https://rustcc.cn/">Rust ä¸­æ–‡ç¤¾åŒº</a></li>
<li><a href="https://discord.gg/rust-lang">Discord Rust é¢‘é“</a></li>
</ul>
<h3 id="å®è·µå¹³å°"><a class="header" href="#å®è·µå¹³å°">å®è·µå¹³å°</a></h3>
<ul>
<li><a href="https://exercism.org/tracks/rust">Exercism Rust Track</a></li>
<li><a href="https://github.com/rust-lang/rustlings">Rustlings</a></li>
<li><a href="https://play.rust-lang.org/">Rust Playground</a></li>
</ul>
<h2 id="-å­¦ä¹ å»ºè®®"><a class="header" href="#-å­¦ä¹ å»ºè®®">ğŸ’¡ å­¦ä¹ å»ºè®®</a></h2>
<h3 id="æ¯æ—¥å­¦ä¹ æµç¨‹"><a class="header" href="#æ¯æ—¥å­¦ä¹ æµç¨‹">æ¯æ—¥å­¦ä¹ æµç¨‹</a></h3>
<ol>
<li>
<p><strong>ç†è®ºå­¦ä¹ </strong> (30åˆ†é’Ÿ)</p>
<ul>
<li>é˜…è¯»æ–‡æ¡£å’Œæ•™ç¨‹</li>
<li>ç†è§£æ ¸å¿ƒæ¦‚å¿µ</li>
</ul>
</li>
<li>
<p><strong>ä»£ç å®è·µ</strong> (60åˆ†é’Ÿ)</p>
<ul>
<li>è·Ÿéšç¤ºä¾‹ç¼–ç </li>
<li>å®Œæˆç»ƒä¹ é¢˜</li>
</ul>
</li>
<li>
<p><strong>é¡¹ç›®å®æˆ˜</strong> (30åˆ†é’Ÿ)</p>
<ul>
<li>åº”ç”¨åˆ°å®é™…é¡¹ç›®</li>
<li>è§£å†³å®é™…é—®é¢˜</li>
</ul>
</li>
<li>
<p><strong>å¤ä¹ æ€»ç»“</strong> (15åˆ†é’Ÿ)</p>
<ul>
<li>è®°å½•å­¦ä¹ ç¬”è®°</li>
<li>æ€»ç»“å…³é”®ç‚¹</li>
</ul>
</li>
</ol>
<h3 id="å­¦ä¹ æŠ€å·§"><a class="header" href="#å­¦ä¹ æŠ€å·§">å­¦ä¹ æŠ€å·§</a></h3>
<ul>
<li>âœ… æ¯å¤©åšæŒç¼–ç </li>
<li>âœ… å¤šè¯»ä¼˜ç§€æºç </li>
<li>âœ… å‚ä¸å¼€æºé¡¹ç›®</li>
<li>âœ… å†™æŠ€æœ¯åšå®¢</li>
<li>âœ… åŠ å…¥ç¤¾åŒºè®¨è®º</li>
</ul>
<h3 id="å¸¸è§é™·é˜±"><a class="header" href="#å¸¸è§é™·é˜±">å¸¸è§é™·é˜±</a></h3>
<ul>
<li>âŒ è¿‡åº¦å…³æ³¨è¯­æ³•ç»†èŠ‚</li>
<li>âŒ å¿½è§†æ‰€æœ‰æƒç³»ç»Ÿ</li>
<li>âŒ ä¸å†™æµ‹è¯•ä»£ç </li>
<li>âŒ è¿‡æ—©ä¼˜åŒ–</li>
<li>âŒ å­¤ç«‹å­¦ä¹ </li>
</ul>
<h2 id="-é¡¹ç›®å±•ç¤º"><a class="header" href="#-é¡¹ç›®å±•ç¤º">ğŸš€ é¡¹ç›®å±•ç¤º</a></h2>
<h3 id="å·²å®Œæˆé¡¹ç›®"><a class="header" href="#å·²å®Œæˆé¡¹ç›®">å·²å®Œæˆé¡¹ç›®</a></h3>
<h4 id="1-redis-å…‹éš†-days-46-60"><a class="header" href="#1-redis-å…‹éš†-days-46-60">1. Redis å…‹éš† (Days 46-60)</a></h4>
<p><strong>åŠŸèƒ½ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>æ”¯æŒåŸºæœ¬ Redis å‘½ä»¤ (GET, SET, DEL, etc.)</li>
<li>AOF æŒä¹…åŒ–</li>
<li>å‘å¸ƒè®¢é˜…æ¨¡å¼</li>
<li>é›†ç¾¤æ¨¡å¼</li>
<li>å“¨å…µæ¨¡å¼</li>
<li>TLS åŠ å¯†</li>
</ul>
<p><strong>æŠ€æœ¯äº®ç‚¹ï¼š</strong></p>
<ul>
<li>å¼‚æ­¥ I/O (Tokio)</li>
<li>å¹¶å‘æ§åˆ¶ (Arc + RwLock)</li>
<li>åè®®è§£æ (RESP)</li>
<li>æ€§èƒ½ä¼˜åŒ–</li>
</ul>
<p><strong>æ€§èƒ½æŒ‡æ ‡ï¼š</strong></p>
<ul>
<li>QPS: 50000+</li>
<li>å»¶è¿Ÿ: P99 &lt; 10ms</li>
<li>å†…å­˜å ç”¨: &lt; 100MB</li>
</ul>
<h4 id="2-åšå®¢ç³»ç»Ÿ-days-76-80"><a class="header" href="#2-åšå®¢ç³»ç»Ÿ-days-76-80">2. åšå®¢ç³»ç»Ÿ (Days 76-80)</a></h4>
<p><strong>åŠŸèƒ½ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>ç”¨æˆ·è®¤è¯ (JWT)</li>
<li>æ–‡ç«  CRUD</li>
<li>è¯„è®ºç³»ç»Ÿ</li>
<li>æ ‡ç­¾åˆ†ç±»</li>
<li>Markdown æ”¯æŒ</li>
</ul>
<p><strong>æŠ€æœ¯æ ˆï¼š</strong></p>
<ul>
<li>Axum Web æ¡†æ¶</li>
<li>PostgreSQL æ•°æ®åº“</li>
<li>Redis ç¼“å­˜</li>
<li>Docker éƒ¨ç½²</li>
</ul>
<h2 id="-æŠ€èƒ½æ ‘"><a class="header" href="#-æŠ€èƒ½æ ‘">ğŸ“ˆ æŠ€èƒ½æ ‘</a></h2>
<pre><code>Rust æŠ€èƒ½æ ‘
â”œâ”€â”€ åŸºç¡€è¯­æ³• âœ…
â”‚   â”œâ”€â”€ å˜é‡å’Œç±»å‹
â”‚   â”œâ”€â”€ å‡½æ•°å’Œæ§åˆ¶æµ
â”‚   â””â”€â”€ æ¨¡å¼åŒ¹é…
â”œâ”€â”€ æ‰€æœ‰æƒç³»ç»Ÿ âœ…
â”‚   â”œâ”€â”€ æ‰€æœ‰æƒè§„åˆ™
â”‚   â”œâ”€â”€ å€Ÿç”¨å’Œå¼•ç”¨
â”‚   â””â”€â”€ ç”Ÿå‘½å‘¨æœŸ
â”œâ”€â”€ ç±»å‹ç³»ç»Ÿ âœ…
â”‚   â”œâ”€â”€ ç»“æ„ä½“å’Œæšä¸¾
â”‚   â”œâ”€â”€ æ³›å‹
â”‚   â””â”€â”€ Trait
â”œâ”€â”€ å¹¶å‘ç¼–ç¨‹ âœ…
â”‚   â”œâ”€â”€ çº¿ç¨‹
â”‚   â”œâ”€â”€ æ¶ˆæ¯ä¼ é€’
â”‚   â””â”€â”€ å…±äº«çŠ¶æ€
â”œâ”€â”€ å¼‚æ­¥ç¼–ç¨‹ âœ…
â”‚   â”œâ”€â”€ async/await
â”‚   â”œâ”€â”€ Future
â”‚   â””â”€â”€ Tokio
â”œâ”€â”€ Web å¼€å‘ ğŸ”„
â”‚   â”œâ”€â”€ HTTP æœåŠ¡å™¨
â”‚   â”œâ”€â”€ æ•°æ®åº“æ“ä½œ
â”‚   â””â”€â”€ è®¤è¯æˆæƒ
â”œâ”€â”€ ç³»ç»Ÿç¼–ç¨‹ â³
â”‚   â”œâ”€â”€ æ–‡ä»¶ç³»ç»Ÿ
â”‚   â”œâ”€â”€ ç½‘ç»œç¼–ç¨‹
â”‚   â””â”€â”€ è¿›ç¨‹ç®¡ç†
â””â”€â”€ æ€§èƒ½ä¼˜åŒ– â³
    â”œâ”€â”€ æ€§èƒ½åˆ†æ
    â”œâ”€â”€ å†…å­˜ä¼˜åŒ–
    â””â”€â”€ SIMD

å›¾ä¾‹: âœ… å·²æŒæ¡ | ğŸ”„ å­¦ä¹ ä¸­ | â³ å¾…å­¦ä¹ 
</code></pre>
<h2 id="-ä¸‹ä¸€æ­¥è®¡åˆ’"><a class="header" href="#-ä¸‹ä¸€æ­¥è®¡åˆ’">ğŸ¯ ä¸‹ä¸€æ­¥è®¡åˆ’</a></h2>
<h3 id="çŸ­æœŸç›®æ ‡-1-2-å‘¨"><a class="header" href="#çŸ­æœŸç›®æ ‡-1-2-å‘¨">çŸ­æœŸç›®æ ‡ (1-2 å‘¨)</a></h3>
<ul>
<li><input disabled="" type="checkbox"> å®Œæˆ Web å¼€å‘é˜¶æ®µ (Days 61-80)</li>
<li><input disabled="" type="checkbox"> æŒæ¡ Axum æ¡†æ¶</li>
<li><input disabled="" type="checkbox"> å®ç°å®Œæ•´çš„åšå®¢ç³»ç»Ÿ</li>
<li><input disabled="" type="checkbox"> å­¦ä¹  Docker éƒ¨ç½²</li>
</ul>
<h3 id="ä¸­æœŸç›®æ ‡-1-ä¸ªæœˆ"><a class="header" href="#ä¸­æœŸç›®æ ‡-1-ä¸ªæœˆ">ä¸­æœŸç›®æ ‡ (1 ä¸ªæœˆ)</a></h3>
<ul>
<li><input disabled="" type="checkbox"> å®Œæˆç³»ç»Ÿç¼–ç¨‹é˜¶æ®µ (Days 81-90)</li>
<li><input disabled="" type="checkbox"> æŒæ¡æ€§èƒ½ä¼˜åŒ–æŠ€å·§</li>
<li><input disabled="" type="checkbox"> å­¦ä¹  CI/CD æµç¨‹</li>
<li><input disabled="" type="checkbox"> å‚ä¸å¼€æºé¡¹ç›®</li>
</ul>
<h3 id="é•¿æœŸç›®æ ‡-3-ä¸ªæœˆ"><a class="header" href="#é•¿æœŸç›®æ ‡-3-ä¸ªæœˆ">é•¿æœŸç›®æ ‡ (3 ä¸ªæœˆ)</a></h3>
<ul>
<li><input disabled="" type="checkbox"> å®Œæˆæ¯•ä¸šè®¾è®¡ (Days 91-100)</li>
<li><input disabled="" type="checkbox"> æ„å»ºç”Ÿäº§çº§é¡¹ç›®</li>
<li><input disabled="" type="checkbox"> å‘å¸ƒå¼€æºé¡¹ç›®</li>
<li><input disabled="" type="checkbox"> æˆä¸º Rustacean</li>
</ul>
<h2 id="-æˆå°±ç³»ç»Ÿ"><a class="header" href="#-æˆå°±ç³»ç»Ÿ">ğŸ† æˆå°±ç³»ç»Ÿ</a></h2>
<h3 id="åŸºç¡€æˆå°±"><a class="header" href="#åŸºç¡€æˆå°±">åŸºç¡€æˆå°±</a></h3>
<ul>
<li><input disabled="" type="checkbox" checked=""> ğŸ“ Hello World - å®Œæˆç¬¬ä¸€ä¸ª Rust ç¨‹åº</li>
<li><input disabled="" type="checkbox" checked=""> ğŸ“š åŸºç¡€å…¥é—¨ - å®Œæˆå‰ 15 å¤©å­¦ä¹ </li>
<li><input disabled="" type="checkbox" checked=""> ğŸ”§ å·¥å…·æŒæ¡ - ç†Ÿç»ƒä½¿ç”¨ Cargo</li>
<li><input disabled="" type="checkbox" checked=""> âœ… æµ‹è¯•é©±åŠ¨ - ç¼–å†™ç¬¬ä¸€ä¸ªæµ‹è¯•</li>
</ul>
<h3 id="è¿›é˜¶æˆå°±"><a class="header" href="#è¿›é˜¶æˆå°±">è¿›é˜¶æˆå°±</a></h3>
<ul>
<li><input disabled="" type="checkbox" checked=""> ğŸ§µ å¹¶å‘å¤§å¸ˆ - æŒæ¡å¹¶å‘ç¼–ç¨‹</li>
<li><input disabled="" type="checkbox" checked=""> âš¡ å¼‚æ­¥ä¸“å®¶ - ç†Ÿç»ƒä½¿ç”¨ async/await</li>
<li><input disabled="" type="checkbox" checked=""> ğŸ—„ï¸ æ•°æ®åº“è¾¾äºº - å®Œæˆæ•°æ®åº“æ“ä½œ</li>
<li><input disabled="" type="checkbox" checked=""> ğŸŒ ç½‘ç»œé«˜æ‰‹ - å®ç°ç½‘ç»œæœåŠ¡</li>
</ul>
<h3 id="é¡¹ç›®æˆå°±"><a class="header" href="#é¡¹ç›®æˆå°±">é¡¹ç›®æˆå°±</a></h3>
<ul>
<li><input disabled="" type="checkbox" checked=""> ğŸ® Redis å…‹éš† - å®Œæˆ Redis é¡¹ç›®</li>
<li><input disabled="" type="checkbox"> ğŸŒ Web å¤§å¸ˆ - å®Œæˆåšå®¢ç³»ç»Ÿ</li>
<li><input disabled="" type="checkbox"> ğŸš€ æ€§èƒ½ä¼˜åŒ– - è¾¾åˆ°æ€§èƒ½ç›®æ ‡</li>
<li><input disabled="" type="checkbox"> ğŸ“ æ¯•ä¸šé¡¹ç›® - å®Œæˆæœ€ç»ˆé¡¹ç›®</li>
</ul>
<h3 id="ç¤¾åŒºæˆå°±"><a class="header" href="#ç¤¾åŒºæˆå°±">ç¤¾åŒºæˆå°±</a></h3>
<ul>
<li><input disabled="" type="checkbox"> ğŸ“ æŠ€æœ¯åšå®¢ - å‘å¸ƒ 10 ç¯‡æ–‡ç« </li>
<li><input disabled="" type="checkbox"> ğŸ¤ å¼€æºè´¡çŒ® - æäº¤ PR</li>
<li><input disabled="" type="checkbox"> ğŸ’¬ ç¤¾åŒºæ´»è·ƒ - å¸®åŠ©ä»–äºº</li>
<li><input disabled="" type="checkbox"> ğŸŒŸ é¡¹ç›®ä¹‹æ˜Ÿ - è·å¾— 100+ stars</li>
</ul>
<h2 id="-è”ç³»æ–¹å¼"><a class="header" href="#-è”ç³»æ–¹å¼">ğŸ“ è”ç³»æ–¹å¼</a></h2>
<p>å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š</p>
<ul>
<li>GitHub Issues</li>
<li>Email</li>
<li>Discord</li>
<li>å¾®ä¿¡ç¾¤</li>
</ul>
<h2 id="-è®¸å¯è¯"><a class="header" href="#-è®¸å¯è¯">ğŸ“„ è®¸å¯è¯</a></h2>
<p>æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚</p>
<hr>
<p><strong>è®°ä½ï¼šå­¦ä¹  Rust æ˜¯ä¸€åœºé©¬æ‹‰æ¾ï¼Œä¸æ˜¯çŸ­è·‘ã€‚ä¿æŒè€å¿ƒï¼ŒæŒç»­ç»ƒä¹ ï¼Œä½ ä¸€å®šèƒ½æˆä¸ºä¼˜ç§€çš„ Rustaceanï¼ğŸ¦€</strong></p>
<p><strong>Happy Coding! ğŸš€</strong></p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="rust-100-å¤©å­¦ä¹ è®¡åˆ’---é¡¹ç›®å®ŒæˆçŠ¶æ€"><a class="header" href="#rust-100-å¤©å­¦ä¹ è®¡åˆ’---é¡¹ç›®å®ŒæˆçŠ¶æ€">Rust 100 å¤©å­¦ä¹ è®¡åˆ’ - é¡¹ç›®å®ŒæˆçŠ¶æ€</a></h1>
<h2 id="-æ€»ä½“è¿›åº¦"><a class="header" href="#-æ€»ä½“è¿›åº¦">ğŸ“Š æ€»ä½“è¿›åº¦</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>é˜¶æ®µ</th><th>å¤©æ•°</th><th>çŠ¶æ€</th><th>å®Œæˆåº¦</th><th>è¯´æ˜</th></tr>
</thead>
<tbody>
<tr><td>ç¬¬ä¸€é˜¶æ®µ</td><td>Days 1-15</td><td>âœ… å®Œæˆ</td><td>100%</td><td>åŸºç¡€å…¥é—¨</td></tr>
<tr><td>ç¬¬äºŒé˜¶æ®µ</td><td>Days 16-30</td><td>âœ… å®Œæˆ</td><td>100%</td><td>è¿›é˜¶ç‰¹æ€§</td></tr>
<tr><td>ç¬¬ä¸‰é˜¶æ®µ</td><td>Days 31-45</td><td>âœ… å®Œæˆ</td><td>100%</td><td>å®ç”¨æŠ€èƒ½</td></tr>
<tr><td>ç¬¬å››é˜¶æ®µ</td><td>Days 46-60</td><td>âœ… å®Œæˆ</td><td>100%</td><td>Redis å…‹éš†é¡¹ç›®</td></tr>
<tr><td>ç¬¬äº”é˜¶æ®µ</td><td>Days 61-80</td><td>âœ… å®Œæˆ</td><td>100%</td><td>Web å¼€å‘å®æˆ˜</td></tr>
<tr><td>ç¬¬å…­é˜¶æ®µ</td><td>Days 81-90</td><td>âœ… å®Œæˆ</td><td>100%</td><td>ç³»ç»Ÿç¼–ç¨‹</td></tr>
<tr><td>ç¬¬ä¸ƒé˜¶æ®µ</td><td>Days 91-100</td><td>âœ… å®Œæˆ</td><td>100%</td><td>æ¯•ä¸šè®¾è®¡</td></tr>
</tbody>
</table>
</div>
<p><strong>æ€»ä½“å®Œæˆåº¦ï¼š100%</strong> ğŸ‰</p>
<h2 id="-å·²å®Œæˆå†…å®¹"><a class="header" href="#-å·²å®Œæˆå†…å®¹">âœ… å·²å®Œæˆå†…å®¹</a></h2>
<h3 id="ç¬¬ä¸€é˜¶æ®µåŸºç¡€å…¥é—¨-days-1-15-1"><a class="header" href="#ç¬¬ä¸€é˜¶æ®µåŸºç¡€å…¥é—¨-days-1-15-1">ç¬¬ä¸€é˜¶æ®µï¼šåŸºç¡€å…¥é—¨ (Days 1-15)</a></h3>
<p>æ‰€æœ‰ 15 å¤©çš„å†…å®¹å‡å·²å®Œæˆï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li>âœ… Day 01: Introduction - Hello World é¡¹ç›®</li>
<li>âœ… Day 02: Variables and Types - å˜é‡å’Œç±»å‹ç¤ºä¾‹</li>
<li>âœ… Day 03: Functions and Control Flow - å‡½æ•°å’Œæ§åˆ¶æµ</li>
<li>âœ… Day 04: Ownership - æ‰€æœ‰æƒç³»ç»Ÿ</li>
<li>âœ… Day 05: References and Borrowing - å¼•ç”¨å’Œå€Ÿç”¨</li>
<li>âœ… Day 06: Slices - åˆ‡ç‰‡ç±»å‹</li>
<li>âœ… Day 07: Structs - ç»“æ„ä½“</li>
<li>âœ… Day 08: Enums - æšä¸¾å’Œæ¨¡å¼åŒ¹é…</li>
<li>âœ… Day 09: Modules - æ¨¡å—ç³»ç»Ÿ</li>
<li>âœ… Day 10: Common Collections - å¸¸ç”¨é›†åˆ</li>
<li>âœ… Day 11: Error Handling - é”™è¯¯å¤„ç†</li>
<li>âœ… Day 12: Generics - æ³›å‹</li>
<li>âœ… Day 13: Traits - Trait ç³»ç»Ÿ</li>
<li>âœ… Day 14: Lifetimes - ç”Ÿå‘½å‘¨æœŸ</li>
<li>âœ… Day 15: Testing - æµ‹è¯•</li>
</ul>
<p><strong>ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>æ¯å¤©éƒ½æœ‰å®Œæ•´çš„ Cargo é¡¹ç›®</li>
<li>åŒ…å«å¯è¿è¡Œçš„ç¤ºä¾‹ä»£ç </li>
<li>æ¶µç›– Rust æ ¸å¿ƒæ¦‚å¿µ</li>
</ul>
<h3 id="ç¬¬äºŒé˜¶æ®µè¿›é˜¶ç‰¹æ€§-days-16-30-1"><a class="header" href="#ç¬¬äºŒé˜¶æ®µè¿›é˜¶ç‰¹æ€§-days-16-30-1">ç¬¬äºŒé˜¶æ®µï¼šè¿›é˜¶ç‰¹æ€§ (Days 16-30)</a></h3>
<p>æ‰€æœ‰ 15 å¤©çš„å†…å®¹å‡å·²å®Œæˆï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li>âœ… Day 16: Closures - é—­åŒ…</li>
<li>âœ… Day 17: Iterators - è¿­ä»£å™¨</li>
<li>âœ… Day 18: Cargo and Crates - Cargo è¿›é˜¶</li>
<li>âœ… Day 19: Smart Pointers - Box</li>
<li>âœ… Day 20: Smart Pointers - Rc/RefCell</li>
<li>âœ… Day 21: Reference Cycles - å¼•ç”¨å¾ªç¯</li>
<li>âœ… Day 22: Threads - çº¿ç¨‹</li>
<li>âœ… Day 23: Message Passing - æ¶ˆæ¯ä¼ é€’</li>
<li>âœ… Day 24: Shared State - å…±äº«çŠ¶æ€</li>
<li>âœ… Day 25: Send and Sync - å¹¶å‘ Trait</li>
<li>âœ… Day 26: OOP - Trait Objects - é¢å‘å¯¹è±¡</li>
<li>âœ… Day 27: Patterns - æ¨¡å¼åŒ¹é…</li>
<li>âœ… Day 28: Advanced Traits - é«˜çº§ Trait</li>
<li>âœ… Day 29: Advanced Types - é«˜çº§ç±»å‹</li>
<li>âœ… Day 30: Advanced Functions and Macros - é«˜çº§å‡½æ•°å’Œå®</li>
</ul>
<p><strong>ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>æ·±å…¥å¹¶å‘ç¼–ç¨‹</li>
<li>æ™ºèƒ½æŒ‡é’ˆè¯¦è§£</li>
<li>é«˜çº§ç±»å‹ç³»ç»Ÿ</li>
</ul>
<h3 id="ç¬¬ä¸‰é˜¶æ®µå®ç”¨æŠ€èƒ½-days-31-45-1"><a class="header" href="#ç¬¬ä¸‰é˜¶æ®µå®ç”¨æŠ€èƒ½-days-31-45-1">ç¬¬ä¸‰é˜¶æ®µï¼šå®ç”¨æŠ€èƒ½ (Days 31-45)</a></h3>
<p>æ‰€æœ‰ 15 å¤©çš„å†…å®¹å‡å·²å®Œæˆï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li>âœ… Day 31: File I/O - æ–‡ä»¶æ“ä½œ</li>
<li>âœ… Day 32: Serialization - Serde</li>
<li>âœ… Day 33: Minigrep - CLI å·¥å…·é¡¹ç›®</li>
<li>âœ… Day 34: Network - TCP - ç½‘ç»œç¼–ç¨‹</li>
<li>âœ… Day 35: Async/Await - å¼‚æ­¥ç¼–ç¨‹</li>
<li>âœ… Day 36: Unsafe Rust - ä¸å®‰å…¨ä»£ç </li>
<li>âœ… Day 37: Procedural Macros - è¿‡ç¨‹å®</li>
<li>âœ… Day 38: FFI - å¤–éƒ¨å‡½æ•°æ¥å£</li>
<li>âœ… Day 39: Tokio Deep Dive - Tokio æ·±å…¥</li>
<li>âœ… Day 40: Async Web Server - å¼‚æ­¥ Web æœåŠ¡å™¨</li>
<li>âœ… Day 41: Database - SQLx - æ•°æ®åº“æ“ä½œ</li>
<li>âœ… Day 42: Tracing - æ—¥å¿—è¿½è¸ª</li>
<li>âœ… Day 43: Error Handling - é”™è¯¯å¤„ç†åº“</li>
<li>âœ… Day 44: Clap - å‘½ä»¤è¡Œå‚æ•°</li>
<li>âœ… Day 45: Reqwest - HTTP å®¢æˆ·ç«¯</li>
</ul>
<p><strong>ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>å¼‚æ­¥ç¼–ç¨‹å®æˆ˜</li>
<li>æ•°æ®åº“é›†æˆ</li>
<li>å®ç”¨å·¥å…·åº“</li>
</ul>
<h3 id="ç¬¬å››é˜¶æ®µredis-å…‹éš†é¡¹ç›®-days-46-60"><a class="header" href="#ç¬¬å››é˜¶æ®µredis-å…‹éš†é¡¹ç›®-days-46-60">ç¬¬å››é˜¶æ®µï¼šRedis å…‹éš†é¡¹ç›® (Days 46-60)</a></h3>
<p>å®Œæ•´çš„ Redis å…‹éš†é¡¹ç›®ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li>âœ… Day 46: Project Init - é¡¹ç›®åˆå§‹åŒ–</li>
<li>âœ… Day 47: RESP Parsing - åè®®è§£æ</li>
<li>âœ… Day 48: Command Architecture - å‘½ä»¤æ¶æ„</li>
<li>âœ… Day 49: Storage Engine - å­˜å‚¨å¼•æ“</li>
<li>âœ… Day 50: Async Network - å¼‚æ­¥ç½‘ç»œ</li>
<li>âœ… Day 51: Concurrency - å¹¶å‘æ§åˆ¶</li>
<li>âœ… Day 52: Persistence - AOF æŒä¹…åŒ–</li>
<li>âœ… Day 53: Pub/Sub - å‘å¸ƒè®¢é˜…</li>
<li>âœ… Day 54: Client SDK - å®¢æˆ·ç«¯ SDK</li>
<li>âœ… Day 55: Benchmark - æ€§èƒ½æµ‹è¯•</li>
<li>âœ… Day 56: Cluster Mode - é›†ç¾¤æ¨¡å¼</li>
<li>âœ… Day 57: Sentinel - å“¨å…µæ¨¡å¼</li>
<li>âœ… Day 58: TLS - TLS åŠ å¯†</li>
<li>âœ… Day 59: Documentation - æ–‡æ¡£</li>
<li>âœ… Day 60: CI/CD - æŒç»­é›†æˆ/éƒ¨ç½²</li>
</ul>
<p><strong>é¡¹ç›®äº®ç‚¹ï¼š</strong></p>
<ul>
<li>æ”¯æŒ 20+ Redis å‘½ä»¤</li>
<li>AOF æŒä¹…åŒ–æœºåˆ¶</li>
<li>å‘å¸ƒè®¢é˜…æ¨¡å¼</li>
<li>é›†ç¾¤æ¨¡å¼å®ç°</li>
<li>å®Œæ•´çš„ CI/CD æµç¨‹</li>
<li>æ€§èƒ½ï¼šQPS 50000+</li>
<li>ä»£ç è¡Œæ•°ï¼š5000+</li>
<li>æµ‹è¯•è¦†ç›–ç‡ï¼š80%+</li>
</ul>
<h2 id="-è¿›è¡Œä¸­çš„å†…å®¹"><a class="header" href="#-è¿›è¡Œä¸­çš„å†…å®¹">ğŸ”„ è¿›è¡Œä¸­çš„å†…å®¹</a></h2>
<h3 id="ç¬¬äº”é˜¶æ®µweb-å¼€å‘å®æˆ˜-days-61-80-1"><a class="header" href="#ç¬¬äº”é˜¶æ®µweb-å¼€å‘å®æˆ˜-days-61-80-1">ç¬¬äº”é˜¶æ®µï¼šWeb å¼€å‘å®æˆ˜ (Days 61-80)</a></h3>
<p>å·²å®Œæˆæ‰€æœ‰æ–‡æ¡£ï¼š</p>
<h4 id="å·²å®Œæˆ-2020-"><a class="header" href="#å·²å®Œæˆ-2020-">å·²å®Œæˆ (20/20) âœ…</a></h4>
<ul>
<li>âœ… Day 61: Web Overview - Web å¼€å‘æ¦‚è§ˆ</li>
<li>âœ… Day 62: Axum/Actix-web - æ¡†æ¶å…¥é—¨</li>
<li>âœ… Day 63: Routing and Handlers - è·¯ç”±å¤„ç†</li>
<li>âœ… Day 64: Middleware - ä¸­é—´ä»¶å¼€å‘</li>
<li>âœ… Day 65: State Management - çŠ¶æ€ç®¡ç†</li>
<li>âœ… Day 66: Migrations - æ•°æ®åº“è¿ç§»</li>
<li>âœ… Day 67: CRUD - CRUD æ“ä½œ</li>
<li>âœ… Day 68: Complex Queries - å¤æ‚æŸ¥è¯¢</li>
<li>âœ… Day 69: JWT - ç”¨æˆ·è®¤è¯</li>
<li>âœ… Day 70: RBAC - æƒé™æ§åˆ¶</li>
<li>âœ… Day 71: Templates - æ¨¡æ¿å¼•æ“</li>
<li>âœ… Day 72: WASM - WebAssembly</li>
<li>âœ… Day 73: Frontend Integration - å‰ç«¯é›†æˆ</li>
<li>âœ… Day 74: OpenAPI - API æ–‡æ¡£</li>
<li>âœ… Day 75: Docker - å®¹å™¨åŒ–éƒ¨ç½²</li>
<li>âœ… Day 76: Blog Design - åšå®¢ç³»ç»Ÿè®¾è®¡</li>
<li>âœ… Day 77: Blog Core - æ ¸å¿ƒä¸šåŠ¡å®ç°</li>
<li>âœ… Day 78: Blog API - API æ¥å£å¼€å‘</li>
<li>âœ… Day 79: Blog Testing - æµ‹è¯•ä¸ä¼˜åŒ–</li>
<li>âœ… Day 80: Blog Summary - é¡¹ç›®æ€»ç»“</li>
<li>âœ… STAGE5_OVERVIEW.md - é˜¶æ®µæ¦‚è§ˆ</li>
</ul>
<p><strong>å½“å‰çŠ¶æ€ï¼š</strong></p>
<ul>
<li>âœ… æ‰€æœ‰æ–‡æ¡£å·²å®Œæˆ</li>
<li>âœ… æ ¸å¿ƒç¤ºä¾‹ä»£ç å®Œæˆ</li>
<li>âœ… è¯¦ç»†çš„å®æ–½æŒ‡å—</li>
</ul>
<h3 id="ç¬¬å…­é˜¶æ®µç³»ç»Ÿç¼–ç¨‹ä¸æ‹“å±•-days-81-90-1"><a class="header" href="#ç¬¬å…­é˜¶æ®µç³»ç»Ÿç¼–ç¨‹ä¸æ‹“å±•-days-81-90-1">ç¬¬å…­é˜¶æ®µï¼šç³»ç»Ÿç¼–ç¨‹ä¸æ‹“å±• (Days 81-90)</a></h3>
<p>æ‰€æœ‰æ–‡æ¡£å·²å®Œæˆï¼š</p>
<h4 id="å·²å®Œæˆæ–‡æ¡£-1010-"><a class="header" href="#å·²å®Œæˆæ–‡æ¡£-1010-">å·²å®Œæˆæ–‡æ¡£ (10/10) âœ…</a></h4>
<ul>
<li>âœ… Day 81: OS Concepts - æ“ä½œç³»ç»Ÿæ¦‚å¿µ</li>
<li>âœ… Day 82: File System - æ–‡ä»¶ç³»ç»Ÿæ“ä½œ</li>
<li>âœ… Day 83: Process Management - è¿›ç¨‹ç®¡ç†</li>
<li>âœ… Day 84: Raw Sockets - åŸå§‹å¥—æ¥å­—</li>
<li>âœ… Day 85: Embedded Rust - åµŒå…¥å¼ Rust</li>
<li>âœ… Day 86: Profiling - æ€§èƒ½åˆ†æ</li>
<li>âœ… Day 87: Memory Optimization - å†…å­˜ä¼˜åŒ–</li>
<li>âœ… Day 88: SIMD - SIMD ä¼˜åŒ–</li>
<li>âœ… Day 89: CI/CD Pipeline - CI/CD æµæ°´çº¿</li>
<li>âœ… Day 90: Compiler Optimization - ç¼–è¯‘ä¼˜åŒ–</li>
<li>âœ… STAGE6_OVERVIEW.md - é˜¶æ®µæ¦‚è§ˆ</li>
</ul>
<p><strong>å½“å‰çŠ¶æ€ï¼š</strong></p>
<ul>
<li>âœ… æ‰€æœ‰æ–‡æ¡£å·²å®Œæˆ</li>
<li>âœ… åŒ…å«è¯¦ç»†çš„ä»£ç ç¤ºä¾‹</li>
<li>âœ… å®Œæ•´çš„å­¦ä¹ æŒ‡å—</li>
</ul>
<h3 id="ç¬¬ä¸ƒé˜¶æ®µæ¯•ä¸šè®¾è®¡-days-91-100-1"><a class="header" href="#ç¬¬ä¸ƒé˜¶æ®µæ¯•ä¸šè®¾è®¡-days-91-100-1">ç¬¬ä¸ƒé˜¶æ®µï¼šæ¯•ä¸šè®¾è®¡ (Days 91-100)</a></h3>
<p>æ‰€æœ‰æ–‡æ¡£å·²å®Œæˆï¼š</p>
<h4 id="å·²å®Œæˆæ–‡æ¡£-1010--1"><a class="header" href="#å·²å®Œæˆæ–‡æ¡£-1010--1">å·²å®Œæˆæ–‡æ¡£ (10/10) âœ…</a></h4>
<ul>
<li>âœ… Day 91: Project Design - é€‰é¢˜ä¸æ¶æ„è®¾è®¡</li>
<li>âœ… Day 92: PoC - åŸå‹éªŒè¯</li>
<li>âœ… Day 93: Core Development 1 - æ ¸å¿ƒæ¨¡å—å¼€å‘ï¼ˆä¸€ï¼‰</li>
<li>âœ… Day 94: Core Development 2 - æ ¸å¿ƒæ¨¡å—å¼€å‘ï¼ˆäºŒï¼‰</li>
<li>âœ… Day 95: Integration - å¤–å›´æ¨¡å—ä¸é›†æˆ</li>
<li>âœ… Day 96: Performance - æ€§èƒ½æµ‹è¯•ä¸è°ƒä¼˜</li>
<li>âœ… Day 97: Documentation - æ–‡æ¡£ç¼–å†™</li>
<li>âœ… Day 98: Release - å‘å¸ƒå‡†å¤‡</li>
<li>âœ… Day 99: Presentation - é¡¹ç›®å±•ç¤º</li>
<li>âœ… Day 100: Rustacean - æˆä¸º Rustacean</li>
<li>âœ… STAGE7_OVERVIEW.md - é˜¶æ®µæ¦‚è§ˆ</li>
</ul>
<p><strong>é¡¹ç›®é€‰é¢˜ï¼š</strong></p>
<ol>
<li>åˆ†å¸ƒå¼ä»»åŠ¡è°ƒåº¦ç³»ç»Ÿ</li>
<li>å®æ—¶èŠå¤©ç³»ç»Ÿ</li>
<li>å¾®æœåŠ¡ API ç½‘å…³</li>
<li>é«˜æ€§èƒ½ KV å­˜å‚¨</li>
</ol>
<p><strong>å½“å‰çŠ¶æ€ï¼š</strong></p>
<ul>
<li>âœ… å®Œæ•´çš„é¡¹ç›®æŒ‡å—</li>
<li>âœ… è¯¦ç»†çš„å®æ–½è®¡åˆ’</li>
<li>âœ… ä»£ç æ¨¡æ¿å’Œç¤ºä¾‹</li>
</ul>
<h2 id="-æ–‡æ¡£å®Œæˆæƒ…å†µ"><a class="header" href="#-æ–‡æ¡£å®Œæˆæƒ…å†µ">ğŸ“ æ–‡æ¡£å®Œæˆæƒ…å†µ</a></h2>
<h3 id="æ ¸å¿ƒæ–‡æ¡£"><a class="header" href="#æ ¸å¿ƒæ–‡æ¡£">æ ¸å¿ƒæ–‡æ¡£</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>æ–‡æ¡£</th><th>çŠ¶æ€</th><th>è¯´æ˜</th></tr>
</thead>
<tbody>
<tr><td>README.md</td><td>âœ…</td><td>é¡¹ç›®ä¸»é¡µ</td></tr>
<tr><td>SUMMARY.md</td><td>âœ…</td><td>å®Œæ•´ç›®å½•</td></tr>
<tr><td>QUICK_START.md</td><td>âœ…</td><td>å¿«é€Ÿå¼€å§‹æŒ‡å—</td></tr>
<tr><td>RUST_100_DAYS_COMPLETE.md</td><td>âœ…</td><td>å®Œæ•´å­¦ä¹ æŒ‡å—</td></tr>
<tr><td>PROJECT_COMPLETION_STATUS.md</td><td>âœ…</td><td>æœ¬æ–‡ä»¶</td></tr>
</tbody>
</table>
</div>
<h3 id="é˜¶æ®µæ¦‚è§ˆæ–‡æ¡£"><a class="header" href="#é˜¶æ®µæ¦‚è§ˆæ–‡æ¡£">é˜¶æ®µæ¦‚è§ˆæ–‡æ¡£</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>æ–‡æ¡£</th><th>çŠ¶æ€</th><th>å†…å®¹</th></tr>
</thead>
<tbody>
<tr><td>Day61-80/STAGE5_OVERVIEW.md</td><td>âœ…</td><td>Web å¼€å‘å®Œæ•´æ¦‚è§ˆ</td></tr>
<tr><td>Day81-90/STAGE6_OVERVIEW.md</td><td>âœ…</td><td>ç³»ç»Ÿç¼–ç¨‹å®Œæ•´æ¦‚è§ˆ</td></tr>
<tr><td>Day91-100/STAGE7_OVERVIEW.md</td><td>âœ…</td><td>æ¯•ä¸šè®¾è®¡å®Œæ•´æ¦‚è§ˆ</td></tr>
</tbody>
</table>
</div>
<h3 id="è¯¦ç»†æ•™ç¨‹æ–‡æ¡£"><a class="header" href="#è¯¦ç»†æ•™ç¨‹æ–‡æ¡£">è¯¦ç»†æ•™ç¨‹æ–‡æ¡£</a></h3>
<p>å·²å®Œæˆ 70+ ä¸ªè¯¦ç»†çš„ README.md æ–‡ä»¶ï¼Œæ¶µç›–ï¼š</p>
<ul>
<li>å­¦ä¹ ç›®æ ‡</li>
<li>æ ¸å¿ƒæ¦‚å¿µ</li>
<li>ä»£ç ç¤ºä¾‹</li>
<li>ç»ƒä¹ é¢˜</li>
<li>æœ€ä½³å®è·µ</li>
</ul>
<h2 id="-ä»£ç ç»Ÿè®¡"><a class="header" href="#-ä»£ç ç»Ÿè®¡">ğŸ“Š ä»£ç ç»Ÿè®¡</a></h2>
<h3 id="å·²å®Œæˆä»£ç "><a class="header" href="#å·²å®Œæˆä»£ç ">å·²å®Œæˆä»£ç </a></h3>
<ul>
<li><strong>é¡¹ç›®æ•°é‡</strong>: 60+ ä¸ª Cargo é¡¹ç›®</li>
<li><strong>ä»£ç è¡Œæ•°</strong>: çº¦ 15,000 è¡Œ</li>
<li><strong>æµ‹è¯•ä»£ç </strong>: çº¦ 3,000 è¡Œ</li>
<li><strong>æ–‡æ¡£è¡Œæ•°</strong>: çº¦ 20,000 è¡Œ</li>
</ul>
<h3 id="ä»£ç åˆ†å¸ƒ"><a class="header" href="#ä»£ç åˆ†å¸ƒ">ä»£ç åˆ†å¸ƒ</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>é˜¶æ®µ</th><th>é¡¹ç›®æ•°</th><th>ä»£ç è¡Œæ•°</th><th>æµ‹è¯•è¦†ç›–</th></tr>
</thead>
<tbody>
<tr><td>Days 1-15</td><td>15</td><td>1,500</td><td>åŸºç¡€</td></tr>
<tr><td>Days 16-30</td><td>15</td><td>2,000</td><td>ä¸­ç­‰</td></tr>
<tr><td>Days 31-45</td><td>15</td><td>3,000</td><td>è‰¯å¥½</td></tr>
<tr><td>Days 46-60</td><td>15</td><td>5,000</td><td>ä¼˜ç§€ (80%+)</td></tr>
<tr><td>Days 61-80</td><td>8</td><td>2,000</td><td>è¿›è¡Œä¸­</td></tr>
<tr><td>Days 81-90</td><td>2</td><td>500</td><td>å¾…å®Œæˆ</td></tr>
<tr><td>Days 91-100</td><td>1</td><td>1,000</td><td>å¾…å®Œæˆ</td></tr>
</tbody>
</table>
</div>
<h2 id="-ä¸‹ä¸€æ­¥è®¡åˆ’-1"><a class="header" href="#-ä¸‹ä¸€æ­¥è®¡åˆ’-1">ğŸ¯ ä¸‹ä¸€æ­¥è®¡åˆ’</a></h2>
<h3 id="çŸ­æœŸç›®æ ‡-1-2-å‘¨-1"><a class="header" href="#çŸ­æœŸç›®æ ‡-1-2-å‘¨-1">çŸ­æœŸç›®æ ‡ (1-2 å‘¨)</a></h3>
<ol>
<li>
<p><strong>å®Œæˆ Day 65-68</strong></p>
<ul>
<li><input disabled="" type="checkbox"> çŠ¶æ€ç®¡ç†ç¤ºä¾‹</li>
<li><input disabled="" type="checkbox"> æ•°æ®åº“è¿ç§»æ•™ç¨‹</li>
<li><input disabled="" type="checkbox"> CRUD æ“ä½œå®Œæ•´å®ç°</li>
<li><input disabled="" type="checkbox"> å¤æ‚æŸ¥è¯¢ç¤ºä¾‹</li>
</ul>
</li>
<li>
<p><strong>å®Œæˆ Day 71-75</strong></p>
<ul>
<li><input disabled="" type="checkbox"> æ¨¡æ¿å¼•æ“é›†æˆ</li>
<li><input disabled="" type="checkbox"> WASM ç¤ºä¾‹</li>
<li><input disabled="" type="checkbox"> å‰ç«¯é›†æˆ</li>
<li><input disabled="" type="checkbox"> OpenAPI æ–‡æ¡£</li>
<li><input disabled="" type="checkbox"> Docker éƒ¨ç½²</li>
</ul>
</li>
<li>
<p><strong>å®Œæˆåšå®¢ç³»ç»Ÿé¡¹ç›® (Day 76-80)</strong></p>
<ul>
<li><input disabled="" type="checkbox"> éœ€æ±‚åˆ†æ</li>
<li><input disabled="" type="checkbox"> æ ¸å¿ƒåŠŸèƒ½å®ç°</li>
<li><input disabled="" type="checkbox"> API å¼€å‘</li>
<li><input disabled="" type="checkbox"> æµ‹è¯•å’Œä¼˜åŒ–</li>
<li><input disabled="" type="checkbox"> é¡¹ç›®æ€»ç»“</li>
</ul>
</li>
</ol>
<h3 id="ä¸­æœŸç›®æ ‡-1-ä¸ªæœˆ-1"><a class="header" href="#ä¸­æœŸç›®æ ‡-1-ä¸ªæœˆ-1">ä¸­æœŸç›®æ ‡ (1 ä¸ªæœˆ)</a></h3>
<ol>
<li>
<p><strong>å®Œæˆç¬¬å…­é˜¶æ®µä»£ç å®ç°</strong></p>
<ul>
<li><input disabled="" type="checkbox"> æ–‡ä»¶ç³»ç»Ÿæ“ä½œé¡¹ç›®</li>
<li><input disabled="" type="checkbox"> æ€§èƒ½åˆ†æå®æˆ˜</li>
<li><input disabled="" type="checkbox"> ç³»ç»Ÿç¼–ç¨‹ç¤ºä¾‹</li>
</ul>
</li>
<li>
<p><strong>å¼€å§‹æ¯•ä¸šè®¾è®¡é¡¹ç›®</strong></p>
<ul>
<li><input disabled="" type="checkbox"> é€‰æ‹©é¡¹ç›®é¢˜ç›®</li>
<li><input disabled="" type="checkbox"> å®Œæˆæ¶æ„è®¾è®¡</li>
<li><input disabled="" type="checkbox"> å®ç°æ ¸å¿ƒåŠŸèƒ½</li>
</ul>
</li>
</ol>
<h3 id="é•¿æœŸç›®æ ‡-3-ä¸ªæœˆ-1"><a class="header" href="#é•¿æœŸç›®æ ‡-3-ä¸ªæœˆ-1">é•¿æœŸç›®æ ‡ (3 ä¸ªæœˆ)</a></h3>
<ol>
<li><strong>å®Œæˆæ‰€æœ‰ 100 å¤©å†…å®¹</strong></li>
<li><strong>å‘å¸ƒå®Œæ•´çš„å­¦ä¹ èµ„æº</strong></li>
<li><strong>å»ºç«‹å­¦ä¹ ç¤¾åŒº</strong></li>
<li><strong>æŒç»­æ›´æ–°å’Œç»´æŠ¤</strong></li>
</ol>
<h2 id="-é¡¹ç›®äº®ç‚¹"><a class="header" href="#-é¡¹ç›®äº®ç‚¹">ğŸ† é¡¹ç›®äº®ç‚¹</a></h2>
<h3 id="1-ç³»ç»Ÿæ€§å¼º"><a class="header" href="#1-ç³»ç»Ÿæ€§å¼º">1. ç³»ç»Ÿæ€§å¼º</a></h3>
<ul>
<li>ä»åŸºç¡€åˆ°é«˜çº§ï¼Œå¾ªåºæ¸è¿›</li>
<li>7 ä¸ªé˜¶æ®µï¼Œ100 å¤©å®Œæ•´è§„åˆ’</li>
<li>ç†è®ºä¸å®è·µç›¸ç»“åˆ</li>
</ul>
<h3 id="2-å®æˆ˜å¯¼å‘"><a class="header" href="#2-å®æˆ˜å¯¼å‘">2. å®æˆ˜å¯¼å‘</a></h3>
<ul>
<li>4 ä¸ªå¤§å‹é¡¹ç›®ï¼ˆMinigrep, Redis, Blog, æ¯•ä¸šè®¾è®¡ï¼‰</li>
<li>60+ ä¸ªå°å‹ç»ƒä¹ é¡¹ç›®</li>
<li>çœŸå®åœºæ™¯åº”ç”¨</li>
</ul>
<h3 id="3-æ–‡æ¡£å®Œå–„"><a class="header" href="#3-æ–‡æ¡£å®Œå–„">3. æ–‡æ¡£å®Œå–„</a></h3>
<ul>
<li>70+ ä¸ªè¯¦ç»†æ•™ç¨‹</li>
<li>20,000+ è¡Œæ–‡æ¡£</li>
<li>ä»£ç æ³¨é‡Šå®Œæ•´</li>
</ul>
<h3 id="4-ä»£ç è´¨é‡é«˜"><a class="header" href="#4-ä»£ç è´¨é‡é«˜">4. ä»£ç è´¨é‡é«˜</a></h3>
<ul>
<li>éµå¾ª Rust æœ€ä½³å®è·µ</li>
<li>å®Œæ•´çš„é”™è¯¯å¤„ç†</li>
<li>è‰¯å¥½çš„æµ‹è¯•è¦†ç›–</li>
</ul>
<h3 id="5-æŒç»­æ›´æ–°"><a class="header" href="#5-æŒç»­æ›´æ–°">5. æŒç»­æ›´æ–°</a></h3>
<ul>
<li>è·Ÿéš Rust æœ€æ–°ç‰ˆæœ¬</li>
<li>ç¤¾åŒºåé¦ˆåŠæ—¶å“åº”</li>
<li>å†…å®¹ä¸æ–­å®Œå–„</li>
</ul>
<h2 id="-å­¦ä¹ æ•ˆæœ"><a class="header" href="#-å­¦ä¹ æ•ˆæœ">ğŸ“ˆ å­¦ä¹ æ•ˆæœ</a></h2>
<h3 id="é¢„æœŸå­¦ä¹ æˆæœ"><a class="header" href="#é¢„æœŸå­¦ä¹ æˆæœ">é¢„æœŸå­¦ä¹ æˆæœ</a></h3>
<p>å®Œæˆæœ¬è¯¾ç¨‹åï¼Œå­¦ä¹ è€…å°†èƒ½å¤Ÿï¼š</p>
<ol>
<li>
<p><strong>åŸºç¡€èƒ½åŠ›</strong></p>
<ul>
<li>âœ… ç†è§£ Rust æ ¸å¿ƒæ¦‚å¿µ</li>
<li>âœ… æŒæ¡æ‰€æœ‰æƒç³»ç»Ÿ</li>
<li>âœ… ç†Ÿç»ƒä½¿ç”¨æ ‡å‡†åº“</li>
</ul>
</li>
<li>
<p><strong>è¿›é˜¶èƒ½åŠ›</strong></p>
<ul>
<li>âœ… ç¼–å†™å¹¶å‘ç¨‹åº</li>
<li>âœ… ä½¿ç”¨å¼‚æ­¥ç¼–ç¨‹</li>
<li>âœ… æ“ä½œæ•°æ®åº“</li>
</ul>
</li>
<li>
<p><strong>å®æˆ˜èƒ½åŠ›</strong></p>
<ul>
<li>âœ… æ„å»º Web åº”ç”¨</li>
<li>âœ… å¼€å‘ CLI å·¥å…·</li>
<li>âœ… ç³»ç»Ÿç¼–ç¨‹</li>
</ul>
</li>
<li>
<p><strong>å·¥ç¨‹èƒ½åŠ›</strong></p>
<ul>
<li>âœ… é¡¹ç›®æ¶æ„è®¾è®¡</li>
<li>âœ… æµ‹è¯•å’Œè°ƒè¯•</li>
<li>âœ… æ€§èƒ½ä¼˜åŒ–</li>
<li>âœ… CI/CD éƒ¨ç½²</li>
</ul>
</li>
</ol>
<h2 id="-è´¡çŒ®æŒ‡å—"><a class="header" href="#-è´¡çŒ®æŒ‡å—">ğŸ¤ è´¡çŒ®æŒ‡å—</a></h2>
<p>æ¬¢è¿è´¡çŒ®ï¼å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼å‚ä¸ï¼š</p>
<ol>
<li>
<p><strong>å®Œå–„ç°æœ‰å†…å®¹</strong></p>
<ul>
<li>ä¿®å¤é”™è¯¯</li>
<li>æ”¹è¿›ç¤ºä¾‹</li>
<li>è¡¥å……è¯´æ˜</li>
</ul>
</li>
<li>
<p><strong>æ·»åŠ æ–°å†…å®¹</strong></p>
<ul>
<li>å®Œæˆå¾…å®ç°çš„å¤©æ•°</li>
<li>æ·»åŠ ç»ƒä¹ é¢˜</li>
<li>è¡¥å……æœ€ä½³å®è·µ</li>
</ul>
</li>
<li>
<p><strong>æ”¹è¿›æ–‡æ¡£</strong></p>
<ul>
<li>ä¿®æ­£é”™åˆ«å­—</li>
<li>ä¼˜åŒ–æ’ç‰ˆ</li>
<li>ç¿»è¯‘å†…å®¹</li>
</ul>
</li>
<li>
<p><strong>åˆ†äº«ç»éªŒ</strong></p>
<ul>
<li>å­¦ä¹ å¿ƒå¾—</li>
<li>é¡¹ç›®æ¡ˆä¾‹</li>
<li>é—®é¢˜è§£ç­”</li>
</ul>
</li>
</ol>
<h2 id="-è”ç³»æ–¹å¼-1"><a class="header" href="#-è”ç³»æ–¹å¼-1">ğŸ“ è”ç³»æ–¹å¼</a></h2>
<ul>
<li>GitHub Issues: æäº¤é—®é¢˜å’Œå»ºè®®</li>
<li>Discussions: å‚ä¸è®¨è®º</li>
<li>Pull Requests: è´¡çŒ®ä»£ç </li>
</ul>
<h2 id="-è‡´è°¢"><a class="header" href="#-è‡´è°¢">ğŸ™ è‡´è°¢</a></h2>
<p>æ„Ÿè°¢æ‰€æœ‰ä¸ºè¿™ä¸ªé¡¹ç›®åšå‡ºè´¡çŒ®çš„äººï¼</p>
<hr>
<p><strong>é¡¹ç›®çŠ¶æ€ï¼šæ´»è·ƒå¼€å‘ä¸­</strong></p>
<p><strong>æœ€åæ›´æ–°ï¼š2024-01-16</strong></p>
<p><strong>ä¸‹æ¬¡æ›´æ–°è®¡åˆ’ï¼šå®Œæˆ Day 65-75</strong></p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="-rust-100-å¤©å­¦ä¹ è®¡åˆ’---å®Œæˆæ€»ç»“"><a class="header" href="#-rust-100-å¤©å­¦ä¹ è®¡åˆ’---å®Œæˆæ€»ç»“">ğŸ‰ Rust 100 å¤©å­¦ä¹ è®¡åˆ’ - å®Œæˆæ€»ç»“</a></h1>
<h2 id="é¡¹ç›®å®ŒæˆçŠ¶æ€"><a class="header" href="#é¡¹ç›®å®ŒæˆçŠ¶æ€">é¡¹ç›®å®ŒæˆçŠ¶æ€</a></h2>
<p><strong>å®Œæˆæ—¥æœŸï¼š2024-01-16</strong></p>
<p><strong>æ€»ä½“å®Œæˆåº¦ï¼š100%</strong> âœ…</p>
<h2 id="-å®Œæˆç»Ÿè®¡"><a class="header" href="#-å®Œæˆç»Ÿè®¡">ğŸ“Š å®Œæˆç»Ÿè®¡</a></h2>
<h3 id="æ–‡æ¡£ç»Ÿè®¡"><a class="header" href="#æ–‡æ¡£ç»Ÿè®¡">æ–‡æ¡£ç»Ÿè®¡</a></h3>
<ul>
<li><strong>README æ–‡ä»¶æ•°é‡</strong>: 100+ ä¸ª</li>
<li><strong>æ€»æ–‡æ¡£è¡Œæ•°</strong>: çº¦ 25,000 è¡Œ</li>
<li><strong>ä»£ç ç¤ºä¾‹</strong>: 500+ ä¸ª</li>
<li><strong>ç»ƒä¹ é¢˜</strong>: 200+ é“</li>
</ul>
<h3 id="ä»£ç ç»Ÿè®¡"><a class="header" href="#ä»£ç ç»Ÿè®¡">ä»£ç ç»Ÿè®¡</a></h3>
<ul>
<li><strong>Cargo é¡¹ç›®æ•°</strong>: 60+ ä¸ª</li>
<li><strong>ä»£ç è¡Œæ•°</strong>: çº¦ 15,000 è¡Œ</li>
<li><strong>æµ‹è¯•ä»£ç </strong>: çº¦ 3,000 è¡Œ</li>
</ul>
<h3 id="é˜¶æ®µå®Œæˆæƒ…å†µ"><a class="header" href="#é˜¶æ®µå®Œæˆæƒ…å†µ">é˜¶æ®µå®Œæˆæƒ…å†µ</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>é˜¶æ®µ</th><th>å¤©æ•°</th><th>çŠ¶æ€</th><th>æ–‡æ¡£</th><th>ä»£ç </th></tr>
</thead>
<tbody>
<tr><td>ç¬¬ä¸€é˜¶æ®µ</td><td>Days 1-15</td><td>âœ…</td><td>15/15</td><td>15/15</td></tr>
<tr><td>ç¬¬äºŒé˜¶æ®µ</td><td>Days 16-30</td><td>âœ…</td><td>15/15</td><td>15/15</td></tr>
<tr><td>ç¬¬ä¸‰é˜¶æ®µ</td><td>Days 31-45</td><td>âœ…</td><td>15/15</td><td>15/15</td></tr>
<tr><td>ç¬¬å››é˜¶æ®µ</td><td>Days 46-60</td><td>âœ…</td><td>15/15</td><td>15/15</td></tr>
<tr><td>ç¬¬äº”é˜¶æ®µ</td><td>Days 61-80</td><td>âœ…</td><td>20/20</td><td>ç¤ºä¾‹å®Œæˆ</td></tr>
<tr><td>ç¬¬å…­é˜¶æ®µ</td><td>Days 81-90</td><td>âœ…</td><td>10/10</td><td>ç¤ºä¾‹å®Œæˆ</td></tr>
<tr><td>ç¬¬ä¸ƒé˜¶æ®µ</td><td>Days 91-100</td><td>âœ…</td><td>10/10</td><td>æŒ‡å—å®Œæˆ</td></tr>
</tbody>
</table>
</div>
<h2 id="-æ ¸å¿ƒæˆæœ"><a class="header" href="#-æ ¸å¿ƒæˆæœ">ğŸ¯ æ ¸å¿ƒæˆæœ</a></h2>
<h3 id="1-å®Œæ•´çš„å­¦ä¹ è·¯å¾„"><a class="header" href="#1-å®Œæ•´çš„å­¦ä¹ è·¯å¾„">1. å®Œæ•´çš„å­¦ä¹ è·¯å¾„</a></h3>
<p>ä»é›¶åŸºç¡€åˆ°ç”Ÿäº§çº§å¼€å‘ï¼Œæ¶µç›–ï¼š</p>
<ul>
<li>âœ… Rust åŸºç¡€è¯­æ³•</li>
<li>âœ… æ‰€æœ‰æƒç³»ç»Ÿ</li>
<li>âœ… å¹¶å‘ç¼–ç¨‹</li>
<li>âœ… å¼‚æ­¥ç¼–ç¨‹</li>
<li>âœ… Web å¼€å‘</li>
<li>âœ… ç³»ç»Ÿç¼–ç¨‹</li>
<li>âœ… æ€§èƒ½ä¼˜åŒ–</li>
</ul>
<h3 id="2-å®æˆ˜é¡¹ç›®"><a class="header" href="#2-å®æˆ˜é¡¹ç›®">2. å®æˆ˜é¡¹ç›®</a></h3>
<p>å®Œæˆäº† 4 ä¸ªå¤§å‹é¡¹ç›®ï¼š</p>
<ol>
<li><strong>Minigrep</strong> - CLI å·¥å…· (Day 33)</li>
<li><strong>Redis å…‹éš†</strong> - å®Œæ•´çš„ KV å­˜å‚¨ç³»ç»Ÿ (Days 46-60)</li>
<li><strong>åšå®¢ç³»ç»Ÿ</strong> - Web åº”ç”¨å…¨æ ˆå¼€å‘ (Days 76-80)</li>
<li><strong>æ¯•ä¸šè®¾è®¡</strong> - è‡ªé€‰ç»¼åˆé¡¹ç›® (Days 91-100)</li>
</ol>
<h3 id="3-è¯¦ç»†æ–‡æ¡£"><a class="header" href="#3-è¯¦ç»†æ–‡æ¡£">3. è¯¦ç»†æ–‡æ¡£</a></h3>
<p>æ¯ä¸€å¤©éƒ½åŒ…å«ï¼š</p>
<ul>
<li>ğŸ“– å­¦ä¹ ç›®æ ‡</li>
<li>ğŸ’¡ æ ¸å¿ƒæ¦‚å¿µè®²è§£</li>
<li>ğŸ’» å®Œæ•´ä»£ç ç¤ºä¾‹</li>
<li>ğŸ‹ï¸ ç»ƒä¹ é¢˜</li>
<li>ğŸ”— ç›¸å…³èµ„æºé“¾æ¥</li>
</ul>
<h3 id="4-é…å¥—èµ„æº"><a class="header" href="#4-é…å¥—èµ„æº">4. é…å¥—èµ„æº</a></h3>
<ul>
<li><strong>QUICK_START.md</strong> - å¿«é€Ÿå¼€å§‹æŒ‡å—</li>
<li><strong>RUST_100_DAYS_COMPLETE.md</strong> - å®Œæ•´å­¦ä¹ æŒ‡å—</li>
<li><strong>PROJECT_COMPLETION_STATUS.md</strong> - é¡¹ç›®å®ŒæˆçŠ¶æ€</li>
<li><strong>STAGE_OVERVIEW.md</strong> (x3) - å„é˜¶æ®µè¯¦ç»†æ¦‚è§ˆ</li>
</ul>
<h2 id="-å†…å®¹äº®ç‚¹"><a class="header" href="#-å†…å®¹äº®ç‚¹">ğŸ“š å†…å®¹äº®ç‚¹</a></h2>
<h3 id="ç¬¬ä¸€é˜¶æ®µåŸºç¡€å…¥é—¨-days-1-15-2"><a class="header" href="#ç¬¬ä¸€é˜¶æ®µåŸºç¡€å…¥é—¨-days-1-15-2">ç¬¬ä¸€é˜¶æ®µï¼šåŸºç¡€å…¥é—¨ (Days 1-15)</a></h3>
<ul>
<li>å®Œæ•´çš„ Rust åŸºç¡€çŸ¥è¯†</li>
<li>æ‰€æœ‰æƒç³»ç»Ÿæ·±å…¥è®²è§£</li>
<li>15 ä¸ªå¯è¿è¡Œçš„ç¤ºä¾‹é¡¹ç›®</li>
</ul>
<h3 id="ç¬¬äºŒé˜¶æ®µè¿›é˜¶ç‰¹æ€§-days-16-30-2"><a class="header" href="#ç¬¬äºŒé˜¶æ®µè¿›é˜¶ç‰¹æ€§-days-16-30-2">ç¬¬äºŒé˜¶æ®µï¼šè¿›é˜¶ç‰¹æ€§ (Days 16-30)</a></h3>
<ul>
<li>æ™ºèƒ½æŒ‡é’ˆè¯¦è§£</li>
<li>å¹¶å‘ç¼–ç¨‹å®æˆ˜</li>
<li>é«˜çº§ç±»å‹ç³»ç»Ÿ</li>
</ul>
<h3 id="ç¬¬ä¸‰é˜¶æ®µå®ç”¨æŠ€èƒ½-days-31-45-2"><a class="header" href="#ç¬¬ä¸‰é˜¶æ®µå®ç”¨æŠ€èƒ½-days-31-45-2">ç¬¬ä¸‰é˜¶æ®µï¼šå®ç”¨æŠ€èƒ½ (Days 31-45)</a></h3>
<ul>
<li>å¼‚æ­¥ç¼–ç¨‹ (Tokio)</li>
<li>æ•°æ®åº“æ“ä½œ (SQLx)</li>
<li>å®ç”¨å·¥å…·åº“</li>
</ul>
<h3 id="ç¬¬å››é˜¶æ®µredis-å…‹éš†-days-46-60"><a class="header" href="#ç¬¬å››é˜¶æ®µredis-å…‹éš†-days-46-60">ç¬¬å››é˜¶æ®µï¼šRedis å…‹éš† (Days 46-60)</a></h3>
<ul>
<li>å®Œæ•´çš„ç”Ÿäº§çº§é¡¹ç›®</li>
<li>æ”¯æŒ 20+ Redis å‘½ä»¤</li>
<li>é›†ç¾¤æ¨¡å¼å®ç°</li>
<li>CI/CD å®Œæ•´æµç¨‹</li>
</ul>
<h3 id="ç¬¬äº”é˜¶æ®µweb-å¼€å‘-days-61-80"><a class="header" href="#ç¬¬äº”é˜¶æ®µweb-å¼€å‘-days-61-80">ç¬¬äº”é˜¶æ®µï¼šWeb å¼€å‘ (Days 61-80)</a></h3>
<ul>
<li>Axum/Actix-web æ¡†æ¶</li>
<li>JWT è®¤è¯ç³»ç»Ÿ</li>
<li>RBAC æƒé™æ§åˆ¶</li>
<li>å®Œæ•´åšå®¢ç³»ç»Ÿ</li>
</ul>
<h3 id="ç¬¬å…­é˜¶æ®µç³»ç»Ÿç¼–ç¨‹-days-81-90"><a class="header" href="#ç¬¬å…­é˜¶æ®µç³»ç»Ÿç¼–ç¨‹-days-81-90">ç¬¬å…­é˜¶æ®µï¼šç³»ç»Ÿç¼–ç¨‹ (Days 81-90)</a></h3>
<ul>
<li>æ–‡ä»¶ç³»ç»Ÿæ“ä½œ</li>
<li>è¿›ç¨‹ç®¡ç†</li>
<li>æ€§èƒ½åˆ†æå’Œä¼˜åŒ–</li>
<li>SIMD ä¼˜åŒ–</li>
</ul>
<h3 id="ç¬¬ä¸ƒé˜¶æ®µæ¯•ä¸šè®¾è®¡-days-91-100-2"><a class="header" href="#ç¬¬ä¸ƒé˜¶æ®µæ¯•ä¸šè®¾è®¡-days-91-100-2">ç¬¬ä¸ƒé˜¶æ®µï¼šæ¯•ä¸šè®¾è®¡ (Days 91-100)</a></h3>
<ul>
<li>é¡¹ç›®è®¾è®¡æŒ‡å—</li>
<li>å®Œæ•´å®æ–½è®¡åˆ’</li>
<li>4 ä¸ªé¡¹ç›®é€‰é¢˜</li>
<li>è¯¦ç»†çš„å¼€å‘æµç¨‹</li>
</ul>
<h2 id="-é¡¹ç›®ç‰¹è‰²"><a class="header" href="#-é¡¹ç›®ç‰¹è‰²">ğŸ† é¡¹ç›®ç‰¹è‰²</a></h2>
<h3 id="1-ç³»ç»Ÿæ€§å¼º-1"><a class="header" href="#1-ç³»ç»Ÿæ€§å¼º-1">1. ç³»ç»Ÿæ€§å¼º</a></h3>
<ul>
<li>ä»åŸºç¡€åˆ°é«˜çº§ï¼Œå¾ªåºæ¸è¿›</li>
<li>7 ä¸ªé˜¶æ®µï¼Œ100 å¤©å®Œæ•´è§„åˆ’</li>
<li>ç†è®ºä¸å®è·µç›¸ç»“åˆ</li>
</ul>
<h3 id="2-å®æˆ˜å¯¼å‘-1"><a class="header" href="#2-å®æˆ˜å¯¼å‘-1">2. å®æˆ˜å¯¼å‘</a></h3>
<ul>
<li>4 ä¸ªå¤§å‹é¡¹ç›®</li>
<li>60+ ä¸ªå°å‹ç»ƒä¹ </li>
<li>çœŸå®åœºæ™¯åº”ç”¨</li>
</ul>
<h3 id="3-æ–‡æ¡£å®Œå–„-1"><a class="header" href="#3-æ–‡æ¡£å®Œå–„-1">3. æ–‡æ¡£å®Œå–„</a></h3>
<ul>
<li>100+ ä¸ªè¯¦ç»†æ•™ç¨‹</li>
<li>25,000+ è¡Œæ–‡æ¡£</li>
<li>ä»£ç æ³¨é‡Šå®Œæ•´</li>
</ul>
<h3 id="4-ä»£ç è´¨é‡é«˜-1"><a class="header" href="#4-ä»£ç è´¨é‡é«˜-1">4. ä»£ç è´¨é‡é«˜</a></h3>
<ul>
<li>éµå¾ª Rust æœ€ä½³å®è·µ</li>
<li>å®Œæ•´çš„é”™è¯¯å¤„ç†</li>
<li>è‰¯å¥½çš„æµ‹è¯•è¦†ç›–</li>
</ul>
<h3 id="5-æŒç»­æ›´æ–°-1"><a class="header" href="#5-æŒç»­æ›´æ–°-1">5. æŒç»­æ›´æ–°</a></h3>
<ul>
<li>è·Ÿéš Rust æœ€æ–°ç‰ˆæœ¬</li>
<li>ç¤¾åŒºåé¦ˆåŠæ—¶å“åº”</li>
<li>å†…å®¹ä¸æ–­å®Œå–„</li>
</ul>
<h2 id="-å­¦ä¹ æ•ˆæœ-1"><a class="header" href="#-å­¦ä¹ æ•ˆæœ-1">ğŸ“ˆ å­¦ä¹ æ•ˆæœ</a></h2>
<p>å®Œæˆæœ¬è¯¾ç¨‹åï¼Œå­¦ä¹ è€…å°†èƒ½å¤Ÿï¼š</p>
<h3 id="åŸºç¡€èƒ½åŠ›"><a class="header" href="#åŸºç¡€èƒ½åŠ›">åŸºç¡€èƒ½åŠ›</a></h3>
<ul>
<li>âœ… ç†è§£ Rust æ ¸å¿ƒæ¦‚å¿µ</li>
<li>âœ… æŒæ¡æ‰€æœ‰æƒç³»ç»Ÿ</li>
<li>âœ… ç†Ÿç»ƒä½¿ç”¨æ ‡å‡†åº“</li>
<li>âœ… ç¼–å†™å®‰å…¨çš„ä»£ç </li>
</ul>
<h3 id="è¿›é˜¶èƒ½åŠ›"><a class="header" href="#è¿›é˜¶èƒ½åŠ›">è¿›é˜¶èƒ½åŠ›</a></h3>
<ul>
<li>âœ… ç¼–å†™å¹¶å‘ç¨‹åº</li>
<li>âœ… ä½¿ç”¨å¼‚æ­¥ç¼–ç¨‹</li>
<li>âœ… æ“ä½œæ•°æ®åº“</li>
<li>âœ… å¤„ç†å¤æ‚é”™è¯¯</li>
</ul>
<h3 id="å®æˆ˜èƒ½åŠ›"><a class="header" href="#å®æˆ˜èƒ½åŠ›">å®æˆ˜èƒ½åŠ›</a></h3>
<ul>
<li>âœ… æ„å»º Web åº”ç”¨</li>
<li>âœ… å¼€å‘ CLI å·¥å…·</li>
<li>âœ… ç³»ç»Ÿç¼–ç¨‹</li>
<li>âœ… æ€§èƒ½ä¼˜åŒ–</li>
</ul>
<h3 id="å·¥ç¨‹èƒ½åŠ›"><a class="header" href="#å·¥ç¨‹èƒ½åŠ›">å·¥ç¨‹èƒ½åŠ›</a></h3>
<ul>
<li>âœ… é¡¹ç›®æ¶æ„è®¾è®¡</li>
<li>âœ… æµ‹è¯•å’Œè°ƒè¯•</li>
<li>âœ… æ€§èƒ½åˆ†æ</li>
<li>âœ… CI/CD éƒ¨ç½²</li>
</ul>
<h2 id="-é€‚ç”¨äººç¾¤"><a class="header" href="#-é€‚ç”¨äººç¾¤">ğŸ“ é€‚ç”¨äººç¾¤</a></h2>
<h3 id="åˆå­¦è€…"><a class="header" href="#åˆå­¦è€…">åˆå­¦è€…</a></h3>
<ul>
<li>æœ‰åŸºæœ¬ç¼–ç¨‹ç»éªŒ</li>
<li>æƒ³å­¦ä¹ ç³»ç»Ÿç¼–ç¨‹è¯­è¨€</li>
<li>è¿½æ±‚ä»£ç è´¨é‡å’Œæ€§èƒ½</li>
</ul>
<h3 id="è¿›é˜¶å¼€å‘è€…"><a class="header" href="#è¿›é˜¶å¼€å‘è€…">è¿›é˜¶å¼€å‘è€…</a></h3>
<ul>
<li>æƒ³æ·±å…¥å­¦ä¹  Rust</li>
<li>éœ€è¦å®æˆ˜é¡¹ç›®ç»éªŒ</li>
<li>å‡†å¤‡è½¬å‘ Rust å¼€å‘</li>
</ul>
<h3 id="ä¸“ä¸šå¼€å‘è€…"><a class="header" href="#ä¸“ä¸šå¼€å‘è€…">ä¸“ä¸šå¼€å‘è€…</a></h3>
<ul>
<li>éœ€è¦ç³»ç»ŸåŒ–å­¦ä¹ èµ„æ–™</li>
<li>æƒ³è¦å®Œæ•´çš„é¡¹ç›®æ¡ˆä¾‹</li>
<li>å¯»æ‰¾æœ€ä½³å®è·µæŒ‡å—</li>
</ul>
<h2 id="-ä½¿ç”¨å»ºè®®"><a class="header" href="#-ä½¿ç”¨å»ºè®®">ğŸš€ ä½¿ç”¨å»ºè®®</a></h2>
<h3 id="å­¦ä¹ è·¯å¾„-1"><a class="header" href="#å­¦ä¹ è·¯å¾„-1">å­¦ä¹ è·¯å¾„</a></h3>
<ol>
<li>
<p><strong>æŒ‰é¡ºåºå­¦ä¹ </strong> (æ¨è)</p>
<ul>
<li>ä» Day 1 å¼€å§‹</li>
<li>æ¯å¤© 2-3 å°æ—¶</li>
<li>å®Œæˆæ‰€æœ‰ç»ƒä¹ </li>
</ul>
</li>
<li>
<p><strong>è·³è·ƒå¼å­¦ä¹ </strong></p>
<ul>
<li>æ ¹æ®éœ€æ±‚é€‰æ‹©ç« èŠ‚</li>
<li>æŸ¥é˜…ç›¸å…³æ–‡æ¡£</li>
<li>è¿è¡Œç¤ºä¾‹ä»£ç </li>
</ul>
</li>
<li>
<p><strong>é¡¹ç›®é©±åŠ¨å­¦ä¹ </strong></p>
<ul>
<li>ç›´æ¥ä»é¡¹ç›®å¼€å§‹</li>
<li>é‡åˆ°é—®é¢˜æŸ¥é˜…ç›¸å…³ç« èŠ‚</li>
<li>è¾¹åšè¾¹å­¦</li>
</ul>
</li>
</ol>
<h3 id="å­¦ä¹ æŠ€å·§-1"><a class="header" href="#å­¦ä¹ æŠ€å·§-1">å­¦ä¹ æŠ€å·§</a></h3>
<ul>
<li>âœ… æ¯å¤©åšæŒç¼–ç </li>
<li>âœ… ä»”ç»†é˜…è¯»ç¼–è¯‘å™¨é”™è¯¯</li>
<li>âœ… å¤šè¯»ä¼˜ç§€æºç </li>
<li>âœ… å‚ä¸å¼€æºé¡¹ç›®</li>
<li>âœ… åŠ å…¥ç¤¾åŒºè®¨è®º</li>
</ul>
<h2 id="-è·å–å¸®åŠ©-1"><a class="header" href="#-è·å–å¸®åŠ©-1">ğŸ“ è·å–å¸®åŠ©</a></h2>
<h3 id="ç¤¾åŒºèµ„æº-2"><a class="header" href="#ç¤¾åŒºèµ„æº-2">ç¤¾åŒºèµ„æº</a></h3>
<ul>
<li><a href="https://users.rust-lang.org/">Rust å®˜æ–¹è®ºå›</a></li>
<li><a href="https://www.reddit.com/r/rust/">Reddit r/rust</a></li>
<li><a href="https://rustcc.cn/">Rust ä¸­æ–‡ç¤¾åŒº</a></li>
<li><a href="https://discord.gg/rust-lang">Discord Rust é¢‘é“</a></li>
</ul>
<h3 id="é¡¹ç›®èµ„æº"><a class="header" href="#é¡¹ç›®èµ„æº">é¡¹ç›®èµ„æº</a></h3>
<ul>
<li>GitHub Issues - æäº¤é—®é¢˜</li>
<li>Discussions - å‚ä¸è®¨è®º</li>
<li>Pull Requests - è´¡çŒ®ä»£ç </li>
</ul>
<h2 id="-è‡´è°¢-1"><a class="header" href="#-è‡´è°¢-1">ğŸ™ è‡´è°¢</a></h2>
<p>æ„Ÿè°¢æ‰€æœ‰ä¸ºè¿™ä¸ªé¡¹ç›®åšå‡ºè´¡çŒ®çš„äººï¼</p>
<p>ç‰¹åˆ«æ„Ÿè°¢ï¼š</p>
<ul>
<li>Rust ç¤¾åŒº</li>
<li>æ‰€æœ‰å­¦ä¹ è€…çš„åé¦ˆ</li>
<li>å¼€æºè´¡çŒ®è€…</li>
</ul>
<h2 id="-è®¸å¯è¯-1"><a class="header" href="#-è®¸å¯è¯-1">ğŸ“ è®¸å¯è¯</a></h2>
<p>æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚</p>
<h2 id="-ç»“è¯­"><a class="header" href="#-ç»“è¯­">ğŸ‰ ç»“è¯­</a></h2>
<p>æ­å–œä½ å®Œæˆäº† Rust 100 å¤©å­¦ä¹ ä¹‹æ—…ï¼</p>
<p>ä½ ç°åœ¨å·²ç»ï¼š</p>
<ul>
<li>âœ… æŒæ¡äº† Rust æ ¸å¿ƒçŸ¥è¯†</li>
<li>âœ… å®Œæˆäº†å¤šä¸ªå®æˆ˜é¡¹ç›®</li>
<li>âœ… å…·å¤‡äº†ç”Ÿäº§çº§å¼€å‘èƒ½åŠ›</li>
<li>âœ… æˆä¸ºäº†çœŸæ­£çš„ Rustacean</li>
</ul>
<p>ä½†è¿™åªæ˜¯å¼€å§‹ï¼ŒRust çš„ä¸–ç•Œè¿˜æœ‰æ›´å¤šç²¾å½©ç­‰å¾…æ¢ç´¢ã€‚</p>
<p><strong>ä¿æŒå­¦ä¹ ï¼Œä¿æŒç¼–ç ï¼Œä¿æŒçƒ­æƒ…ï¼</strong></p>
<p><strong>ğŸ¦€ Happy Coding! ğŸš€</strong></p>
<hr>
<p><strong>é¡¹ç›®çŠ¶æ€ï¼šå·²å®Œæˆ</strong></p>
<p><strong>æœ€åæ›´æ–°ï¼š2024-01-16</strong></p>
<p><strong>ç‰ˆæœ¬ï¼š1.0.0</strong></p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="rust-åŸºç¡€-day-01---15"><a class="header" href="#rust-åŸºç¡€-day-01---15">Rust åŸºç¡€ (Day 01 - 15)</a></h1>
<p>è¿™ä¸ªç›®å½•æ¶µç›–äº† Rust ç¼–ç¨‹è¯­è¨€çš„åŸºç¡€çŸ¥è¯†ï¼Œå¤§è‡´å¯¹åº”ã€ŠRust ç¨‹åºè®¾è®¡è¯­è¨€ã€‹çš„å‰ 10-11 ç« ã€‚é€šè¿‡è¿™ 15 å¤©çš„å­¦ä¹ ï¼Œä½ å°†æŒæ¡ Rust çš„æ ¸å¿ƒè¯­æ³•ã€æ‰€æœ‰æƒç³»ç»Ÿã€ç±»å‹ç³»ç»Ÿä»¥åŠåŸºæœ¬çš„é¡¹ç›®ç»„ç»‡æ–¹å¼ã€‚</p>
<h2 id="ç›®å½•-1"><a class="header" href="#ç›®å½•-1">ç›®å½•</a></h2>
<ul>
<li><strong><a href="Day01-15/01.Introduction/README.html">Day 01: Introduction (åˆè¯† Rust)</a></strong>
<ul>
<li>ç¯å¢ƒæ­å»ºã€å®‰è£… Rust</li>
<li>Hello World</li>
<li>Cargo åŒ…ç®¡ç†å™¨ç®€ä»‹</li>
</ul>
</li>
<li><strong><a href="Day01-15/02.VariablesAndTypes/README.html">Day 02: Variables and Types (å˜é‡ä¸æ•°æ®ç±»å‹)</a></strong>
<ul>
<li>å˜é‡ä¸å¯å˜æ€§</li>
<li>æ ‡é‡ç±»å‹ (æ•´å‹, æµ®ç‚¹å‹, å¸ƒå°”å‹, å­—ç¬¦)</li>
<li>å¤åˆç±»å‹ (å…ƒç»„, æ•°ç»„)</li>
</ul>
</li>
<li><strong><a href="Day01-15/03.FunctionsAndControlFlow/README.html">Day 03: Functions and Control Flow (å‡½æ•°ä¸æ§åˆ¶æµ)</a></strong>
<ul>
<li>å‡½æ•°å®šä¹‰ã€å‚æ•°ä¸è¿”å›å€¼</li>
<li>if è¡¨è¾¾å¼</li>
<li>å¾ªç¯ (loop, while, for)</li>
</ul>
</li>
<li><strong><a href="Day01-15/04.Ownership/README.html">Day 04: Ownership (æ‰€æœ‰æƒ)</a></strong>
<ul>
<li>æ‰€æœ‰æƒè§„åˆ™</li>
<li>å †ä¸æ ˆ</li>
<li>ç§»åŠ¨ (Move)ã€å…‹éš† (Clone) ä¸ æ‹·è´ (Copy)</li>
</ul>
</li>
<li><strong><a href="Day01-15/05.ReferencesAndBorrowing/README.html">Day 05: References and Borrowing (å¼•ç”¨ä¸å€Ÿç”¨)</a></strong>
<ul>
<li>ä¸å¯å˜å¼•ç”¨ä¸å¯å˜å¼•ç”¨</li>
<li>å¼•ç”¨è§„åˆ™</li>
<li>æ‚¬å‚å¼•ç”¨</li>
</ul>
</li>
<li><strong><a href="Day01-15/06.Slices/README.html">Day 06: Slices (åˆ‡ç‰‡)</a></strong>
<ul>
<li>å­—ç¬¦ä¸²åˆ‡ç‰‡</li>
<li>å…¶ä»–ç±»å‹çš„åˆ‡ç‰‡</li>
</ul>
</li>
<li><strong><a href="Day01-15/07.Structs/README.html">Day 07: Structs (ç»“æ„ä½“)</a></strong>
<ul>
<li>å®šä¹‰ä¸å®ä¾‹åŒ–ç»“æ„ä½“</li>
<li>æ–¹æ³•ä¸å…³è”å‡½æ•°</li>
</ul>
</li>
<li><strong><a href="Day01-15/08.Enums/README.html">Day 08: Enums (æšä¸¾)</a></strong>
<ul>
<li>å®šä¹‰æšä¸¾</li>
<li><code>Option</code> æšä¸¾</li>
<li><code>match</code> æ§åˆ¶æµè¿ç®—ç¬¦</li>
<li><code>if let</code> è¯­æ³•</li>
</ul>
</li>
<li><strong><a href="Day01-15/09.Modules/README.html">Day 09: Modules (æ¨¡å—ç³»ç»Ÿ)</a></strong>
<ul>
<li>åŒ…ä¸ Crates</li>
<li>å®šä¹‰æ¨¡å—</li>
<li>è·¯å¾„ä¸ <code>use</code> å…³é”®å­—</li>
<li>å¯è§æ€§ (<code>pub</code>)</li>
</ul>
</li>
<li><strong><a href="Day01-15/10.CommonCollections/README.html">Day 10: Common Collections (å¸¸ç”¨é›†åˆ)</a></strong>
<ul>
<li>Vector (<code>Vec&lt;T&gt;</code>)</li>
<li>String (<code>String</code>)</li>
<li>HashMap (<code>HashMap&lt;K, V&gt;</code>)</li>
</ul>
</li>
<li><strong><a href="Day01-15/11.ErrorHandling/README.html">Day 11: Error Handling (é”™è¯¯å¤„ç†)</a></strong>
<ul>
<li><code>panic!</code> ä¸ä¸å¯æ¢å¤é”™è¯¯</li>
<li><code>Result</code> ä¸å¯æ¢å¤é”™è¯¯</li>
<li>é”™è¯¯ä¼ æ’­ä¸ <code>?</code> è¿ç®—ç¬¦</li>
</ul>
</li>
<li><strong><a href="Day01-15/12.Generics/README.html">Day 12: Generics (æ³›å‹)</a></strong>
<ul>
<li>å‡½æ•°ã€ç»“æ„ä½“ã€æšä¸¾ä¸­çš„æ³›å‹</li>
<li>å•æ€åŒ–</li>
</ul>
</li>
<li><strong><a href="Day01-15/13.Traits/README.html">Day 13: Traits (ç‰¹å¾)</a></strong>
<ul>
<li>å®šä¹‰ä¸å®ç° Trait</li>
<li>Trait Bounds</li>
<li><code>impl Trait</code></li>
</ul>
</li>
<li><strong><a href="Day01-15/14.Lifetimes/README.html">Day 14: Lifetimes (ç”Ÿå‘½å‘¨æœŸ)</a></strong>
<ul>
<li>ç”Ÿå‘½å‘¨æœŸæ³¨è§£è¯­æ³•</li>
<li>ç”Ÿå‘½å‘¨æœŸçœç•¥è§„åˆ™</li>
<li>é™æ€ç”Ÿå‘½å‘¨æœŸ</li>
</ul>
</li>
<li><strong><a href="Day01-15/15.Testing/README.html">Day 15: Testing (è‡ªåŠ¨åŒ–æµ‹è¯•)</a></strong>
<ul>
<li>ç¼–å†™å•å…ƒæµ‹è¯•</li>
<li><code>assert!</code> å®</li>
<li>è¿è¡Œæµ‹è¯•</li>
<li>é›†æˆæµ‹è¯•</li>
</ul>
</li>
</ul>
<h2 id="å­¦ä¹ å»ºè®®"><a class="header" href="#å­¦ä¹ å»ºè®®">å­¦ä¹ å»ºè®®</a></h2>
<p>å»ºè®®æŒ‰ç…§é¡ºåºå­¦ä¹ ï¼Œæ¯ä¸€å¤©çš„å†…å®¹éƒ½å»ºç«‹åœ¨å‰ä¸€å¤©çš„åŸºç¡€ä¸Šã€‚å¯¹äºæ¯ä¸ªä¸»é¢˜ï¼Œä¸ä»…è¦é˜…è¯»æ–‡æ¡£ï¼Œè¿˜è¦äº²æ‰‹ç¼–å†™å¹¶è¿è¡Œä»£ç ã€‚</p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-01-åˆè¯†-rust-hello-rust"><a class="header" href="#day-01-åˆè¯†-rust-hello-rust">Day 01: åˆè¯† Rust (Hello Rust)</a></h1>
<p align="center">
  <img src="https://img.shields.io/badge/Rust-1.75%2B-orange?logo=rust&amp;style=flat-square" alt="Rust Version">
  <a href="https://doc.rust-lang.org/book/"><img src="https://img.shields.io/badge/Reference-The%20Book-blue?logo=bookstack&amp;style=flat-square" alt="The Book"></a>
  <a href="https://github.com/rust-lang/rust"><img src="https://img.shields.io/badge/Stars-80k%2B-yellow?logo=github&amp;style=flat-square" alt="GitHub Stars"></a>
</p>

<p>æ¬¢è¿æ¥åˆ° <strong>Rust 100 Days</strong> çš„ç¬¬ä¸€å¤©ï¼ä»Šå¤©æˆ‘ä»¬å°†å¼€å¯ä¸€æ®µä»é›¶åˆ°ç²¾é€šçš„ç³»ç»Ÿç¼–ç¨‹ä¹‹æ—…ã€‚</p>
<p>æœ¬èŠ‚ä¸ä»…ä»…æ˜¯â€œHello Worldâ€œï¼Œæˆ‘ä»¬å°†æ·±å…¥ç†è§£ Rust çš„å·¥ç¨‹åŒ–å·¥å…·é“¾ï¼Œå»ºç«‹æ­£ç¡®çš„å¿ƒæ™ºæ¨¡å‹ï¼Œå¹¶é…ç½®ä¸€ä¸ªä¸“ä¸šçº§çš„å¼€å‘ç¯å¢ƒã€‚</p>
<hr>
<h2 id="-ç›®å½•-table-of-contents"><a class="header" href="#-ç›®å½•-table-of-contents">ğŸ“‹ ç›®å½• (Table of Contents)</a></h2>
<ol>
<li><a href="#-ä¸ºä»€ä¹ˆé€‰æ‹©-rust-why-rust">ä¸ºä»€ä¹ˆé€‰æ‹© Rust? (Why Rust?)</a></li>
<li><a href="#-æ ¸å¿ƒæ¦‚å¿µæ‰€æœ‰æƒä¸å†…å­˜å®‰å…¨-core-concepts">æ ¸å¿ƒæ¦‚å¿µï¼šæ‰€æœ‰æƒä¸å†…å­˜å®‰å…¨</a></li>
<li><a href="#-æ¶æ„é¢„è§ˆrust-å·¥å…·é“¾-toolchain">æ¶æ„é¢„è§ˆï¼šRust å·¥å…·é“¾</a></li>
<li><a href="#-ç¯å¢ƒæ­å»º-installation">ç¯å¢ƒæ­å»º (Installation)</a></li>
<li><a href="#-ç¬¬ä¸€ä¸ª-rust-é¡¹ç›®-hello-world">ç¬¬ä¸€ä¸ª Rust é¡¹ç›® (Hello World)</a></li>
<li><a href="#-ä¸“ä¸šå¼€å‘å·¥ä½œæµ-professional-workflow">ä¸“ä¸šå¼€å‘å·¥ä½œæµ (Professional Workflow)</a></li>
<li><a href="#-ç”Ÿæ€ç³»ç»Ÿä¸èµ„æº-resources">ç”Ÿæ€ç³»ç»Ÿä¸èµ„æº</a></li>
<li><a href="#-ç»ƒä¹ ä¸æ‰©å±•-exercises">ç»ƒä¹ ä¸æ‰©å±•</a></li>
</ol>
<hr>
<h2 id="-ä¸ºä»€ä¹ˆé€‰æ‹©-rust-why-rust"><a class="header" href="#-ä¸ºä»€ä¹ˆé€‰æ‹©-rust-why-rust">ğŸ¯ ä¸ºä»€ä¹ˆé€‰æ‹© Rust? (Why Rust?)</a></h2>
<p>Rust æ˜¯ä¸€é—¨èµ‹äºˆæ¯ä¸ªäººæ„å»ºå¯é ä¸”é«˜æ•ˆè½¯ä»¶èƒ½åŠ›çš„ç³»ç»Ÿç¼–ç¨‹è¯­è¨€ã€‚å®ƒè§£å†³äº†è®¡ç®—æœºç§‘å­¦ä¸­é•¿ä¹…ä»¥æ¥çš„â€œä¸å¯èƒ½ä¸‰è§’â€œï¼š<strong>å®‰å…¨</strong>ã€<strong>å¹¶å‘</strong>ä¸<strong>é€Ÿåº¦</strong>ã€‚</p>
<h3 id="è¯­è¨€ç‰¹æ€§å››è±¡é™"><a class="header" href="#è¯­è¨€ç‰¹æ€§å››è±¡é™">è¯­è¨€ç‰¹æ€§å››è±¡é™</a></h3>
<p>å¤§å¤šæ•°è¯­è¨€åªèƒ½åœ¨â€œæ§åˆ¶åŠ›â€œå’Œâ€œå®‰å…¨æ€§â€œä¹‹é—´äºŒé€‰ä¸€ï¼Œè€Œ Rust æ‰“ç ´äº†è¿™ä¸€å¸¸è§„ï¼š</p>
<pre class="mermaid">quadrantChart
    title ç¼–ç¨‹è¯­è¨€æƒè¡¡å›¾
    x-axis ä½æ§åˆ¶åŠ› (High Level) --&gt; é«˜æ§åˆ¶åŠ› (Low Level)
    y-axis ä½å®‰å…¨æ€§ (Risky) --&gt; é«˜å®‰å…¨æ€§ (Safe)
    quadrant-1 ç†æƒ³ä¹‹é€‰ (Rust)
    quadrant-2 å®‰å…¨ä½†å—é™ (Java/Go/Python)
    quadrant-3 çµæ´»ä½†å±é™© (Assembly)
    quadrant-4 å¼ºå¤§ä½†æ˜“é”™ (C/C++)
    "C/C++": [0.9, 0.2]
    "Java/Go": [0.2, 0.8]
    "Python/JS": [0.1, 0.85]
    "Rust": [0.85, 0.9]
</pre>

<ol>
<li><strong>ğŸ›¡ï¸ å†…å­˜å®‰å…¨ (Memory Safety)</strong>: ç¼–è¯‘æœŸæœç»ç©ºæŒ‡é’ˆã€æ•°æ®ç«äº‰å’Œç¼“å†²åŒºæº¢å‡ºã€‚æ—  GCï¼ˆåƒåœ¾å›æ”¶ï¼‰ï¼Œå´æ‹¥æœ‰å†…å­˜å³æ—¶å›æ”¶çš„èƒ½åŠ›ã€‚</li>
<li><strong>âš¡ é›¶æˆæœ¬æŠ½è±¡ (Zero-Cost Abstractions)</strong>: é«˜çº§è¯­æ³•ï¼ˆå¦‚è¿­ä»£å™¨ã€é—­åŒ…ï¼‰ç¼–è¯‘åä¸æ‰‹å†™åº•å±‚æ±‡ç¼–ä¸€æ ·å¿«ã€‚</li>
<li><strong>ğŸ”§ ç°ä»£å·¥å…·é“¾</strong>: æ‹¥æœ‰ä¸šç•Œé¡¶å°–çš„åŒ…ç®¡ç†å™¨ (Cargo)ã€æ–‡æ¡£ç”Ÿæˆå™¨å’Œæ ¼å¼åŒ–å·¥å…·ã€‚</li>
</ol>
<hr>
<h2 id="-æ ¸å¿ƒæ¦‚å¿µæ‰€æœ‰æƒä¸å†…å­˜å®‰å…¨-core-concepts"><a class="header" href="#-æ ¸å¿ƒæ¦‚å¿µæ‰€æœ‰æƒä¸å†…å­˜å®‰å…¨-core-concepts">ğŸ§  æ ¸å¿ƒæ¦‚å¿µï¼šæ‰€æœ‰æƒä¸å†…å­˜å®‰å…¨ (Core Concepts)</a></h2>
<p>Rust çš„æ ¸å¿ƒåœ¨äº<strong>æ‰€æœ‰æƒ (Ownership)</strong>ã€‚è¿™æ˜¯ Rust æ— éœ€åƒåœ¾å›æ”¶å°±èƒ½ä¿è¯å†…å­˜å®‰å…¨çš„å…³é”®ã€‚</p>
<ul>
<li><strong>æ‰€æœ‰æƒè§„åˆ™</strong>: æ¯ä¸ªå€¼éƒ½æœ‰ä¸€ä¸ªå˜é‡ä½œä¸ºå®ƒçš„â€œæ‰€æœ‰è€…â€œã€‚åŒä¸€æ—¶é—´åªèƒ½æœ‰ä¸€ä¸ªæ‰€æœ‰è€…ã€‚</li>
<li><strong>å€Ÿç”¨ (Borrowing)</strong>: ç±»ä¼¼ç°å®ä¸­çš„â€œå€Ÿä¸œè¥¿â€œã€‚ä½ å¯ä»¥å€Ÿç”¨æ•°æ®ï¼ˆå¼•ç”¨ï¼‰ï¼Œä½†å¿…é¡»éµå®ˆè§„åˆ™ï¼ˆè¦ä¹ˆä¸€ä¸ªå¯å˜å¼•ç”¨ï¼Œè¦ä¹ˆå¤šä¸ªä¸å¯å˜å¼•ç”¨ï¼‰ã€‚</li>
</ul>
<pre class="mermaid">graph LR
    subgraph GC ["åƒåœ¾å›æ”¶è¯­è¨€ (Java/Go)"]
        Alloc1[ç”³è¯·å†…å­˜] --&gt; Run1[è¿è¡Œæ—¶æ‰«æ] --&gt; Free1[GCå›æ”¶]
        style GC fill:#f9f,stroke:#333,stroke-dasharray: 5 5
    end
    
    subgraph Manual ["æ‰‹åŠ¨ç®¡ç† (C/C++)"]
        Alloc2[malloc] --&gt; Use[ä½¿ç”¨] --&gt; Free2[free?]
        Free2 --å¿˜è®°?--&gt; Leak[å†…å­˜æ³„æ¼]
        Free2 --å¤ªæ—©?--&gt; Dangling[æ‚¬ç©ºæŒ‡é’ˆ]
        style Manual fill:#fcc,stroke:#333,stroke-dasharray: 5 5
    end
    
    subgraph Rust ["Rust æ¨¡å‹"]
        Alloc3[ç»‘å®šå˜é‡] --&gt; Scope[ä½œç”¨åŸŸç»“æŸ] --&gt; AutoFree[ç¼–è¯‘å™¨æ’å…¥ Drop]
        style Rust fill:#cfc,stroke:#333
    end
</pre>

<hr>
<h2 id="-æ¶æ„é¢„è§ˆrust-å·¥å…·é“¾-toolchain"><a class="header" href="#-æ¶æ„é¢„è§ˆrust-å·¥å…·é“¾-toolchain">ğŸ—ï¸ æ¶æ„é¢„è§ˆï¼šRust å·¥å…·é“¾ (Toolchain)</a></h2>
<p>ä½ æ˜¯é€šè¿‡ <code>rustup</code> æ¥ç®¡ç†æ•´ä¸ª Rust å®‡å®™çš„ã€‚</p>
<pre class="mermaid">classDiagram
    class Rustup {
        +install()
        +update()
        +target_add()
        +component_add()
        +ç®¡ç†ç‰ˆæœ¬(Stable/Nightly)
    }
    class Cargo {
        +new()
        +build()
        +run()
        +test()
        åŒ…ç®¡ç†ä¸æ„å»ºå·¥å…·
    }
    class Rustc {
        +compile()
        åº•å±‚ç¼–è¯‘å™¨
    }
    
    Rustup &lt;|-- Cargo : å®‰è£…ç®¡ç†
    Rustup &lt;|-- Rustc : å®‰è£…ç®¡ç†
    Cargo ..&gt; Rustc : è°ƒç”¨
</pre>

<div class="table-wrapper">
<table>
<thead>
<tr><th style="text-align: left">ç»„ä»¶</th><th style="text-align: left">æè¿°</th><th style="text-align: left">ç±»æ¯”</th></tr>
</thead>
<tbody>
<tr><td style="text-align: left"><strong><code>rustup</code></strong></td><td style="text-align: left">å®‰è£…å™¨ã€ç‰ˆæœ¬ç®¡ç†å™¨</td><td style="text-align: left"><code>nvm</code> / <code>pyenv</code></td></tr>
<tr><td style="text-align: left"><strong><code>cargo</code></strong></td><td style="text-align: left">æ„å»ºç³»ç»Ÿã€åŒ…ç®¡ç†å™¨ã€æµ‹è¯•è¿è¡Œå™¨</td><td style="text-align: left"><code>npm</code> + <code>webpack</code> + <code>mocha</code></td></tr>
<tr><td style="text-align: left"><strong><code>rustc</code></strong></td><td style="text-align: left">Rust ç¼–è¯‘å™¨</td><td style="text-align: left"><code>gcc</code> / <code>clang</code> / <code>javac</code></td></tr>
<tr><td style="text-align: left"><strong><code>std</code></strong></td><td style="text-align: left">æ ‡å‡†åº“</td><td style="text-align: left">Python Standard Lib</td></tr>
</tbody>
</table>
</div>
<hr>
<h2 id="-ç¯å¢ƒæ­å»º-installation"><a class="header" href="#-ç¯å¢ƒæ­å»º-installation">ğŸ’» ç¯å¢ƒæ­å»º (Installation)</a></h2>
<h3 id="1-å®‰è£…-rust-1"><a class="header" href="#1-å®‰è£…-rust-1">1. å®‰è£… Rust</a></h3>
<p><strong>Unix (macOS / Linux):</strong></p>
<pre><code class="language-bash">curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
</code></pre>
<p><strong>Windows:</strong></p>
<ol>
<li>ä¸‹è½½ <a href="https://win.rustup.rs/">rustup-init.exe</a>ã€‚</li>
<li>å®‰è£… <strong>Visual Studio 2022</strong> çš„ â€œDesktop development with C++â€ å·¥ä½œè´Ÿè½½ï¼ˆè¿™æ˜¯å› ä¸º Windows ç‰ˆæœ¬çš„ Rust ä¾èµ– MSVCé“¾æ¥å™¨ï¼‰ã€‚</li>
</ol>
<h3 id="2é…ç½®é•œåƒ-å¯é€‰æ¨èå›½å†…ç”¨æˆ·"><a class="header" href="#2é…ç½®é•œåƒ-å¯é€‰æ¨èå›½å†…ç”¨æˆ·">2.é…ç½®é•œåƒ (å¯é€‰ï¼Œæ¨èå›½å†…ç”¨æˆ·)</a></h3>
<p>ä¸ºäº†åŠ é€Ÿä¸‹è½½ï¼Œé…ç½®å­—èŠ‚è·³åŠ¨æˆ–æ¸…åæºï¼š
åœ¨ <code>~/.cargo/config.toml</code> (Linux/Mac) æˆ– <code>%USERPROFILE%\.cargo\config.toml</code> (Windows) ä¸­æ·»åŠ ï¼š</p>
<pre><code class="language-toml">[source.crates-io]
replace-with = 'rsproxy'

[source.rsproxy]
registry = "https://rsproxy.cn/crates.io-index"
[source.rsproxy-sparse]
registry = "sparse+https://rsproxy.cn/index/"

[registries.crates-io]
protocol = "sparse"
</code></pre>
<h3 id="3-éªŒè¯å®‰è£…"><a class="header" href="#3-éªŒè¯å®‰è£…">3. éªŒè¯å®‰è£…</a></h3>
<pre><code class="language-bash">rustc --version
# rustc 1.75.0 (...)
cargo --version
# cargo 1.75.0 (...)
</code></pre>
<hr>
<h2 id="-ç¬¬ä¸€ä¸ª-rust-é¡¹ç›®-hello-world"><a class="header" href="#-ç¬¬ä¸€ä¸ª-rust-é¡¹ç›®-hello-world">ğŸš€ ç¬¬ä¸€ä¸ª Rust é¡¹ç›® (Hello World)</a></h2>
<p>æˆ‘ä»¬ä¸ç›´æ¥è°ƒç”¨ <code>rustc</code>ï¼Œè€Œæ˜¯å§‹ç»ˆä½¿ç”¨ <code>cargo</code>ã€‚</p>
<h3 id="åˆ›å»ºä¸è¿è¡Œ"><a class="header" href="#åˆ›å»ºä¸è¿è¡Œ">åˆ›å»ºä¸è¿è¡Œ</a></h3>
<pre><code class="language-bash">cargo new hello_world
cd hello_world
cargo run
</code></pre>
<h3 id="é¡¹ç›®ç»“æ„å‰–æ"><a class="header" href="#é¡¹ç›®ç»“æ„å‰–æ">é¡¹ç›®ç»“æ„å‰–æ</a></h3>
<p>Cargo åˆ›å»ºäº†ä¸€ä¸ªæ ‡å‡†çš„å·¥ç¨‹ç»“æ„ï¼š</p>
<pre class="mermaid">graph TD
    Project[hello_world/]
    Config[Cargo.toml ğŸ“„&lt;br&gt;(é¡¹ç›®é…ç½®)]
    Lock[Cargo.lock ğŸ”’&lt;br&gt;(ä¾èµ–ç‰ˆæœ¬é”å®š)]
    Src[src/ ğŸ“‚]
    Main[main.rs ğŸ¦€&lt;br&gt;(æºç å…¥å£)]
    Target[target/ ğŸ—‘ï¸&lt;br&gt;(ç¼–è¯‘äº§ç‰©)]
    
    Project --&gt; Config
    Project --&gt; Lock
    Project --&gt; Src
    Project --&gt; Target
    Src --&gt; Main
    
    style Lock fill:#eee,stroke:#999
    style Target fill:#fee,stroke:#f99
</pre>

<ul>
<li><strong>Cargo.toml</strong>: æ¸…å•æ–‡ä»¶ã€‚å®šä¹‰ä¾èµ– (dependencies)ã€‚</li>
<li><strong>Cargo.lock</strong>: <strong>ä¸è¦æ‰‹åŠ¨ä¿®æ”¹ï¼</strong> å®ƒç¡®ä¿ä½ çš„åŒäº‹å’ŒæœåŠ¡å™¨ä½¿ç”¨å®Œå…¨ä¸€è‡´çš„ä¾èµ–ç‰ˆæœ¬ã€‚</li>
<li><strong>target/</strong>: å¾ˆå¤§ï¼ŒåŒ…å«æ„å»ºäº§ç‰©ã€‚åº”åŠ å…¥ <code>.gitignore</code>ã€‚</li>
</ul>
<h3 id="ä»£ç è§£è¯»-mainrs"><a class="header" href="#ä»£ç è§£è¯»-mainrs">ä»£ç è§£è¯» (<code>main.rs</code>)</a></h3>
<pre class="playground"><code class="language-rust">fn main() {
    println!("Hello, World!");
}</code></pre>
<ul>
<li><code>fn</code>: å®šä¹‰å‡½æ•° (Function)ã€‚</li>
<li><code>main</code>: ç¨‹åºå…¥å£ã€‚</li>
<li><code>println!</code>: æ³¨æ„é‚£ä¸ª <strong>!</strong>ã€‚è¿™ä»£è¡¨å®ƒæ˜¯ä¸€ä¸ª <strong>å® (Macro)</strong>ï¼Œè€Œä¸æ˜¯æ™®é€šå‡½æ•°ã€‚å®åœ¨ç¼–è¯‘æ—¶å±•å¼€ä»£ç ï¼Œæ›´åŠ å¼ºå¤§çµæ´»ã€‚</li>
</ul>
<hr>
<h2 id="-ä¸“ä¸šå¼€å‘å·¥ä½œæµ-professional-workflow"><a class="header" href="#-ä¸“ä¸šå¼€å‘å·¥ä½œæµ-professional-workflow">âš™ï¸ ä¸“ä¸šå¼€å‘å·¥ä½œæµ (Professional Workflow)</a></h2>
<p>ä½œä¸ºä¸€ä¸ªä¸“ä¸šçš„ Rustaceanï¼Œä½ çš„æ—¥å¸¸ä¸ä»…ä»…æ˜¯ <code>build</code>ã€‚Rust æä¾›äº†å…¨å¥—å†…ç½®å·¥å…·ã€‚</p>
<pre class="mermaid">sequenceDiagram
    participant Dev as å¼€å‘è€…
    participant Code as æºä»£ç 
    participant Fmt as Format ğŸ¨
    participant Clip as Clippy ğŸ§
    participant Comp as Compiler âš™ï¸
    
    Dev-&gt;&gt;Code: ç¼–å†™ä»£ç 
    Dev-&gt;&gt;Fmt: cargo fmt
    Fmt--&gt;&gt;Code: è‡ªåŠ¨æ ¼å¼åŒ–
    Dev-&gt;&gt;Clip: cargo clippy
    Clip--&gt;&gt;Dev: æå‡ºä¿®æ”¹å»ºè®® (Lint)
    Dev-&gt;&gt;Comp: cargo check
    Comp--&gt;&gt;Dev: å¿«é€Ÿæ£€æŸ¥é”™è¯¯
    Dev-&gt;&gt;Comp: cargo test
    Comp--&gt;&gt;Dev: è¿è¡Œå•å…ƒæµ‹è¯•
</pre>

<h3 id="å¸¸ç”¨å‘½ä»¤æ¸…å•"><a class="header" href="#å¸¸ç”¨å‘½ä»¤æ¸…å•">å¸¸ç”¨å‘½ä»¤æ¸…å•</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th style="text-align: left">å‘½ä»¤</th><th style="text-align: left">ä½œç”¨</th><th style="text-align: left">åœºæ™¯</th></tr>
</thead>
<tbody>
<tr><td style="text-align: left"><code>cargo new &lt;name&gt;</code></td><td style="text-align: left">åˆ›å»ºæ–°é¡¹ç›®</td><td style="text-align: left">å¼€å§‹æ–°å·¥ä½œ</td></tr>
<tr><td style="text-align: left"><code>cargo check</code></td><td style="text-align: left"><strong>æœ€å¸¸ç”¨</strong>ã€‚å¿«é€Ÿè¯­æ³•æ£€æŸ¥ï¼Œä¸ç”ŸæˆäºŒè¿›åˆ¶</td><td style="text-align: left">ç¼–ç è¿‡ç¨‹ä¸­é¢‘ç¹è¿è¡Œ (å¿«!)</td></tr>
<tr><td style="text-align: left"><code>cargo build</code></td><td style="text-align: left">ç¼–è¯‘ (Debugæ¨¡å¼)</td><td style="text-align: left">è°ƒè¯•è¿è¡Œ</td></tr>
<tr><td style="text-align: left"><code>cargo build --release</code></td><td style="text-align: left">ç¼–è¯‘ (Releaseæ¨¡å¼)</td><td style="text-align: left">ç”Ÿäº§ç¯å¢ƒå‘å¸ƒ (å¼€å¯æœ€é«˜ä¼˜åŒ–)</td></tr>
<tr><td style="text-align: left"><code>cargo run</code></td><td style="text-align: left">ç¼–è¯‘å¹¶è¿è¡Œ</td><td style="text-align: left">æœ¬åœ°æµ‹è¯•</td></tr>
<tr><td style="text-align: left"><code>cargo fmt</code></td><td style="text-align: left">æ ¼å¼åŒ–ä»£ç </td><td style="text-align: left">ä¿æŒä»£ç é£æ ¼ç»Ÿä¸€</td></tr>
<tr><td style="text-align: left"><code>cargo clippy</code></td><td style="text-align: left">linter å·¥å…·</td><td style="text-align: left">è·å–ä¼˜åŒ–ä»£ç çš„å»ºè®®</td></tr>
<tr><td style="text-align: left"><code>cargo doc --open</code></td><td style="text-align: left">ç”Ÿæˆå¹¶æ‰“å¼€æ–‡æ¡£</td><td style="text-align: left">æŸ¥çœ‹ä¾èµ–åº“çš„æ–‡æ¡£</td></tr>
</tbody>
</table>
</div>
<blockquote>
<p><strong>ğŸ’¡ æç¤º</strong>: <code>cargo check</code> æ¯” <code>cargo build</code> å¿«å¾—å¤šã€‚å…»æˆéšæ‰‹ <code>check</code> çš„ä¹ æƒ¯ã€‚</p>
</blockquote>
<hr>
<h2 id="-ç”Ÿæ€ç³»ç»Ÿä¸èµ„æº-resources"><a class="header" href="#-ç”Ÿæ€ç³»ç»Ÿä¸èµ„æº-resources">ğŸŒ ç”Ÿæ€ç³»ç»Ÿä¸èµ„æº (Resources)</a></h2>
<ul>
<li><strong><a href="https://crates.io/">Crates.io</a></strong>: Rust çš„ NPM/PyPIã€‚å®˜æ–¹åŒ…ä»“åº“ã€‚</li>
<li><strong><a href="https://docs.rs/">Docs.rs</a></strong>: æ‰€æœ‰ Crates çš„æ–‡æ¡£ä¸­å¿ƒã€‚</li>
<li><strong><a href="https://doc.rust-lang.org/std/">Rust Standard Library</a></strong>: æ ‡å‡†åº“æ–‡æ¡£ï¼Œä½ çš„çº¢å®ä¹¦ã€‚</li>
<li><strong><a href="https://doc.rust-lang.org/book/">The Rust Programming Language</a></strong>: å®˜æ–¹æ•™æ (â€œThe Bookâ€)ã€‚</li>
</ul>
<h3 id="æ¨è-vs-code-æ’ä»¶"><a class="header" href="#æ¨è-vs-code-æ’ä»¶">æ¨è VS Code æ’ä»¶</a></h3>
<ol>
<li><strong>rust-analyzer</strong>: å®˜æ–¹æ ¸å¿ƒæ’ä»¶ï¼Œæä¾›æå¼ºçš„ä»£ç è¡¥å…¨å’Œåˆ†æã€‚</li>
<li><strong>CodeLLDB</strong> (macOS/Linux) / <strong>C/C++</strong> (Windows):ç”¨äºè°ƒè¯•ã€‚</li>
<li><strong>Even Better TOML</strong>: æ”¯æŒç¼–è¾‘ <code>Cargo.toml</code>ã€‚</li>
<li><strong>Crates</strong>: æ˜¾ç¤ºä¾èµ–é¡¹çš„æœ€æ–°ç‰ˆæœ¬ã€‚</li>
</ol>
<hr>
<h2 id="-ç»ƒä¹ ä¸æ‰©å±•-exercises"><a class="header" href="#-ç»ƒä¹ ä¸æ‰©å±•-exercises">ğŸ‹ï¸ ç»ƒä¹ ä¸æ‰©å±• (Exercises)</a></h2>
<p>å…‰çœ‹ä¸ç»ƒå‡æŠŠå¼ã€‚è¯·å®Œæˆä»¥ä¸‹ç»ƒä¹ ï¼š</p>
<ol>
<li><strong>ç¯å¢ƒä½“æ£€</strong>: è¿è¡Œ <code>cargo fmt</code> å’Œ <code>cargo clippy</code> åœ¨ä½ çš„ Hello World é¡¹ç›®ä¸Šï¼Œçœ‹çœ‹ä¼šå‘ç”Ÿä»€ä¹ˆã€‚</li>
<li><strong>é…ç½®å°é²œ</strong>: ä¿®æ”¹ <code>Cargo.toml</code>ï¼Œæ·»åŠ ä¸€ä¸ªä¾èµ–ï¼ˆä¾‹å¦‚ <code>ferris-says = "0.2"</code>ï¼‰ï¼Œç„¶ååœ¨ <code>main.rs</code> ä¸­ä½¿ç”¨å®ƒã€‚</li>
<li><strong>æ–‡æ¡£æ¢ç´¢</strong>: è¿è¡Œ <code>cargo doc --open</code> æŸ¥çœ‹è‡ªåŠ¨ç”Ÿæˆçš„æ–‡æ¡£ã€‚</li>
</ol>
<p>ğŸ‘‰ <strong><a href="Day01-15/01.Introduction/exercises/README.html">ç‚¹å‡»è¿™é‡Œè®¿é—®è¯¦ç»†ç»ƒä¹ é¢˜ç›®å½•</a></strong></p>
<hr>
<h2 id="-ä¸‹ä¸€æ­¥"><a class="header" href="#-ä¸‹ä¸€æ­¥">â­ï¸ ä¸‹ä¸€æ­¥</a></h2>
<p>ä¸€æ—¦ä½ çš„ç¯å¢ƒå‡†å¤‡å°±ç»ªï¼Œæˆ‘ä»¬å°±å¯ä»¥å¼€å§‹çœŸæ­£çš„ç¼–ç¨‹äº†ã€‚ä¸‹ä¸€ç« æˆ‘ä»¬å°†å­¦ä¹  Rust æœ€åŸºç¡€çš„æ„å»ºå—ã€‚</p>
<p><a href="Day01-15/02.VariablesAndTypes/README.html"><strong>Day 02: å˜é‡ä¸æ•°æ®ç±»å‹ (Variables &amp; Types)</strong></a></p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-02-å˜é‡ä¸æ•°æ®ç±»å‹-variables--types"><a class="header" href="#day-02-å˜é‡ä¸æ•°æ®ç±»å‹-variables--types">Day 02: å˜é‡ä¸æ•°æ®ç±»å‹ (Variables &amp; Types)</a></h1>
<p>æ¬¢è¿æ¥åˆ° <strong>Rust 100 Days</strong> çš„ç¬¬äºŒå¤©ï¼ä»Šå¤©æˆ‘ä»¬å°†æ¢è®¨ Rust çš„â€œæ³•å¾‹ä¸ç§©åºâ€œï¼š<strong>ä¸¥æ ¼çš„ç±»å‹ç³»ç»Ÿ</strong>ä¸<strong>æ‰€æœ‰æƒè§„åˆ™çš„é›å½¢</strong>ã€‚</p>
<p>åœ¨ Rust ä¸­ï¼Œå˜é‡ä¸ä»…ä»…æ˜¯å­˜å‚¨æ•°æ®çš„å®¹å™¨ï¼Œå®ƒä»¬è¿˜æ‰¿è½½ç€å…³äºâ€œå¯å˜æ€§â€œå’Œâ€œç”Ÿå‘½å‘¨æœŸâ€œçš„å¥‘çº¦ã€‚</p>
<hr>
<h2 id="-ç›®å½•-table-of-contents-1"><a class="header" href="#-ç›®å½•-table-of-contents-1">ğŸ“‹ ç›®å½• (Table of Contents)</a></h2>
<ol>
<li><a href="#-æ ¸å¿ƒå“²å­¦é»˜è®¤ä¸å¯å˜-immutability">æ ¸å¿ƒå“²å­¦ï¼šé»˜è®¤ä¸å¯å˜ (Immutability)</a></li>
<li><a href="#-å˜é‡çš„è‰ºæœ¯å¯å˜æ€§ä¸éšè—-mutability--shadowing">å˜é‡çš„è‰ºæœ¯ï¼šå¯å˜æ€§ä¸éšè— (Mutability &amp; Shadowing)</a></li>
<li><a href="#-rust-ç±»å‹ç³»ç»Ÿå…¨æ™¯å›¾-type-system">Rust ç±»å‹ç³»ç»Ÿå…¨æ™¯å›¾ (Type System)</a></li>
<li><a href="#-åŸºç¡€ç±»å‹è¯¦è§£-primitives">åŸºç¡€ç±»å‹è¯¦è§£ (Primitives)</a></li>
<li><a href="#-å¤åˆç±»å‹è¯¦è§£-compound-types">å¤åˆç±»å‹è¯¦è§£ (Compound Types)</a></li>
<li><a href="#-ä¸“ä¸šç¼–ç ä¹ æƒ¯-professional-habits">ä¸“ä¸šç¼–ç ä¹ æƒ¯ (Professional Habits)</a></li>
<li><a href="#-ç»ƒä¹ ä¸æ‰©å±•-exercises-1">ç»ƒä¹ ä¸æ‰©å±•</a></li>
</ol>
<hr>
<h2 id="-æ ¸å¿ƒå“²å­¦é»˜è®¤ä¸å¯å˜-immutability"><a class="header" href="#-æ ¸å¿ƒå“²å­¦é»˜è®¤ä¸å¯å˜-immutability">ï¿½ï¸ æ ¸å¿ƒå“²å­¦ï¼šé»˜è®¤ä¸å¯å˜ (Immutability)</a></h2>
<p>åœ¨å…¶ä»–è¯­è¨€ä¸­ï¼Œå˜é‡å¾€å¾€é»˜è®¤æ˜¯å¯å˜çš„ï¼ˆå¦‚ JS çš„ <code>var/let</code>, Python, C++ï¼‰ã€‚ä½†åœ¨ Rust ä¸­ï¼Œå˜é‡<strong>é»˜è®¤ä¸å¯å˜</strong>ã€‚</p>
<h3 id="ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡"><a class="header" href="#ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡">ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡ï¼Ÿ</a></h3>
<ol>
<li><strong>å®‰å…¨æ€§ (Safety)</strong>: å¦‚æœä¸€ä¸ªå€¼ä¸å¯å˜ï¼Œä½ å°±æ°¸è¿œä¸ç”¨æ‹…å¿ƒå®ƒåœ¨ä½ ä¸æ³¨æ„çš„æ—¶å€™è¢«ä¿®æ”¹äº†ã€‚</li>
<li><strong>å¹¶å‘ (Concurrency)</strong>: å¤šçº¿ç¨‹åŒæ—¶è¯»å–ä¸å¯å˜æ•°æ®æ˜¯ç»å¯¹å®‰å…¨çš„ï¼Œä¸éœ€è¦åŠ é”ã€‚</li>
<li><strong>ç¼–è¯‘å™¨ä¼˜åŒ–</strong>: ç¼–è¯‘å™¨å¯ä»¥å¯¹ä¸å¯å˜æ•°æ®åšæ›´å¤šä¼˜åŒ–ã€‚</li>
</ol>
<pre class="mermaid">graph TD
    Start([å¼€å§‹å®šä¹‰å˜é‡]) --&gt; IsChange{éœ€è¦ä¿®æ”¹å€¼å—?}
    IsChange -- No --&gt; Let[ä½¿ç”¨ let x = 5&lt;br&gt;(æ¨è, é»˜è®¤å®‰å…¨)]
    IsChange -- Yes --&gt; Mut[ä½¿ç”¨ let mut x = 5&lt;br&gt;(æ˜¾å¼å£°æ˜æ„å›¾)]
    
    style Let fill:#cfc,stroke:#333
    style Mut fill:#fcc,stroke:#333
</pre>

<hr>
<h2 id="-å˜é‡çš„è‰ºæœ¯å¯å˜æ€§ä¸éšè—-mutability--shadowing"><a class="header" href="#-å˜é‡çš„è‰ºæœ¯å¯å˜æ€§ä¸éšè—-mutability--shadowing">ğŸ¨ å˜é‡çš„è‰ºæœ¯ï¼šå¯å˜æ€§ä¸éšè— (Mutability &amp; Shadowing)</a></h2>
<h3 id="1-å¯å˜å˜é‡-mut"><a class="header" href="#1-å¯å˜å˜é‡-mut">1. å¯å˜å˜é‡ (<code>mut</code>)</a></h3>
<p>å½“ä½ å¿…é¡»ä¿®æ”¹å˜é‡æ—¶ï¼Œä½¿ç”¨ <code>mut</code> å…³é”®å­—ã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let mut x = 5;
println!("The value of x is: {}", x);
x = 6; // âœ… åˆæ³•
println!("The value of x is: {}", x);
<span class="boring">}</span></code></pre>
<h3 id="2-å¸¸é‡-const"><a class="header" href="#2-å¸¸é‡-const">2. å¸¸é‡ (<code>const</code>)</a></h3>
<p>å¸¸é‡æ˜¯<strong>æ€»æ˜¯ä¸å¯å˜</strong>çš„ã€‚è¿™ä¸ <code>let</code> ä¸å¯å˜å˜é‡ä¸åŒï¼š</p>
<ul>
<li>å¿…é¡»æ ‡æ³¨ç±»å‹ã€‚</li>
<li>åªèƒ½è®¾ç½®ä¸ºå¸¸é‡è¡¨è¾¾å¼ï¼Œä¸èƒ½æ˜¯å‡½æ•°è°ƒç”¨çš„ç»“æœã€‚</li>
<li>åœ¨ç¼–è¯‘æœŸç›´æ¥æ›¿æ¢åˆ°ç”¨åˆ°å®ƒçš„åœ°æ–¹ã€‚</li>
</ul>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>const MAX_POINTS: u32 = 100_000;
<span class="boring">}</span></code></pre>
<h3 id="3-éšè—-shadowing---rust-çš„å¿æœ¯"><a class="header" href="#3-éšè—-shadowing---rust-çš„å¿æœ¯">3. éšè— (Shadowing) - Rust çš„â€œå¿æœ¯â€œ</a></h3>
<p>è¿™æ˜¯ Rust ç‰¹æœ‰çš„å¼ºå¤§ç‰¹æ€§ã€‚ä½ å¯ä»¥ä½¿ç”¨ <code>let</code> å†æ¬¡å£°æ˜åŒåå˜é‡ã€‚è¿™<strong>ä¸æ˜¯</strong>ä¿®æ”¹æ—§å˜é‡ï¼Œè€Œæ˜¯<strong>åˆ›å»ºäº†ä¸€ä¸ªæ–°å˜é‡</strong>ï¼Œå¹¶â€œé®ç›–â€œäº†æ—§çš„ã€‚</p>
<pre class="mermaid">sequenceDiagram
    participant Scope as ä½œç”¨åŸŸ
    participant Mem as å†…å­˜æ ˆ
    
    Note over Scope: let x = 5;
    Scope-&gt;&gt;Mem: å‹å…¥ x (i32: 5)
    
    Note over Scope: let x = x + 1;
    Scope-&gt;&gt;Mem: è¯»å–æ—§ x, è®¡ç®— 6&lt;br&gt;å‹å…¥æ–° x (i32: 6)&lt;br&gt;æ—§ x å˜ä¸ºä¸å¯è§
    
    Note over Scope: let x = "spaces";
    Scope-&gt;&gt;Mem: å‹å…¥æ–° x (&amp;str: "spaces")&lt;br&gt;å…è®¸æ”¹å˜ç±»å‹!
</pre>

<p><strong>Shadowing vs Mutability</strong></p>
<ul>
<li><strong>Shadowing (Let x â€¦ Let x)</strong>: åˆ›å»ºæ–°å˜é‡ï¼Œ<strong>å¯ä»¥æ”¹å˜ç±»å‹</strong>ã€‚</li>
<li><strong>Mutability (Let mut x â€¦ x = )</strong>: ä¿®æ”¹åŒä¸€å˜é‡ï¼Œ<strong>ä¸èƒ½æ”¹å˜ç±»å‹</strong>ã€‚</li>
</ul>
<hr>
<h2 id="-rust-ç±»å‹ç³»ç»Ÿå…¨æ™¯å›¾-type-system"><a class="header" href="#-rust-ç±»å‹ç³»ç»Ÿå…¨æ™¯å›¾-type-system">ğŸŒ³ Rust ç±»å‹ç³»ç»Ÿå…¨æ™¯å›¾ (Type System)</a></h2>
<p>Rust æ˜¯<strong>é™æ€å¼ºç±»å‹</strong>è¯­è¨€ã€‚ä¹Ÿå°±æ˜¯åœ¨ç¼–è¯‘æœŸå¿…é¡»çŸ¥é“æ‰€æœ‰å˜é‡çš„ç±»å‹ã€‚</p>
<pre class="mermaid">classDiagram
    class Type {
        &lt;&lt;Rust Types&gt;&gt;
    }
    class Scalar["æ ‡é‡ç±»å‹ (Scalar)"] {
        ä»£è¡¨å•ä¸€å€¼
    }
    class Compound["å¤åˆç±»å‹ (Compound)"] {
        ç»„åˆå¤šä¸ªå€¼
    }
    
    Type &lt;|-- Scalar
    Type &lt;|-- Compound
    
    Scalar &lt;|-- Integer["æ•´æ•° (i32, u8...)"]
    Scalar &lt;|-- Float["æµ®ç‚¹ (f64, f32)"]
    Scalar &lt;|-- Boolean["å¸ƒå°” (bool)"]
    Scalar &lt;|-- Char["å­—ç¬¦ (char)"]
    
    Compound &lt;|-- Tuple["å…ƒç»„ (Tuple)"]
    Compound &lt;|-- Array["æ•°ç»„ (Array)"]
</pre>

<hr>
<h2 id="-åŸºç¡€ç±»å‹è¯¦è§£-primitives"><a class="header" href="#-åŸºç¡€ç±»å‹è¯¦è§£-primitives">ğŸ§± åŸºç¡€ç±»å‹è¯¦è§£ (Primitives)</a></h2>
<h3 id="1-æ•´æ•°-integer"><a class="header" href="#1-æ•´æ•°-integer">1. æ•´æ•° (Integer)</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th style="text-align: left">é•¿åº¦</th><th style="text-align: left">æœ‰ç¬¦å· (Signed)</th><th style="text-align: left">æ— ç¬¦å· (Unsigned)</th><th style="text-align: left">åœºæ™¯</th></tr>
</thead>
<tbody>
<tr><td style="text-align: left">8-bit</td><td style="text-align: left"><code>i8</code></td><td style="text-align: left"><code>u8</code></td><td style="text-align: left">å­—èŠ‚æµ, æ–‡ä»¶ IO</td></tr>
<tr><td style="text-align: left">32-bit</td><td style="text-align: left"><code>i32</code> (<strong>é»˜è®¤</strong>)</td><td style="text-align: left"><code>u32</code></td><td style="text-align: left">ä¸€èˆ¬æ•°å­—</td></tr>
<tr><td style="text-align: left">64-bit</td><td style="text-align: left"><code>i64</code></td><td style="text-align: left"><code>u64</code></td><td style="text-align: left">å¤§æ•°</td></tr>
<tr><td style="text-align: left">Arch</td><td style="text-align: left"><code>isize</code></td><td style="text-align: left"><code>usize</code></td><td style="text-align: left">ç´¢å¼•, æŒ‡é’ˆå¤§å°</td></tr>
</tbody>
</table>
</div>
<blockquote>
<p><strong>âš ï¸ å…³äºæº¢å‡º</strong>: åœ¨ Debug æ¨¡å¼ä¸‹ï¼Œæ•´æ•°æº¢å‡ºä¼šå¯¼è‡´ç¨‹åº Panic (å´©æºƒ)ã€‚åœ¨ Release æ¨¡å¼ä¸‹ï¼ŒRust ä¼šæ‰§è¡ŒäºŒè¿›åˆ¶è¡¥ç ç¯ç»• (Wrapping) è€Œä¸æ˜¯ Panicã€‚</p>
</blockquote>
<h3 id="2-æµ®ç‚¹æ•°-floating-point"><a class="header" href="#2-æµ®ç‚¹æ•°-floating-point">2. æµ®ç‚¹æ•° (Floating-Point)</a></h3>
<ul>
<li><code>f64</code> (<strong>é»˜è®¤</strong>): åŒç²¾åº¦ï¼Œé€Ÿåº¦ä¸ f32 å‡ ä¹ä¸€æ ·ï¼Œä½†åœ¨ç°ä»£ CPU ä¸Šç²¾åº¦æ›´é«˜ã€‚</li>
<li><code>f32</code>: å•ç²¾åº¦ï¼Œç”¨äºæåº¦èŠ‚çœå†…å­˜æˆ–ç‰¹å®šå›¾å½¢è®¡ç®—ã€‚</li>
</ul>
<h3 id="3-å¸ƒå°”ä¸å­—ç¬¦"><a class="header" href="#3-å¸ƒå°”ä¸å­—ç¬¦">3. å¸ƒå°”ä¸å­—ç¬¦</a></h3>
<ul>
<li><code>bool</code>: <code>true</code> æˆ– <code>false</code>. (1 å­—èŠ‚)</li>
<li><code>char</code>: ä»£è¡¨ä¸€ä¸ª <strong>Unicode æ ‡é‡å€¼</strong>ã€‚å®ƒæ˜¯ 4 å­—èŠ‚çš„ï¼è¿™æ„å‘³ç€å®ƒå¯ä»¥å­˜å‚¨ä¸­æ–‡ã€Emoji (<code>ğŸ˜»</code>) ç­‰ã€‚<strong>æ³¨æ„ä½¿ç”¨å•å¼•å·</strong> <code>' '</code>ã€‚</li>
</ul>
<hr>
<h2 id="-å¤åˆç±»å‹è¯¦è§£-compound-types"><a class="header" href="#-å¤åˆç±»å‹è¯¦è§£-compound-types">ğŸ“¦ å¤åˆç±»å‹è¯¦è§£ (Compound Types)</a></h2>
<h3 id="1-å…ƒç»„-tuple"><a class="header" href="#1-å…ƒç»„-tuple">1. å…ƒç»„ (Tuple)</a></h3>
<p>å°†å¤šä¸ª<strong>ä¸åŒç±»å‹</strong>çš„å€¼ç»„åˆåœ¨ä¸€èµ·ã€‚é•¿åº¦å›ºå®šã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let tup: (i32, f64, u8) = (500, 6.4, 1);
let (x, y, z) = tup; // è§£æ„ (Destructuring)
let five_hundred = tup.0; // ç‚¹å·ç´¢å¼•
<span class="boring">}</span></code></pre>
<h3 id="2-æ•°ç»„-array"><a class="header" href="#2-æ•°ç»„-array">2. æ•°ç»„ (Array)</a></h3>
<p>å°†å¤šä¸ª<strong>ç›¸åŒç±»å‹</strong>çš„å€¼ç»„åˆåœ¨ä¸€èµ·ã€‚<strong>é•¿åº¦å›ºå®š</strong>ï¼Œåˆ†é…åœ¨<strong>æ ˆ (Stack)</strong> ä¸Šã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// ç±»å‹: [i32; 5] -&gt; [ç±»å‹; æœ¬æ•°]
let a = [1, 2, 3, 4, 5]; 

// åˆå§‹åŒ–è¯­æ³•ï¼š5 ä¸ª 3
let a = [3; 5]; // [3, 3, 3, 3, 3]
<span class="boring">}</span></code></pre>
<blockquote>
<p><strong>ğŸ¤” ä»€ä¹ˆæ—¶å€™ç”¨æ•°ç»„ï¼Ÿ</strong>: å½“ä½ çŸ¥é“å…ƒç´ ä¸ªæ•°ç¡®å®šä¸å˜æ—¶ï¼ˆå¦‚ä¸€å¹´ 12 ä¸ªæœˆï¼‰ã€‚å¦‚æœä½ éœ€è¦åŠ¨æ€å¢åˆ å…ƒç´ ï¼Œè¯·ä½¿ç”¨ <strong>Vector</strong> (<code>Vec&lt;T&gt;</code>)ï¼ˆåç»­ç« èŠ‚ä»‹ç»ï¼‰ã€‚</p>
</blockquote>
<h3 id="3-æ–‡æœ¬ç±»å‹-text-types---æ·±å…¥è§£æ"><a class="header" href="#3-æ–‡æœ¬ç±»å‹-text-types---æ·±å…¥è§£æ">3. æ–‡æœ¬ç±»å‹ (Text Types) - æ·±å…¥è§£æ</a></h3>
<p>Rust çš„å­—ç¬¦ä¸²å¤„ç†ä¸ C++ æˆ– Java ä¸åŒï¼Œå®ƒéå¸¸å…³æ³¨å†…å­˜å®‰å…¨å’Œç¼–ç ã€‚æœ€å¸¸è§çš„ä¸¤ç§ç±»å‹æ˜¯ <code>String</code> å’Œ <code>str</code> (é€šå¸¸ä»¥ <code>&amp;str</code> å½¢å¼å‡ºç°)ã€‚</p>
<h4 id="31-æ ¸å¿ƒåŒºåˆ«æ‰€æœ‰æƒä¸å†…å­˜å¸ƒå±€"><a class="header" href="#31-æ ¸å¿ƒåŒºåˆ«æ‰€æœ‰æƒä¸å†…å­˜å¸ƒå±€">3.1 æ ¸å¿ƒåŒºåˆ«ï¼šæ‰€æœ‰æƒä¸å†…å­˜å¸ƒå±€</a></h4>
<ul>
<li>
<p><strong>String (å­—ç¬¦ä¸²å¯¹è±¡)</strong>:</p>
<ul>
<li><strong>æœ¬è´¨</strong>: è¢«å°è£…çš„ <code>Vec&lt;u8&gt;</code>ã€‚</li>
<li><strong>ç‰¹ç‚¹</strong>: æ‹¥æœ‰æ‰€æœ‰æƒã€å¯å˜ (<code>mut</code>)ã€å †ä¸Šåˆ†é…ã€å¯åŠ¨æ€å¢é•¿ã€‚</li>
<li><strong>ç»“æ„</strong>: æ ˆä¸Šå­˜å‚¨ 3 ä¸ªå­—é•¿ï¼š<code>ptr</code> (æŒ‡é’ˆ), <code>len</code> (é•¿åº¦), <code>capacity</code> (å®¹é‡)ã€‚</li>
</ul>
</li>
<li>
<p><strong>&amp;str (å­—ç¬¦ä¸²åˆ‡ç‰‡/å¼•ç”¨)</strong>:</p>
<ul>
<li><strong>æœ¬è´¨</strong>: å¯¹ä¸€æ®µ UTF-8 æ•°æ®çš„å¼•ç”¨/è§†å›¾ã€‚</li>
<li><strong>ç‰¹ç‚¹</strong>: å€Ÿç”¨ (æ— æ‰€æœ‰æƒ)ã€ä¸å¯å˜ã€å¤§å°å›ºå®šã€‚</li>
<li><strong>ç»“æ„</strong>: æ ˆä¸Šå­˜å‚¨ 2 ä¸ªå­—é•¿ï¼š<code>ptr</code> (æŒ‡é’ˆ), <code>len</code> (é•¿åº¦)ã€‚ä¹Ÿè¢«ç§°ä¸ºâ€œèƒ–æŒ‡é’ˆâ€œ (Fat Pointer)ã€‚</li>
</ul>
</li>
</ul>
<pre class="mermaid">graph TD
    subgraph Stack
        S1[s1: String] --&gt; |ptr| H1
        S1 --&gt; |len| L1[5]
        S1 --&gt; |cap| C1[5]
        
        S2[s2: &amp;str] --&gt; |ptr| H_Part
        S2 --&gt; |len| L2[3]
    end
    
    subgraph Heap
        H1[H, e, l, l, o]
        H_Part[H, e, l] -.-&gt; H1
    end
    
    style S1 fill:#f9f,stroke:#333
    style S2 fill:#ccf,stroke:#333
</pre>

<h4 id="32-ä»€ä¹ˆæ—¶å€™ç”¨å“ªä¸ª"><a class="header" href="#32-ä»€ä¹ˆæ—¶å€™ç”¨å“ªä¸ª">3.2 ä»€ä¹ˆæ—¶å€™ç”¨å“ªä¸ªï¼Ÿ</a></h4>
<div class="table-wrapper">
<table>
<thead>
<tr><th style="text-align: left">ç‰¹æ€§</th><th style="text-align: left">String</th><th style="text-align: left">&amp;str</th></tr>
</thead>
<tbody>
<tr><td style="text-align: left"><strong>å†…å­˜ä½ç½®</strong></td><td style="text-align: left">å † (Heap) (å†…å®¹)</td><td style="text-align: left">ä»»æ„ (å †, æ ˆ, é™æ€åŒº)</td></tr>
<tr><td style="text-align: left"><strong>æ‰€æœ‰æƒ</strong></td><td style="text-align: left">æ‹¥æœ‰æ•°æ®</td><td style="text-align: left">å€Ÿç”¨æ•°æ®</td></tr>
<tr><td style="text-align: left"><strong>å¯å˜æ€§</strong></td><td style="text-align: left">å¯å˜ (éœ€ <code>mut</code>)</td><td style="text-align: left">ä¸å¯å˜</td></tr>
<tr><td style="text-align: left"><strong>å¼€é”€</strong></td><td style="text-align: left">åˆ†é…å†…å­˜ (æ…¢)</td><td style="text-align: left">é›¶æ‹·è´ (å¿«)</td></tr>
<tr><td style="text-align: left"><strong>å…¸å‹åœºæ™¯</strong></td><td style="text-align: left">å­˜å‚¨æ•°æ®, ç»“æ„ä½“æˆå‘˜, è¿”å›å€¼</td><td style="text-align: left">å‡½æ•°å‚æ•°, ä¸´æ—¶è§†å›¾</td></tr>
</tbody>
</table>
</div>
<h4 id="33-å¸¸ç”¨æ“ä½œ"><a class="header" href="#33-å¸¸ç”¨æ“ä½œ">3.3 å¸¸ç”¨æ“ä½œ</a></h4>
<p><strong>1. åˆ›å»ºä¸è½¬æ¢</strong></p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// åˆ›å»º String
let s1 = String::from("Hello");
let s2 = "World".to_string();
let s3 = String::new(); // ç©ºå­—ç¬¦ä¸²

// String -&gt; &amp;str (å€Ÿç”¨)
let slice = &amp;s1;       // è‡ªåŠ¨è§£å¼•ç”¨
let slice2 = s1.as_str();

// &amp;str -&gt; String (å¤åˆ¶/åˆ†é…)
let clone = slice.to_string();
<span class="boring">}</span></code></pre>
<p><strong>2. ä¿®æ”¹ (éœ€è¦ String + mut)</strong></p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let mut s = String::from("Hello");
s.push(' ');       // è¿½åŠ å­—ç¬¦
s.push_str("Rust"); // è¿½åŠ å­—ç¬¦ä¸²åˆ‡ç‰‡
// s ç°åœ¨æ˜¯ "Hello Rust"
<span class="boring">}</span></code></pre>
<p><strong>3. æ ¼å¼åŒ–æ‹¼æ¥</strong></p>
<p>ä½¿ç”¨ <code>format!</code> å®ä¸ä»…æ¸…æ™°ï¼Œè€Œä¸”ä¸ä¼šåƒ <code>+</code> è¿ç®—ç¬¦é‚£æ ·æ¶‰åŠå¤æ‚çš„æ‰€æœ‰æƒè½¬ç§»ã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let s1 = String::from("Tic");
let s2 = String::from("Tac");
let s3 = String::from("Toe");

let s = format!("{}-{}-{}", s1, s2, s3); 
// s -&gt; "Tic-Tac-Toe"
// s1, s2, s3 ä¾ç„¶æœ‰æ•ˆ
<span class="boring">}</span></code></pre>
<blockquote>
<p><strong>âš ï¸ UTF-8 è­¦å‘Š</strong>: Rust çš„å­—ç¬¦ä¸²æ€»æ˜¯åˆæ³•çš„ <strong>UTF-8</strong> åºåˆ—ã€‚
è¿™æ„å‘³ç€åœ¨ Rust ä¸­ï¼Œ<code>"ä½ å¥½".len()</code> æ˜¯ <strong>6</strong> (æ¯ä¸ªæ±‰å­— 3 å­—èŠ‚)ï¼Œè€Œä¸æ˜¯ 2ã€‚
<strong>åƒä¸‡ä¸è¦</strong>ç›´æ¥ç”¨ç´¢å¼•è®¿é—®å­—ç¬¦ä¸² (å¦‚ <code>s[0]</code>)ï¼Œå› ä¸ºè¿™å¯èƒ½ä¼šåˆ‡æ–­ä¸€ä¸ªå®½å­—ç¬¦å¯¼è‡´æŠ¥é”™ã€‚å¦‚æœè¦éå†å­—ç¬¦ï¼Œè¯·ä½¿ç”¨ <code>.chars()</code> æ–¹æ³•ã€‚</p>
</blockquote>
<hr>
<h2 id="-ä¸“ä¸šç¼–ç ä¹ æƒ¯-professional-habits"><a class="header" href="#-ä¸“ä¸šç¼–ç ä¹ æƒ¯-professional-habits">ğŸ§¢ ä¸“ä¸šç¼–ç ä¹ æƒ¯ (Professional Habits)</a></h2>
<ol>
<li><strong>å‘½åè§„èŒƒ</strong>:
<ul>
<li>å˜é‡ã€å‡½æ•°: <code>snake_case</code> (å¦‚ <code>user_id</code>, <code>calculate_sum</code>)</li>
<li>å¸¸é‡: <code>SCREAMING_SNAKE_CASE</code> (å¦‚ <code>MAX_RETRY</code>)</li>
<li>ç±»å‹: <code>UpperCamelCase</code> (å¦‚ <code>String</code>, <code>TcpStream</code>)</li>
</ul>
</li>
<li><strong>ç±»å‹æ³¨è§£</strong>: è™½ç„¶ç¼–è¯‘å™¨å¾ˆèªæ˜ï¼Œä½†åœ¨å®šä¹‰ç¨å¾®å¤æ‚çš„ç±»å‹æ—¶ï¼Œæ‰‹åŠ¨å†™ä¸Šç±»å‹æ³¨è§£æœ‰åŠ©äºå¯è¯»æ€§ã€‚</li>
<li><strong>æœªä½¿ç”¨å˜é‡</strong>: å¦‚æœä½ å£°æ˜äº†ä¸€ä¸ªå˜é‡ä½†è¿˜æ²¡æƒ³å¥½æ€ä¹ˆç”¨ï¼ŒRust ç¼–è¯‘å™¨ä¼šç»™è­¦å‘Šã€‚åœ¨å˜é‡åå‰åŠ  <code>_</code> (å¦‚ <code>_x</code>) å¯ä»¥æ¶ˆé™¤è­¦å‘Šã€‚</li>
<li><strong>æ•°å­—å­—é¢é‡</strong>: ä½¿ç”¨ä¸‹åˆ’çº¿å¢åŠ å¯è¯»æ€§ã€‚<code>1_000_000</code> æ¯” <code>1000000</code> æ¸…æ™°å¾—å¤šã€‚</li>
</ol>
<hr>
<h2 id="-ç»ƒä¹ ä¸æ‰©å±•-exercises-1"><a class="header" href="#-ç»ƒä¹ ä¸æ‰©å±•-exercises-1">ğŸ‹ï¸ ç»ƒä¹ ä¸æ‰©å±• (Exercises)</a></h2>
<p>åŠ¨æ‰‹æ—¶é—´ï¼</p>
<ol>
<li><strong>ç±»å‹è½¬æ¢</strong>: å°è¯•å°† <code>i32</code> è½¬æ¢ä¸º <code>i64</code>ï¼Ÿ(æç¤º: ä½¿ç”¨ <code>as</code> å…³é”®å­—)</li>
<li><strong>æ•°ç»„è¶Šç•Œ</strong>: åˆ›å»ºä¸€ä¸ªé•¿åº¦ä¸º 5 çš„æ•°ç»„ï¼Œå°è¯•è®¿é—®ç´¢å¼• 10ï¼Œè§‚å¯Ÿç¼–è¯‘æœŸå’Œè¿è¡Œæ—¶çš„è¡Œä¸ºã€‚</li>
<li><strong>Shadowing é­”æ³•</strong>: åˆ©ç”¨ Shadowing å°†ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹çš„æ•°å­— (<code>"42"</code>) è½¬æ¢ä¸ºæ•´æ•°ç±»å‹ (<code>42</code>)ã€‚</li>
</ol>
<p>ğŸ‘‰ <strong><a href="Day01-15/02.VariablesAndTypes/exercises/README.html">ç‚¹å‡»è¿™é‡Œè®¿é—®è¯¦ç»†ç»ƒä¹ é¢˜ç›®å½•</a></strong></p>
<hr>
<h2 id="-ä¸‹ä¸€æ­¥-1"><a class="header" href="#-ä¸‹ä¸€æ­¥-1">â­ï¸ ä¸‹ä¸€æ­¥</a></h2>
<p>æŒæ¡äº†æ•°æ®çš„å½¢æ€ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬è¦è®©æ•°æ®â€œåŠ¨â€œèµ·æ¥ã€‚ä¸‹ä¸€ç« ï¼Œæˆ‘ä»¬å°†å­¦ä¹ å¦‚ä½•ç»„ç»‡ä»£ç æµç¨‹ã€‚</p>
<p><a href="Day01-15/03.FunctionsAndControlFlow/README.html"><strong>Day 03: å‡½æ•°ä¸æ§åˆ¶æµ (Functions &amp; Control Flow)</strong></a></p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-03-å‡½æ•°ä¸æ§åˆ¶æµ-functions--control-flow"><a class="header" href="#day-03-å‡½æ•°ä¸æ§åˆ¶æµ-functions--control-flow">Day 03: å‡½æ•°ä¸æ§åˆ¶æµ (Functions &amp; Control Flow)</a></h1>
<p>æ¬¢è¿æ¥åˆ° <strong>Rust 100 Days</strong> çš„ç¬¬ä¸‰å¤©ï¼ä»Šå¤©æˆ‘ä»¬å°†æ„å»ºç¨‹åºçš„éª¨æ¶ä¸è‚Œè‚‰ã€‚</p>
<p>åœ¨ Rust ä¸­ï¼Œå‡½æ•°ä¸ä»…æ˜¯é€»è¾‘çš„å®¹å™¨ï¼Œæ›´æ˜¯æ‰€æœ‰æƒè½¬ç§»çš„é€šé“ï¼›è€Œæ§åˆ¶æµï¼ˆControl Flowï¼‰åˆ™å®Œå…¨åŸºäº<strong>è¡¨è¾¾å¼ (Expression)</strong> ä¼˜å…ˆçš„å“²å­¦ï¼Œè¿™ä½¿å¾— Rust çš„ä»£ç é£æ ¼ä¸å…¶ä»–è¯­è¨€ï¼ˆå¦‚ C/Javaï¼‰æœ‰ç€å¾®å¦™è€Œé‡è¦çš„åŒºåˆ«ã€‚</p>
<hr>
<h2 id="-ç›®å½•-table-of-contents-2"><a class="header" href="#-ç›®å½•-table-of-contents-2">ğŸ“‹ ç›®å½• (Table of Contents)</a></h2>
<ol>
<li><a href="#-å‡½æ•°åŸºç¡€-the-building-blocks">å‡½æ•°åŸºç¡€ (The Building Blocks)</a></li>
<li><a href="#-å…³é”®æ¦‚å¿µè¯­å¥ä¸è¡¨è¾¾å¼-statements-vs-expressions">å…³é”®æ¦‚å¿µï¼šè¯­å¥ä¸è¡¨è¾¾å¼ (Statements vs Expressions)</a></li>
<li><a href="#-æ§åˆ¶æµæ¡ä»¶ä¸å¾ªç¯-logic--loops">æ§åˆ¶æµï¼šæ¡ä»¶ä¸å¾ªç¯ (Logic &amp; Loops)</a></li>
<li><a href="#-ä¸“ä¸šç¼–ç ä¹ æƒ¯-professional-habits-1">ä¸“ä¸šç¼–ç ä¹ æƒ¯ (Professional Habits)</a></li>
<li><a href="#-ç»ƒä¹ ä¸æ‰©å±•-exercises-2">ç»ƒä¹ ä¸æ‰©å±•</a></li>
</ol>
<hr>
<h2 id="-å‡½æ•°åŸºç¡€-the-building-blocks"><a class="header" href="#-å‡½æ•°åŸºç¡€-the-building-blocks">ğŸ§± å‡½æ•°åŸºç¡€ (The Building Blocks)</a></h2>
<p>å‡½æ•°æ˜¯ Rust ä»£ç çš„ä¸€ç­‰å…¬æ°‘ï¼Œä½¿ç”¨ <code>fn</code> å…³é”®å­—å®šä¹‰ã€‚</p>
<h3 id="å‡½æ•°è§£å‰–å­¦"><a class="header" href="#å‡½æ•°è§£å‰–å­¦">å‡½æ•°è§£å‰–å­¦</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// å…³é”®å­—  å‡½æ•°å    å‚æ•°(å¿…é¡»æ ‡æ³¨ç±»å‹!)      è¿”å›ç±»å‹
fn      add_one  (x: i32)               -&gt; i32 {
    x + 1  // å‡½æ•°ä½“ (è¡¨è¾¾å¼)
}
<span class="boring">}</span></code></pre>
<ul>
<li><strong>å‚æ•°å¼ºç±»å‹</strong>: å¿…é¡»æ˜¾å¼å£°æ˜æ¯ä¸ªå‚æ•°çš„ç±»å‹ã€‚</li>
<li><strong>è¿”å›ç±»å‹</strong>: ä½¿ç”¨ <code>-&gt;</code> ç®­å¤´å£°æ˜ã€‚</li>
<li><strong>éšå¼è¿”å›</strong>: å‡½æ•°ä½“ä¸­<strong>æœ€åä¸€è¡Œ</strong>å¦‚æœæ²¡æœ‰åˆ†å·ï¼Œå…¶å€¼å³ä¸ºè¿”å›å€¼ã€‚</li>
</ul>
<blockquote>
<p><strong>âš ï¸ æ³¨æ„</strong>: Rust ä¸å…³å¿ƒå‡½æ•°å®šä¹‰åœ¨è°ƒç”¨ä¹‹å‰è¿˜æ˜¯ä¹‹åï¼Œåªè¦åœ¨åŒä¸€ä¸ªä½œç”¨åŸŸå†…ï¼ˆæˆ–å¯è§çš„æ¨¡å—ä¸­ï¼‰å³å¯ã€‚</p>
</blockquote>
<hr>
<h2 id="-å…³é”®æ¦‚å¿µè¯­å¥ä¸è¡¨è¾¾å¼-statements-vs-expressions"><a class="header" href="#-å…³é”®æ¦‚å¿µè¯­å¥ä¸è¡¨è¾¾å¼-statements-vs-expressions">âš–ï¸ å…³é”®æ¦‚å¿µï¼šè¯­å¥ä¸è¡¨è¾¾å¼ (Statements vs Expressions)</a></h2>
<p>è¿™æ˜¯ Rust æ–°æ‰‹æœ€å®¹æ˜“å›°æƒ‘ï¼Œä¹Ÿæ˜¯ Rust æœ€â€œFPâ€œï¼ˆå‡½æ•°å¼ç¼–ç¨‹ï¼‰çš„åœ°æ–¹ã€‚ç†è§£å®ƒï¼Œä½ æ‰èƒ½å†™å‡ºåœ°é“çš„ Rust ä»£ç ã€‚</p>
<ul>
<li><strong>è¯­å¥ (Statement)</strong>: æ‰§è¡Œä¸€ä¸ªæ“ä½œï¼Œ<strong>æ²¡æœ‰è¿”å›å€¼</strong>ï¼ˆæˆ–è€…è¯´è¿”å› Unit ç±»å‹ <code>()</code>ï¼‰ã€‚
<ul>
<li>æ ‡å¿—ï¼šé€šå¸¸ä»¥ <code>;</code> åˆ†å·ç»“å°¾ã€‚</li>
<li>ä¾‹å­ï¼š<code>let y = 6;</code>, <code>println!("hi");</code></li>
</ul>
</li>
<li><strong>è¡¨è¾¾å¼ (Expression)</strong>: è®¡ç®—å¹¶<strong>äº§ç”Ÿä¸€ä¸ªå€¼</strong>ã€‚
<ul>
<li>æ ‡å¿—ï¼šé€šå¸¸<strong>æ²¡æœ‰</strong> <code>;</code> åˆ†å·ç»“å°¾ã€‚</li>
<li>ä¾‹å­ï¼š<code>5 + 6</code>, <code>{ let x = 3; x + 1 }</code>, <code>if condition { 5 } else { 6 }</code></li>
</ul>
</li>
</ul>
<h3 id="å†³ç­–æµç¨‹å›¾"><a class="header" href="#å†³ç­–æµç¨‹å›¾">å†³ç­–æµç¨‹å›¾</a></h3>
<pre class="mermaid">graph TD
    Start(["ä»£ç ç‰‡æ®µ"]) --&gt; HasSemi{"ç»“å°¾æœ‰åˆ†å·å—&lt;br&gt;';' ?"}
    HasSemi -- Yes --&gt; Statement["è¯­å¥ Statement"]
    Statement --&gt; ReturnsUnit["è¿”å›å•å…ƒç±»å‹: ()"]
    HasSemi -- No --&gt; Expression["è¡¨è¾¾å¼ Expression"]
    Expression --&gt; ReturnsValue["è¿”å›è®¡ç®—å‡ºçš„å€¼"]
    
    style Statement fill:#f9f,stroke:#333
    style Expression fill:#9f9,stroke:#333
</pre>

<h3 id="ä»£ç å¯¹æ¯”"><a class="header" href="#ä»£ç å¯¹æ¯”">ä»£ç å¯¹æ¯”</a></h3>
<pre class="playground"><code class="language-rust">fn main() {
    // è¿™æ˜¯ä¸€ä¸ªè¯­å¥ï¼Œå› ä¸ºæœ‰åˆ†å·ã€‚y çš„å€¼æ˜¯ ()
    // let x = (let y = 6); // âŒ é”™è¯¯ï¼è¯­å¥ä¸è¿”å›å€¼ï¼Œä¸èƒ½èµ‹ç»™ x
    
    // è¿™æ˜¯ä¸€ä¸ªå—è¡¨è¾¾å¼ (Block Expression)
    let y = {
        let x = 3;
        x + 1 // â¬…ï¸ æ²¡æœ‰åˆ†å·ï¼è¿™æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œè¿”å› 4
    }; // åˆ†å·ç»“æŸ let è¯­å¥
    
    println!("y is: {}", y); // y is 4
}</code></pre>
<hr>
<h2 id="-æ§åˆ¶æµæ¡ä»¶ä¸å¾ªç¯-logic--loops"><a class="header" href="#-æ§åˆ¶æµæ¡ä»¶ä¸å¾ªç¯-logic--loops">ğŸ”€ æ§åˆ¶æµï¼šæ¡ä»¶ä¸å¾ªç¯ (Logic &amp; Loops)</a></h2>
<h3 id="1-if-è¡¨è¾¾å¼"><a class="header" href="#1-if-è¡¨è¾¾å¼">1. <code>if</code> è¡¨è¾¾å¼</a></h3>
<p>åœ¨ Rust ä¸­ï¼Œ<code>if</code> æ˜¯è¡¨è¾¾å¼ï¼Œè¿™æ„å‘³ç€å®ƒå¯ä»¥<strong>è¿”å›å€¼</strong>å¹¶èµ‹å€¼ç»™å˜é‡ã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let condition = true;
// if å’Œ else åˆ†æ”¯çš„è¿”å›ç±»å‹å¿…é¡»ä¸€è‡´ï¼
let number = if condition { 5 } else { 6 };
<span class="boring">}</span></code></pre>
<h3 id="2-å¾ªç¯ä½“ç³»-loop-system"><a class="header" href="#2-å¾ªç¯ä½“ç³»-loop-system">2. å¾ªç¯ä½“ç³» (Loop System)</a></h3>
<p>Rust æä¾›äº†ä¸‰ç§å¾ªç¯å·¥å…·ï¼Œåˆ†åˆ«åº”å¯¹ä¸åŒåœºæ™¯ã€‚</p>
<pre class="mermaid">graph TD
    Start(["å¼€å§‹å¾ªç¯"]) --&gt; KnownRange{"æ˜¯éå†èŒƒå›´&lt;br&gt;æˆ–é›†åˆå—?"}
    KnownRange -- Yes --&gt; For["ä½¿ç”¨ for å¾ªç¯&lt;br&gt;(æœ€å®‰å…¨/æœ€å¸¸ç”¨)"]
    KnownRange -- No --&gt; InfLoop{"éœ€è¦æ— é™å¾ªç¯&lt;br&gt;æˆ–æ‰‹åŠ¨æ§åˆ¶é€€å‡º?"}
    InfLoop -- Yes --&gt; Loop["ä½¿ç”¨ loop å¾ªç¯&lt;br&gt;(å¯è¿”å›å€¼)"]
    InfLoop -- No --&gt; While["ä½¿ç”¨ while å¾ªç¯&lt;br&gt;(åŸºäºæ¡ä»¶)"]
    
    style For fill:#cfc,stroke:#333,stroke-width:2px
</pre>

<h4 id="a-for-å¾ªç¯-æœ€æ¨è"><a class="header" href="#a-for-å¾ªç¯-æœ€æ¨è">A. <code>for</code> å¾ªç¯ (æœ€æ¨è)</a></h4>
<p>æœ€å®‰å…¨ã€æœ€ç®€æ´ã€‚ç”¨äºéå†é›†åˆæˆ– <code>Range</code>ã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// 1..4 æ˜¯ Range ç±»å‹ (1, 2, 3)
for number in 1..4 {
    println!("{}!", number);
}

// éå†æ•°ç»„
let a = [10, 20, 30];
for element in a {
    println!("Value: {}", element);
}
<span class="boring">}</span></code></pre>
<h4 id="b-loop-å¾ªç¯"><a class="header" href="#b-loop-å¾ªç¯">B. <code>loop</code> å¾ªç¯</a></h4>
<p>æ— é™å¾ªç¯ï¼Œç›´åˆ°æ˜¾å¼ <code>break</code>ã€‚å®ƒæœ‰ä¸€ä¸ªç»æŠ€ï¼š<strong><code>break</code> å¯ä»¥å¸¦è¿”å›å€¼</strong>ã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let mut counter = 0;
let result = loop {
    counter += 1;
    if counter == 10 {
        break counter * 2; // è¿”å› 20
    }
};
<span class="boring">}</span></code></pre>
<h4 id="c-while-å¾ªç¯"><a class="header" href="#c-while-å¾ªç¯">C. <code>while</code> å¾ªç¯</a></h4>
<p>å½“æ¡ä»¶ä¸ºçœŸæ—¶è¿è¡Œã€‚å®¹æ˜“å‡ºç°ç´¢å¼•è¶Šç•Œé—®é¢˜ï¼Œé€šå¸¸è¢« <code>for</code> å–ä»£ã€‚</p>
<hr>
<h2 id="-ä¸“ä¸šç¼–ç ä¹ æƒ¯-professional-habits-1"><a class="header" href="#-ä¸“ä¸šç¼–ç ä¹ æƒ¯-professional-habits-1">ğŸ§¢ ä¸“ä¸šç¼–ç ä¹ æƒ¯ (Professional Habits)</a></h2>
<ol>
<li><strong>çœç•¥åˆ†å·</strong>ï¼šåœ¨å‡½æ•°æœ«å°¾æˆ–å—æœ«å°¾è¿”å›æ—¶ï¼Œä¹ æƒ¯çœç•¥ <code>return</code> å’Œ <code>;</code>ï¼Œç›´æ¥å†™è¡¨è¾¾å¼ã€‚
<ul>
<li>âœ… <code>x + 1</code></li>
<li>âŒ <code>return x + 1;</code> (é™¤éæ˜¯æå‰è¿”å›)</li>
</ul>
</li>
<li><strong>é¿å… <code>while</code> éå†</strong>ï¼šä¸ä»…ä»£ç é•¿ï¼Œè€Œä¸”ç¼–è¯‘å™¨éš¾ä»¥ä¼˜åŒ–è¾¹ç•Œæ£€æŸ¥ã€‚å§‹ç»ˆä¼˜å…ˆä½¿ç”¨ <code>for</code>ã€‚</li>
<li><strong>Range è¯­æ³•</strong>ï¼š
<ul>
<li><code>0..5</code> : å·¦é—­å³å¼€ <code>[0, 5)</code> (åŒ…å«0, ä¸å«5)</li>
<li><code>0..=5</code>: å…¨é—­ <code>[0, 5]</code> (åŒ…å«0, åŒ…å«5)</li>
</ul>
</li>
<li><strong>Early Return</strong>: ä¸ºäº†å‡å°‘åµŒå¥—å±‚çº§ï¼Œä½¿ç”¨ <code>return;</code> æå‰é€€å‡ºå‡½æ•°ã€‚</li>
</ol>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn process(x: i32) {
    if x &lt; 0 { return; } // Early return
    // ... ä¸»é€»è¾‘
}
<span class="boring">}</span></code></pre>
<hr>
<h2 id="-ç»ƒä¹ ä¸æ‰©å±•-exercises-2"><a class="header" href="#-ç»ƒä¹ ä¸æ‰©å±•-exercises-2">ğŸ‹ï¸ ç»ƒä¹ ä¸æ‰©å±• (Exercises)</a></h2>
<p>å…‰çœ‹ä¸ç»ƒå‡æŠŠå¼ã€‚</p>
<ol>
<li><strong>æ–æ³¢é‚£å¥‘ç”Ÿæˆå™¨</strong>: ç¼–å†™ä¸€ä¸ªå‡½æ•° <code>fib(n: u32) -&gt; u32</code>ï¼Œç”Ÿæˆç¬¬ n ä¸ªæ–æ³¢é‚£å¥‘æ•°ã€‚</li>
<li><strong>æ¸©åº¦è½¬æ¢å™¨</strong>: ç¼–å†™å‡½æ•°å®ç°åæ°åº¦å’Œæ‘„æ°åº¦çš„åŒå‘è½¬æ¢ã€‚</li>
<li><strong>åœ£è¯æ­Œ</strong>: åˆ©ç”¨ <code>for</code> å¾ªç¯æ‰“å° â€œThe Twelve Days of Christmasâ€ çš„æ­Œè¯ï¼ˆåˆ©ç”¨æ•°ç»„å­˜å‚¨é‡å¤éƒ¨åˆ†ï¼‰ã€‚</li>
</ol>
<p>ğŸ‘‰ <strong><a href="Day01-15/03.FunctionsAndControlFlow/exercises/README.html">ç‚¹å‡»è¿™é‡Œè®¿é—®è¯¦ç»†ç»ƒä¹ é¢˜ç›®å½•</a></strong></p>
<hr>
<h2 id="-ä¸‹ä¸€æ­¥-2"><a class="header" href="#-ä¸‹ä¸€æ­¥-2">â­ï¸ ä¸‹ä¸€æ­¥</a></h2>
<p>ä½ ç°åœ¨å·²ç»æŒæ¡äº† Rust çš„è¯­æ³•åŸºç¡€ã€‚ä½†è¦çœŸæ­£ç†è§£ Rust çš„ç²¾é«“ï¼Œæˆ‘ä»¬éœ€è¦æŒ‘æˆ˜ Boss çº§çš„æ¦‚å¿µã€‚ä¸‹ä¸€ç« ï¼Œæˆ‘ä»¬å°†é¢å¯¹ Rust æœ€æ ¸å¿ƒã€æœ€ç‹¬ç‰¹çš„ç‰¹æ€§ã€‚</p>
<p><a href="Day01-15/04.Ownership/README.html"><strong>Day 04: æ‰€æœ‰æƒ (Ownership)</strong></a></p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-04-æ‰€æœ‰æƒ-ownership"><a class="header" href="#day-04-æ‰€æœ‰æƒ-ownership">Day 04: æ‰€æœ‰æƒ (Ownership)</a></h1>
<h2 id="-å­¦ä¹ ç›®æ ‡-1"><a class="header" href="#-å­¦ä¹ ç›®æ ‡-1">ğŸ“ å­¦ä¹ ç›®æ ‡</a></h2>
<ul>
<li>æ·±å±‚ç†è§£ Stack (æ ˆ) ä¸ Heap (å †) çš„å·¥ä½œåŸç†ä¸åŒºåˆ«</li>
<li>å½»åº•æŒæ¡æ‰€æœ‰æƒ (Ownership) ä¸‰å¤§åŸåˆ™</li>
<li>ç†è§£å†…å­˜å›æ”¶æœºåˆ¶ (Scope &amp; Drop)</li>
<li>æŒæ¡ ç§»åŠ¨ (Move)ã€å…‹éš† (Clone) ä¸ æ‹·è´ (Copy) çš„åº•å±‚è¯­ä¹‰</li>
<li>èƒ½å¤Ÿè¯†åˆ«å¹¶ä¿®å¤å¸¸è§çš„æ‰€æœ‰æƒç¼–è¯‘é”™è¯¯</li>
</ul>
<h2 id="-æ ¸å¿ƒæ¦‚å¿µä¸ºä»€ä¹ˆéœ€è¦æ‰€æœ‰æƒ"><a class="header" href="#-æ ¸å¿ƒæ¦‚å¿µä¸ºä»€ä¹ˆéœ€è¦æ‰€æœ‰æƒ">ğŸ¯ æ ¸å¿ƒæ¦‚å¿µï¼šä¸ºä»€ä¹ˆéœ€è¦æ‰€æœ‰æƒï¼Ÿ</a></h2>
<p>æ‰€æœ‰ç¨‹åºéƒ½éœ€è¦ç®¡ç†å…¶è¿è¡Œæ—¶ä½¿ç”¨çš„è®¡ç®—æœºå†…å­˜ã€‚ç°æœ‰çš„ç¼–ç¨‹è¯­è¨€ä¸»è¦é‡‡ç”¨ä¸¤ç§æ–¹å¼ï¼š</p>
<ol>
<li><strong>åƒåœ¾å›æ”¶æœºåˆ¶ (GC)</strong>ï¼šå¦‚ Java, Python, Goã€‚ç¨‹åºè¿è¡Œæ—¶ä¸æ–­å¯»æ‰¾ä¸å†ä½¿ç”¨çš„å†…å­˜å¹¶é‡Šæ”¾ã€‚
<ul>
<li><em>ä¼˜ç‚¹</em>ï¼šå¼€å‘ç®€å•ã€‚</li>
<li><em>ç¼ºç‚¹</em>ï¼šè¿è¡Œæ—¶å¼€é”€ (Stop-the-world)ï¼Œä¸å¯é¢„æµ‹çš„æ€§èƒ½ã€‚</li>
</ul>
</li>
<li><strong>æ‰‹åŠ¨åˆ†é…é‡Šæ”¾</strong>ï¼šå¦‚ C, C++ã€‚ç¨‹åºå‘˜æ˜¾å¼ç”³è¯· (<code>malloc/new</code>) å’Œé‡Šæ”¾ (<code>free/delete</code>) å†…å­˜ã€‚
<ul>
<li><em>ä¼˜ç‚¹</em>ï¼šæ§åˆ¶åŠ›å¼ºï¼Œæ€§èƒ½æé«˜ã€‚</li>
<li><em>ç¼ºç‚¹</em>ï¼šå®¹æ˜“å†…å­˜æ³„æ¼ (Memory Leak) æˆ–åŒé‡é‡Šæ”¾ (Double Free)ï¼Œå¯¼è‡´å®‰å…¨æ¼æ´ã€‚</li>
</ul>
</li>
</ol>
<p><strong>Rust é€‰æ‹©äº†ç¬¬ä¸‰ç§æ–¹å¼ï¼šæ‰€æœ‰æƒç³»ç»Ÿ</strong>ã€‚
å†…å­˜ç®¡ç†é€šè¿‡ä¸€å¥—ç¼–è¯‘å™¨åœ¨ç¼–è¯‘æ—¶æ£€æŸ¥çš„è§„åˆ™è¿›è¡Œç®¡ç†ã€‚<strong>è¿è¡Œæ—¶æ²¡æœ‰ä»»ä½•é¢å¤–å¼€é”€</strong>ã€‚</p>
<hr>
<h2 id="-é¢„å¤‡çŸ¥è¯†æ ˆ-stack-ä¸-å †-heap"><a class="header" href="#-é¢„å¤‡çŸ¥è¯†æ ˆ-stack-ä¸-å †-heap">ğŸ“š é¢„å¤‡çŸ¥è¯†ï¼šæ ˆ (Stack) ä¸ å † (Heap)</a></h2>
<p>ç†è§£æ‰€æœ‰æƒä¹‹å‰ï¼Œå¿…é¡»å…ˆç†æ¸…æ ˆä¸å †çš„åŒºåˆ«ã€‚</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th style="text-align: left">ç‰¹æ€§</th><th style="text-align: left">æ ˆ (Stack)</th><th style="text-align: left">å † (Heap)</th></tr>
</thead>
<tbody>
<tr><td style="text-align: left"><strong>ç»„ç»‡æ–¹å¼</strong></td><td style="text-align: left">åè¿›å…ˆå‡º (LIFO)ï¼Œåƒä¸€æ‘ç›˜å­</td><td style="text-align: left">åªæœ‰æŒ‡é’ˆåœ¨æ ˆä¸Šï¼Œæ•°æ®åœ¨å†…å­˜ä¸­æ— åºå­˜æ”¾ (ç±»ä¼¼é¤å…æ‰¾ç©ºæ¡Œå­)</td></tr>
<tr><td style="text-align: left"><strong>å¤§å°</strong></td><td style="text-align: left">ç¼–è¯‘æ—¶å·²çŸ¥ä¸”å›ºå®š</td><td style="text-align: left">è¿è¡Œæ—¶åŠ¨æ€å˜åŒ–</td></tr>
<tr><td style="text-align: left"><strong>é€Ÿåº¦</strong></td><td style="text-align: left"><strong>æå¿«</strong> (æ— éœ€å¯»æ‰¾ç©ºé—´ï¼Œç›´æ¥å‹æ ˆ)</td><td style="text-align: left"><strong>è¾ƒæ…¢</strong> (éœ€è¦åˆ†é…å™¨å¯»æ‰¾è¶³å¤Ÿå¤§çš„ç©ºé—´å¹¶æ ‡è®°)</td></tr>
<tr><td style="text-align: left"><strong>è®¿é—®</strong></td><td style="text-align: left">æå¿« (å±€éƒ¨æ€§å¥½)</td><td style="text-align: left">è¾ƒæ…¢ (éœ€è¦é€šè¿‡æŒ‡é’ˆè·³è½¬)</td></tr>
<tr><td style="text-align: left"><strong>å…¸å‹æ•°æ®</strong></td><td style="text-align: left"><code>i32</code>, <code>bool</code>, <code>char</code>, å›ºå®šæ•°ç»„</td><td style="text-align: left"><code>String</code>, <code>Vec</code>, å¤æ‚å¯¹è±¡</td></tr>
</tbody>
</table>
</div>
<blockquote>
<p>ğŸ’¡ <strong>Rust çš„æ€§èƒ½ç§˜å¯†</strong>ï¼šå°½é‡åœ¨æ ˆä¸Šåˆ†é…æ•°æ®ï¼Œå‡å°‘å †åˆ†é…æ˜¯ Rust é«˜æ€§èƒ½çš„å…³é”®ä¹‹ä¸€ã€‚</p>
</blockquote>
<hr>
<h2 id="-æ‰€æœ‰æƒè§„åˆ™-the-rules"><a class="header" href="#-æ‰€æœ‰æƒè§„åˆ™-the-rules">ğŸ›¡ï¸ æ‰€æœ‰æƒè§„åˆ™ (The Rules)</a></h2>
<p>è¿™æ˜¯ Rust å†…å­˜ç®¡ç†çš„å®ªæ³•ï¼Œå¿…é¡»ç‰¢è®°ï¼š</p>
<ol>
<li><strong>Rust ä¸­çš„æ¯ä¸€ä¸ªå€¼éƒ½æœ‰ä¸€ä¸ªè¢«ç§°ä¸ºå…¶ æ‰€æœ‰è€… (Owner) çš„å˜é‡ã€‚</strong></li>
<li><strong>å€¼åœ¨ä»»ä¸€æ—¶åˆ»æœ‰ä¸”åªæœ‰ä¸€ä¸ªæ‰€æœ‰è€…ã€‚</strong></li>
<li><strong>å½“æ‰€æœ‰è€… (å˜é‡) ç¦»å¼€ä½œç”¨åŸŸ (Scope) æ—¶ï¼Œè¿™ä¸ªå€¼å°†è¢«ä¸¢å¼ƒ (Dropped)ã€‚</strong></li>
</ol>
<h3 id="ä½œç”¨åŸŸ-scope-ç¤ºæ„"><a class="header" href="#ä½œç”¨åŸŸ-scope-ç¤ºæ„">ä½œç”¨åŸŸ (Scope) ç¤ºæ„</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>{                      // s åœ¨è¿™é‡Œæ— æ•ˆï¼Œå®ƒè¿˜æ²¡å£°æ˜
    let s = "hello";   // s ä»è¿™é‡Œå¼€å§‹æœ‰æ•ˆ
                       // ä½¿ç”¨ s
}                      // æ­¤ä½œç”¨åŸŸç»“æŸï¼Œs ä¸å†æœ‰æ•ˆï¼Œå†…å­˜è¢«é‡Šæ”¾
<span class="boring">}</span></code></pre>
<hr>
<h2 id="-å†…å­˜å¸ƒå±€ä¸ç§»åŠ¨è¯­ä¹‰-move"><a class="header" href="#-å†…å­˜å¸ƒå±€ä¸ç§»åŠ¨è¯­ä¹‰-move">ğŸ§  å†…å­˜å¸ƒå±€ä¸ç§»åŠ¨è¯­ä¹‰ (Move)</a></h2>
<h3 id="1-å˜é‡ç»‘å®šèƒŒåçš„å†…å­˜-string-ä¸ºä¾‹"><a class="header" href="#1-å˜é‡ç»‘å®šèƒŒåçš„å†…å­˜-string-ä¸ºä¾‹">1. å˜é‡ç»‘å®šèƒŒåçš„å†…å­˜ (String ä¸ºä¾‹)</a></h3>
<p><code>String</code> ç±»å‹ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼Œå­˜å‚¨åœ¨ <strong>æ ˆ</strong> ä¸Šï¼š</p>
<ol>
<li><code>ptr</code>: æŒ‡å‘å­˜æ”¾å­—ç¬¦ä¸²å†…å®¹çš„å †å†…å­˜æŒ‡é’ˆ</li>
<li><code>len</code>: å½“å‰å­—ç¬¦ä¸²é•¿åº¦ (å­—èŠ‚)</li>
<li><code>capacity</code>: å †å†…å­˜æ€»å®¹é‡</li>
</ol>
<p>å®é™…çš„å­—ç¬¦ä¸²å†…å®¹ (â€œhelloâ€) å­˜å‚¨åœ¨ <strong>å †</strong> ä¸Šã€‚</p>
<pre class="mermaid">graph LR
    subgraph Stack [æ ˆå¸§ Stack Frame]
        s1[s1 table]
        s1_ptr[ptr]
        s1_len[len: 5]
        s1_cap[capacity: 5]
    end
    
    subgraph Heap [å †å†…å­˜ Heap Memory]
        h_h[h]
        h_e[e]
        h_l1[l]
        h_l2[l]
        h_o[o]
    end

    s1_ptr --&gt; h_h
    h_h -.- h_e -.- h_l1 -.- h_l2 -.- h_o
</pre>

<h3 id="2-ç§»åŠ¨-move-rust-çš„é»˜è®¤è¡Œä¸º"><a class="header" href="#2-ç§»åŠ¨-move-rust-çš„é»˜è®¤è¡Œä¸º">2. ç§»åŠ¨ (Move): Rust çš„é»˜è®¤è¡Œä¸º</a></h3>
<p>å½“æˆ‘ä»¬æŠŠ <code>s1</code> èµ‹å€¼ç»™ <code>s2</code> æ—¶ï¼š</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let s1 = String::from("hello");
let s2 = s1; // âš ï¸ è¿™é‡Œå‘ç”Ÿäº†ç§»åŠ¨ (Move)
// println!("{}", s1); // âŒ é”™è¯¯ï¼s1 å·²ç»å¤±æ•ˆ
<span class="boring">}</span></code></pre>
<p><strong>å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</strong>
Rust <strong>ä¸ä¼š</strong> å¤åˆ¶å †ä¸Šçš„æ•°æ®ï¼ˆé‚£æ ·å¤ªæ…¢ï¼‰ã€‚Rust åªæ˜¯æ‹·è´äº†æ ˆä¸Šçš„å…ƒæ•°æ® (<code>ptr</code>, <code>len</code>, <code>cap</code>)ã€‚
ä¸ºäº†ä¿è¯ <strong>è§„åˆ™ #2 (åŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªæ‰€æœ‰è€…)</strong> å’Œé˜²æ­¢ <strong>Double Free (äºŒæ¬¡é‡Šæ”¾)</strong>ï¼ŒRust è§† <code>s1</code> ä¸ºæ— æ•ˆã€‚</p>
<pre class="mermaid">graph LR
    subgraph Stack
        s1[s1 (Invalidated)] -.-&gt; heap_data
        s2[s2 (New Owner)] --&gt; heap_data
    end
    
    subgraph Heap
        heap_data["h | e | l | l | o"]
    end
    
    style s1 fill:#ffcccc,stroke:#ff0000,stroke-dasharray: 5 5
    style s2 fill:#ccffcc,stroke:#00ff00
</pre>

<p>è¿™è¢«ç§°ä¸º <strong>Move (ç§»åŠ¨)</strong>ï¼Œè€Œä¸æ˜¯æµ…æ‹·è´ (Shallow Copy)ã€‚å› ä¸ºæ—§å˜é‡å¤±æ•ˆäº†ã€‚</p>
<hr>
<h2 id="-å…‹éš†-clone-ä¸-æ‹·è´-copy"><a class="header" href="#-å…‹éš†-clone-ä¸-æ‹·è´-copy">ğŸ§¬ å…‹éš† (Clone) ä¸ æ‹·è´ (Copy)</a></h2>
<h3 id="1-å…‹éš†-clone-æ·±åº¦å¤åˆ¶"><a class="header" href="#1-å…‹éš†-clone-æ·±åº¦å¤åˆ¶">1. å…‹éš† (Clone): æ·±åº¦å¤åˆ¶</a></h3>
<p>å¦‚æœä½ ç¡®å®éœ€è¦ä¸¤ä¸ªç‹¬ç«‹çš„å †æ•°æ®å‰¯æœ¬ï¼Œå¿…é¡»æ˜¾å¼è°ƒç”¨ <code>.clone()</code>ã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let s1 = String::from("hello");
let s2 = s1.clone(); // âœ… å †æ•°æ®è¢«çœŸæ­£å¤åˆ¶äº†
println!("s1 = {}, s2 = {}", s1, s2);
<span class="boring">}</span></code></pre>
<p><strong>å†…å­˜å¸ƒå±€</strong>ï¼š</p>
<pre class="mermaid">graph TD
    subgraph Stack
        s1[s1] --&gt; heap1
        s2[s2] --&gt; heap2
    end
    
    subgraph Heap
        heap1["hello"]
        heap2["hello (Copy)"]
    end
</pre>

<h3 id="2-æ‹·è´-copy-æ ˆä¸Šçš„è‡ªåŠ¨å¤åˆ¶"><a class="header" href="#2-æ‹·è´-copy-æ ˆä¸Šçš„è‡ªåŠ¨å¤åˆ¶">2. æ‹·è´ (Copy): æ ˆä¸Šçš„è‡ªåŠ¨å¤åˆ¶</a></h3>
<p>å¯¹äºåƒæ•´å‹è¿™æ ·å®Œå…¨å­˜å‚¨åœ¨æ ˆä¸Šçš„ç±»å‹ï¼Œæ²¡æœ‰â€œæ·±æµ…æ‹·è´â€ä¹‹åˆ†ã€‚å¤åˆ¶éå¸¸å¿«ï¼ŒRust é»˜è®¤å…è®¸è¿™ç§è¡Œä¸ºã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let x = 5;
let y = x; // è‡ªåŠ¨ Copy
println!("x = {}, y = {}", x, y); // âœ… x ä¾ç„¶æœ‰æ•ˆ
<span class="boring">}</span></code></pre>
<p><strong>å“ªäº›ç±»å‹æ˜¯ <code>Copy</code> çš„ï¼Ÿ</strong></p>
<ul>
<li>æ‰€æœ‰æ•´æ•°ç±»å‹ (<code>u32</code>, <code>i32</code>â€¦)</li>
<li>å¸ƒå°”ç±»å‹ (<code>bool</code>)</li>
<li>æµ®ç‚¹æ•° (<code>f64</code>)</li>
<li>å­—ç¬¦ç±»å‹ (<code>char</code>)</li>
<li>å…ƒç»„ (å½“ä¸”ä»…å½“å…¶åŒ…å«çš„ç±»å‹ä¹Ÿéƒ½æ˜¯ <code>Copy</code> çš„ï¼Œå¦‚ <code>(i32, i32)</code>)</li>
</ul>
<blockquote>
<p>âš ï¸ æ³¨æ„ï¼š<code>String</code> ä¸æ˜¯ Copy çš„ï¼Œ<code>Vec</code> ä¸æ˜¯ Copy çš„ã€‚ä»»ä½•éœ€è¦åˆ†é…å †å†…å­˜çš„ç±»å‹é€šå¸¸éƒ½ä¸æ˜¯ Copy çš„ã€‚</p>
</blockquote>
<hr>
<h2 id="-å‡½æ•°ä¸æ‰€æœ‰æƒ"><a class="header" href="#-å‡½æ•°ä¸æ‰€æœ‰æƒ">ğŸ¤ å‡½æ•°ä¸æ‰€æœ‰æƒ</a></h2>
<p>å°†å€¼ä¼ é€’ç»™å‡½æ•°ï¼Œè¯­ä¹‰ä¸èµ‹å€¼è¯­å¥ä¸€æ ·ï¼šè¦ä¹ˆæ˜¯ <strong>ç§»åŠ¨ (Move)</strong>ï¼Œè¦ä¹ˆæ˜¯ <strong>æ‹·è´ (Copy)</strong>ã€‚</p>
<pre class="playground"><code class="language-rust">fn main() {
    let s = String::from("hello");  // s è¿›å…¥ä½œç”¨åŸŸ
    
    takes_ownership(s);             // s çš„å€¼ç§»åŠ¨è¿›å…¥å‡½æ•°
                                    // ... æ‰€ä»¥è¿™é‡Œä¸å†æœ‰æ•ˆ
    // println!("{}", s);           // âŒ ç¼–è¯‘é”™è¯¯

    let x = 5;                      // x è¿›å…¥ä½œç”¨åŸŸ
    makes_copy(x);                  // x åº”è¯¥ç§»åŠ¨è¿›å…¥å‡½æ•°ï¼Œ
                                    // ä½† i32 æ˜¯ Copyï¼Œæ‰€ä»¥åé¢å¯ç»§ç»­ä½¿ç”¨ x
} // è¿™é‡Œï¼šx ç§»å‡ºä½œç”¨åŸŸã€‚s çš„å€¼å·²è¢«ç§»åŠ¨ï¼Œæ‰€ä»¥ä¸ä¼šå¯¹ s åšä»»ä½•æ“ä½œã€‚

fn takes_ownership(some_string: String) { // some_string è¿›å…¥ä½œç”¨åŸŸ
    println!("{}", some_string);
} // some_string ç§»å‡ºä½œç”¨åŸŸï¼Œ`drop` è¢«è°ƒç”¨ã€‚å†…å­˜é‡Šæ”¾ã€‚

fn makes_copy(some_integer: i32) { 
    println!("{}", some_integer);
}</code></pre>
<h3 id="è¿”å›å€¼ä¸ä½œç”¨åŸŸ"><a class="header" href="#è¿”å›å€¼ä¸ä½œç”¨åŸŸ">è¿”å›å€¼ä¸ä½œç”¨åŸŸ</a></h3>
<p>å‡½æ•°è¿”å›å€¼ä¹Ÿå¯ä»¥è½¬ç§»æ‰€æœ‰æƒã€‚</p>
<pre class="playground"><code class="language-rust">fn main() {
    let s1 = gives_ownership();         // gives_ownership å°†è¿”å›å€¼ç§»åŠ¨ç»™ s1
    let s2 = String::from("hello");     // s2 è¿›å…¥ä½œç”¨åŸŸ
    let s3 = takes_and_gives_back(s2);  // s2 è¢«ç§»åŠ¨åˆ°å‡½æ•°ï¼Œ
                                        // å‡½æ•°ä¹Ÿå°†è¿”å›å€¼ç§»åŠ¨ç»™ s3
} 

fn gives_ownership() -&gt; String {
    let some_string = String::from("yours");
    some_string // è¿”å› some_stringï¼Œå¹¶ç§»å‡ºç»™è°ƒç”¨å‡½æ•°
}

fn takes_and_gives_back(a_string: String) -&gt; String { 
    a_string  // åŸæ ·è¿”å›
}</code></pre>
<hr>
<h2 id="-å¸¸è§é™·é˜±éƒ¨åˆ†ç§»åŠ¨-partial-move"><a class="header" href="#-å¸¸è§é™·é˜±éƒ¨åˆ†ç§»åŠ¨-partial-move">ğŸš« å¸¸è§é™·é˜±ï¼šéƒ¨åˆ†ç§»åŠ¨ (Partial Move)</a></h2>
<p>åœ¨è§£æ„å¤æ‚ç±»å‹æ—¶ï¼Œè¦å°å¿ƒéƒ¨åˆ†å­—æ®µè¢«ç§»åŠ¨ã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>struct User {
    username: String,
    active: bool,
}

let user1 = User { 
    username: String::from("someone"), 
    active: true 
};

let name = user1.username; // hex: username è¢«ç§»åŠ¨èµ°äº†ï¼

// println!("{}", user1.username); // âŒ é”™è¯¯ï¼šuser1.username å·²æ— æ•ˆ
println!("{}", user1.active);      // âœ… æ­£ç¡®ï¼šactive æ˜¯ Copy ç±»å‹ (bool)
// âš ï¸ æ­¤æ—¶æ•´ä¸ª user1 å˜é‡ä¸èƒ½å†ä½œä¸ºä¸€ä¸ªæ•´ä½“è¢«ä½¿ç”¨äº†
<span class="boring">}</span></code></pre>
<hr>
<h2 id="-æœ€ä½³å®è·µ"><a class="header" href="#-æœ€ä½³å®è·µ">ğŸ’¡ æœ€ä½³å®è·µ</a></h2>
<ol>
<li><strong>æ‹¥æŠ± Move</strong>ï¼šä¸è¦å› ä¸ºå®³æ€• Move è€Œåˆ°å¤„ Cloneã€‚Move æ˜¯é«˜æ•ˆä¸”å®‰å…¨çš„ï¼Œä¹ æƒ¯å®ƒã€‚</li>
<li><strong>ç†è§£ç”Ÿå‘½å‘¨æœŸ</strong>ï¼šè„‘æµ·ä¸­è¦æ—¶åˆ»è·Ÿè¸ªå˜é‡ä½•æ—¶äº§ç”Ÿï¼Œä½•æ—¶ç¦»å¼€ä½œç”¨åŸŸã€‚</li>
<li><strong>å¼•ç”¨ä»£æ›¿æ‰€æœ‰æƒè½¬ç§»</strong>ï¼šå¦‚æœä¸æƒ³äº¤å‡ºæ‰€æœ‰æƒï¼Œè¯·ä½¿ç”¨ <strong>å¼•ç”¨ (Reference)</strong> (ä¸‹ä¸€èŠ‚å†…å®¹)ã€‚</li>
</ol>
<hr>
<h2 id="-ç»ƒä¹ é¢˜"><a class="header" href="#-ç»ƒä¹ é¢˜">ğŸ‹ï¸ ç»ƒä¹ é¢˜</a></h2>
<p>ğŸ‘‰ <strong><a href="Day01-15/04.Ownership/exercises/README.html">ç‚¹å‡»è¿™é‡ŒæŸ¥çœ‹ç»ƒä¹ é¢˜</a></strong></p>
<ol>
<li><strong>ä¿®å¤æ‰€æœ‰æƒé”™è¯¯</strong>ï¼šè¯†åˆ« Move å‘ç”Ÿçš„ä½ç½®å¹¶ä¿®å¤ã€‚</li>
<li><strong>å®ç° Clone</strong>ï¼šæ‰‹åŠ¨å…‹éš†æ•°æ®ä»¥ä¿ç•™åŸå€¼ã€‚</li>
<li><strong>Drop é¡ºåº</strong>ï¼šè§‚å¯Ÿå˜é‡ç¦»å¼€ä½œç”¨åŸŸæ—¶çš„æ¸…ç†é¡ºåºã€‚</li>
</ol>
<hr>
<h2 id="-ä¸‹ä¸€æ­¥-3"><a class="header" href="#-ä¸‹ä¸€æ­¥-3">â­ï¸ ä¸‹ä¸€æ­¥</a></h2>
<p>å¦‚æœæ¯æ¬¡å‡½æ•°è°ƒç”¨éƒ½è¦æŠŠæ‰€æœ‰æƒâ€œå€Ÿå‡ºå»â€å†â€œè¿˜å›æ¥â€å¤ªéº»çƒ¦äº†ã€‚æœ‰æ²¡æœ‰åŠæ³•è®¿é—®æ•°æ®ä½†ä¸è·å–æ‰€æœ‰æƒï¼Ÿ
ç­”æ¡ˆæ˜¯æœ‰çš„ã€‚</p>
<p>ä¸‹ä¸€èŠ‚: <a href="Day01-15/05.ReferencesAndBorrowing/README.html">Day 05: å¼•ç”¨ä¸å€Ÿç”¨ (References &amp; Borrowing)</a></p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-05-å¼•ç”¨ä¸å€Ÿç”¨-references-and-borrowing"><a class="header" href="#day-05-å¼•ç”¨ä¸å€Ÿç”¨-references-and-borrowing">Day 05: å¼•ç”¨ä¸å€Ÿç”¨ (References and Borrowing)</a></h1>
<h2 id="-å­¦ä¹ ç›®æ ‡-2"><a class="header" href="#-å­¦ä¹ ç›®æ ‡-2">ğŸ“ å­¦ä¹ ç›®æ ‡</a></h2>
<ul>
<li>ç†è§£ <strong>å¼•ç”¨ (Reference)</strong> çš„åº•å±‚å†…å­˜æ¨¡å‹</li>
<li>å½»åº•æŒæ¡ <strong>å€Ÿç”¨ (Borrowing)</strong> çš„ä¸¤å¤§æ ¸å¿ƒè§„åˆ™</li>
<li>åŒºåˆ† <strong>ä¸å¯å˜å¼•ç”¨</strong> (<code>&amp;T</code>) å’Œ <strong>å¯å˜å¼•ç”¨</strong> (<code>&amp;mut T</code>)</li>
<li>ç†è§£ <strong>æ•°æ®ç«äº‰ (Data Race)</strong> åŠå…¶é¢„é˜²æœºåˆ¶</li>
<li>è¯†åˆ« <strong>æ‚¬å‚å¼•ç”¨ (Dangling References)</strong></li>
</ul>
<h2 id="-ä¸ºä»€ä¹ˆè¦å­¦è¿™ä¸ª"><a class="header" href="#-ä¸ºä»€ä¹ˆè¦å­¦è¿™ä¸ª">ğŸ¯ ä¸ºä»€ä¹ˆè¦å­¦è¿™ä¸ªï¼Ÿ</a></h2>
<p>åœ¨ Day 04 ä¸­ï¼Œæˆ‘ä»¬å‘ç°æ‰€æœ‰æƒè½¬ç§»ï¼ˆMoveï¼‰è™½ç„¶å®‰å…¨ï¼Œä½†æœ‰æ—¶å¾ˆéº»çƒ¦ï¼š</p>
<ol>
<li><strong>éº»çƒ¦çš„å½’è¿˜</strong>ï¼šä¼ å…¥å‡½æ•°çš„å˜é‡ï¼Œå¦‚æœä¸æ‰‹åŠ¨è¿”å›ï¼Œå¤–é¢å°±ä¸èƒ½ç”¨äº†ã€‚</li>
<li><strong>æ€§èƒ½å¼€é”€</strong>ï¼šå¦‚æœä¸ºäº†ä¿ç•™åŸå€¼è€Œé¢‘ç¹ <code>Clone</code>ï¼Œæ€§èƒ½ä¼šå¾ˆå·®ã€‚</li>
</ol>
<p><strong>å¼•ç”¨ (Reference)</strong> å…è®¸æˆ‘ä»¬ä½¿ç”¨å€¼è€Œä¸è·å–å…¶æ‰€æœ‰æƒã€‚</p>
<blockquote>
<p><strong>æ¯”å–»</strong>ï¼šå¼•ç”¨å°±åƒæ˜¯â€œç§Ÿå€Ÿâ€œã€‚ä½ å€Ÿäº†ä¸€æœ¬ä¹¦ï¼ˆå¼•ç”¨ï¼‰ï¼Œä½ æœ‰æƒçœ‹ï¼ˆè¯»ï¼‰ï¼Œç”šè‡³ç»å…è®¸å¯ä»¥åšç¬”è®°ï¼ˆå†™ï¼‰ï¼Œä½†ä½ ä¸èƒ½æŠŠä¹¦å–äº†ï¼ˆMoveï¼‰æˆ–è€…çƒ§äº†ï¼ˆDropï¼‰ï¼Œå› ä¸ºä¹¦çš„ä¸»äººä¸æ˜¯ä½ ã€‚</p>
</blockquote>
<hr>
<h2 id="-æ ¸å¿ƒæ¦‚å¿µå¼•ç”¨çš„æœ¬è´¨"><a class="header" href="#-æ ¸å¿ƒæ¦‚å¿µå¼•ç”¨çš„æœ¬è´¨">ğŸ—ï¸ æ ¸å¿ƒæ¦‚å¿µï¼šå¼•ç”¨çš„æœ¬è´¨</a></h2>
<p><strong>å¼•ç”¨</strong> æ˜¯ä¸€ä¸ªåœ°å€ï¼ˆæŒ‡é’ˆï¼‰ï¼Œå®ƒæŒ‡å‘äº†å†…å­˜ä¸­å±äºå…¶ä»–äººçš„æ•°æ®ã€‚
<strong>è§£å¼•ç”¨</strong> (<code>*</code>) æ˜¯é€šè¿‡æŒ‡é’ˆè®¿é—®æ•°æ®çš„æ“ä½œã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let x = 5;
let y = &amp;x; // y æ˜¯ x çš„å¼•ç”¨
// *y ç­‰äº 5
<span class="boring">}</span></code></pre>
<h3 id="å†…å­˜å¸ƒå±€ç¤ºæ„å›¾"><a class="header" href="#å†…å­˜å¸ƒå±€ç¤ºæ„å›¾">å†…å­˜å¸ƒå±€ç¤ºæ„å›¾</a></h3>
<p>å‡è®¾ <code>s1</code> æ˜¯ä¸€ä¸ª <code>String</code>ï¼Œ<code>s</code> æ˜¯ <code>&amp;s1</code>ã€‚</p>
<pre class="mermaid">graph LR
    subgraph Stack
        s[s: &amp;String] --&gt; s1_ptr
        s1[s1: String]
        s1_ptr[ptr]
        s1_len[len]
        s1_cap[capacity]
    end
    
    subgraph Heap
        data["hello"]
    end
    
    s1_ptr --&gt; data
    
    style s fill:#ccffcc,stroke:#00ff00
    style s1 fill:#eeeeee,stroke:#333333
</pre>

<ul>
<li><code>s1</code> æ‹¥æœ‰å †æ•°æ®ã€‚</li>
<li><code>s</code> ä»…ä»…æ˜¯æŒ‡å‘ <code>s1</code> çš„æŒ‡é’ˆã€‚</li>
<li>å½“ <code>s</code> ç¦»å¼€ä½œç”¨åŸŸï¼Œ<strong>ä¸ä¼š</strong> è§¦å‘å †æ•°æ®çš„ dropï¼Œå› ä¸ºå®ƒä¸æ‹¥æœ‰æ‰€æœ‰æƒã€‚</li>
</ul>
<hr>
<h2 id="-å¼•ç”¨ç±»å‹å¯¹æ¯”"><a class="header" href="#-å¼•ç”¨ç±»å‹å¯¹æ¯”">âš–ï¸ å¼•ç”¨ç±»å‹å¯¹æ¯”</a></h2>
<p>Rust æœ‰ä¸¤ç§å¼•ç”¨ï¼Œå¯¹åº”ä¸¤ç§å€Ÿç”¨æ–¹å¼ï¼š</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th style="text-align: left">ç‰¹æ€§</th><th style="text-align: left">ä¸å¯å˜å¼•ç”¨ (<code>&amp;T</code>)</th><th style="text-align: left">å¯å˜å¼•ç”¨ (<code>&amp;mut T</code>)</th></tr>
</thead>
<tbody>
<tr><td style="text-align: left"><strong>ç¬¦å·</strong></td><td style="text-align: left"><code>&amp;</code></td><td style="text-align: left"><code>&amp;mut</code></td></tr>
<tr><td style="text-align: left"><strong>æ‰€æœ‰æƒ</strong></td><td style="text-align: left">æ— </td><td style="text-align: left">æ— </td></tr>
<tr><td style="text-align: left"><strong>æƒé™</strong></td><td style="text-align: left"><strong>åªè¯»</strong> (Read-Only)</td><td style="text-align: left"><strong>è¯»å†™</strong> (Read-Write)</td></tr>
<tr><td style="text-align: left"><strong>æ•°é‡é™åˆ¶</strong></td><td style="text-align: left">ä»»æ„å¤šä¸ª</td><td style="text-align: left"><strong>åŒä¸€æ—¶é—´åªèƒ½æœ‰ä¸€ä¸ª</strong></td></tr>
<tr><td style="text-align: left"><strong>æ¯”å–»</strong></td><td style="text-align: left">å¾ˆå¤šäººåŒæ—¶çœ‹ä¸€å¼ åªè¯»çš„å…¬å‘Šç‰Œ</td><td style="text-align: left">åªæœ‰ä¸€ä¸ªäººæ‹¿ç€ç¬”åœ¨ä¿®æ”¹ç™½æ¿</td></tr>
</tbody>
</table>
</div>
<hr>
<h2 id="-å€Ÿç”¨è§„åˆ™-the-rules-of-borrowing"><a class="header" href="#-å€Ÿç”¨è§„åˆ™-the-rules-of-borrowing">ğŸ›¡ï¸ å€Ÿç”¨è§„åˆ™ (The Rules of Borrowing)</a></h2>
<p>è¿™æ˜¯ Rust ç¼–è¯‘å™¨ (Borrow Checker) æœ€æ ¸å¿ƒçš„æ£€æŸ¥é€»è¾‘ï¼Œå¿…é¡»èƒŒè¯µï¼š</p>
<ol>
<li><strong>åœ¨ä»»æ„ç»™å®šæ—¶é—´ï¼Œä½ è¦ä¹ˆåªèƒ½æœ‰ä¸€ä¸ªå¯å˜å¼•ç”¨ï¼Œè¦ä¹ˆåªèƒ½æœ‰å¤šä¸ªä¸å¯å˜å¼•ç”¨ã€‚</strong> (ä¸èƒ½åŒæ—¶å­˜åœ¨)</li>
<li><strong>å¼•ç”¨å¿…é¡»æ€»æ˜¯æœ‰æ•ˆçš„ã€‚</strong> (ä¸èƒ½æ˜¯æ‚¬å‚æŒ‡é’ˆ)</li>
</ol>
<h3 id="ä¸ºä»€ä¹ˆè¦æœ‰è§„åˆ™-1é˜²æ­¢æ•°æ®ç«äº‰-data-race"><a class="header" href="#ä¸ºä»€ä¹ˆè¦æœ‰è§„åˆ™-1é˜²æ­¢æ•°æ®ç«äº‰-data-race">ä¸ºä»€ä¹ˆè¦æœ‰è§„åˆ™ 1ï¼Ÿé˜²æ­¢æ•°æ®ç«äº‰ (Data Race)</a></h3>
<p>æ•°æ®ç«äº‰ä¼šå¯¼è‡´æœªå®šä¹‰çš„è¡Œä¸ºï¼Œéå¸¸éš¾ä»¥è°ƒè¯•ã€‚å®ƒå‘ç”Ÿåœ¨ï¼š</p>
<ol>
<li>ä¸¤ä¸ªæˆ–æ›´å¤šæŒ‡é’ˆåŒæ—¶è®¿é—®åŒä¸€æ•°æ®ã€‚</li>
<li>è‡³å°‘æœ‰ä¸€ä¸ªæŒ‡é’ˆè¢«ç”¨æ¥å†™å…¥æ•°æ®ã€‚</li>
<li>æ²¡æœ‰åŒæ­¥æ•°æ®çš„æœºåˆ¶ã€‚</li>
</ol>
<p>Rust åœ¨ç¼–è¯‘é˜¶æ®µå°±æœç»äº†è¿™ç§æƒ…å†µï¼</p>
<hr>
<h2 id="-ä»£ç å®æˆ˜"><a class="header" href="#-ä»£ç å®æˆ˜">ğŸ’» ä»£ç å®æˆ˜</a></h2>
<h3 id="åœºæ™¯-1-ä¸å¯å˜å€Ÿç”¨-åªè¯»"><a class="header" href="#åœºæ™¯-1-ä¸å¯å˜å€Ÿç”¨-åªè¯»">åœºæ™¯ 1: ä¸å¯å˜å€Ÿç”¨ (åªè¯»)</a></h3>
<pre class="playground"><code class="language-rust">fn main() {
    let s1 = String::from("hello");
    let len = calculate_length(&amp;s1); // æŠŠå¼•ç”¨ä¼ è¿›å»
    println!("The length of '{}' is {}.", s1, len); // s1 ä¾ç„¶æœ‰æ•ˆï¼
}

fn calculate_length(s: &amp;String) -&gt; usize { // s æ˜¯å¼•ç”¨
    s.len()
} // s ç¦»å¼€ä½œç”¨åŸŸï¼Œå› ä¸ºæ²¡æœ‰æ‰€æœ‰æƒï¼Œä»€ä¹ˆä¹Ÿä¸ä¼šå‘ç”Ÿ</code></pre>
<h3 id="åœºæ™¯-2-å¯å˜å€Ÿç”¨-è¯»å†™"><a class="header" href="#åœºæ™¯-2-å¯å˜å€Ÿç”¨-è¯»å†™">åœºæ™¯ 2: å¯å˜å€Ÿç”¨ (è¯»å†™)</a></h3>
<pre class="playground"><code class="language-rust">fn main() {
    let mut s = String::from("hello"); // å¿…é¡»æ˜¯ mut å˜é‡æ‰èƒ½åˆ›å»º mut å¼•ç”¨
    change(&amp;mut s);
    println!("{}", s); // è¾“å‡º "hello, world"
}

fn change(some_string: &amp;mut String) {
    some_string.push_str(", world"); // å¯ä»¥ä¿®æ”¹
}</code></pre>
<h3 id="åœºæ™¯-3-è¿åå€Ÿç”¨è§„åˆ™-ç¼–è¯‘é”™è¯¯"><a class="header" href="#åœºæ™¯-3-è¿åå€Ÿç”¨è§„åˆ™-ç¼–è¯‘é”™è¯¯">åœºæ™¯ 3: è¿åå€Ÿç”¨è§„åˆ™ (ç¼–è¯‘é”™è¯¯)</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let mut s = String::from("hello");

let r1 = &amp;s; // no problem
let r2 = &amp;s; // no problem
let r3 = &amp;mut s; // âŒ é”™è¯¯ï¼ä¸èƒ½åœ¨æ‹¥æœ‰ä¸å¯å˜å¼•ç”¨çš„åŒæ—¶åˆ›å»ºå¯å˜å¼•ç”¨

// println!("{}, {}, and {}", r1, r2, r3); 
<span class="boring">}</span></code></pre>
<blockquote>
<p><strong>é”™è¯¯åŸå› </strong>ï¼š<code>r1</code> å’Œ <code>r2</code> æœŸæœ›æ•°æ®ä¸å˜ï¼Œä½† <code>r3</code> éšæ—¶å¯èƒ½ä¿®æ”¹æ•°æ®ã€‚è¿™ç ´åäº† <code>r1</code> å’Œ <code>r2</code> çš„é¢„æœŸã€‚</p>
</blockquote>
<hr>
<h2 id="-æ‚¬å‚å¼•ç”¨-dangling-references"><a class="header" href="#-æ‚¬å‚å¼•ç”¨-dangling-references">ğŸ§Ÿ æ‚¬å‚å¼•ç”¨ (Dangling References)</a></h2>
<p>åœ¨ C++ ä¸­ï¼Œå¾ˆå®¹æ˜“è¿”å›ä¸€ä¸ªæŒ‡å‘æ ˆä¸Šå±€éƒ¨å˜é‡çš„æŒ‡é’ˆï¼Œå‡½æ•°ç»“æŸåè¯¥å˜é‡é‡Šæ”¾ï¼ŒæŒ‡é’ˆæŒ‡å‘æ— æ•ˆå†…å­˜ã€‚
<strong>Rust ç¼–è¯‘å™¨ä¿è¯æ°¸è¿œä¸ä¼šå‡ºç°æ‚¬å‚å¼•ç”¨</strong>ã€‚</p>
<pre class="playground"><code class="language-rust">fn main() {
    let reference_to_nothing = dangle();
}

fn dangle() -&gt; &amp;String { // è¯•å›¾è¿”å›å¼•ç”¨
    let s = String::from("hello"); // s æ˜¯æ–°åˆ›å»ºçš„
    &amp;s // è¿”å› s çš„å¼•ç”¨
} // âŒ s ç¦»å¼€ä½œç”¨åŸŸè¢« dropï¼Œå†…å­˜é‡Šæ”¾
  // è¿”å›çš„å¼•ç”¨æŒ‡å‘äº†æ— æ•ˆå†…å­˜ï¼Rust ä¼šé˜»æ­¢ç¼–è¯‘ã€‚</code></pre>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šç›´æ¥è¿”å› String (è½¬ç§»æ‰€æœ‰æƒ)ï¼Œè€Œä¸æ˜¯å¼•ç”¨ã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn no_dangle() -&gt; String {
    let s = String::from("hello");
    s
}
<span class="boring">}</span></code></pre>
<hr>
<h2 id="-å¼•ç”¨çš„ä½œç”¨åŸŸ-nll"><a class="header" href="#-å¼•ç”¨çš„ä½œç”¨åŸŸ-nll">ğŸ”¬ å¼•ç”¨çš„ä½œç”¨åŸŸ (NLL)</a></h2>
<p>è‡ª Rust 1.31 èµ·ï¼Œå¼•ç”¨çš„ä½œç”¨åŸŸä¸ä»…ä»…æ˜¯èŠ±æ‹¬å· <code>{}</code>ï¼Œè€Œæ˜¯ <strong>ä»å£°æ˜å¼€å§‹ï¼Œåˆ°æœ€åä¸€æ¬¡ä½¿ç”¨ç»“æŸ</strong>ã€‚è¿™è¢«ç§°ä¸º <strong>Non-Lexical Lifetimes (NLL)</strong>ã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let mut s = String::from("hello");

let r1 = &amp;s; 
let r2 = &amp;s;
println!("{} and {}", r1, r2);
// r1 å’Œ r2 çš„ä½œç”¨åŸŸåœ¨è¿™é‡Œå°±ç»“æŸäº†ï¼å› ä¸ºåé¢æ²¡å†ç”¨è¿‡å®ƒä»¬ã€‚

let r3 = &amp;mut s; // âœ… ç°åœ¨å¯ä»¥äº†ï¼å› ä¸º r1/r2 å·²ç»"æ­»"äº†
println!("{}", r3);
<span class="boring">}</span></code></pre>
<hr>
<h2 id="-æœ€ä½³å®è·µ-1"><a class="header" href="#-æœ€ä½³å®è·µ-1">ğŸ’¡ æœ€ä½³å®è·µ</a></h2>
<ol>
<li>
<p><strong>é»˜è®¤ä¸å¯å˜</strong>ï¼šä¼˜å…ˆä½¿ç”¨ <code>&amp;T</code>ï¼Œåªæœ‰åœ¨ç¡®å®éœ€è¦ä¿®æ”¹æ—¶æ‰ç”¨ <code>&amp;mut T</code>ã€‚</p>
</li>
<li>
<p><strong>æ˜¾å¼è§£å¼•ç”¨</strong>ï¼šè™½ç„¶ <code>.</code> æ“ä½œç¬¦ä¼šè‡ªåŠ¨è§£å¼•ç”¨ï¼Œä½†åœ¨åšæ•°å€¼è¿ç®—æˆ–èµ‹å€¼æ—¶ï¼Œåˆ«å¿˜äº† <code>*</code>ã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let mut x = 10;
let r = &amp;mut x;
*r += 5; // æ˜¾å¼è§£å¼•ç”¨æ¥ä¿®æ”¹å€¼
<span class="boring">}</span></code></pre>
</li>
<li>
<p><strong>ç†è§£å€Ÿç”¨æ£€æŸ¥å™¨æ˜¯æœ‹å‹</strong>ï¼šå®ƒè™½ç„¶æœ‰æ—¶å¾ˆçƒ¦äººï¼Œä½†å®ƒåœ¨å¸®ä½ é¿å…å¾ˆéš¾è°ƒè¯•çš„å¹¶å‘ Bugã€‚</p>
</li>
</ol>
<hr>
<h2 id="-ç»ƒä¹ é¢˜-1"><a class="header" href="#-ç»ƒä¹ é¢˜-1">ğŸ‹ï¸ ç»ƒä¹ é¢˜</a></h2>
<p>ğŸ‘‰ <strong><a href="Day01-15/05.ReferencesAndBorrowing/exercises/README.html">ç‚¹å‡»è¿™é‡ŒæŸ¥çœ‹ç»ƒä¹ é¢˜</a></strong></p>
<ol>
<li><strong>ä¿®å¤å¤šé‡å€Ÿç”¨</strong>ï¼šè§£å†³åŒæ—¶å­˜åœ¨å¯å˜å’Œä¸å¯å˜å¼•ç”¨çš„é”™è¯¯ã€‚</li>
<li><strong>ç”Ÿå‘½å‘¨æœŸåˆæ¢</strong>ï¼šç†è§£å¼•ç”¨ä¸ºä½•å¤±æ•ˆã€‚</li>
<li><strong>è§£å¼•ç”¨æ“ä½œ</strong>ï¼šç»ƒä¹ ä½¿ç”¨ <code>*</code> è¯»å†™æ•°æ®ã€‚</li>
</ol>
<hr>
<h2 id="-ä¸‹ä¸€æ­¥-4"><a class="header" href="#-ä¸‹ä¸€æ­¥-4">â­ï¸ ä¸‹ä¸€æ­¥</a></h2>
<p>å¦‚æœæˆ‘ä»¬åªæƒ³å¼•ç”¨å­—ç¬¦ä¸²çš„ä¸€éƒ¨åˆ†ï¼ˆæ¯”å¦‚ â€œhello worldâ€ ä¸­çš„ â€œhelloâ€ï¼‰æ€ä¹ˆåŠï¼Ÿåˆ›å»ºä¸€ä¸ªæ–°çš„ String å¤ªæµªè´¹äº†ã€‚
Rust æä¾›äº† <strong>åˆ‡ç‰‡ (Slice)</strong> æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
<p>ä¸‹ä¸€èŠ‚: <a href="Day01-15/06.Slices/README.html">Day 06: åˆ‡ç‰‡ç±»å‹ (Slices)</a></p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-06-åˆ‡ç‰‡-slices"><a class="header" href="#day-06-åˆ‡ç‰‡-slices">Day 06: åˆ‡ç‰‡ (Slices)</a></h1>
<h2 id="-å­¦ä¹ ç›®æ ‡-3"><a class="header" href="#-å­¦ä¹ ç›®æ ‡-3">ğŸ“ å­¦ä¹ ç›®æ ‡</a></h2>
<ul>
<li>ç†è§£ <strong>åˆ‡ç‰‡ (Slice)</strong> çš„åº•å±‚å†…å­˜ç»“æ„ (<code>ptr</code> + <code>len</code>)</li>
<li>ç†Ÿç»ƒä½¿ç”¨ <code>Range</code> è¯­æ³• (<code>..</code>) åˆ›å»ºåˆ‡ç‰‡</li>
<li>æŒæ¡ <strong>å­—ç¬¦ä¸²åˆ‡ç‰‡</strong> (<code>&amp;str</code>) ä¸ <code>String</code> çš„åŒºåˆ«</li>
<li>ç†è§£ä¸ºä»€ä¹ˆ <strong>å­—ç¬¦ä¸²å­—é¢å€¼</strong> æ˜¯åˆ‡ç‰‡</li>
<li>äº†è§£æ•°ç»„åˆ‡ç‰‡åŠå…¶åœ¨å‚æ•°ä¼ é€’ä¸­çš„ä¼˜åŠ¿</li>
</ul>
<h2 id="-æ ¸å¿ƒæ¦‚å¿µä»€ä¹ˆæ˜¯åˆ‡ç‰‡"><a class="header" href="#-æ ¸å¿ƒæ¦‚å¿µä»€ä¹ˆæ˜¯åˆ‡ç‰‡">ğŸ¯ æ ¸å¿ƒæ¦‚å¿µï¼šä»€ä¹ˆæ˜¯åˆ‡ç‰‡ï¼Ÿ</a></h2>
<p>åˆ‡ç‰‡å¼•ç”¨äº†é›†åˆä¸­ <strong>ä¸€æ®µè¿ç»­çš„å…ƒç´ åºåˆ—</strong>ï¼Œè€Œä¸æ˜¯å¼•ç”¨æ•´ä¸ªé›†åˆã€‚
åˆ‡ç‰‡æ˜¯ä¸€ç±» <strong>å¼•ç”¨</strong>ï¼Œæ‰€ä»¥å®ƒ <strong>æ²¡æœ‰æ‰€æœ‰æƒ</strong>ã€‚</p>
<blockquote>
<p><strong>æ¯”å–»</strong>ï¼šå¦‚æœæ˜¯ <code>String</code> æ˜¯ä¸€æ•´å—é¢åŒ…ï¼Œé‚£ä¹ˆåˆ‡ç‰‡ (<code>&amp;str</code>) å°±æ˜¯è¿™å—é¢åŒ…ä¸Šåˆ‡ä¸‹æ¥çš„ä¸€ç‰‡ã€‚ä½ ä¸èƒ½æ‹¥æœ‰è¿™ç‰‡é¢åŒ…ï¼ˆå®ƒè¿˜è¿åœ¨æ•´å—ä¸Šï¼‰ï¼Œä½†ä½ å¯ä»¥çœ‹å®ƒã€é—»å®ƒã€‚</p>
</blockquote>
<hr>
<h2 id="-å†…å­˜æ¨¡å‹åˆ‡ç‰‡é•¿ä»€ä¹ˆæ ·"><a class="header" href="#-å†…å­˜æ¨¡å‹åˆ‡ç‰‡é•¿ä»€ä¹ˆæ ·">ğŸ§  å†…å­˜æ¨¡å‹ï¼šåˆ‡ç‰‡é•¿ä»€ä¹ˆæ ·ï¼Ÿ</a></h2>
<p>åˆ‡ç‰‡æ˜¯ä¸€ä¸ª <strong>èƒ–æŒ‡é’ˆ (Fat Pointer)</strong>ï¼Œå®ƒåŒ…å«ä¸¤éƒ¨åˆ†ä¿¡æ¯ï¼Œå­˜å‚¨åœ¨æ ˆä¸Šï¼š</p>
<ol>
<li><strong>æŒ‡é’ˆ (ptr)</strong>ï¼šæŒ‡å‘åˆ‡ç‰‡èµ·å§‹ä½ç½®çš„æ•°æ®ã€‚</li>
<li><strong>é•¿åº¦ (len)</strong>ï¼šåˆ‡ç‰‡åŒ…å«å¤šå°‘ä¸ªå…ƒç´ ï¼ˆæˆ–å­—èŠ‚ï¼‰ã€‚</li>
</ol>
<h3 id="å­—ç¬¦ä¸²åˆ‡ç‰‡å›¾è§£"><a class="header" href="#å­—ç¬¦ä¸²åˆ‡ç‰‡å›¾è§£">å­—ç¬¦ä¸²åˆ‡ç‰‡å›¾è§£</a></h3>
<p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ª <code>String</code>ï¼š<code>let s = String::from("hello world");</code>
æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªåˆ‡ç‰‡ï¼š<code>let world = &amp;s[6..11];</code></p>
<pre class="mermaid">graph LR
    subgraph Stack
        s[s: String]
        s_ptr[ptr]
        s_len[len: 11]
        s_cap[cap: 11]

        world[world: &amp;str]
        w_ptr[ptr]
        w_len[len: 5]
    end
    
    subgraph Heap
        h_h[h]
        h_e[e]
        h_l1[l]
        h_l2[l]
        h_o[o]
        h_sp["(space)"]
        h_w[w]
        h_o2[o]
        h_r[r]
        h_l3[l]
        h_d[d]
    end

    s_ptr --&gt; h_h
    h_h -.- h_e -.- h_l1 -.- h_l2 -.- h_o -.- h_sp -.- h_w -.- h_o2 -.- h_r -.- h_l3 -.- h_d

    w_ptr --&gt; h_w
    
    style world fill:#ccffcc,stroke:#00ff00
    style s fill:#eeeeee,stroke:#333333
    style h_w fill:#ccffcc,stroke:#00ff00
    style h_o2 fill:#ccffcc,stroke:#00ff00
    style h_r fill:#ccffcc,stroke:#00ff00
    style h_l3 fill:#ccffcc,stroke:#00ff00
    style h_d fill:#ccffcc,stroke:#00ff00
</pre>

<p><strong>è§£é‡Š</strong>ï¼š</p>
<ul>
<li><code>s</code> æ‹¥æœ‰æ•´ä¸ªå †æ•°æ®ã€‚</li>
<li><code>world</code> åœ¨æ ˆä¸Šï¼Œå®ƒçš„æŒ‡é’ˆæŒ‡å‘å †å†…å­˜çš„ç¬¬ 6 ä¸ªå­—èŠ‚ï¼Œé•¿åº¦ä¸º 5ã€‚</li>
</ul>
<hr>
<h2 id="-è¯­æ³•range-èŒƒå›´"><a class="header" href="#-è¯­æ³•range-èŒƒå›´">âœ‚ï¸ è¯­æ³•ï¼šRange (èŒƒå›´)</a></h2>
<p>Rust ä½¿ç”¨ <code>..</code> è¯­æ³•æ¥è¡¨ç¤ºèŒƒå›´ã€‚</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th style="text-align: left">è¯­æ³•</th><th style="text-align: left">è¯´æ˜</th><th style="text-align: left">ç­‰ä»·æ•°å­¦è¡¨è¾¾</th></tr>
</thead>
<tbody>
<tr><td style="text-align: left"><code>0..5</code></td><td style="text-align: left">ä» 0 å¼€å§‹ï¼Œåˆ° 5 ç»“æŸ (ä¸å« 5)</td><td style="text-align: left">$[0, 5)$</td></tr>
<tr><td style="text-align: left"><code>0..=4</code></td><td style="text-align: left">ä» 0 å¼€å§‹ï¼Œåˆ° 4 ç»“æŸ (åŒ…å« 4)</td><td style="text-align: left">$[0, 4]$</td></tr>
<tr><td style="text-align: left"><code>..2</code></td><td style="text-align: left">ä»å¤´å¼€å§‹ï¼Œåˆ° 2 ç»“æŸ</td><td style="text-align: left">$[0, 2)$</td></tr>
<tr><td style="text-align: left"><code>3..</code></td><td style="text-align: left">ä» 3 å¼€å§‹ï¼Œç›´åˆ°æœ€å</td><td style="text-align: left">$[3, len)$</td></tr>
<tr><td style="text-align: left"><code>..</code></td><td style="text-align: left"><strong>å…¨åˆ‡ç‰‡</strong>ï¼šå¼•ç”¨æ•´ä¸ªé›†åˆ</td><td style="text-align: left">$[0, len)$</td></tr>
</tbody>
</table>
</div>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let s = String::from("hello");
let len = s.len();

let slice1 = &amp;s[0..2]; // "he"
let slice2 = &amp;s[..2];  // "he" (ç®€å†™)
let slice3 = &amp;s[3..];  // "lo"
let slice4 = &amp;s[..];   // "hello" (å®Œæ•´åˆ‡ç‰‡)
<span class="boring">}</span></code></pre>
<hr>
<h2 id="-å­—ç¬¦ä¸²åˆ‡ç‰‡-str"><a class="header" href="#-å­—ç¬¦ä¸²åˆ‡ç‰‡-str">ğŸ§µ å­—ç¬¦ä¸²åˆ‡ç‰‡ (<code>&amp;str</code>)</a></h2>
<p>ç±»å‹æ ‡è¯†ï¼š<code>&amp;str</code> (è¯»ä½œ â€œstring sliceâ€)ã€‚</p>
<h3 id="ä¸ºä»€ä¹ˆå­—ç¬¦ä¸²å­—é¢å€¼ä¸å¯å˜"><a class="header" href="#ä¸ºä»€ä¹ˆå­—ç¬¦ä¸²å­—é¢å€¼ä¸å¯å˜">ä¸ºä»€ä¹ˆå­—ç¬¦ä¸²å­—é¢å€¼ä¸å¯å˜ï¼Ÿ</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let s = "Hello, world!";
<span class="boring">}</span></code></pre>
<p>è¿™é‡Œçš„ <code>s</code> çš„ç±»å‹å°±æ˜¯ <code>&amp;str</code>ã€‚å®ƒæŒ‡å‘äº†ç¼–è¯‘åäºŒè¿›åˆ¶æ–‡ä»¶çš„æ•°æ®åŒºã€‚å› ä¸ºäºŒè¿›åˆ¶æ–‡ä»¶åœ¨è¿è¡Œæ—¶ä¸å¯ä¿®æ”¹ï¼Œæ‰€ä»¥å­—é¢å€¼æ°¸è¿œæ˜¯ä¸å¯å˜çš„ã€‚</p>
<h3 id="-å±é™©utf-8-å­—ç¬¦è¾¹ç•Œ"><a class="header" href="#-å±é™©utf-8-å­—ç¬¦è¾¹ç•Œ">âš ï¸ å±é™©ï¼šUTF-8 å­—ç¬¦è¾¹ç•Œ</a></h3>
<p>Rust çš„ <code>String</code> æ˜¯ UTF-8 ç¼–ç çš„ã€‚ä¸€ä¸ªå­—ç¬¦ï¼ˆå¦‚ä¸­æ–‡ï¼‰å¯èƒ½å ç”¨ 3 ä¸ªå­—èŠ‚ã€‚
<strong>å¦‚æœä½ åˆ‡åœ¨ä¸ªå­—ç¬¦çš„ä¸­é—´ï¼Œç¨‹åºä¼šå´©æºƒ (Panic)ï¼</strong></p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let s = "ä½ å¥½";
// "ä½ " å  3 å­—èŠ‚ï¼Œ"å¥½" å  3 å­—èŠ‚ã€‚æ€»é•¿ 6ã€‚

// let w = &amp;s[0..1]; 
// âŒ è¿è¡Œæ—¶ Panic! 
// é”™è¯¯ä¿¡æ¯ï¼šbyte index 1 is not a char boundary; it is inside 'ä½ ' (bytes 0..3)
<span class="boring">}</span></code></pre>
<p><strong>æ­£ç¡®åšæ³•</strong>ï¼šå°å¿ƒè®¡ç®—å­—èŠ‚ç´¢å¼•ï¼Œæˆ–è€…ä½¿ç”¨ <code>.chars()</code> éå†å­—ç¬¦ã€‚</p>
<hr>
<h2 id="-å…¶ä»–åˆ‡ç‰‡"><a class="header" href="#-å…¶ä»–åˆ‡ç‰‡">ğŸ“¦ å…¶ä»–åˆ‡ç‰‡</a></h2>
<p>ä¸ä»…ä»…æ˜¯å­—ç¬¦ä¸²ï¼Œæ•°ç»„ (Array) å’Œ å‘é‡ (Vector) ä¹Ÿå¯ä»¥åˆ‡ç‰‡ã€‚ç±»å‹æ ‡è¯†ï¼š<code>&amp;[T]</code>ã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let a = [1, 2, 3, 4, 5];

let slice = &amp;a[1..3]; // ç±»å‹æ˜¯ &amp;[i32]
assert_eq!(slice, &amp;[2, 3]);
<span class="boring">}</span></code></pre>
<hr>
<h2 id="-æœ€ä½³å®è·µå‡½æ•°å‚æ•°"><a class="header" href="#-æœ€ä½³å®è·µå‡½æ•°å‚æ•°">ğŸ’¡ æœ€ä½³å®è·µï¼šå‡½æ•°å‚æ•°</a></h2>
<p><strong>é»„é‡‘æ³•åˆ™</strong>ï¼šåœ¨å®šä¹‰å‡½æ•°å‚æ•°æ—¶ï¼Œå°½é‡ä½¿ç”¨ <strong>åˆ‡ç‰‡ (<code>&amp;str</code>, <code>&amp;[T]</code>)</strong> è€Œä¸æ˜¯å…·ä½“ç±»å‹ (<code>&amp;String</code>, <code>&amp;Vec&lt;T&gt;</code>)ã€‚</p>
<pre class="playground"><code class="language-rust">// ğŸ‘ é™åˆ¶æ€§å¼ºï¼šåªèƒ½ä¼  String
fn first_word(s: &amp;String) -&gt; &amp;str { ... }

// ğŸ‘ é€šç”¨æ€§å¼ºï¼šå¯ä»¥ä¼  String, &amp;str, ç”šè‡³å­—é¢å€¼
fn first_word(s: &amp;str) -&gt; &amp;str { ... }

fn main() {
    let s = String::from("hello");
    let literal = "world";

    first_word(&amp;s);      // è‡ªåŠ¨è§£å¼•ç”¨å¼ºåˆ¶è½¬æ¢ (Deref Coercion)
    first_word(&amp;s[..]);  // æ˜¾å¼å…¨åˆ‡ç‰‡
    first_word(literal); // ä¼ å­—é¢å€¼
}</code></pre>
<p><strong>ä¸ºä»€ä¹ˆï¼Ÿ</strong>
å› ä¸º <code>String</code> å®ç°äº† <code>Deref&lt;Target=str&gt;</code>ï¼Œæ‰€ä»¥ Rust å¯ä»¥è‡ªåŠ¨æŠŠ <code>&amp;String</code> å½“ä½œ <code>&amp;str</code> ç”¨ã€‚åä¹‹åˆ™ä¸è¡Œã€‚</p>
<hr>
<h2 id="-ä»£ç ç¤ºä¾‹å®ç°-first_word"><a class="header" href="#-ä»£ç ç¤ºä¾‹å®ç°-first_word">ğŸ’» ä»£ç ç¤ºä¾‹ï¼šå®ç° first_word</a></h2>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn first_word(s: &amp;str) -&gt; &amp;str {
    let bytes = s.as_bytes(); // è½¬æ¢ä¸ºå­—èŠ‚æ•°ç»„ä»¥ä¾¿é€ä¸ªå­—èŠ‚æ£€æŸ¥

    for (i, &amp;item) in bytes.iter().enumerate() {
        // å¯»æ‰¾ç¬¬ä¸€ä¸ªç©ºæ ¼
        if item == b' ' {
            return &amp;s[0..i]; // æ‰¾åˆ°ç©ºæ ¼ï¼Œè¿”å›å¼€å¤´åˆ°ç©ºæ ¼å‰çš„åˆ‡ç‰‡
        }
    }

    &amp;s[..] // æ²¡æ‰¾åˆ°ç©ºæ ¼ï¼Œæ„å‘³ç€æ•´ä¸ªå­—ç¬¦ä¸²å°±æ˜¯ä¸€ä¸ªå•è¯
}
<span class="boring">}</span></code></pre>
<hr>
<h2 id="-ç»ƒä¹ é¢˜-2"><a class="header" href="#-ç»ƒä¹ é¢˜-2">ğŸ‹ï¸ ç»ƒä¹ é¢˜</a></h2>
<p>ğŸ‘‰ <strong><a href="Day01-15/06.Slices/exercises/README.html">ç‚¹å‡»è¿™é‡ŒæŸ¥çœ‹ç»ƒä¹ é¢˜</a></strong></p>
<ol>
<li><strong>åˆ‡ç‰‡åŸºç¡€</strong>ï¼šç»ƒä¹ ä½¿ç”¨ Range è¯­æ³•ã€‚</li>
<li><strong>é‡å†™å‡½æ•°</strong>ï¼šå°†æ¥æ”¶ <code>&amp;String</code> çš„å‡½æ•°é‡æ„ä¸ºæ¥æ”¶ <code>&amp;str</code>ã€‚</li>
<li><strong>æ•°ç»„åˆ‡ç‰‡</strong>ï¼šå°è¯•å¯¹æ•´æ•°æ•°ç»„è¿›è¡Œåˆ‡ç‰‡æ“ä½œã€‚</li>
</ol>
<hr>
<h2 id="-ä¸‹ä¸€æ­¥-5"><a class="header" href="#-ä¸‹ä¸€æ­¥-5">â­ï¸ ä¸‹ä¸€æ­¥</a></h2>
<p>æœ‰äº†åˆ‡ç‰‡ï¼Œæˆ‘ä»¬èƒ½é«˜æ•ˆæŸ¥çœ‹æ•°æ®äº†ã€‚ä½†å¦‚æœæ˜¯ä¸åŒç±»å‹çš„æ•°æ®ç»„åˆå‘¢ï¼Ÿ
æ¯”å¦‚ä¸€ä¸ªç”¨æˆ·ï¼Œæœ‰åå­—(String)ã€å¹´é¾„(u8)ã€é‚®ç®±(String)â€¦
æˆ‘ä»¬éœ€è¦ <strong>ç»“æ„ä½“ (Structs)</strong>ã€‚</p>
<p>ä¸‹ä¸€èŠ‚: <a href="Day01-15/07.Structs/README.html">Day 07: ç»“æ„ä½“ (Structs)</a></p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-07-ç»“æ„ä½“-structs"><a class="header" href="#day-07-ç»“æ„ä½“-structs">Day 07: ç»“æ„ä½“ (Structs)</a></h1>
<h2 id="-å­¦ä¹ ç›®æ ‡-4"><a class="header" href="#-å­¦ä¹ ç›®æ ‡-4">ğŸ“ å­¦ä¹ ç›®æ ‡</a></h2>
<ul>
<li>æŒæ¡å¦‚ä½•å®šä¹‰å’Œå®ä¾‹åŒ–ç»“æ„ä½“ (<code>Struct</code>)</li>
<li>ç†è§£å…ƒç»„ç»“æ„ä½“ (<code>Tuple Struct</code>) å’Œç±»å•å…ƒç»“æ„ä½“ (<code>Unit-Like Struct</code>)</li>
<li>æŒæ¡ç»“æ„ä½“æ–¹æ³•çš„å®šä¹‰ (<code>impl</code>)</li>
<li>ç†è§£å…³è”å‡½æ•° (<code>Associated Functions</code>)</li>
</ul>
<h2 id="-ä¸ºä»€ä¹ˆè¦å­¦è¿™ä¸ª-1"><a class="header" href="#-ä¸ºä»€ä¹ˆè¦å­¦è¿™ä¸ª-1">ğŸ¯ ä¸ºä»€ä¹ˆè¦å­¦è¿™ä¸ª</a></h2>
<p>ç»“æ„ä½“æ˜¯ Rust ä¸­åˆ›å»ºè‡ªå®šä¹‰æ•°æ®ç±»å‹çš„ä¸»è¦æ–¹å¼ã€‚</p>
<ul>
<li><strong>æ•°æ®ç»„ç»‡</strong>ï¼šå°†ç›¸å…³è”çš„æ•°æ®ç»„åˆåœ¨ä¸€èµ·ï¼Œèµ‹äºˆåå­—å’Œæ„ä¹‰ï¼ˆå¦‚ <code>User</code>, <code>Rectangle</code>ï¼‰ã€‚</li>
<li><strong>é¢å‘å¯¹è±¡</strong>ï¼šé…åˆ <code>impl</code> å—ï¼Œç»“æ„ä½“æä¾›äº†ç±»ä¼¼é¢å‘å¯¹è±¡è¯­è¨€ä¸­â€œç±»â€œçš„åŠŸèƒ½ï¼ˆæ•°æ®+è¡Œä¸ºï¼‰ï¼Œä½†æ›´è½»é‡ã€‚</li>
<li><strong>ç±»å‹å®‰å…¨</strong>ï¼šé€šè¿‡å®šä¹‰ä¸åŒçš„ç»“æ„ä½“ï¼Œç¼–è¯‘å™¨å¯ä»¥å¸®ä½ åŒºåˆ†çœ‹ä¼¼ç›¸åŒä½†å«ä¹‰ä¸åŒçš„æ•°æ®ï¼ˆå¦‚ <code>Miles(u32)</code> å’Œ <code>Kilometers(u32)</code>ï¼‰ã€‚</li>
</ul>
<h2 id="-æ ¸å¿ƒæ¦‚å¿µ"><a class="header" href="#-æ ¸å¿ƒæ¦‚å¿µ">ğŸ“– æ ¸å¿ƒæ¦‚å¿µ</a></h2>
<h3 id="1-ç»å…¸ç»“æ„ä½“-classic-structs"><a class="header" href="#1-ç»å…¸ç»“æ„ä½“-classic-structs">1. ç»å…¸ç»“æ„ä½“ (Classic Structs)</a></h3>
<p>æœ€å¸¸ç”¨çš„å½¢å¼ï¼Œæ¯ä¸ªå­—æ®µéƒ½æœ‰åå­—ã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>struct User {
    username: String,
    email: String,
    sign_in_count: u64,
    active: bool,
}
<span class="boring">}</span></code></pre>
<p><strong>å®ä¾‹åŒ–</strong>ï¼š</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let user1 = User {
    email: String::from("someone@example.com"),
    username: String::from("someusername123"),
    active: true,
    sign_in_count: 1,
};
<span class="boring">}</span></code></pre>
<p><strong>ç®€å†™è¯­æ³•</strong>ï¼šå½“å˜é‡åä¸å­—æ®µåç›¸åŒæ—¶ã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn build_user(email: String, username: String) -&gt; User {
    User {
        email, // ç­‰åŒäº email: email
        username,
        active: true,
        sign_in_count: 1,
    }
}
<span class="boring">}</span></code></pre>
<p><strong>æ›´æ–°è¯­æ³•</strong>ï¼šåŸºäºæ—§å®ä¾‹åˆ›å»ºæ–°å®ä¾‹ã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let user2 = User {
    email: String::from("another@example.com"),
    ..user1 // å¿…é¡»æ”¾åœ¨æœ€å
};
<span class="boring">}</span></code></pre>
<p>âš ï¸ <strong>æ³¨æ„</strong>ï¼šå¦‚æœä½¿ç”¨äº†æ›´æ–°è¯­æ³•ï¼Œä¸”ç§»åŠ¨äº†å †ä¸Šæ•°æ®ï¼ˆå¦‚ <code>String</code>ï¼‰ï¼Œæ—§å®ä¾‹å¯èƒ½æ— æ³•å†è¢«å®Œæ•´ä½¿ç”¨ã€‚</p>
<h3 id="2-å…ƒç»„ç»“æ„ä½“-tuple-structs"><a class="header" href="#2-å…ƒç»„ç»“æ„ä½“-tuple-structs">2. å…ƒç»„ç»“æ„ä½“ (Tuple Structs)</a></h3>
<p>åªæœ‰å­—æ®µç±»å‹ï¼Œæ²¡æœ‰å­—æ®µåã€‚é€‚ç”¨äºåªéœ€è¦åŒºåˆ†ç±»å‹ä½†ä¸éœ€è¦å‘½åå­—æ®µçš„åœºæ™¯ã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>struct Color(i32, i32, i32);
struct Point(i32, i32, i32);

let black = Color(0, 0, 0);
let origin = Point(0, 0, 0);
<span class="boring">}</span></code></pre>
<p>è®¿é—®å­—æ®µä½¿ç”¨ç´¢å¼•ï¼š<code>black.0</code>ã€‚</p>
<h3 id="3-ç±»å•å…ƒç»“æ„ä½“-unit-like-structs"><a class="header" href="#3-ç±»å•å…ƒç»“æ„ä½“-unit-like-structs">3. ç±»å•å…ƒç»“æ„ä½“ (Unit-Like Structs)</a></h3>
<p>æ²¡æœ‰å­—æ®µã€‚å¸¸ç”¨äºå®ç° Traitï¼Œä½†ä¸éœ€è¦å­˜å‚¨æ•°æ®ã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>struct AlwaysEqual;
let subject = AlwaysEqual;
<span class="boring">}</span></code></pre>
<h3 id="4-æ–¹æ³•-methods"><a class="header" href="#4-æ–¹æ³•-methods">4. æ–¹æ³• (Methods)</a></h3>
<p>å®šä¹‰åœ¨ <code>impl</code> å—ä¸­ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ <code>self</code>ã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[derive(Debug)]
struct Rectangle {
    width: u32,
    height: u32,
}

impl Rectangle {
    // &amp;self æ˜¯ self: &amp;Self çš„ç®€å†™ï¼Œè¡¨ç¤ºå€Ÿç”¨å®ä¾‹
    fn area(&amp;self) -&gt; u32 {
        self.width * self.height
    }
}
<span class="boring">}</span></code></pre>
<h3 id="5-å…³è”å‡½æ•°-associated-functions"><a class="header" href="#5-å…³è”å‡½æ•°-associated-functions">5. å…³è”å‡½æ•° (Associated Functions)</a></h3>
<p>å®šä¹‰åœ¨ <code>impl</code> å—ä¸­ï¼Œä½†ä¸ä»¥ <code>self</code> ä½œä¸ºå‚æ•°ã€‚é€šå¸¸ç”¨ä½œæ„é€ å‡½æ•°ã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>impl Rectangle {
    fn square(size: u32) -&gt; Rectangle {
        Rectangle {
            width: size,
            height: size,
        }
    }
}
// è°ƒç”¨æ–¹å¼
let sq = Rectangle::square(3);
<span class="boring">}</span></code></pre>
<h2 id="-ä»£ç ç¤ºä¾‹"><a class="header" href="#-ä»£ç ç¤ºä¾‹">ğŸ’» ä»£ç ç¤ºä¾‹</a></h2>
<h3 id="ç¤ºä¾‹-å®Œæ•´çš„çŸ©å½¢ç¨‹åº"><a class="header" href="#ç¤ºä¾‹-å®Œæ•´çš„çŸ©å½¢ç¨‹åº">ç¤ºä¾‹: å®Œæ•´çš„çŸ©å½¢ç¨‹åº</a></h3>
<pre class="playground"><code class="language-rust">#[derive(Debug)] // å…è®¸ä½¿ç”¨ {:?} æ‰“å°
struct Rectangle {
    width: u32,
    height: u32,
}

impl Rectangle {
    fn area(&amp;self) -&gt; u32 {
        self.width * self.height
    }

    fn can_hold(&amp;self, other: &amp;Rectangle) -&gt; bool {
        self.width &gt; other.width &amp;&amp; self.height &gt; other.height
    }
}

fn main() {
    let rect1 = Rectangle { width: 30, height: 50 };
    let rect2 = Rectangle { width: 10, height: 40 };

    println!("rect1 is {:?}", rect1);
    println!("The area of rect1 is {} square pixels.", rect1.area());
    println!("Can rect1 hold rect2? {}", rect1.can_hold(&amp;rect2));
}</code></pre>
<h2 id="-ç»ƒä¹ é¢˜-3"><a class="header" href="#-ç»ƒä¹ é¢˜-3">ğŸ‹ï¸ ç»ƒä¹ é¢˜</a></h2>
<p>æˆ‘ä»¬ä¸ºä½ å‡†å¤‡äº†å…³äºç»“æ„ä½“çš„å®šä¹‰ã€å®ä¾‹åŒ–å’Œæ–¹æ³•å®ç°çš„ç»ƒä¹ ã€‚</p>
<ul>
<li><strong>ç»ƒä¹  1</strong>: å®šä¹‰ä¹¦åº“</li>
<li><strong>ç»ƒä¹  2</strong>: ç»“æ„ä½“æ›´æ–°è¯­æ³•</li>
<li><strong>ç»ƒä¹  3</strong>: çŸ©å½¢è®¡ç®—æ–¹æ³•</li>
</ul>
<p>ğŸ‘‰ <strong><a href="Day01-15/07.Structs/exercises/README.html">ç‚¹å‡»è¿™é‡ŒæŸ¥çœ‹ç»ƒä¹ é¢˜</a></strong></p>
<h2 id="-å¸¸è§é—®é¢˜-faq"><a class="header" href="#-å¸¸è§é—®é¢˜-faq">ğŸ¤” å¸¸è§é—®é¢˜ (FAQ)</a></h2>
<h3 id="q1-self-mut-self-self-æœ‰ä»€ä¹ˆåŒºåˆ«"><a class="header" href="#q1-self-mut-self-self-æœ‰ä»€ä¹ˆåŒºåˆ«">Q1: <code>&amp;self</code>, <code>&amp;mut self</code>, <code>self</code> æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</a></h3>
<ul>
<li><code>&amp;self</code>: <strong>ä¸å¯å˜å€Ÿç”¨</strong>ã€‚æœ€å¸¸ç”¨ï¼Œåªè¯»å–æ•°æ®ã€‚</li>
<li><code>&amp;mut self</code>: <strong>å¯å˜å€Ÿç”¨</strong>ã€‚éœ€è¦ä¿®æ”¹ç»“æ„ä½“å†…éƒ¨æ•°æ®æ—¶ä½¿ç”¨ã€‚</li>
<li><code>self</code>: <strong>å¤ºå–æ‰€æœ‰æƒ</strong>ã€‚é€šå¸¸ç”¨äºå°†ç»“æ„ä½“è½¬æ¢ä¸ºå¦ä¸€ç§ç±»å‹ï¼Œè½¬æ¢ååŸå˜é‡ä¸å¯ç”¨ã€‚</li>
</ul>
<h3 id="q2-ä¸ºä»€ä¹ˆä¸èƒ½ç›´æ¥æ‰“å°ç»“æ„ä½“-println-user"><a class="header" href="#q2-ä¸ºä»€ä¹ˆä¸èƒ½ç›´æ¥æ‰“å°ç»“æ„ä½“-println-user">Q2: ä¸ºä»€ä¹ˆä¸èƒ½ç›´æ¥æ‰“å°ç»“æ„ä½“ <code>println!("{}", user)</code>ï¼Ÿ</a></h3>
<p>A: <code>println!</code> é»˜è®¤ä½¿ç”¨ <code>Display</code> traitï¼ˆ<code>{}</code>ï¼‰ï¼Œç»“æ„ä½“é»˜è®¤æ²¡æœ‰å®ç°å®ƒã€‚å¯ä»¥ä½¿ç”¨ <code>#[derive(Debug)]</code> è‡ªåŠ¨å®ç° <code>Debug</code> traitï¼Œç„¶åç”¨ <code>{:?}</code> æˆ– <code>{:#?}</code> æ‰“å°ã€‚</p>
<h2 id="-æœ€ä½³å®è·µ-2"><a class="header" href="#-æœ€ä½³å®è·µ-2">ğŸ’¡ æœ€ä½³å®è·µ</a></h2>
<ul>
<li><strong>å¤§å†™é©¼å³°å‘½å</strong>ï¼šç»“æ„ä½“åç§°éµå¾ª <code>PascalCase</code>ï¼ˆå¦‚ <code>UserAccount</code>ï¼‰ã€‚</li>
<li><strong>å­—æ®µè›‡å½¢å‘½å</strong>ï¼šå­—æ®µåç§°éµå¾ª <code>snake_case</code>ï¼ˆå¦‚ <code>user_id</code>ï¼‰ã€‚</li>
<li><strong>ä¼˜å…ˆä½¿ç”¨ String</strong>ï¼šåœ¨ç»“æ„ä½“ä¸­å­˜å‚¨æ–‡æœ¬æ—¶ï¼Œä¼˜å…ˆä½¿ç”¨ <code>String</code> æ‹¥æœ‰æ‰€æœ‰æƒï¼Œé¿å…å¤æ‚çš„ç”Ÿå‘½å‘¨æœŸé—®é¢˜ï¼ˆç›´åˆ°ä½ ç¡®å®éœ€è¦å¼•ç”¨ï¼‰ã€‚</li>
</ul>
<h2 id="-æ‰©å±•é˜…è¯»"><a class="header" href="#-æ‰©å±•é˜…è¯»">ğŸ”— æ‰©å±•é˜…è¯»</a></h2>
<ul>
<li><a href="https://doc.rust-lang.org/book/ch05-00-structs.html">Rust ç¨‹åºè®¾è®¡è¯­è¨€ - ä½¿ç”¨ç»“æ„ä½“ç»„ç»‡æ•°æ®</a></li>
</ul>
<h2 id="-æœ¬èŠ‚è¦ç‚¹å›é¡¾"><a class="header" href="#-æœ¬èŠ‚è¦ç‚¹å›é¡¾">ğŸ“š æœ¬èŠ‚è¦ç‚¹å›é¡¾</a></h2>
<ul>
<li><code>struct</code> å…³é”®å­—å®šä¹‰ç»“æ„ä½“ã€‚</li>
<li><code>impl</code> å—å®šä¹‰æ–¹æ³•å’Œå…³è”å‡½æ•°ã€‚</li>
<li><code>.</code> è¿ç®—ç¬¦è®¿é—®å­—æ®µå’Œè°ƒç”¨æ–¹æ³•ã€‚</li>
<li><code>#[derive(Debug)]</code> ç”¨äºè°ƒè¯•æ‰“å°ã€‚</li>
</ul>
<h2 id="-ä¸‹ä¸€æ­¥-6"><a class="header" href="#-ä¸‹ä¸€æ­¥-6">â­ï¸ ä¸‹ä¸€æ­¥</a></h2>
<p>æœ‰äº†ç»“æ„ä½“ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡å¦ä¸€ç§å¼ºå¤§çš„æ–¹å¼æ¥å®šä¹‰æ•°æ®ï¼šæšä¸¾ã€‚</p>
<p>ä¸‹ä¸€èŠ‚: <a href="Day01-15/08.Enums/README.html">Day 08: æšä¸¾ä¸æ¨¡å¼åŒ¹é…</a></p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-08-æšä¸¾ä¸æ¨¡å¼åŒ¹é…"><a class="header" href="#day-08-æšä¸¾ä¸æ¨¡å¼åŒ¹é…">Day 08: æšä¸¾ä¸æ¨¡å¼åŒ¹é…</a></h1>
<h2 id="-å­¦ä¹ ç›®æ ‡-5"><a class="header" href="#-å­¦ä¹ ç›®æ ‡-5">ğŸ“ å­¦ä¹ ç›®æ ‡</a></h2>
<ul>
<li>ç†è§£æšä¸¾ (<code>Enum</code>) çš„å®šä¹‰å’Œä½¿ç”¨åœºæ™¯</li>
<li>æŒæ¡ <code>Option&lt;T&gt;</code> æšä¸¾åŠå…¶é‡è¦æ€§</li>
<li>æŒæ¡ <code>match</code> æ§åˆ¶æµè¿ç®—ç¬¦</li>
<li>ç†è§£æ¨¡å¼åŒ¹é…ä¸­çš„ç»‘å®šå€¼å’Œç©·å°½æ€§</li>
<li>æŒæ¡ <code>if let</code> è¯­æ³•ç³–</li>
</ul>
<h2 id="-ä¸ºä»€ä¹ˆè¦å­¦è¿™ä¸ª-2"><a class="header" href="#-ä¸ºä»€ä¹ˆè¦å­¦è¿™ä¸ª-2">ğŸ¯ ä¸ºä»€ä¹ˆè¦å­¦è¿™ä¸ª</a></h2>
<p>æšä¸¾å…è®¸ä½ åˆ—ä¸¾æ‰€æœ‰å¯èƒ½çš„å€¼æ¥å®šä¹‰ä¸€ä¸ªç±»å‹ã€‚</p>
<ul>
<li><strong>è¡¨è¾¾èƒ½åŠ›å¼º</strong>ï¼šæšä¸¾å¯ä»¥æ¸…æ™°åœ°è¡¨è¾¾â€œä¸€ç»„ç›¸å…³é¡¹ä¸­çš„æŸä¸€é¡¹â€œï¼ˆå¦‚ IP åœ°å€æ˜¯ V4 æˆ– V6ï¼‰ã€‚</li>
<li><strong>ç±»å‹å®‰å…¨</strong>ï¼šRust çš„ <code>Option&lt;T&gt;</code> æ›¿ä»£äº†å…¶ä»–è¯­è¨€ä¸­çš„ <code>null</code>ï¼Œè¿«ä½¿ä½ åœ¨ç¼–è¯‘æœŸå¤„ç†â€œæ— å€¼â€œçš„æƒ…å†µï¼Œå½»åº•æœç»äº†â€œç©ºæŒ‡é’ˆå¼‚å¸¸â€œã€‚</li>
<li><strong>å¼ºå¤§çš„æ§åˆ¶æµ</strong>ï¼š<code>match</code> æ¨¡å¼åŒ¹é…æ¯” <code>switch</code> å¼ºå¤§å¾—å¤šï¼Œå®ƒèƒ½è§£æ„æ•°æ®ã€æ£€æŸ¥å®Œæ•´æ€§ã€‚</li>
</ul>
<h2 id="-æ ¸å¿ƒæ¦‚å¿µ-1"><a class="header" href="#-æ ¸å¿ƒæ¦‚å¿µ-1">ğŸ“– æ ¸å¿ƒæ¦‚å¿µ</a></h2>
<h3 id="1-å®šä¹‰æšä¸¾"><a class="header" href="#1-å®šä¹‰æšä¸¾">1. å®šä¹‰æšä¸¾</a></h3>
<p>æšä¸¾ (Enumerations) åŒ…å«å¤šä¸ªå˜ä½“ (Variants)ã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>enum IpAddrKind {
    V4,
    V6,
}
<span class="boring">}</span></code></pre>
<p><strong>æšä¸¾å˜ä½“å¯ä»¥åŒ…å«æ•°æ®</strong>ï¼š
æ¯ä¸ªå˜ä½“å¯ä»¥åŒ…å«ä¸åŒç±»å‹å’Œæ•°é‡çš„æ•°æ®ã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>enum Message {
    Quit,                       // æ²¡æœ‰æ•°æ®
    Move { x: i32, y: i32 },    // åŒ…å«åŒ¿åç»“æ„ä½“
    Write(String),              // åŒ…å« String
    ChangeColor(i32, i32, i32), // åŒ…å«ä¸‰ä¸ª i32
}
<span class="boring">}</span></code></pre>
<h3 id="2-option-æšä¸¾"><a class="header" href="#2-option-æšä¸¾">2. Option æšä¸¾</a></h3>
<p>Rust æ²¡æœ‰ <code>null</code>ã€‚å®ƒä½¿ç”¨ <code>Option&lt;T&gt;</code> æ ‡å‡†åº“æšä¸¾æ¥è¡¨ç¤ºä¸€ä¸ªå€¼å¯èƒ½å­˜åœ¨ï¼Œä¹Ÿå¯èƒ½ä¸å­˜åœ¨ã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>enum Option&lt;T&gt; {
    Some(T),
    None,
}
<span class="boring">}</span></code></pre>
<p><code>Some(T)</code> è¡¨ç¤ºæœ‰å€¼ï¼Œ<code>None</code> è¡¨ç¤ºæ— å€¼ã€‚
ä½¿ç”¨ <code>Option</code> çš„å¥½å¤„æ˜¯ï¼Œä½ ä¸èƒ½ç›´æ¥æŠŠ <code>Option&lt;T&gt;</code> å½“ä½œ <code>T</code> æ¥ä½¿ç”¨ï¼Œå¿…é¡»æ˜¾å¼åœ°å¤„ç† <code>None</code> çš„æƒ…å†µï¼Œè¿™ä¿è¯äº†å®‰å…¨ã€‚</p>
<h3 id="3-match-æ§åˆ¶æµè¿ç®—ç¬¦"><a class="header" href="#3-match-æ§åˆ¶æµè¿ç®—ç¬¦">3. match æ§åˆ¶æµè¿ç®—ç¬¦</a></h3>
<p><code>match</code> å…è®¸æˆ‘ä»¬å°†ä¸€ä¸ªå€¼ä¸ä¸€ç³»åˆ—çš„æ¨¡å¼è¿›è¡Œæ¯”è¾ƒï¼Œå¹¶æ ¹æ®åŒ¹é…çš„æ¨¡å¼æ‰§è¡Œä»£ç ã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>enum Coin {
    Penny,
    Nickel,
    Dime,
    Quarter,
}

fn value_in_cents(coin: Coin) -&gt; u8 {
    match coin {
        Coin::Penny =&gt; 1,
        Coin::Nickel =&gt; 5,
        Coin::Dime =&gt; 10,
        Coin::Quarter =&gt; 25,
    }
}
<span class="boring">}</span></code></pre>
<p><strong>ç»‘å®šå€¼</strong>ï¼š
åŒ¹é…åˆ†æ”¯å¯ä»¥ç»‘å®šåˆ°åŒ¹é…æ¨¡å¼çš„éƒ¨åˆ†å€¼ã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>match message {
    Message::Write(text) =&gt; println!("Text: {}", text),
    // ...
}
<span class="boring">}</span></code></pre>
<p><strong>åŒ¹é…æ˜¯ç©·å°½çš„ (Exhaustive)</strong>ï¼š
å¿…é¡»å¤„ç†æ‰€æœ‰å¯èƒ½çš„æƒ…å†µï¼Œå¦åˆ™ç¼–è¯‘ä¸é€šè¿‡ã€‚
å¯ä»¥ä½¿ç”¨ <code>_</code> é€šé…ç¬¦æ¥å¤„ç†â€œå…¶ä»–æ‰€æœ‰æƒ…å†µâ€œã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let u8_value = 0u8;
match u8_value {
    1 =&gt; println!("one"),
    3 =&gt; println!("three"),
    _ =&gt; (),
}
<span class="boring">}</span></code></pre>
<h3 id="4-if-let-ç®€å•æ§åˆ¶æµ"><a class="header" href="#4-if-let-ç®€å•æ§åˆ¶æµ">4. if let ç®€å•æ§åˆ¶æµ</a></h3>
<p>å½“ä½ åªå…³å¿ƒä¸€ç§åŒ¹é…æƒ…å†µè€Œå¿½ç•¥å…¶ä»–æƒ…å†µæ—¶ï¼Œ<code>if let</code> æ›´åŠ ç®€æ´ã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let some_u8_value = Some(3u8);

// ä½¿ç”¨ match
match some_u8_value {
    Some(3) =&gt; println!("three"),
    _ =&gt; (),
}

// ä½¿ç”¨ if let
if let Some(3) = some_u8_value {
    println!("three");
}
<span class="boring">}</span></code></pre>
<p><code>if let</code> æ”¾å¼ƒäº†ç©·å°½æ€§æ£€æŸ¥ï¼Œæ¢å–äº†ç®€æ´ã€‚</p>
<h2 id="-ä»£ç ç¤ºä¾‹-1"><a class="header" href="#-ä»£ç ç¤ºä¾‹-1">ğŸ’» ä»£ç ç¤ºä¾‹</a></h2>
<h3 id="ç¤ºä¾‹-å¤„ç†-option"><a class="header" href="#ç¤ºä¾‹-å¤„ç†-option">ç¤ºä¾‹: å¤„ç† Option</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn plus_one(x: Option&lt;i32&gt;) -&gt; Option&lt;i32&gt; {
    match x {
        None =&gt; None,
        Some(i) =&gt; Some(i + 1),
    }
}

let five = Some(5);
let six = plus_one(five);
let none = plus_one(None);
<span class="boring">}</span></code></pre>
<h2 id="-ç»ƒä¹ é¢˜-4"><a class="header" href="#-ç»ƒä¹ é¢˜-4">ğŸ‹ï¸ ç»ƒä¹ é¢˜</a></h2>
<p>æˆ‘ä»¬ä¸ºä½ å‡†å¤‡äº†å…³äºæšä¸¾å®šä¹‰ã€Option ä½¿ç”¨å’Œ match åŒ¹é…çš„ç»ƒä¹ ã€‚</p>
<ul>
<li><strong>ç»ƒä¹  1</strong>: å®šä¹‰æ¶ˆæ¯æšä¸¾</li>
<li><strong>ç»ƒä¹  2</strong>: Option åŠ æ³•</li>
<li><strong>ç»ƒä¹  3</strong>: ç¡¬å¸åˆ†ç±»å™¨</li>
</ul>
<p>ğŸ‘‰ <strong><a href="Day01-15/08.Enums/exercises/README.html">ç‚¹å‡»è¿™é‡ŒæŸ¥çœ‹ç»ƒä¹ é¢˜</a></strong></p>
<h2 id="-å¸¸è§é—®é¢˜-faq-1"><a class="header" href="#-å¸¸è§é—®é¢˜-faq-1">ğŸ¤” å¸¸è§é—®é¢˜ (FAQ)</a></h2>
<h3 id="q1-ä»€ä¹ˆæ—¶å€™ç”¨-structä»€ä¹ˆæ—¶å€™ç”¨-enum"><a class="header" href="#q1-ä»€ä¹ˆæ—¶å€™ç”¨-structä»€ä¹ˆæ—¶å€™ç”¨-enum">Q1: ä»€ä¹ˆæ—¶å€™ç”¨ structï¼Œä»€ä¹ˆæ—¶å€™ç”¨ enumï¼Ÿ</a></h3>
<p>A: å¦‚æœä½ çš„æ•°æ®æ˜¯â€œå¹¶ä¸”â€œçš„å…³ç³»ï¼ˆæ—¢æœ‰åå­—åˆæœ‰å¹´é¾„ï¼‰ï¼Œç”¨ structã€‚å¦‚æœä½ çš„æ•°æ®æ˜¯â€œæˆ–è€…â€œçš„å…³ç³»ï¼ˆè¦æ˜¯ IPv4 è¦ä¹ˆæ˜¯ IPv6ï¼‰ï¼Œç”¨ enumã€‚</p>
<h3 id="q2-ä¸ºä»€ä¹ˆ-optionsome5-å¯ä»¥ç›´æ¥å†™æˆ-some5"><a class="header" href="#q2-ä¸ºä»€ä¹ˆ-optionsome5-å¯ä»¥ç›´æ¥å†™æˆ-some5">Q2: ä¸ºä»€ä¹ˆ <code>Option::Some(5)</code> å¯ä»¥ç›´æ¥å†™æˆ <code>Some(5)</code>ï¼Ÿ</a></h3>
<p>A: å› ä¸º <code>Option</code> åŠå…¶å˜ä½“ <code>Some</code>, <code>None</code> è¢«åŒ…å«åœ¨äº† Rust çš„é¢„å¯¼å…¥æ¨¡å— (prelude) ä¸­ï¼Œä¸éœ€è¦æ‰‹åŠ¨ <code>use</code>ã€‚</p>
<h3 id="q3-if-let-å’Œ-match-æ€§èƒ½æœ‰åŒºåˆ«å—"><a class="header" href="#q3-if-let-å’Œ-match-æ€§èƒ½æœ‰åŒºåˆ«å—">Q3: <code>if let</code> å’Œ <code>match</code> æ€§èƒ½æœ‰åŒºåˆ«å—ï¼Ÿ</a></h3>
<p>A: å‡ ä¹æ²¡æœ‰åŒºåˆ«ã€‚ç¼–è¯‘å™¨é€šå¸¸ä¼šä¼˜åŒ–å®ƒä»¬ç”Ÿæˆç›¸ä¼¼çš„æ±‡ç¼–ä»£ç ã€‚é€‰æ‹©ä¾æ®ä¸»è¦æ˜¯ä»£ç çš„å¯è¯»æ€§å’Œæ˜¯å¦éœ€è¦ç©·å°½æ€§æ£€æŸ¥ã€‚</p>
<h2 id="-æœ€ä½³å®è·µ-3"><a class="header" href="#-æœ€ä½³å®è·µ-3">ğŸ’¡ æœ€ä½³å®è·µ</a></h2>
<ul>
<li><strong>åˆ©ç”¨ç±»å‹ç³»ç»Ÿ</strong>ï¼šå°½é‡ä½¿ç”¨æšä¸¾æ¥è¡¨ç¤ºçŠ¶æ€æœºçš„çŠ¶æ€ï¼Œåˆ©ç”¨ç¼–è¯‘å™¨æ£€æŸ¥ç¡®ä¿çŠ¶æ€è½¬æ¢æ­£ç¡®ã€‚</li>
<li><strong>ä¼˜å…ˆ match</strong>ï¼šå¯¹äºå¤æ‚çš„æ¡ä»¶åˆ¤æ–­ï¼Œ<code>match</code> æ¯”ä¸€å † <code>if else</code> æ›´æ¸…æ™°ä¸”æ›´å®‰å…¨ï¼ˆç©·å°½æ€§æ£€æŸ¥ï¼‰ã€‚</li>
<li><strong>å¤„ç† None</strong>ï¼šä¸è¦æ€¥ç€ <code>unwrap()</code>ï¼Œå°½é‡ä½¿ç”¨ <code>match</code> æˆ– <code>if let</code> ä¼˜é›…åœ°å¤„ç† <code>None</code>ã€‚</li>
</ul>
<h2 id="-æ‰©å±•é˜…è¯»-1"><a class="header" href="#-æ‰©å±•é˜…è¯»-1">ğŸ”— æ‰©å±•é˜…è¯»</a></h2>
<ul>
<li><a href="https://doc.rust-lang.org/book/ch06-00-enums.html">Rust ç¨‹åºè®¾è®¡è¯­è¨€ - æšä¸¾ä¸æ¨¡å¼åŒ¹é…</a></li>
</ul>
<h2 id="-æœ¬èŠ‚è¦ç‚¹å›é¡¾-1"><a class="header" href="#-æœ¬èŠ‚è¦ç‚¹å›é¡¾-1">ğŸ“š æœ¬èŠ‚è¦ç‚¹å›é¡¾</a></h2>
<ul>
<li><code>enum</code> å®šä¹‰æšä¸¾ã€‚</li>
<li><code>Option&lt;T&gt;</code> å¤„ç†ç©ºå€¼ã€‚</li>
<li><code>match</code> è¿›è¡Œæ¨¡å¼åŒ¹é…ï¼Œå¿…é¡»ç©·å°½ã€‚</li>
<li><code>_</code> é€šé…ç¬¦åŒ¹é…å…¶ä½™æƒ…å†µã€‚</li>
<li><code>if let</code> å¤„ç†åªå…³å¿ƒä¸€ç§æƒ…å†µçš„åœºæ™¯ã€‚</li>
</ul>
<h2 id="-ä¸‹ä¸€æ­¥-7"><a class="header" href="#-ä¸‹ä¸€æ­¥-7">â­ï¸ ä¸‹ä¸€æ­¥</a></h2>
<p>ç°åœ¨æˆ‘ä»¬å·²ç»æŒæ¡äº†å˜é‡ã€ç»“æ„ä½“å’Œæšä¸¾ã€‚éšç€ä»£ç é‡çš„å¢åŠ ï¼Œæˆ‘ä»¬éœ€è¦æ›´å¥½çš„ç»„ç»‡ä»£ç ã€‚</p>
<p>ä¸‹ä¸€èŠ‚: <a href="Day01-15/09.Modules/README.html">Day 09: æ¨¡å—ç³»ç»Ÿ</a></p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-09-æ¨¡å—ç³»ç»Ÿ-modules"><a class="header" href="#day-09-æ¨¡å—ç³»ç»Ÿ-modules">Day 09: æ¨¡å—ç³»ç»Ÿ (Modules)</a></h1>
<h2 id="-å­¦ä¹ ç›®æ ‡-6"><a class="header" href="#-å­¦ä¹ ç›®æ ‡-6">ğŸ“ å­¦ä¹ ç›®æ ‡</a></h2>
<ul>
<li>ç†è§£ Rust ä»£ç ç»„ç»‡ç»“æ„ï¼šPackageã€Crate å’Œ Module</li>
<li>æŒæ¡æ¨¡å—å®šä¹‰ä¸æ–‡ä»¶æ‹†åˆ†</li>
<li>æ·±å…¥ç†è§£å¯è§æ€§è§„åˆ™ (<code>pub</code>, <code>priv</code>)</li>
<li>ç†Ÿç»ƒä½¿ç”¨è·¯å¾„ (<code>crate</code>, <code>super</code>, <code>self</code>) å¼•ç”¨é¡¹</li>
<li>æŒæ¡ <code>use</code> å…³é”®å­—å¼•å…¥ä½œç”¨åŸŸä¸ <code>pub use</code> é‡å¯¼å‡º</li>
</ul>
<h2 id="-ä¸ºä»€ä¹ˆè¦å­¦è¿™ä¸ª-3"><a class="header" href="#-ä¸ºä»€ä¹ˆè¦å­¦è¿™ä¸ª-3">ğŸ¯ ä¸ºä»€ä¹ˆè¦å­¦è¿™ä¸ª</a></h2>
<p>éšç€ä»£ç é‡çš„å¢åŠ ï¼Œå°†æ‰€æœ‰ä»£ç å†™åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­ä¼šå˜å¾—éš¾ä»¥ç»´æŠ¤ã€‚Rust çš„æ¨¡å—ç³»ç»Ÿæä¾›äº†å¼ºå¤§çš„å·¥å…·æ¥å¸®åŠ©ä½ ï¼š</p>
<ul>
<li><strong>ç»„ç»‡ä»£ç </strong>: å°†ç›¸å…³åŠŸèƒ½åˆ†ç»„ï¼Œæé«˜ä»£ç å¯è¯»æ€§ã€‚</li>
<li><strong>æ§åˆ¶å¯è§æ€§</strong>: éšè—å†…éƒ¨å®ç°ç»†èŠ‚ï¼Œåªæš´éœ²å¿…è¦çš„å…¬å…± APIï¼ˆå°è£…ï¼‰ã€‚</li>
<li><strong>é‡ç”¨ä»£ç </strong>: æ–¹ä¾¿åœ¨ä¸åŒé¡¹ç›®é—´å…±äº«ä»£ç ã€‚</li>
</ul>
<h2 id="-æ ¸å¿ƒæ¦‚å¿µ-2"><a class="header" href="#-æ ¸å¿ƒæ¦‚å¿µ-2">ğŸ“– æ ¸å¿ƒæ¦‚å¿µ</a></h2>
<h3 id="1-ä»£ç ç»„ç»‡å±‚æ¬¡"><a class="header" href="#1-ä»£ç ç»„ç»‡å±‚æ¬¡">1. ä»£ç ç»„ç»‡å±‚æ¬¡</a></h3>
<p>Rust çš„æ¨¡å—ç³»ç»Ÿç”±ä¸‰ä¸ªä¸»è¦éƒ¨åˆ†ç»„æˆï¼š</p>
<ul>
<li><strong>åŒ… (Package)</strong>: ä¸€ä¸ª Cargo é¡¹ç›®ï¼ŒåŒ…å« <code>Cargo.toml</code> é…ç½®æ–‡ä»¶ã€‚ä¸€ä¸ªåŒ…å¯ä»¥åŒ…å«é›¶ä¸ªæˆ–ä¸€ä¸ªåº“ Crateï¼Œä»¥åŠä»»æ„å¤šä¸ªäºŒè¿›åˆ¶ Crateã€‚</li>
<li><strong>Crate</strong>: ç¼–è¯‘å•å…ƒã€‚å¯ä»¥æ˜¯åº“ (Library Crate) æˆ–äºŒè¿›åˆ¶æ–‡ä»¶ (Binary Crate)ã€‚</li>
<li><strong>æ¨¡å— (Module)</strong>: åœ¨ Crate å†…éƒ¨ç»„ç»‡ä»£ç çš„å•å…ƒï¼Œå¯ä»¥åµŒå¥—ï¼Œå½¢æˆæ ‘çŠ¶ç»“æ„ã€‚</li>
</ul>
<h3 id="2-å®šä¹‰æ¨¡å—"><a class="header" href="#2-å®šä¹‰æ¨¡å—">2. å®šä¹‰æ¨¡å—</a></h3>
<p>ä½¿ç”¨ <code>mod</code> å…³é”®å­—å®šä¹‰æ¨¡å—ã€‚æ¨¡å—å†…å¯ä»¥åŒ…å«å‡½æ•°ã€ç»“æ„ä½“ã€æšä¸¾ã€å¸¸é‡ã€Traitï¼Œç”šè‡³å…¶ä»–æ¨¡å—ã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// lib.rs æˆ– main.rs

mod front_of_house {
    mod hosting {
        fn add_to_waitlist() {}
    }
}
<span class="boring">}</span></code></pre>
<h3 id="3-è·¯å¾„-paths"><a class="header" href="#3-è·¯å¾„-paths">3. è·¯å¾„ (Paths)</a></h3>
<p>è¦åœ¨æ¨¡å—æ ‘ä¸­æ‰¾åˆ°æŸä¸ªé¡¹ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨è·¯å¾„ï¼š</p>
<ul>
<li><strong>ç»å¯¹è·¯å¾„</strong>: ä» Crate æ ¹å¼€å§‹ï¼Œä»¥ <code>crate</code> å¼€å¤´ã€‚</li>
<li><strong>ç›¸å¯¹è·¯å¾„</strong>: ä»å½“å‰æ¨¡å—å¼€å§‹ï¼Œä»¥ <code>self</code>ã€<code>super</code> æˆ–å½“å‰æ¨¡å—åå¼€å¤´ã€‚</li>
</ul>
<h3 id="4-å¯è§æ€§-visibility"><a class="header" href="#4-å¯è§æ€§-visibility">4. å¯è§æ€§ (Visibility)</a></h3>
<p>Rust ä¸­é»˜è®¤æ‰€æœ‰é¡¹ï¼ˆå‡½æ•°ã€æ–¹æ³•ã€ç»“æ„ä½“ã€æšä¸¾ã€æ¨¡å—å’Œå¸¸é‡ï¼‰éƒ½æ˜¯ <strong>ç§æœ‰çš„ (private)</strong>ã€‚</p>
<ul>
<li>çˆ¶æ¨¡å—æ— æ³•ç›´æ¥è®¿é—®å­æ¨¡å—çš„ç§æœ‰é¡¹ã€‚</li>
<li>å­æ¨¡å—å¯ä»¥ä½¿ç”¨ç¥–å…ˆæ¨¡å—ä¸­çš„æ‰€æœ‰é¡¹ï¼ˆåŒ…æ‹¬ç§æœ‰çš„ï¼‰ã€‚</li>
<li>ä½¿ç”¨ <code>pub</code> å…³é”®å­—å°†é¡¹æ ‡è®°ä¸ºå…¬æœ‰ã€‚</li>
</ul>
<h3 id="5-use-å…³é”®å­—"><a class="header" href="#5-use-å…³é”®å­—">5. use å…³é”®å­—</a></h3>
<p><code>use</code> å…³é”®å­—å¯ä»¥å°†è·¯å¾„å¼•å…¥å½“å‰ä½œç”¨åŸŸï¼Œåƒåˆ›å»ºè½¯é“¾æ¥ä¸€æ ·ï¼Œé¿å…æ¯æ¬¡éƒ½å†™é•¿é•¿çš„è·¯å¾„ã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use crate::front_of_house::hosting;

pub fn eat_at_restaurant() {
    hosting::add_to_waitlist();
}
<span class="boring">}</span></code></pre>
<h2 id="-ä»£ç ç¤ºä¾‹-2"><a class="header" href="#-ä»£ç ç¤ºä¾‹-2">ğŸ’» ä»£ç ç¤ºä¾‹</a></h2>
<h3 id="ç¤ºä¾‹-1-æ¨¡å—å®šä¹‰ä¸å¯è§æ€§"><a class="header" href="#ç¤ºä¾‹-1-æ¨¡å—å®šä¹‰ä¸å¯è§æ€§">ç¤ºä¾‹ 1: æ¨¡å—å®šä¹‰ä¸å¯è§æ€§</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>mod back_of_house {
    pub struct Breakfast {
        pub toast: String,      // å…¬æœ‰å­—æ®µ
        seasonal_fruit: String, // ç§æœ‰å­—æ®µ
    }

    impl Breakfast {
        pub fn summer(toast: String) -&gt; Breakfast {
            Breakfast {
                toast,
                seasonal_fruit: String::from("peaches"),
            }
        }
    }
}

pub fn eat_at_restaurant() {
    // è®¢è´­ä¸€ä»½æ—©é¤ï¼Œå¯ä»¥éšå¿ƒæ‰€æ¬²åœ°æ”¹å˜åå¸çš„ç±»å‹
    let mut meal = back_of_house::Breakfast::summer(String::from("Rye"));
    meal.toast = String::from("Wheat");
    println!("I'd like {} toast please", meal.toast);

    // ä¸‹é¢è¿™è¡Œä»£ç ä¼šå¯¼è‡´ç¼–è¯‘é”™è¯¯ï¼Œå› ä¸º seasonal_fruit å­—æ®µæ˜¯ç§æœ‰çš„
    // meal.seasonal_fruit = String::from("blueberries");
}
<span class="boring">}</span></code></pre>
<h3 id="ç¤ºä¾‹-2-ä½¿ç”¨-super-è®¿é—®çˆ¶æ¨¡å—"><a class="header" href="#ç¤ºä¾‹-2-ä½¿ç”¨-super-è®¿é—®çˆ¶æ¨¡å—">ç¤ºä¾‹ 2: ä½¿ç”¨ super è®¿é—®çˆ¶æ¨¡å—</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn serve_order() {}

mod back_of_house {
    fn fix_incorrect_order() {
        cook_order();
        // ä½¿ç”¨ super è®¿é—®çˆ¶æ¨¡å—ä¸­çš„å‡½æ•°
        super::serve_order();
    }

    fn cook_order() {}
}
<span class="boring">}</span></code></pre>
<h2 id="-æ¨¡å—æ‹†åˆ†-æ–‡ä»¶ç»“æ„"><a class="header" href="#-æ¨¡å—æ‹†åˆ†-æ–‡ä»¶ç»“æ„">ğŸ› ï¸ æ¨¡å—æ‹†åˆ† (æ–‡ä»¶ç»“æ„)</a></h2>
<p>å½“æ¨¡å—å˜å¤§æ—¶ï¼Œåº”è¯¥å°†å…¶æ‹†åˆ†åˆ°ç‹¬ç«‹æ–‡ä»¶ä¸­ã€‚Rust æ”¯æŒä¸¤ç§é£æ ¼ï¼š</p>
<p><strong>é£æ ¼ 1 (ç°ä»£é£æ ¼ï¼Œæ¨è):</strong></p>
<pre><code class="language-text">src/
â”œâ”€â”€ lib.rs
â”œâ”€â”€ front_of_house.rs  &lt;-- å¯¹åº” mod front_of_house
â””â”€â”€ front_of_house/
    â””â”€â”€ hosting.rs     &lt;-- å¯¹åº” mod front_of_house é‡Œçš„ mod hosting
</code></pre>
<p><strong>é£æ ¼ 2 (ä¼ ç»Ÿé£æ ¼):</strong></p>
<pre><code class="language-text">src/
â”œâ”€â”€ lib.rs
â”œâ”€â”€ front_of_house/
    â”œâ”€â”€ mod.rs         &lt;-- å¯¹åº” mod front_of_house
    â””â”€â”€ hosting.rs
</code></pre>
<p>åœ¨ <code>lib.rs</code> ä¸­å£°æ˜æ¨¡å—ï¼š</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>mod front_of_house; // å‘Šè¯‰ç¼–è¯‘å™¨å»æŸ¥æ‰¾ front_of_house.rs æˆ– front_of_house/mod.rs

pub use crate::front_of_house::hosting; // é‡å¯¼å‡ºï¼Œæ–¹ä¾¿å¤–éƒ¨ä½¿ç”¨
<span class="boring">}</span></code></pre>
<h2 id="-ç»ƒä¹ é¢˜-5"><a class="header" href="#-ç»ƒä¹ é¢˜-5">ğŸ‹ï¸ ç»ƒä¹ é¢˜</a></h2>
<p>æˆ‘ä»¬å‡†å¤‡äº†ç»ƒä¹ é¢˜æ¥å¸®åŠ©ä½ æŒæ¡æ¨¡å—ç³»ç»Ÿçš„ä½¿ç”¨ã€‚</p>
<ul>
<li><strong>ç»ƒä¹  1</strong>: ä¿®å¤å¯è§æ€§é”™è¯¯</li>
<li><strong>ç»ƒä¹  2</strong>: ä½¿ç”¨ <code>use</code> ç®€åŒ–ä»£ç </li>
<li><strong>ç»ƒä¹  3</strong>: å°†å•æ–‡ä»¶æ¨¡å—é‡æ„ä¸ºå¤šæ–‡ä»¶ç»“æ„</li>
</ul>
<p>ğŸ‘‰ <strong><a href="Day01-15/09.Modules/exercises/README.html">ç‚¹å‡»è¿™é‡ŒæŸ¥çœ‹ç»ƒä¹ é¢˜</a></strong></p>
<h2 id="-å¸¸è§é—®é¢˜-faq-2"><a class="header" href="#-å¸¸è§é—®é¢˜-faq-2">ğŸ¤” å¸¸è§é—®é¢˜ (FAQ)</a></h2>
<h3 id="q1-modrs-å’Œ-æ–‡ä»¶års-æœ‰ä»€ä¹ˆåŒºåˆ«"><a class="header" href="#q1-modrs-å’Œ-æ–‡ä»¶års-æœ‰ä»€ä¹ˆåŒºåˆ«">Q1: <code>mod.rs</code> å’Œ <code>æ–‡ä»¶å.rs</code> æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</a></h3>
<p>A: å®ƒä»¬åœ¨åŠŸèƒ½ä¸Šæ˜¯ä¸€æ ·çš„ã€‚<code>mod.rs</code> æ˜¯ Rust 2015 çš„é£æ ¼ï¼Œç±»ä¼¼äº <code>index.html</code>ã€‚<code>æ–‡ä»¶å.rs</code> æ˜¯ Rust 2018 å¼•å…¥çš„é£æ ¼ï¼Œæ›´ç®€æ´ï¼Œé¿å…äº†ç¼–è¾‘å™¨ä¸­æ‰“å¼€å¾ˆå¤šä¸ª <code>mod.rs</code> å¯¼è‡´æ··æ·†ã€‚ç°åœ¨æ¨èä½¿ç”¨åè€…ã€‚</p>
<h3 id="q2-ä»€ä¹ˆæ—¶å€™è¯¥ç”¨-pub-use"><a class="header" href="#q2-ä»€ä¹ˆæ—¶å€™è¯¥ç”¨-pub-use">Q2: ä»€ä¹ˆæ—¶å€™è¯¥ç”¨ <code>pub use</code>ï¼Ÿ</a></h3>
<p>A: å½“ä½ å¸Œæœ›é‡æ–°ç»„ç»‡ crate çš„å…¬å…± API ç»“æ„ï¼Œä½¿å…¶ä¸å†…éƒ¨å®ç°ç»“æ„ä¸åŒæ—¶ã€‚ä¾‹å¦‚ï¼Œä½ å†…éƒ¨æœ‰å¾ˆå¤šåµŒå¥—æ¨¡å—ï¼Œä½†å¸Œæœ›ç”¨æˆ·èƒ½ç›´æ¥ä»é¡¶çº§æ¨¡å—å¯¼å…¥å¸¸ç”¨åŠŸèƒ½ã€‚</p>
<h3 id="q3-äºŒè¿›åˆ¶-crate-mainrs-å¯ä»¥åŒ…å«æ¨¡å—å—"><a class="header" href="#q3-äºŒè¿›åˆ¶-crate-mainrs-å¯ä»¥åŒ…å«æ¨¡å—å—">Q3: äºŒè¿›åˆ¶ crate (<code>main.rs</code>) å¯ä»¥åŒ…å«æ¨¡å—å—ï¼Ÿ</a></h3>
<p>A: å¯ä»¥ã€‚ä½†åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œé€šå¸¸å»ºè®®å°†æ ¸å¿ƒé€»è¾‘æ”¾å…¥åº“ crate (<code>lib.rs</code>)ï¼Œè€Œ <code>main.rs</code> åªè´Ÿè´£è§£æå‚æ•°å’Œè°ƒç”¨åº“å‡½æ•°ã€‚è¿™æ ·æ›´å®¹æ˜“æµ‹è¯•å’Œé‡ç”¨ä»£ç ã€‚</p>
<h2 id="-æœ€ä½³å®è·µ-4"><a class="header" href="#-æœ€ä½³å®è·µ-4">ğŸ’¡ æœ€ä½³å®è·µ</a></h2>
<ul>
<li><strong>åº“å¼€å‘</strong>: å°† <code>main.rs</code> ä¿æŒç²¾ç®€ï¼Œé€»è¾‘æ”¾å…¥ <code>lib.rs</code>ã€‚</li>
<li><strong>Prelude æ¨¡å¼</strong>: å¦‚æœä½ çš„åº“æœ‰å¾ˆå¤šå¸¸ç”¨çš„ trait æˆ–ç»“æ„ä½“ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ª <code>prelude</code> æ¨¡å—å¹¶é€šè¿‡ <code>pub use</code> å¯¼å‡ºå®ƒä»¬ï¼Œæ–¹ä¾¿ç”¨æˆ·ä¸€æ¬¡æ€§å¯¼å…¥ã€‚</li>
<li><strong>ä¿æŒç§æœ‰</strong>: é»˜è®¤ä¿æŒæ¨¡å—å’Œå­—æ®µç§æœ‰ï¼Œåªæœ‰ç¡®æœ‰å¿…è¦æš´éœ²ç»™å¤–éƒ¨æ—¶æ‰æ·»åŠ  <code>pub</code>ã€‚</li>
</ul>
<h2 id="-æ‰©å±•é˜…è¯»-2"><a class="header" href="#-æ‰©å±•é˜…è¯»-2">ğŸ”— æ‰©å±•é˜…è¯»</a></h2>
<ul>
<li><a href="https://doc.rust-lang.org/book/ch07-00-managing-growing-projects-with-packages-crates-and-modules.html">Rust ç¨‹åºè®¾è®¡è¯­è¨€ - æ¨¡å—ç³»ç»Ÿ</a></li>
</ul>
<h2 id="-ä¸‹ä¸€æ­¥-8"><a class="header" href="#-ä¸‹ä¸€æ­¥-8">â­ï¸ ä¸‹ä¸€æ­¥</a></h2>
<p>æŒæ¡äº†ä»£ç ç»„ç»‡æ–¹å¼åï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ Rust æ ‡å‡†åº“ä¸­æä¾›çš„å¸¸ç”¨æ•°æ®ç»“æ„ã€‚</p>
<p>ä¸‹ä¸€èŠ‚: <a href="Day01-15/10.CommonCollections/README.html">Day 10: å¸¸ç”¨é›†åˆ</a></p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-10-å¸¸ç”¨é›†åˆ-common-collections"><a class="header" href="#day-10-å¸¸ç”¨é›†åˆ-common-collections">Day 10: å¸¸ç”¨é›†åˆ (Common Collections)</a></h1>
<h2 id="-å­¦ä¹ ç›®æ ‡-7"><a class="header" href="#-å­¦ä¹ ç›®æ ‡-7">ğŸ“ å­¦ä¹ ç›®æ ‡</a></h2>
<ul>
<li>æŒæ¡ <strong>Vector (<code>Vec&lt;T&gt;</code>)</strong> çš„å¢åˆ æ”¹æŸ¥æ“ä½œ</li>
<li>ç†è§£ <strong>String</strong> çš„ç¼–ç æœºåˆ¶ä¸æ“ä½œé™åˆ¶</li>
<li>ç†Ÿç»ƒä½¿ç”¨ <strong>HashMap (<code>HashMap&lt;K, V&gt;</code>)</strong> è¿›è¡Œé”®å€¼å­˜å‚¨</li>
<li>ç†è§£è¿™äº›é›†åˆåœ¨å†…å­˜ä¸­çš„å¸ƒå±€ï¼ˆå †å†…å­˜ï¼‰</li>
</ul>
<h2 id="-ä¸ºä»€ä¹ˆè¦å­¦è¿™ä¸ª-4"><a class="header" href="#-ä¸ºä»€ä¹ˆè¦å­¦è¿™ä¸ª-4">ğŸ¯ ä¸ºä»€ä¹ˆè¦å­¦è¿™ä¸ª</a></h2>
<p>Rust çš„æ ‡å‡†åº“æä¾›äº†è®¸å¤šå¼ºå¤§çš„æ•°æ®ç»“æ„ï¼Œç§°ä¸ºâ€œé›†åˆâ€œã€‚ä¸å†…ç½®çš„æ•°ç»„å’Œå…ƒç»„ä¸åŒï¼š</p>
<ul>
<li>å®ƒä»¬çš„æ•°æ®å­˜å‚¨åœ¨ <strong>å † (Heap)</strong> ä¸Šã€‚</li>
<li>å®ƒä»¬çš„å¤§å°æ˜¯ <strong>åŠ¨æ€</strong> çš„ï¼ˆè¿è¡Œæ—¶å¯å˜ï¼‰ã€‚</li>
<li>å®ƒä»¬æ˜¯å¤„ç†ä¸å®šé•¿æ•°æ®çš„åŸºçŸ³ã€‚</li>
</ul>
<h2 id="-æ ¸å¿ƒæ¦‚å¿µ-3"><a class="header" href="#-æ ¸å¿ƒæ¦‚å¿µ-3">ğŸ“– æ ¸å¿ƒæ¦‚å¿µ</a></h2>
<h3 id="1-vector-å‘é‡"><a class="header" href="#1-vector-å‘é‡">1. Vector (å‘é‡)</a></h3>
<p><code>Vec&lt;T&gt;</code> æ˜¯ä¸€ä¸ªå¯å¢é•¿çš„æ•°ç»„ã€‚å®ƒåœ¨å†…å­˜ä¸­æ˜¯è¿ç»­å­˜å‚¨çš„ã€‚</p>
<ul>
<li><strong>åˆ›å»º</strong>: <code>Vec::new()</code> æˆ– <code>vec![1, 2, 3]</code>ã€‚</li>
<li><strong>è®¿é—®</strong>: ä¸‹æ ‡ç´¢å¼• <code>&amp;v[i]</code> (è¶Šç•Œ Panic) æˆ– <code>v.get(i)</code> (è¿”å› <code>Option</code>)ã€‚</li>
<li><strong>éå†</strong>: <code>for x in &amp;v</code>ã€‚</li>
</ul>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let mut v = vec![1, 2, 3];
v.push(4);      // æ·»åŠ 
v.pop();        // åˆ é™¤æœ€åä¸€ä¸ªå¹¶è¿”å› Option&lt;T&gt;
<span class="boring">}</span></code></pre>
<h3 id="2-string-å­—ç¬¦ä¸²"><a class="header" href="#2-string-å­—ç¬¦ä¸²">2. String (å­—ç¬¦ä¸²)</a></h3>
<p>Rust çš„ <code>String</code> æ˜¯ UTF-8 ç¼–ç çš„å­—èŠ‚åºåˆ—ã€‚</p>
<ul>
<li><strong>æœ¬è´¨</strong>: <code>String</code> æ˜¯ <code>Vec&lt;u8&gt;</code> çš„å°è£…ã€‚</li>
<li><strong>ä¸æ”¯æŒç´¢å¼•</strong>: <code>s[0]</code> æ˜¯éæ³•çš„ï¼Œå› ä¸ºä¸€ä¸ª UTF-8 å­—ç¬¦å¯èƒ½å ç”¨ 1-4 ä¸ªå­—èŠ‚ï¼Œç®€å•çš„å­—èŠ‚ç´¢å¼•æ— æ³•å‡†ç¡®å¯¹åº”å­—ç¬¦ã€‚</li>
<li><strong>æ“ä½œ</strong>: <code>push_str</code>, <code>+</code> (æ‹¼æ¥), <code>format!</code>ã€‚</li>
<li><strong>éå†</strong>:
<ul>
<li><code>s.chars()</code>: éå† Unicode æ ‡é‡å€¼ (char)ã€‚</li>
<li><code>s.bytes()</code>: éå†åŸå§‹å­—èŠ‚ã€‚</li>
</ul>
</li>
</ul>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let s = String::from("ä½ å¥½");
// s.len() æ˜¯ 6 (æ¯ä¸ªæ±‰å­— 3 å­—èŠ‚)
// s.chars().count() æ˜¯ 2
<span class="boring">}</span></code></pre>
<h3 id="3-hashmap-å“ˆå¸Œè¡¨"><a class="header" href="#3-hashmap-å“ˆå¸Œè¡¨">3. HashMap (å“ˆå¸Œè¡¨)</a></h3>
<p><code>HashMap&lt;K, V&gt;</code> å­˜å‚¨é”®å€¼å¯¹æ˜ å°„ã€‚</p>
<ul>
<li><strong>æ‰€æœ‰æƒ</strong>:
<ul>
<li>å¯¹äºå®ç°äº† <code>Copy</code> çš„ç±»å‹ (å¦‚ <code>i32</code>)ï¼Œå€¼ä¼šè¢«æ‹·è´ã€‚</li>
<li>å¯¹äº <code>String</code> ç­‰ç±»å‹ï¼Œå€¼çš„æ‰€æœ‰æƒä¼šè¢«ç§»åŠ¨è¿› HashMapã€‚</li>
</ul>
</li>
<li><strong>æ›´æ–°</strong>: <code>insert</code> (è¦†ç›–), <code>entry(...).or_insert(...)</code> (ä¸å­˜åœ¨åˆ™æ’å…¥)ã€‚</li>
</ul>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use std::collections::HashMap;

let mut scores = HashMap::new();
scores.insert(String::from("Blue"), 10);
<span class="boring">}</span></code></pre>
<h2 id="-ä»£ç ç¤ºä¾‹-3"><a class="header" href="#-ä»£ç ç¤ºä¾‹-3">ğŸ’» ä»£ç ç¤ºä¾‹</a></h2>
<h3 id="ç¤ºä¾‹-1-vector-æ“ä½œä¸æšä¸¾"><a class="header" href="#ç¤ºä¾‹-1-vector-æ“ä½œä¸æšä¸¾">ç¤ºä¾‹ 1: Vector æ“ä½œä¸æšä¸¾</a></h3>
<p>Vector åªèƒ½å­˜å‚¨åŒä¸€ç§ç±»å‹ã€‚å¦‚æœéœ€è¦å­˜å‚¨ä¸åŒç±»å‹ï¼Œå¯ä»¥ä½¿ç”¨æšä¸¾ã€‚</p>
<pre class="playground"><code class="language-rust">#[derive(Debug)]
enum SpreadsheetCell {
    Int(i32),
    Float(f64),
    Text(String),
}

fn main() {
    let row = vec![
        SpreadsheetCell::Int(3),
        SpreadsheetCell::Text(String::from("blue")),
        SpreadsheetCell::Float(10.12),
    ];

    for cell in &amp;row {
        println!("{:?}", cell);
    }
}</code></pre>
<h3 id="ç¤ºä¾‹-2-hashmap-ç»Ÿè®¡è¯é¢‘"><a class="header" href="#ç¤ºä¾‹-2-hashmap-ç»Ÿè®¡è¯é¢‘">ç¤ºä¾‹ 2: HashMap ç»Ÿè®¡è¯é¢‘</a></h3>
<pre class="playground"><code class="language-rust">use std::collections::HashMap;

fn main() {
    let text = "hello world wonderful world";
    let mut map = HashMap::new();

    for word in text.split_whitespace() {
        let count = map.entry(word).or_insert(0);
        *count += 1;
    }

    println!("{:?}", map);
}</code></pre>
<h2 id="-ç»ƒä¹ é¢˜-6"><a class="header" href="#-ç»ƒä¹ é¢˜-6">ğŸ‹ï¸ ç»ƒä¹ é¢˜</a></h2>
<p>æˆ‘ä»¬å‡†å¤‡äº†ç»ƒä¹ é¢˜æ¥å¸®åŠ©ä½ æŒæ¡è¿™ä¸‰ç§é›†åˆçš„ä½¿ç”¨ã€‚</p>
<ul>
<li><strong>ç»ƒä¹  1</strong>: ä½¿ç”¨ Vector è¿›è¡Œç»Ÿè®¡ï¼ˆå¹³å‡æ•°ã€ä¸­ä½æ•°ã€ä¼—æ•°ï¼‰</li>
<li><strong>ç»ƒä¹  2</strong>: Pig Latin (çŒªæ‹‰ä¸è¯­) è½¬æ¢å·¥å…·</li>
<li><strong>ç»ƒä¹  3</strong>: å‘˜å·¥éƒ¨é—¨ç®¡ç†ç³»ç»Ÿ (HashMap ç»¼åˆåº”ç”¨)</li>
</ul>
<p>ğŸ‘‰ <strong><a href="Day01-15/10.CommonCollections/exercises/README.html">ç‚¹å‡»è¿™é‡ŒæŸ¥çœ‹ç»ƒä¹ é¢˜</a></strong></p>
<h2 id="-å¸¸è§é—®é¢˜-faq-3"><a class="header" href="#-å¸¸è§é—®é¢˜-faq-3">ğŸ¤” å¸¸è§é—®é¢˜ (FAQ)</a></h2>
<h3 id="q1-string-å’Œ-str-æœ‰ä»€ä¹ˆåŒºåˆ«"><a class="header" href="#q1-string-å’Œ-str-æœ‰ä»€ä¹ˆåŒºåˆ«">Q1: <code>&amp;String</code> å’Œ <code>&amp;str</code> æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</a></h3>
<p>A: <code>String</code> æ˜¯å †ä¸Šåˆ†é…çš„ã€å¯å˜çš„å­—ç¬¦ä¸²å¯¹è±¡ã€‚<code>&amp;str</code> æ˜¯å­—ç¬¦ä¸²åˆ‡ç‰‡ï¼ˆé€šå¸¸æ˜¯å¯¹ String æˆ–å­—é¢é‡çš„å¼•ç”¨ï¼‰ï¼Œæ˜¯ä¸å¯å˜çš„è§†å›¾ã€‚å‡½æ•°å‚æ•°é€šå¸¸å»ºè®®å†™ <code>&amp;str</code> ä»¥å…¼å®¹ä¸¤ç§ç±»å‹ï¼ˆ<code>&amp;String</code> ä¼šè‡ªåŠ¨å¼ºè½¬ä¸º <code>&amp;str</code>ï¼‰ã€‚</p>
<h3 id="q2-ä¸ºä»€ä¹ˆ-s1--s2-ä¸­-s1-å¿…é¡»è¢«ç§»åŠ¨"><a class="header" href="#q2-ä¸ºä»€ä¹ˆ-s1--s2-ä¸­-s1-å¿…é¡»è¢«ç§»åŠ¨">Q2: ä¸ºä»€ä¹ˆ <code>s1 + &amp;s2</code> ä¸­ <code>s1</code> å¿…é¡»è¢«ç§»åŠ¨ï¼Ÿ</a></h3>
<p>A: <code>+</code> è¿ç®—ç¬¦è°ƒç”¨çš„æ˜¯ <code>add</code> æ–¹æ³•ï¼š<code>fn add(self, s: &amp;str) -&gt; String</code>ã€‚ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ <code>self</code>ï¼Œæ„å‘³ç€å®ƒè·å–äº† <code>s1</code> çš„æ‰€æœ‰æƒã€‚ä¸ºäº†æ•ˆç‡ï¼Œå®ƒç›´æ¥åœ¨ <code>s1</code> çš„ç¼“å†²åŒºä¸Šè¿½åŠ  <code>s2</code> çš„å†…å®¹ï¼Œå¹¶è¿”å›ä¿®æ”¹åçš„ <code>s1</code>ï¼Œé¿å…äº†é‡æ–°åˆ†é…æ–°å†…å­˜ã€‚</p>
<h3 id="q3-ä»€ä¹ˆæ—¶å€™ç”¨æ•°ç»„-t-nä»€ä¹ˆæ—¶å€™ç”¨-vect"><a class="header" href="#q3-ä»€ä¹ˆæ—¶å€™ç”¨æ•°ç»„-t-nä»€ä¹ˆæ—¶å€™ç”¨-vect">Q3: ä»€ä¹ˆæ—¶å€™ç”¨æ•°ç»„ <code>[T; N]</code>ï¼Œä»€ä¹ˆæ—¶å€™ç”¨ <code>Vec&lt;T&gt;</code>ï¼Ÿ</a></h3>
<p>A: å¦‚æœæ•°æ®æ•°é‡å›ºå®šä¸”è¾ƒå°ï¼Œç”¨æ•°ç»„ï¼ˆæ ˆåˆ†é…ï¼Œæ›´å¿«ï¼‰ã€‚å¦‚æœæ•°é‡ä¸ç¡®å®šæˆ–å¾ˆå¤§ï¼Œç”¨ Vectorã€‚</p>
<h2 id="-æœ€ä½³å®è·µ-5"><a class="header" href="#-æœ€ä½³å®è·µ-5">ğŸ’¡ æœ€ä½³å®è·µ</a></h2>
<ul>
<li><strong>é¢„åˆ†é…å®¹é‡</strong>: å¦‚æœçŸ¥é“å¤§æ¦‚è¦å­˜å¤šå°‘å…ƒç´ ï¼Œä½¿ç”¨ <code>Vec::with_capacity(n)</code> æˆ– <code>HashMap::with_capacity(n)</code> å¯ä»¥å‡å°‘å†…å­˜é‡æ–°åˆ†é…çš„æ¬¡æ•°ï¼Œæé«˜æ€§èƒ½ã€‚</li>
<li><strong>Entry API</strong>: ä¿®æ”¹ HashMap æ—¶ä¼˜å…ˆä½¿ç”¨ <code>entry</code> APIï¼Œä»£ç æ›´ç®€æ´ä¸”æ•ˆç‡æ›´é«˜ï¼ˆåªè®¡ç®—ä¸€æ¬¡å“ˆå¸Œå€¼ï¼‰ã€‚</li>
</ul>
<h2 id="-æ‰©å±•é˜…è¯»-3"><a class="header" href="#-æ‰©å±•é˜…è¯»-3">ğŸ”— æ‰©å±•é˜…è¯»</a></h2>
<ul>
<li><a href="https://doc.rust-lang.org/book/ch08-00-common-collections.html">Rust ç¨‹åºè®¾è®¡è¯­è¨€ - å¸¸è§é›†åˆ</a></li>
</ul>
<h2 id="-ä¸‹ä¸€æ­¥-9"><a class="header" href="#-ä¸‹ä¸€æ­¥-9">â­ï¸ ä¸‹ä¸€æ­¥</a></h2>
<p>ç°åœ¨æˆ‘ä»¬å·²ç»æŒæ¡äº†åŸºç¡€è¯­æ³•å’Œå¸¸ç”¨æ•°æ®ç»“æ„ã€‚ä½†åœ¨ç¼–ç¨‹ä¸­ï¼Œé”™è¯¯æ˜¯ä¸å¯é¿å…çš„ã€‚Rust æœ‰ä¸€å¥—ç‹¬ç‰¹ä¸”å®‰å…¨çš„é”™è¯¯å¤„ç†æœºåˆ¶ã€‚</p>
<p>ä¸‹ä¸€èŠ‚: <a href="Day01-15/11.ErrorHandling/README.html">Day 11: é”™è¯¯å¤„ç†</a></p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-11-é”™è¯¯å¤„ç†-error-handling"><a class="header" href="#day-11-é”™è¯¯å¤„ç†-error-handling">Day 11: é”™è¯¯å¤„ç† (Error Handling)</a></h1>
<h2 id="-å­¦ä¹ ç›®æ ‡-8"><a class="header" href="#-å­¦ä¹ ç›®æ ‡-8">ğŸ“ å­¦ä¹ ç›®æ ‡</a></h2>
<ul>
<li>ç†è§£ Rust é”™è¯¯å¤„ç†å“²å­¦ï¼šå¯æ¢å¤ vs ä¸å¯æ¢å¤é”™è¯¯</li>
<li>æŒæ¡ <code>Result&lt;T, E&gt;</code> æšä¸¾åŠå…¶å¸¸ç”¨æ–¹æ³• (<code>unwrap</code>, <code>expect</code>)</li>
<li>ç†Ÿç»ƒä½¿ç”¨ <code>?</code> è¿ç®—ç¬¦ä¼ æ’­é”™è¯¯</li>
<li>äº†è§£å¦‚ä½•åœ¨ <code>main</code> å‡½æ•°ä¸­å¤„ç†é”™è¯¯</li>
<li>æŒæ¡ <code>panic!</code> çš„ä½¿ç”¨åœºæ™¯</li>
</ul>
<h2 id="-ä¸ºä»€ä¹ˆè¦å­¦è¿™ä¸ª-5"><a class="header" href="#-ä¸ºä»€ä¹ˆè¦å­¦è¿™ä¸ª-5">ğŸ¯ ä¸ºä»€ä¹ˆè¦å­¦è¿™ä¸ª</a></h2>
<p>Rust ä»¥å®‰å…¨è‘—ç§°ï¼Œè€Œå¤„ç†é”™è¯¯æ˜¯å®‰å…¨çš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚</p>
<ul>
<li><strong>å¼ºåˆ¶å¤„ç†</strong>: Rust ä¸ä½¿ç”¨å¼‚å¸¸ (Exception)ã€‚å®ƒè¿«ä½¿ä½ åœ¨ç¼–è¯‘æ—¶å°±å¿…é¡»å†³å®šå¦‚ä½•å¤„ç†å¯èƒ½å‘ç”Ÿçš„é”™è¯¯ï¼Œä»è€Œæ¶ˆé™¤äº†è¿è¡Œæ—¶æœªæ•è·å¼‚å¸¸å¯¼è‡´çš„å´©æºƒã€‚</li>
<li><strong>æ¸…æ™°æ˜ç¡®</strong>: å‡½æ•°ç­¾åæ˜ç¡®æŒ‡å‡ºäº†å¯èƒ½å¤±è´¥çš„æ“ä½œã€‚</li>
</ul>
<h2 id="-æ ¸å¿ƒæ¦‚å¿µ-4"><a class="header" href="#-æ ¸å¿ƒæ¦‚å¿µ-4">ğŸ“– æ ¸å¿ƒæ¦‚å¿µ</a></h2>
<h3 id="1-é”™è¯¯çš„åˆ†ç±»"><a class="header" href="#1-é”™è¯¯çš„åˆ†ç±»">1. é”™è¯¯çš„åˆ†ç±»</a></h3>
<ul>
<li><strong>ä¸å¯æ¢å¤é”™è¯¯</strong>: ä¸¥é‡çš„ bugï¼Œå¦‚æ•°ç»„è¶Šç•Œã€‚Rust ä½¿ç”¨ <code>panic!</code> å®æ¥å¤„ç†ï¼Œç¨‹åºä¼šæ‰“å°é”™è¯¯ä¿¡æ¯å¹¶é€€å‡ºã€‚</li>
<li><strong>å¯æ¢å¤é”™è¯¯</strong>: é¢„æœŸçš„å¤±è´¥ï¼Œå¦‚æ–‡ä»¶æœªæ‰¾åˆ°ã€‚Rust ä½¿ç”¨ <code>Result&lt;T, E&gt;</code> ç±»å‹æ¥å¤„ç†ï¼Œå…è®¸ç¨‹åºåšå‡ºå“åº”ï¼ˆå¦‚åˆ›å»ºæ–°æ–‡ä»¶ï¼‰ã€‚</li>
</ul>
<h3 id="2-result-æšä¸¾"><a class="header" href="#2-result-æšä¸¾">2. Result æšä¸¾</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>enum Result&lt;T, E&gt; {
    Ok(T),  // æ“ä½œæˆåŠŸï¼ŒåŒ…å«ç»“æœå€¼
    Err(E), // æ“ä½œå¤±è´¥ï¼ŒåŒ…å«é”™è¯¯ä¿¡æ¯
}
<span class="boring">}</span></code></pre>
<h3 id="3-å¤„ç†-result"><a class="header" href="#3-å¤„ç†-result">3. å¤„ç† Result</a></h3>
<ul>
<li><strong>match</strong>: æœ€åŸºæœ¬çš„å¤„ç†æ–¹å¼ï¼Œæ˜¾å¼å¤„ç†æ¯ç§æƒ…å†µã€‚</li>
<li><strong>unwrap()</strong>: å¦‚æœæ˜¯ <code>Ok</code> è¿”å›å€¼ï¼Œå¦‚æœæ˜¯ <code>Err</code> ç›´æ¥ panicã€‚ç”¨äºåŸå‹å¼€å‘æˆ–ç¡®å®šä¸ä¼šå¤±è´¥çš„åœºæ™¯ã€‚</li>
<li><strong>expect(msg)</strong>: åŒ <code>unwrap</code>ï¼Œä½†å¯ä»¥æŒ‡å®š panic æ—¶çš„é”™è¯¯ä¿¡æ¯ï¼ˆæ¨èï¼‰ã€‚</li>
</ul>
<h3 id="4-ä¼ æ’­é”™è¯¯-"><a class="header" href="#4-ä¼ æ’­é”™è¯¯-">4. ä¼ æ’­é”™è¯¯ (?)</a></h3>
<p>å½“å‡½æ•°å†…éƒ¨å‘ç”Ÿé”™è¯¯ï¼Œä¸”ä½ å¸Œæœ›ç”±è°ƒç”¨è€…æ¥å¤„ç†æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ <code>?</code> è¿ç®—ç¬¦ã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use std::fs::File;
use std::io;
use std::io::Read;

fn read_username() -&gt; Result&lt;String, io::Error&gt; {
    let mut s = String::new();
    File::open("hello.txt")?.read_to_string(&amp;mut s)?; // å¤±è´¥åˆ™ç›´æ¥è¿”å› Err
    Ok(s)
}
<span class="boring">}</span></code></pre>
<h2 id="-ä»£ç ç¤ºä¾‹-4"><a class="header" href="#-ä»£ç ç¤ºä¾‹-4">ğŸ’» ä»£ç ç¤ºä¾‹</a></h2>
<h3 id="ç¤ºä¾‹-1-åŸºæœ¬çš„-result-å¤„ç†"><a class="header" href="#ç¤ºä¾‹-1-åŸºæœ¬çš„-result-å¤„ç†">ç¤ºä¾‹ 1: åŸºæœ¬çš„ Result å¤„ç†</a></h3>
<pre class="playground"><code class="language-rust">use std::fs::File;
use std::io::ErrorKind;

fn main() {
    let f = File::open("hello.txt");

    let f = match f {
        Ok(file) =&gt; file,
        Err(error) =&gt; match error.kind() {
            ErrorKind::NotFound =&gt; match File::create("hello.txt") {
                Ok(fc) =&gt; fc,
                Err(e) =&gt; panic!("Tried to create file but there was a problem: {:?}", e),
            },
            other_error =&gt; {
                panic!("There was a problem opening the file: {:?}", other_error)
            }
        },
    };
}</code></pre>
<h3 id="ç¤ºä¾‹-2-ä½¿ç”¨-unwrap_or_else"><a class="header" href="#ç¤ºä¾‹-2-ä½¿ç”¨-unwrap_or_else">ç¤ºä¾‹ 2: ä½¿ç”¨ unwrap_or_else</a></h3>
<p>è¿™æ˜¯å¤„ç†é”™è¯¯çš„æ›´ Rust é£æ ¼çš„æ–¹å¼ï¼Œé¿å…äº†æ·±å±‚åµŒå¥—çš„ matchã€‚</p>
<pre class="playground"><code class="language-rust">use std::fs::File;
use std::io::ErrorKind;

fn main() {
    let f = File::open("hello.txt").unwrap_or_else(|error| {
        if error.kind() == ErrorKind::NotFound {
            File::create("hello.txt").unwrap_or_else(|error| {
                panic!("Problem creating the file: {:?}", error);
            })
        } else {
            panic!("Problem opening the file: {:?}", error);
        }
    });
}</code></pre>
<h2 id="-ç»ƒä¹ é¢˜-7"><a class="header" href="#-ç»ƒä¹ é¢˜-7">ğŸ‹ï¸ ç»ƒä¹ é¢˜</a></h2>
<p>æˆ‘ä»¬å‡†å¤‡äº†ç»ƒä¹ é¢˜æ¥å¸®åŠ©ä½ æŒæ¡é”™è¯¯å¤„ç†æ¨¡å¼ã€‚</p>
<ul>
<li><strong>ç»ƒä¹  1</strong>: å®‰å…¨çš„æ•°å­¦è¿ç®—</li>
<li><strong>ç»ƒä¹  2</strong>: æ–‡ä»¶è¯»å–ä¸é”™è¯¯ä¼ æ’­</li>
<li><strong>ç»ƒä¹  3</strong>: è§£æ CSV æ•°æ®</li>
</ul>
<p>ğŸ‘‰ <strong><a href="Day01-15/11.ErrorHandling/exercises/README.html">ç‚¹å‡»è¿™é‡ŒæŸ¥çœ‹ç»ƒä¹ é¢˜</a></strong></p>
<h2 id="-å¸¸è§é—®é¢˜-faq-4"><a class="header" href="#-å¸¸è§é—®é¢˜-faq-4">ğŸ¤” å¸¸è§é—®é¢˜ (FAQ)</a></h2>
<h3 id="q1-ä»€ä¹ˆæ—¶å€™ç”¨-panic-ä»€ä¹ˆæ—¶å€™ç”¨-result"><a class="header" href="#q1-ä»€ä¹ˆæ—¶å€™ç”¨-panic-ä»€ä¹ˆæ—¶å€™ç”¨-result">Q1: ä»€ä¹ˆæ—¶å€™ç”¨ panic! ä»€ä¹ˆæ—¶å€™ç”¨ Resultï¼Ÿ</a></h3>
<p>A:</p>
<ul>
<li>å¦‚æœé”™è¯¯æ˜¯ç”±äºè°ƒç”¨è€…ä½¿ç”¨äº†é”™è¯¯çš„ä»£ç ï¼ˆBugï¼‰å¯¼è‡´çš„ï¼ˆå¦‚ç´¢å¼•è¶Šç•Œï¼‰ï¼Œæˆ–è€…å¤„äºæ— æ³•æ¢å¤çš„æŸåçŠ¶æ€ï¼Œä½¿ç”¨ <code>panic!</code>ã€‚</li>
<li>å¦‚æœé”™è¯¯æ˜¯é¢„æœŸçš„ï¼ˆå¦‚ç½‘ç»œè¶…æ—¶ã€æ–‡ä»¶ä¸å­˜åœ¨ï¼‰ï¼Œä½¿ç”¨ <code>Result</code>ã€‚</li>
<li>åœ¨ç¤ºä¾‹ä»£ç ã€åŸå‹ä»£ç å’Œæµ‹è¯•ä¸­ï¼Œå¸¸ç”¨ <code>unwrap</code> (å³ panic)ã€‚</li>
</ul>
<h3 id="q2-å¯ä»¥åœ¨-main-å‡½æ•°ä¸­ä½¿ç”¨--å—"><a class="header" href="#q2-å¯ä»¥åœ¨-main-å‡½æ•°ä¸­ä½¿ç”¨--å—">Q2: å¯ä»¥åœ¨ main å‡½æ•°ä¸­ä½¿ç”¨ ? å—ï¼Ÿ</a></h3>
<p>A: å¯ä»¥ï¼Œä½† <code>main</code> å‡½æ•°å¿…é¡»è¿”å› <code>Result</code>ã€‚</p>
<pre class="playground"><code class="language-rust">fn main() -&gt; Result&lt;(), Box&lt;dyn std::error::Error&gt;&gt; {
    let f = File::open("hello.txt")?;
    Ok(())
}</code></pre>
<h2 id="-æœ€ä½³å®è·µ-6"><a class="header" href="#-æœ€ä½³å®è·µ-6">ğŸ’¡ æœ€ä½³å®è·µ</a></h2>
<ul>
<li><strong>ä¸è¦æ»¥ç”¨ unwrap</strong>: åœ¨ç”Ÿäº§ä»£ç ä¸­ï¼Œå°½é‡ä½¿ç”¨ <code>match</code>, <code>unwrap_or</code>, <code>expect</code> æˆ– <code>?</code>ï¼Œé™¤éä½  100% ç¡®å®šä¸ä¼šå¤±è´¥ã€‚</li>
<li><strong>è‡ªå®šä¹‰é”™è¯¯</strong>: å¯¹äºåº“çš„å¼€å‘è€…ï¼Œå®šä¹‰è‡ªå·±çš„é”™è¯¯ç±»å‹ï¼ˆé€šå¸¸æ˜¯ä¸€ä¸ª Enumï¼‰ï¼Œå¯ä»¥æ›´æ¸…æ™°åœ°è¡¨è¾¾é”™è¯¯æ„å›¾ã€‚</li>
</ul>
<h2 id="-æ‰©å±•é˜…è¯»-4"><a class="header" href="#-æ‰©å±•é˜…è¯»-4">ğŸ”— æ‰©å±•é˜…è¯»</a></h2>
<ul>
<li><a href="https://doc.rust-lang.org/book/ch09-00-error-handling.html">Rust ç¨‹åºè®¾è®¡è¯­è¨€ - é”™è¯¯å¤„ç†</a></li>
</ul>
<h2 id="-ä¸‹ä¸€æ­¥-10"><a class="header" href="#-ä¸‹ä¸€æ­¥-10">â­ï¸ ä¸‹ä¸€æ­¥</a></h2>
<p>æœ‰äº†é”™è¯¯å¤„ç†çš„åŸºç¡€ï¼Œæˆ‘ä»¬å¯ä»¥ç¼–å†™æ›´å¥å£®çš„ç¨‹åºã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å°†å­¦ä¹ å¦‚ä½•ç¼–å†™æ›´é€šç”¨ã€æ›´çµæ´»çš„ä»£ç ã€‚</p>
<p>ä¸‹ä¸€èŠ‚: <a href="Day01-15/12.Generics/README.html">Day 12: æ³›å‹</a></p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-12-æ³›å‹-generics"><a class="header" href="#day-12-æ³›å‹-generics">Day 12: æ³›å‹ (Generics)</a></h1>
<h2 id="-å­¦ä¹ ç›®æ ‡-9"><a class="header" href="#-å­¦ä¹ ç›®æ ‡-9">ğŸ“ å­¦ä¹ ç›®æ ‡</a></h2>
<ul>
<li>ç†è§£æ³›å‹çš„æ¦‚å¿µä¸ä½œç”¨</li>
<li>æŒæ¡åœ¨å‡½æ•°ã€ç»“æ„ä½“ã€æšä¸¾å’Œæ–¹æ³•ä¸­å®šä¹‰æ³›å‹</li>
<li>ç†è§£ Rust çš„ <strong>å•æ€åŒ– (Monomorphization)</strong> æœºåˆ¶ï¼ˆé›¶æˆæœ¬æŠ½è±¡ï¼‰</li>
<li>èƒ½å¤Ÿé˜…è¯»å’Œç¼–å†™å¸¦æœ‰åŸºæœ¬ Trait Bound çš„æ³›å‹ä»£ç </li>
</ul>
<h2 id="-ä¸ºä»€ä¹ˆè¦å­¦è¿™ä¸ª-6"><a class="header" href="#-ä¸ºä»€ä¹ˆè¦å­¦è¿™ä¸ª-6">ğŸ¯ ä¸ºä»€ä¹ˆè¦å­¦è¿™ä¸ª</a></h2>
<ul>
<li><strong>å‡å°‘é‡å¤ä»£ç </strong>: ä¸éœ€è¦ä¸º i32, f64, String åˆ†åˆ«å†™ä¸€ä¸ªæ’åºå‡½æ•°ï¼Œåªéœ€å†™ä¸€ä¸ªæ³›å‹æ’åºå‡½æ•°ã€‚</li>
<li><strong>ç±»å‹å®‰å…¨</strong>: ç¼–è¯‘å™¨ç¡®ä¿æ³›å‹å‚æ•°çš„ä½¿ç”¨æ˜¯åˆæ³•çš„ã€‚</li>
<li><strong>é«˜æ€§èƒ½</strong>: Rust çš„æ³›å‹åœ¨ç¼–è¯‘æ—¶å±•å¼€ï¼Œè¿è¡Œæ—¶æ²¡æœ‰ä»»ä½•æ€§èƒ½æŸè€—ã€‚</li>
</ul>
<h2 id="-æ ¸å¿ƒæ¦‚å¿µ-5"><a class="header" href="#-æ ¸å¿ƒæ¦‚å¿µ-5">ğŸ“– æ ¸å¿ƒæ¦‚å¿µ</a></h2>
<h3 id="1-ä»€ä¹ˆæ˜¯æ³›å‹"><a class="header" href="#1-ä»€ä¹ˆæ˜¯æ³›å‹">1. ä»€ä¹ˆæ˜¯æ³›å‹ï¼Ÿ</a></h3>
<p>æ³›å‹æ˜¯å…·ä½“ç±»å‹çš„å ä½ç¬¦ã€‚å°±åƒå‡½æ•°å‚æ•°æ˜¯å€¼çš„å ä½ç¬¦ä¸€æ ·ï¼Œæ³›å‹å‚æ•°æ˜¯ç±»å‹çš„å ä½ç¬¦ã€‚é€šå¸¸ä½¿ç”¨ <code>T</code> (Type) æ¥è¡¨ç¤ºã€‚</p>
<h3 id="2-åœ¨å“ªé‡Œä½¿ç”¨æ³›å‹"><a class="header" href="#2-åœ¨å“ªé‡Œä½¿ç”¨æ³›å‹">2. åœ¨å“ªé‡Œä½¿ç”¨æ³›å‹ï¼Ÿ</a></h3>
<ul>
<li><strong>å‡½æ•°</strong>: <code>fn largest&lt;T&gt;(list: &amp;[T]) -&gt; T { ... }</code></li>
<li><strong>ç»“æ„ä½“</strong>: <code>struct Point&lt;T&gt; { x: T, y: T }</code></li>
<li><strong>æšä¸¾</strong>: <code>enum Result&lt;T, E&gt; { Ok(T), Err(E) }</code></li>
<li><strong>æ–¹æ³•</strong>: <code>impl&lt;T&gt; Point&lt;T&gt; { ... }</code></li>
</ul>
<h3 id="3-å•æ€åŒ–-monomorphization"><a class="header" href="#3-å•æ€åŒ–-monomorphization">3. å•æ€åŒ– (Monomorphization)</a></h3>
<p>è¿™æ˜¯ Rust æ³›å‹é«˜æ€§èƒ½çš„ç§˜å¯†ã€‚
å½“ç¼–è¯‘æ³›å‹ä»£ç æ—¶ï¼ŒRust ä¼šå¯»æ‰¾æ‰€æœ‰ä½¿ç”¨è¯¥æ³›å‹çš„åœ°æ–¹ï¼Œå¹¶ä¸ºæ¯ä¸ªå…·ä½“ç±»å‹ç”Ÿæˆä¸“é—¨çš„ä»£ç å‰¯æœ¬ã€‚
ä¾‹å¦‚ï¼Œå¦‚æœä½ ç”¨äº† <code>Option&lt;i32&gt;</code> å’Œ <code>Option&lt;f64&gt;</code>ï¼Œç¼–è¯‘å™¨ä¼šç”Ÿæˆä¸¤ä¸ªä¸åŒçš„æšä¸¾å®šä¹‰ã€‚è¿™ä¼šç¨å¾®å¢åŠ äºŒè¿›åˆ¶æ–‡ä»¶å¤§å°ï¼Œä½†è¿è¡Œæ—¶é€Ÿåº¦æå¿«ï¼ˆé™æ€åˆ†å‘ï¼‰ã€‚</p>
<h2 id="-ä»£ç ç¤ºä¾‹-5"><a class="header" href="#-ä»£ç ç¤ºä¾‹-5">ğŸ’» ä»£ç ç¤ºä¾‹</a></h2>
<h3 id="ç¤ºä¾‹-1-æ³›å‹ç»“æ„ä½“"><a class="header" href="#ç¤ºä¾‹-1-æ³›å‹ç»“æ„ä½“">ç¤ºä¾‹ 1: æ³›å‹ç»“æ„ä½“</a></h3>
<pre class="playground"><code class="language-rust">struct Point&lt;T&gt; {
    x: T,
    y: T,
}

fn main() {
    let integer = Point { x: 5, y: 10 };
    let float = Point { x: 1.0, y: 4.0 };
    // let error = Point { x: 5, y: 4.0 }; // é”™è¯¯ï¼T å¿…é¡»æ˜¯ç›¸åŒç±»å‹
}</code></pre>
<h3 id="ç¤ºä¾‹-2-å¤šä¸ªæ³›å‹å‚æ•°"><a class="header" href="#ç¤ºä¾‹-2-å¤šä¸ªæ³›å‹å‚æ•°">ç¤ºä¾‹ 2: å¤šä¸ªæ³›å‹å‚æ•°</a></h3>
<pre class="playground"><code class="language-rust">struct PointBoth&lt;T, U&gt; {
    x: T,
    y: U,
}

fn main() {
    let both = PointBoth { x: 5, y: 4.0 }; // åˆæ³•
}</code></pre>
<h3 id="ç¤ºä¾‹-3-æ³›å‹æ–¹æ³•"><a class="header" href="#ç¤ºä¾‹-3-æ³›å‹æ–¹æ³•">ç¤ºä¾‹ 3: æ³›å‹æ–¹æ³•</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>struct Point&lt;T&gt; {
    x: T,
    y: T,
}

impl&lt;T&gt; Point&lt;T&gt; {
    fn x(&amp;self) -&gt; &amp;T {
        &amp;self.x
    }
}

// ä¹Ÿå¯ä»¥ä¸ºç‰¹å®šç±»å‹å®ç°æ–¹æ³•
impl Point&lt;f32&gt; {
    fn distance_from_origin(&amp;self) -&gt; f32 {
        (self.x.powi(2) + self.y.powi(2)).sqrt()
    }
}
<span class="boring">}</span></code></pre>
<h2 id="-ç»ƒä¹ é¢˜-8"><a class="header" href="#-ç»ƒä¹ é¢˜-8">ğŸ‹ï¸ ç»ƒä¹ é¢˜</a></h2>
<p>æˆ‘ä»¬å‡†å¤‡äº†ç»ƒä¹ é¢˜æ¥å¸®åŠ©ä½ æŒæ¡æ³›å‹çš„ä½¿ç”¨ã€‚</p>
<ul>
<li><strong>ç»ƒä¹  1</strong>: ç®€å•çš„æ³›å‹å°è£…</li>
<li><strong>ç»ƒä¹  2</strong>: æ³›å‹å‡½æ•°å®ç°</li>
<li><strong>ç»ƒä¹  3</strong>: æ··åˆæ³›å‹ç»“æ„ä½“æ“ä½œ</li>
</ul>
<p>ğŸ‘‰ <strong><a href="Day01-15/12.Generics/exercises/README.html">ç‚¹å‡»è¿™é‡ŒæŸ¥çœ‹ç»ƒä¹ é¢˜</a></strong></p>
<h2 id="-å¸¸è§é—®é¢˜-faq-5"><a class="header" href="#-å¸¸è§é—®é¢˜-faq-5">ğŸ¤” å¸¸è§é—®é¢˜ (FAQ)</a></h2>
<h3 id="q1-impl-pointt-å’Œ-implt-pointt-æœ‰ä»€ä¹ˆåŒºåˆ«"><a class="header" href="#q1-impl-pointt-å’Œ-implt-pointt-æœ‰ä»€ä¹ˆåŒºåˆ«">Q1: <code>impl Point&lt;T&gt;</code> å’Œ <code>impl&lt;T&gt; Point&lt;T&gt;</code> æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</a></h3>
<p>A: <code>impl&lt;T&gt; Point&lt;T&gt;</code> è¯»ä½œâ€œä¸ºä»»æ„ç±»å‹ T å®ç° Point<t>â€ã€‚ç¬¬ä¸€ä¸ª <code>&lt;T&gt;</code> å£°æ˜äº† T æ˜¯ä¸€ä¸ªæ³›å‹å‚æ•°ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå…·ä½“çš„ç±»å‹åç§°ã€‚å¦‚æœæ²¡æœ‰ç¬¬ä¸€ä¸ª <code>&lt;T&gt;</code>ï¼Œç¼–è¯‘å™¨ä¼šä»¥ä¸º <code>T</code> æ˜¯æŸä¸ªå…·ä½“çš„ struct æˆ– enum çš„åå­—ã€‚</t></p>
<h3 id="q2-æ³›å‹ä¼šæ‹–æ…¢ç¼–è¯‘é€Ÿåº¦å—"><a class="header" href="#q2-æ³›å‹ä¼šæ‹–æ…¢ç¼–è¯‘é€Ÿåº¦å—">Q2: æ³›å‹ä¼šæ‹–æ…¢ç¼–è¯‘é€Ÿåº¦å—ï¼Ÿ</a></h3>
<p>A: ä¼šã€‚å› ä¸ºç¼–è¯‘å™¨éœ€è¦ä¸ºæ¯ä¸ªå…·ä½“ç±»å‹ç”Ÿæˆä»£ç å‰¯æœ¬ï¼ˆå•æ€åŒ–ï¼‰ï¼Œè¿™å¢åŠ äº†ç¼–è¯‘å·¥ä½œé‡ã€‚ä½†å®ƒæ¢æ¥çš„æ˜¯è¿è¡Œæ—¶çš„æè‡´æ€§èƒ½ã€‚</p>
<h2 id="-æœ€ä½³å®è·µ-7"><a class="header" href="#-æœ€ä½³å®è·µ-7">ğŸ’¡ æœ€ä½³å®è·µ</a></h2>
<ul>
<li><strong>å‘½åè§„èŒƒ</strong>: å•ä¸ªæ³›å‹å‚æ•°é€šå¸¸å« <code>T</code>ã€‚å¦‚æœæœ‰å¤šä¸ªï¼Œé€šå¸¸ç”¨ <code>T, U, V</code> æˆ–æ›´å…·æè¿°æ€§çš„åå­—ï¼ˆå¦‚ <code>K, V</code> ç”¨äº Key-Valueï¼‰ã€‚</li>
<li><strong>çº¦æŸ</strong>: è™½ç„¶è¿™èŠ‚è¯¾è¿˜æ²¡æ·±å…¥è®² Trait Boundï¼Œä½†è¦æ³¨æ„ï¼Œå¦‚æœä½ åœ¨æ³›å‹å‡½æ•°ä¸­ä½¿ç”¨äº† <code>&gt;</code> è¿ç®—ç¬¦ï¼Œä½ éœ€è¦å‘Šè¯‰ç¼–è¯‘å™¨ <code>T</code> æ˜¯å¯ä»¥æ¯”è¾ƒçš„ï¼ˆ<code>T: PartialOrd</code>ï¼‰ã€‚</li>
</ul>
<h2 id="-æ‰©å±•é˜…è¯»-5"><a class="header" href="#-æ‰©å±•é˜…è¯»-5">ğŸ”— æ‰©å±•é˜…è¯»</a></h2>
<ul>
<li><a href="https://doc.rust-lang.org/book/ch10-01-syntax.html">Rust ç¨‹åºè®¾è®¡è¯­è¨€ - æ³›å‹</a></li>
</ul>
<h2 id="-ä¸‹ä¸€æ­¥-11"><a class="header" href="#-ä¸‹ä¸€æ­¥-11">â­ï¸ ä¸‹ä¸€æ­¥</a></h2>
<p>æ³›å‹è®©æˆ‘ä»¬å®šä¹‰äº†â€œæŸç§ç±»å‹â€ï¼Œä½†å¦‚æœæˆ‘ä»¬æƒ³é™åˆ¶è¿™ç§ç±»å‹å¿…é¡»å…·æœ‰â€œæŸäº›è¡Œä¸ºâ€ï¼ˆæ¯”å¦‚èƒ½è¢«æ‰“å°ã€èƒ½è¢«æ¯”è¾ƒï¼‰æ€ä¹ˆåŠï¼Ÿè¿™å°±æ˜¯ Trait çš„ä½œç”¨ã€‚</p>
<p>ä¸‹ä¸€èŠ‚: <a href="Day01-15/13.Traits/README.html">Day 13: Trait</a></p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-13-trait-ç‰¹å¾"><a class="header" href="#day-13-trait-ç‰¹å¾">Day 13: Trait (ç‰¹å¾)</a></h1>
<h2 id="-å­¦ä¹ ç›®æ ‡-10"><a class="header" href="#-å­¦ä¹ ç›®æ ‡-10">ğŸ“ å­¦ä¹ ç›®æ ‡</a></h2>
<ul>
<li>ç†è§£ Trait çš„æ¦‚å¿µï¼ˆç±»ä¼¼æ¥å£ï¼‰</li>
<li>æŒæ¡å¦‚ä½•å®šä¹‰ Trait å’Œä¸ºç±»å‹å®ç° Trait</li>
<li>ç†è§£ Trait Bounds (çº¦æŸ) å’Œ <code>impl Trait</code> è¯­æ³•</li>
<li>æŒæ¡å­¤å„¿è§„åˆ™ (Orphan Rule)</li>
<li>äº†è§£å¸¸ç”¨çš„æ´¾ç”Ÿ Trait (<code>#[derive]</code>)</li>
</ul>
<h2 id="-ä¸ºä»€ä¹ˆè¦å­¦è¿™ä¸ª-7"><a class="header" href="#-ä¸ºä»€ä¹ˆè¦å­¦è¿™ä¸ª-7">ğŸ¯ ä¸ºä»€ä¹ˆè¦å­¦è¿™ä¸ª</a></h2>
<ul>
<li><strong>å¤šæ€</strong>: Trait æ˜¯ Rust å®ç°å¤šæ€çš„æ ¸å¿ƒæœºåˆ¶ã€‚å®ƒå…è®¸ä½ ç¼–å†™èƒ½å¤Ÿå¤„ç†ä»»ä½•å…·æœ‰ç‰¹å®šè¡Œä¸ºï¼ˆæ–¹æ³•ï¼‰çš„ç±»å‹çš„ä»£ç ã€‚</li>
<li><strong>æŠ½è±¡</strong>: å®šä¹‰å…±äº«çš„è¡Œä¸ºæ¥å£ï¼Œè€Œä¸å…³å¿ƒå…·ä½“å®ç°ç»†èŠ‚ã€‚</li>
<li><strong>çº¦æŸ</strong>: é™åˆ¶æ³›å‹å‚æ•°å¿…é¡»å…·å¤‡çš„åŠŸèƒ½ï¼ˆå¦‚â€œå¿…é¡»èƒ½è¢«æ‰“å°â€ï¼‰ã€‚</li>
</ul>
<h2 id="-æ ¸å¿ƒæ¦‚å¿µ-6"><a class="header" href="#-æ ¸å¿ƒæ¦‚å¿µ-6">ğŸ“– æ ¸å¿ƒæ¦‚å¿µ</a></h2>
<h3 id="1-å®šä¹‰ä¸å®ç°"><a class="header" href="#1-å®šä¹‰ä¸å®ç°">1. å®šä¹‰ä¸å®ç°</a></h3>
<p>Trait å®šä¹‰äº†ä¸€ç»„æ–¹æ³•ç­¾åã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub trait Summary {
    fn summarize(&amp;self) -&gt; String;

    // é»˜è®¤å®ç°
    fn summarize_author(&amp;self) -&gt; String {
        String::from("(Read more...)")
    }
}

pub struct Tweet {
    pub username: String,
    pub content: String,
}

impl Summary for Tweet {
    fn summarize(&amp;self) -&gt; String {
        format!("{}: {}", self.username, self.content)
    }
}
<span class="boring">}</span></code></pre>
<h3 id="2-trait-ä½œä¸ºå‚æ•°"><a class="header" href="#2-trait-ä½œä¸ºå‚æ•°">2. Trait ä½œä¸ºå‚æ•°</a></h3>
<p>æˆ‘ä»¬å¯ä»¥ç¼–å†™æ¥å—ä»»ä½•å®ç°äº†ç‰¹å®š Trait çš„ç±»å‹çš„å‡½æ•°ã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// è¯­æ³•ç³–
pub fn notify(item: &amp;impl Summary) {
    println!("Breaking news! {}", item.summarize());
}

//å®Œæ•´å½¢å¼ (Trait Bound)
pub fn notify&lt;T: Summary&gt;(item: &amp;T) { ... }
<span class="boring">}</span></code></pre>
<h3 id="3-å¤šé‡çº¦æŸä¸-where-å­å¥"><a class="header" href="#3-å¤šé‡çº¦æŸä¸-where-å­å¥">3. å¤šé‡çº¦æŸä¸ Where å­å¥</a></h3>
<p>å¦‚æœéœ€è¦å¤šä¸ª Traitï¼Œç”¨ <code>+</code> è¿æ¥ã€‚å¦‚æœå¤ªé•¿ï¼Œç”¨ <code>where</code>ã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn some_function&lt;T, U&gt;(t: &amp;T, u: &amp;U) -&gt; i32
where
    T: Display + Clone,
    U: Clone + Debug,
{ ... }
<span class="boring">}</span></code></pre>
<h3 id="4-å­¤å„¿è§„åˆ™-orphan-rule"><a class="header" href="#4-å­¤å„¿è§„åˆ™-orphan-rule">4. å­¤å„¿è§„åˆ™ (Orphan Rule)</a></h3>
<p>ä¸ºäº†ä¿è¯ä¸€è‡´æ€§ï¼Œä½ ä¸èƒ½ä¸º <strong>å¤–éƒ¨ç±»å‹</strong> å®ç° <strong>å¤–éƒ¨ Trait</strong>ã€‚</p>
<ul>
<li>å¯ä»¥åœ¨è¿™é‡Œä¸º <code>Vec&lt;T&gt;</code> (å¤–éƒ¨) å®ç° <code>Summary</code> (æœ¬åœ°)ã€‚</li>
<li>å¯ä»¥åœ¨è¿™é‡Œä¸º <code>Tweet</code> (æœ¬åœ°) å®ç° <code>Display</code> (å¤–éƒ¨)ã€‚</li>
<li><strong>ä¸èƒ½</strong> åœ¨è¿™é‡Œä¸º <code>Vec&lt;T&gt;</code> (å¤–éƒ¨) å®ç° <code>Display</code> (å¤–éƒ¨)ã€‚</li>
</ul>
<h3 id="5-è¿”å›-impl-trait"><a class="header" href="#5-è¿”å›-impl-trait">5. è¿”å› impl Trait</a></h3>
<p>å‡½æ•°å¯ä»¥è¿”å›å®ç°äº†æŸä¸ª Trait çš„ç±»å‹ï¼Œä½†å®é™…è¿”å›çš„å…·ä½“ç±»å‹å¿…é¡»æ˜¯ç¡®å®šçš„ï¼ˆåªèƒ½æ˜¯ä¸€ç§ï¼‰ã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn returns_summarizable() -&gt; impl Summary {
    Tweet { ... }
}
<span class="boring">}</span></code></pre>
<h2 id="-ä»£ç ç¤ºä¾‹-6"><a class="header" href="#-ä»£ç ç¤ºä¾‹-6">ğŸ’» ä»£ç ç¤ºä¾‹</a></h2>
<h3 id="ç¤ºä¾‹-1-åŸºæœ¬å®ç°"><a class="header" href="#ç¤ºä¾‹-1-åŸºæœ¬å®ç°">ç¤ºä¾‹ 1: åŸºæœ¬å®ç°</a></h3>
<pre class="playground"><code class="language-rust">trait Speak {
    fn say_hello(&amp;self);
}

struct Dog;
struct Cat;

impl Speak for Dog {
    fn say_hello(&amp;self) { println!("Woof!"); }
}

impl Speak for Cat {
    fn say_hello(&amp;self) { println!("Meow!"); }
}

fn make_it_speak(pet: &amp;impl Speak) {
    pet.say_hello();
}

fn main() {
    let d = Dog;
    let c = Cat;
    make_it_speak(&amp;d);
    make_it_speak(&amp;c);
}</code></pre>
<h3 id="ç¤ºä¾‹-2-ä½¿ç”¨-derive-å®"><a class="header" href="#ç¤ºä¾‹-2-ä½¿ç”¨-derive-å®">ç¤ºä¾‹ 2: ä½¿ç”¨ Derive å®</a></h3>
<p>Rust ç¼–è¯‘å™¨å¯ä»¥è‡ªåŠ¨ä¸ºæˆ‘ä»¬å®ç°ä¸€äº›æ ‡å‡† Traitã€‚</p>
<pre class="playground"><code class="language-rust">#[derive(Debug, PartialEq, Clone)]
struct Point {
    x: i32,
    y: i32,
}

fn main() {
    let p1 = Point { x: 1, y: 2 };
    let p2 = p1.clone(); // Clone
    println!("{:?}", p1); // Debug
    println!("Equal? {}", p1 == p2); // PartialEq
}</code></pre>
<h2 id="-ç»ƒä¹ é¢˜-9"><a class="header" href="#-ç»ƒä¹ é¢˜-9">ğŸ‹ï¸ ç»ƒä¹ é¢˜</a></h2>
<p>æˆ‘ä»¬å‡†å¤‡äº†ç»ƒä¹ é¢˜æ¥å¸®åŠ©ä½ æŒæ¡ Trait çš„ä½¿ç”¨ã€‚</p>
<ul>
<li><strong>ç»ƒä¹  1</strong>: å®šä¹‰å’Œå®ç° Trait</li>
<li><strong>ç»ƒä¹  2</strong>: ä½¿ç”¨ Trait ä½œä¸ºå‡½æ•°å‚æ•°</li>
<li><strong>ç»ƒä¹  3</strong>: é»˜è®¤å®ç°ä¸é‡å†™</li>
<li><strong>ç»ƒä¹  4</strong>: å®ç°æ ‡å‡†åº“ Trait (<code>Display</code>)</li>
</ul>
<p>ğŸ‘‰ <strong><a href="Day01-15/13.Traits/exercises/README.html">ç‚¹å‡»è¿™é‡ŒæŸ¥çœ‹ç»ƒä¹ é¢˜</a></strong></p>
<h2 id="-å¸¸è§é—®é¢˜-faq-6"><a class="header" href="#-å¸¸è§é—®é¢˜-faq-6">ğŸ¤” å¸¸è§é—®é¢˜ (FAQ)</a></h2>
<h3 id="q1-trait-å’Œ-javac-çš„-interface-æœ‰ä»€ä¹ˆåŒºåˆ«"><a class="header" href="#q1-trait-å’Œ-javac-çš„-interface-æœ‰ä»€ä¹ˆåŒºåˆ«">Q1: Trait å’Œ Java/C# çš„ Interface æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</a></h3>
<p>A: éå¸¸ç›¸ä¼¼ï¼Œä½† Trait å¯ä»¥åŒ…å«é»˜è®¤å®ç°ï¼ˆJava 8+ æ¥å£ä¹Ÿå¯ä»¥ï¼‰ã€‚æœ€å¤§çš„åŒºåˆ«åœ¨äº Trait å¯ä»¥ä½œä¸ºæ³›å‹çº¦æŸ (Bounds)ï¼Œä¸ä»…ç”¨äºåŠ¨æ€åˆ†å‘ï¼Œæ›´å¤šç”¨äºé™æ€å•æ€åŒ–ã€‚æ­¤å¤–ï¼ŒTrait ä¸æ”¯æŒå­—æ®µï¼ˆæ•°æ®ï¼‰ï¼Œåªå®šä¹‰è¡Œä¸ºã€‚</p>
<h3 id="q2-ä»€ä¹ˆæ˜¯å…³è”ç±»å‹-associated-types"><a class="header" href="#q2-ä»€ä¹ˆæ˜¯å…³è”ç±»å‹-associated-types">Q2: ä»€ä¹ˆæ˜¯å…³è”ç±»å‹ (Associated Types)ï¼Ÿ</a></h3>
<p>A: è¿™æ˜¯è¿›é˜¶è¯é¢˜ (Day 28)ã€‚ç®€å•æ¥è¯´ï¼Œå®ƒæ˜¯ Trait å®šä¹‰ä¸­çš„ç±»å‹å ä½ç¬¦ï¼Œä¾‹å¦‚ <code>Iterator</code> trait æœ‰ä¸€ä¸ª <code>type Item;</code>ï¼Œå®ç°æ—¶æŒ‡å®šå…·ä½“çš„ Item ç±»å‹ã€‚</p>
<h2 id="-æœ€ä½³å®è·µ-8"><a class="header" href="#-æœ€ä½³å®è·µ-8">ğŸ’¡ æœ€ä½³å®è·µ</a></h2>
<ul>
<li><strong>ä¼˜å…ˆä½¿ç”¨æ ‡å‡† Trait</strong>: å¦‚ <code>Display</code>, <code>Debug</code>, <code>Default</code>, <code>Clone</code>, <code>Copy</code> ç­‰ã€‚éµå¾ª Rust çš„æƒ¯ä¾‹ä¼šè®©ä½ çš„ç±»å‹æ›´å¥½ç”¨ã€‚</li>
<li><strong>ä½¿ç”¨ Derive</strong>: åªè¦å¯èƒ½ï¼Œå°±é€šè¿‡ <code>#[derive(...)]</code> è‡ªåŠ¨å®ç°æ ‡å‡† Traitï¼Œå‡å°‘æ ·æ¿ä»£ç ã€‚</li>
<li><strong>å•ä¸€èŒè´£</strong>: å®šä¹‰å°è€Œä¸“æ³¨çš„ Traitï¼Œè€Œä¸æ˜¯å¤§è€Œå…¨çš„ Traitã€‚</li>
</ul>
<h2 id="-æ‰©å±•é˜…è¯»-6"><a class="header" href="#-æ‰©å±•é˜…è¯»-6">ğŸ”— æ‰©å±•é˜…è¯»</a></h2>
<ul>
<li><a href="https://doc.rust-lang.org/book/ch10-02-traits.html">Rust ç¨‹åºè®¾è®¡è¯­è¨€ - Traits</a></li>
</ul>
<h2 id="-ä¸‹ä¸€æ­¥-12"><a class="header" href="#-ä¸‹ä¸€æ­¥-12">â­ï¸ ä¸‹ä¸€æ­¥</a></h2>
<p>ç°åœ¨æˆ‘ä»¬ç†è§£äº†æ³›å‹å’Œ Traitã€‚ä½†è¿˜æœ‰ä¸€ä¸ªæ£˜æ‰‹çš„é—®é¢˜ï¼šå¼•ç”¨åœ¨ä»€ä¹ˆæ—¶å€™æ˜¯æœ‰æ•ˆçš„ï¼Ÿå¦‚æœå¼•ç”¨çš„æ•°æ®è¢«é‡Šæ”¾äº†æ€ä¹ˆåŠï¼Ÿè¿™å°±æ˜¯ç”Ÿå‘½å‘¨æœŸè¦è§£å†³çš„é—®é¢˜ã€‚</p>
<p>ä¸‹ä¸€èŠ‚: <a href="Day01-15/14.Lifetimes/README.html">Day 14: ç”Ÿå‘½å‘¨æœŸ</a></p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-14-ç”Ÿå‘½å‘¨æœŸ-lifetimes"><a class="header" href="#day-14-ç”Ÿå‘½å‘¨æœŸ-lifetimes">Day 14: ç”Ÿå‘½å‘¨æœŸ (Lifetimes)</a></h1>
<h2 id="-å­¦ä¹ ç›®æ ‡-11"><a class="header" href="#-å­¦ä¹ ç›®æ ‡-11">ğŸ“ å­¦ä¹ ç›®æ ‡</a></h2>
<ul>
<li>ç†è§£ç”Ÿå‘½å‘¨æœŸçš„æœ¬è´¨ï¼šå¼•ç”¨æœ‰æ•ˆçš„ä½œç”¨åŸŸ</li>
<li>æŒæ¡ç”Ÿå‘½å‘¨æœŸæ³¨è§£è¯­æ³• (<code>'a</code>)</li>
<li>èƒ½å¤Ÿåœ¨å‡½æ•°å’Œç»“æ„ä½“ä¸­æ­£ç¡®æ ‡æ³¨ç”Ÿå‘½å‘¨æœŸ</li>
<li>ç†è§£ç”Ÿå‘½å‘¨æœŸçœç•¥è§„åˆ™ (Elision Rules)</li>
<li>ç†è§£ <code>'static</code> ç”Ÿå‘½å‘¨æœŸ</li>
</ul>
<h2 id="-ä¸ºä»€ä¹ˆè¦å­¦è¿™ä¸ª-8"><a class="header" href="#-ä¸ºä»€ä¹ˆè¦å­¦è¿™ä¸ª-8">ğŸ¯ ä¸ºä»€ä¹ˆè¦å­¦è¿™ä¸ª</a></h2>
<p>Rust çš„å€Ÿç”¨æ£€æŸ¥å™¨éœ€è¦ç¡®ä¿æ‰€æœ‰çš„å¼•ç”¨éƒ½æ˜¯æœ‰æ•ˆçš„ï¼Œä¸ä¼šæŒ‡å‘å·²ç»è¢«é‡Šæ”¾çš„å†…å­˜ï¼ˆæ‚¬å‚å¼•ç”¨ï¼‰ã€‚</p>
<ul>
<li><strong>å¤§éƒ¨åˆ†æ—¶å€™</strong>ï¼šç”Ÿå‘½å‘¨æœŸæ˜¯éšå¼çš„ï¼Œç¼–è¯‘å™¨èƒ½è‡ªåŠ¨æ¨æ–­ã€‚</li>
<li><strong>æœ‰æ—¶å€™</strong>ï¼šå¼•ç”¨çš„å…³ç³»æ¯”è¾ƒå¤æ‚ï¼ˆæ¯”å¦‚å‡½æ•°è¿”å›ä¸¤ä¸ªå¼•ç”¨å‚æ•°ä¸­çš„ä¸€ä¸ªï¼‰ï¼Œç¼–è¯‘å™¨æ— æ³•ç¡®å®šï¼Œéœ€è¦ä½ æ‰‹åŠ¨é€šè¿‡æ³¨è§£å‘Šè¯‰å®ƒã€‚</li>
</ul>
<h2 id="-æ ¸å¿ƒæ¦‚å¿µ-7"><a class="header" href="#-æ ¸å¿ƒæ¦‚å¿µ-7">ğŸ“– æ ¸å¿ƒæ¦‚å¿µ</a></h2>
<h3 id="1-æ‚¬å‚å¼•ç”¨-dangling-references"><a class="header" href="#1-æ‚¬å‚å¼•ç”¨-dangling-references">1. æ‚¬å‚å¼•ç”¨ (Dangling References)</a></h3>
<p>ç”Ÿå‘½å‘¨æœŸçš„ä¸»è¦ç›®çš„æ˜¯é¿å…æ‚¬å‚å¼•ç”¨ã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>{
    let r;
    {
        let x = 5;
        r = &amp;x; // é”™è¯¯ï¼šx çš„ç”Ÿå‘½å‘¨æœŸæ¯” r çŸ­
    }
    println!("r: {}", r);
}
<span class="boring">}</span></code></pre>
<h3 id="2-ç”Ÿå‘½å‘¨æœŸæ³¨è§£-1"><a class="header" href="#2-ç”Ÿå‘½å‘¨æœŸæ³¨è§£-1">2. ç”Ÿå‘½å‘¨æœŸæ³¨è§£</a></h3>
<p>æ³¨è§£ä¸ä¼šæ”¹å˜å¼•ç”¨çš„å®é™…å­˜æ´»æ—¶é—´ï¼Œåªæ˜¯å‘Šè¯‰ç¼–è¯‘å™¨è¿™äº›å¼•ç”¨ä¹‹é—´çš„<strong>å…³ç³»</strong>ã€‚</p>
<ul>
<li><code>&amp;i32</code>        // å¼•ç”¨</li>
<li><code>&amp;'a i32</code>     // å¸¦æœ‰æ˜¾å¼ç”Ÿå‘½å‘¨æœŸçš„å¼•ç”¨</li>
<li><code>&amp;'a mut i32</code> // å¸¦æœ‰æ˜¾å¼ç”Ÿå‘½å‘¨æœŸçš„å¯å˜å¼•ç”¨</li>
</ul>
<h3 id="3-å‡½æ•°ä¸­çš„ç”Ÿå‘½å‘¨æœŸ"><a class="header" href="#3-å‡½æ•°ä¸­çš„ç”Ÿå‘½å‘¨æœŸ">3. å‡½æ•°ä¸­çš„ç”Ÿå‘½å‘¨æœŸ</a></h3>
<p>å½“å‡½æ•°è¿”å›ä¸€ä¸ªå¼•ç”¨æ—¶ï¼ŒRust éœ€è¦çŸ¥é“è¿™ä¸ªè¿”å›å€¼æ¥è‡ªå“ªä¸ªå‚æ•°ï¼Œä»¥ç¡®ä¿è¿”å›å€¼åœ¨å‚æ•°æœ‰æ•ˆæœŸé—´ä¹Ÿæœ‰æ•ˆã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn longest&lt;'a&gt;(x: &amp;'a str, y: &amp;'a str) -&gt; &amp;'a str {
    if x.len() &gt; y.len() { x } else { y }
}
<span class="boring">}</span></code></pre>
<p>è¿™è¡¨ç¤ºï¼š<code>x</code>ã€<code>y</code> å’Œè¿”å›å€¼è‡³å°‘æ´»å¾—å’Œ <code>'a</code> ä¸€æ ·é•¿ã€‚å®é™…ä¸Š <code>'a</code> æ˜¯ <code>x</code> å’Œ <code>y</code> ç”Ÿå‘½å‘¨æœŸé‡å çš„éƒ¨åˆ†ï¼ˆè¾ƒçŸ­çš„é‚£ä¸ªï¼‰ã€‚</p>
<h3 id="4-ç»“æ„ä½“ä¸­çš„ç”Ÿå‘½å‘¨æœŸ"><a class="header" href="#4-ç»“æ„ä½“ä¸­çš„ç”Ÿå‘½å‘¨æœŸ">4. ç»“æ„ä½“ä¸­çš„ç”Ÿå‘½å‘¨æœŸ</a></h3>
<p>å¦‚æœç»“æ„ä½“åŒ…å«å¼•ç”¨ï¼Œå¿…é¡»åœ¨å®šä¹‰ä¸­æ ‡æ³¨ç”Ÿå‘½å‘¨æœŸã€‚è¿™ä¿è¯äº†ç»“æ„ä½“å®ä¾‹ä¸èƒ½æ´»å¾—æ¯”å®ƒå¼•ç”¨çš„æ•°æ®ä¹…ã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>struct ImportantExcerpt&lt;'a&gt; {
    part: &amp;'a str,
}
<span class="boring">}</span></code></pre>
<h3 id="5-ç”Ÿå‘½å‘¨æœŸçœç•¥è§„åˆ™"><a class="header" href="#5-ç”Ÿå‘½å‘¨æœŸçœç•¥è§„åˆ™">5. ç”Ÿå‘½å‘¨æœŸçœç•¥è§„åˆ™</a></h3>
<p>Rust ç¼–è¯‘å™¨å†…ç½®äº†ä¸€äº›è§„åˆ™ï¼Œèƒ½è‡ªåŠ¨æ¨æ–­å¸¸è§çš„ç”Ÿå‘½å‘¨æœŸï¼Œæ— éœ€æ‰‹åŠ¨æ ‡æ³¨ã€‚</p>
<ol>
<li>æ¯ä¸ªå¼•ç”¨å‚æ•°éƒ½æœ‰ç‹¬ç«‹çš„ç”Ÿå‘½å‘¨æœŸã€‚</li>
<li>å¦‚æœåªæœ‰ä¸€ä¸ªè¾“å…¥ç”Ÿå‘½å‘¨æœŸï¼Œèµ‹äºˆæ‰€æœ‰è¾“å‡ºå¼•ç”¨ã€‚</li>
<li>å¦‚æœæœ‰ <code>&amp;self</code>ï¼Œå®ƒçš„ç”Ÿå‘½å‘¨æœŸèµ‹äºˆæ‰€æœ‰è¾“å‡ºå¼•ç”¨ã€‚</li>
</ol>
<h3 id="6-static-ç”Ÿå‘½å‘¨æœŸ"><a class="header" href="#6-static-ç”Ÿå‘½å‘¨æœŸ">6. â€™static ç”Ÿå‘½å‘¨æœŸ</a></h3>
<p>è¡¨ç¤ºå¼•ç”¨å¯ä»¥åœ¨æ•´ä¸ªç¨‹åºè¿è¡ŒæœŸé—´å­˜æ´»ã€‚</p>
<ul>
<li>å­—ç¬¦ä¸²å­—é¢å€¼éƒ½æ˜¯ <code>'static</code> çš„ã€‚</li>
<li><code>let s: &amp;'static str = "I have a static lifetime.";</code></li>
</ul>
<h2 id="-ä»£ç ç¤ºä¾‹-7"><a class="header" href="#-ä»£ç ç¤ºä¾‹-7">ğŸ’» ä»£ç ç¤ºä¾‹</a></h2>
<h3 id="ç¤ºä¾‹-1-ç»“æ„ä½“æŒæœ‰å¼•ç”¨"><a class="header" href="#ç¤ºä¾‹-1-ç»“æ„ä½“æŒæœ‰å¼•ç”¨">ç¤ºä¾‹ 1: ç»“æ„ä½“æŒæœ‰å¼•ç”¨</a></h3>
<pre class="playground"><code class="language-rust">struct Book&lt;'a&gt; {
    title: &amp;'a str,
}

fn main() {
    let title_string = String::from("The Rust Programming Language");
    let book = Book {
        title: &amp;title_string,
    };
    println!("Book title: {}", book.title);
}</code></pre>
<h3 id="ç¤ºä¾‹-2-é”™è¯¯çš„ç”Ÿå‘½å‘¨æœŸç”¨æ³•"><a class="header" href="#ç¤ºä¾‹-2-é”™è¯¯çš„ç”Ÿå‘½å‘¨æœŸç”¨æ³•">ç¤ºä¾‹ 2: é”™è¯¯çš„ç”Ÿå‘½å‘¨æœŸç”¨æ³•</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// é”™è¯¯ï¼ä¸èƒ½è¿”å›å‡½æ•°å†…éƒ¨åˆ›å»ºçš„å±€éƒ¨å˜é‡çš„å¼•ç”¨
// fn invalid_return&lt;'a&gt;() -&gt; &amp;'a str {
//     let s = String::from("hello");
//     &amp;s // s ç¦»å¼€ä½œç”¨åŸŸä¼šè¢« dropï¼Œå¼•ç”¨å˜æ‚¬å‚
// }
<span class="boring">}</span></code></pre>
<h2 id="-ç»ƒä¹ é¢˜-10"><a class="header" href="#-ç»ƒä¹ é¢˜-10">ğŸ‹ï¸ ç»ƒä¹ é¢˜</a></h2>
<p>æˆ‘ä»¬å‡†å¤‡äº†ç»ƒä¹ é¢˜æ¥å¸®åŠ©ä½ æŒæ¡ç”Ÿå‘½å‘¨æœŸçš„ä½¿ç”¨ã€‚</p>
<ul>
<li><strong>ç»ƒä¹  1</strong>: ä¿®å¤æ‚¬å‚å¼•ç”¨</li>
<li><strong>ç»ƒä¹  2</strong>: ç¼–å†™å¸¦ç”Ÿå‘½å‘¨æœŸçš„å‡½æ•°</li>
<li><strong>ç»ƒä¹  3</strong>: ç»“æ„ä½“å¼•ç”¨</li>
</ul>
<p>ğŸ‘‰ <strong><a href="Day01-15/14.Lifetimes/exercises/README.html">ç‚¹å‡»è¿™é‡ŒæŸ¥çœ‹ç»ƒä¹ é¢˜</a></strong></p>
<h2 id="-å¸¸è§é—®é¢˜-faq-7"><a class="header" href="#-å¸¸è§é—®é¢˜-faq-7">ğŸ¤” å¸¸è§é—®é¢˜ (FAQ)</a></h2>
<h3 id="q1-ä¸ºä»€ä¹ˆç¼–è¯‘å™¨ä¸èƒ½è‡ªå·±åˆ†æå‡ºæ¥éè¦æˆ‘å†™æ³¨è§£"><a class="header" href="#q1-ä¸ºä»€ä¹ˆç¼–è¯‘å™¨ä¸èƒ½è‡ªå·±åˆ†æå‡ºæ¥éè¦æˆ‘å†™æ³¨è§£">Q1: ä¸ºä»€ä¹ˆç¼–è¯‘å™¨ä¸èƒ½è‡ªå·±åˆ†æå‡ºæ¥ï¼Œéè¦æˆ‘å†™æ³¨è§£ï¼Ÿ</a></h3>
<p>A: åœ¨å‡½æ•°è¾¹ç•Œä¸Šï¼ŒRust é€‰æ‹©è¦æ±‚æ˜¾å¼ç­¾åã€‚è¿™æ„å‘³ç€ç¼–è¯‘å™¨åªéœ€è¦åˆ†æå‡½æ•°çš„ç­¾åå°±èƒ½æ£€æŸ¥è°ƒç”¨è€…å’Œè¢«è°ƒç”¨è€…çš„ä»£ç ï¼Œè€Œä¸éœ€è¦æ·±å…¥å‡½æ•°ä½“å†…éƒ¨ã€‚å¦‚æœä¾èµ–å‡½æ•°ä½“æ¨æ–­ï¼Œä¿®æ”¹å‡½æ•°å†…éƒ¨å®ç°å¯èƒ½ä¼šæ„å¤–ç ´åå¤–éƒ¨è°ƒç”¨è€…çš„ä»£ç ï¼ˆæ‰“ç ´å‘åå…¼å®¹æ€§ï¼‰ã€‚</p>
<h3 id="q2-æ ‡æ³¨äº†-a-å°±èƒ½è®©å˜é‡æ´»å¾—æ›´ä¹…å—"><a class="header" href="#q2-æ ‡æ³¨äº†-a-å°±èƒ½è®©å˜é‡æ´»å¾—æ›´ä¹…å—">Q2: æ ‡æ³¨äº† <code>'a</code> å°±èƒ½è®©å˜é‡æ´»å¾—æ›´ä¹…å—ï¼Ÿ</a></h3>
<p>A: ä¸èƒ½ã€‚ç”Ÿå‘½å‘¨æœŸæ³¨è§£æ˜¯ <strong>æè¿°æ€§çš„ (Descriptive)</strong>ï¼Œä¸æ˜¯ <strong>æŒ‡ä»¤æ€§çš„ (Prescriptive)</strong>ã€‚å®ƒåªæ˜¯åœ¨æ£€æŸ¥ï¼Œå¦‚æœå®é™…ç”Ÿå‘½å‘¨æœŸä¸æ»¡è¶³æ³¨è§£çš„è¦æ±‚ï¼Œç¼–è¯‘å™¨ä¼šæŠ¥é”™ï¼Œè€Œä¸æ˜¯å»å»¶é•¿å˜é‡çš„å¯¿å‘½ã€‚</p>
<h2 id="-æœ€ä½³å®è·µ-9"><a class="header" href="#-æœ€ä½³å®è·µ-9">ğŸ’¡ æœ€ä½³å®è·µ</a></h2>
<ul>
<li><strong>åˆ©ç”¨çœç•¥è§„åˆ™</strong>: åªæœ‰ç¼–è¯‘å™¨æŠ¥é”™æ—¶æ‰æ·»åŠ æ˜¾å¼ç”Ÿå‘½å‘¨æœŸã€‚</li>
<li><strong>ç†è§£æ‰€æœ‰æƒ</strong>: å¾ˆå¤šç”Ÿå‘½å‘¨æœŸé—®é¢˜å¯ä»¥é€šè¿‡è½¬ç§»æ‰€æœ‰æƒï¼ˆä¾‹å¦‚è¿”å› <code>String</code> è€Œä¸æ˜¯ <code>&amp;str</code>ï¼‰æ¥è§£å†³ï¼Œå°¤å…¶æ˜¯å½“ä½ ä¸ç¡®å®šè°è¯¥æ‹¥æœ‰æ•°æ®æ—¶ã€‚</li>
</ul>
<h2 id="-æ‰©å±•é˜…è¯»-7"><a class="header" href="#-æ‰©å±•é˜…è¯»-7">ğŸ”— æ‰©å±•é˜…è¯»</a></h2>
<ul>
<li><a href="https://doc.rust-lang.org/book/ch10-03-lifetime-syntax.html">Rust ç¨‹åºè®¾è®¡è¯­è¨€ - ç”Ÿå‘½å‘¨æœŸ</a></li>
</ul>
<h2 id="-ä¸‹ä¸€æ­¥-13"><a class="header" href="#-ä¸‹ä¸€æ­¥-13">â­ï¸ ä¸‹ä¸€æ­¥</a></h2>
<p>æ­å–œï¼ä½ å·²ç»å®Œæˆäº† Rust åŸºç¡€éƒ¨åˆ†æœ€éš¾å•ƒçš„éª¨å¤´ã€‚ä¸ºäº†ä¿è¯ä»£ç è´¨é‡ï¼Œæˆ‘ä»¬éœ€è¦å­¦ä¼šç¼–å†™æµ‹è¯•ã€‚</p>
<p>ä¸‹ä¸€èŠ‚: <a href="Day01-15/15.Testing/README.html">Day 15: è‡ªåŠ¨åŒ–æµ‹è¯•</a></p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-15-è‡ªåŠ¨åŒ–æµ‹è¯•-automated-testing"><a class="header" href="#day-15-è‡ªåŠ¨åŒ–æµ‹è¯•-automated-testing">Day 15: è‡ªåŠ¨åŒ–æµ‹è¯• (Automated Testing)</a></h1>
<h2 id="-å­¦ä¹ ç›®æ ‡-12"><a class="header" href="#-å­¦ä¹ ç›®æ ‡-12">ğŸ“ å­¦ä¹ ç›®æ ‡</a></h2>
<ul>
<li>æŒæ¡ Rust å•å…ƒæµ‹è¯•çš„ç¼–å†™ (<code>#[test]</code>)</li>
<li>ç†Ÿç»ƒä½¿ç”¨æ–­è¨€å® (<code>assert!</code>, <code>assert_eq!</code>, <code>assert_ne!</code>)</li>
<li>æŒæ¡å¦‚ä½•æµ‹è¯• <code>panic!</code> (<code>should_panic</code>)</li>
<li>äº†è§£é›†æˆæµ‹è¯•ä¸æ–‡æ¡£æµ‹è¯•</li>
<li>æŒæ¡ <code>cargo test</code> çš„å¸¸ç”¨å‚æ•°</li>
</ul>
<h2 id="-ä¸ºä»€ä¹ˆè¦å­¦è¿™ä¸ª-9"><a class="header" href="#-ä¸ºä»€ä¹ˆè¦å­¦è¿™ä¸ª-9">ğŸ¯ ä¸ºä»€ä¹ˆè¦å­¦è¿™ä¸ª</a></h2>
<ul>
<li><strong>æ­£ç¡®æ€§</strong>: ç¡®ä¿ä»£ç æŒ‰é¢„æœŸå·¥ä½œã€‚</li>
<li><strong>é‡æ„ä¿¡å¿ƒ</strong>: å½“ä½ ä¿®æ”¹ä»£ç æ—¶ï¼Œæµ‹è¯•èƒ½ç«‹åˆ»å‘Šè¯‰ä½ æ˜¯å¦ç ´åäº†ç°æœ‰åŠŸèƒ½ã€‚</li>
<li><strong>æ–‡æ¡£</strong>: æµ‹è¯•ç”¨ä¾‹æœ¬èº«å°±æ˜¯å¾ˆå¥½çš„ä»£ç ä½¿ç”¨ç¤ºä¾‹ï¼ˆç‰¹åˆ«æ˜¯æ–‡æ¡£æµ‹è¯•ï¼‰ã€‚</li>
<li><strong>Rust åŸç”Ÿæ”¯æŒ</strong>: å¯ä»¥åœ¨ä»£ç æ–‡ä»¶ä¸­ç›´æ¥å†™æµ‹è¯•ï¼Œä¸éœ€è¦é¢å¤–çš„æ¡†æ¶ã€‚</li>
</ul>
<h2 id="-æ ¸å¿ƒæ¦‚å¿µ-8"><a class="header" href="#-æ ¸å¿ƒæ¦‚å¿µ-8">ğŸ“– æ ¸å¿ƒæ¦‚å¿µ</a></h2>
<h3 id="1-å•å…ƒæµ‹è¯•-unit-tests"><a class="header" href="#1-å•å…ƒæµ‹è¯•-unit-tests">1. å•å…ƒæµ‹è¯• (Unit Tests)</a></h3>
<p>é€šå¸¸ä½äºæºç æ–‡ä»¶çš„åº•éƒ¨ï¼Œå°è£…åœ¨ <code>mod tests</code> æ¨¡å—ä¸­ã€‚</p>
<ul>
<li>æµ‹è¯•ç§æœ‰æ¥å£ã€‚</li>
<li>ä½¿ç”¨ <code>#[cfg(test)]</code> æ ‡æ³¨ï¼Œç¡®ä¿åªåœ¨æµ‹è¯•æ—¶ç¼–è¯‘ã€‚</li>
</ul>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn internal_add(a: i32, b: i32) -&gt; i32 { a + b }

#[cfg(test)]
mod tests {
    use super::*;

    #[test]
    fn test_internal_add() {
        assert_eq!(internal_add(2, 2), 4);
    }
}
<span class="boring">}</span></code></pre>
<h3 id="2-é›†æˆæµ‹è¯•-integration-tests"><a class="header" href="#2-é›†æˆæµ‹è¯•-integration-tests">2. é›†æˆæµ‹è¯• (Integration Tests)</a></h3>
<p>ä½äºé¡¹ç›®æ ¹ç›®å½•çš„ <code>tests</code> ç›®å½•ä¸‹ã€‚</p>
<ul>
<li>åªèƒ½è°ƒç”¨å…¬æœ‰ API (å°±åƒå¤–éƒ¨ç”¨æˆ·ä¸€æ ·)ã€‚</li>
<li>ä¸“é—¨ç”¨äºæµ‹è¯•å¤šä¸ªæ¨¡å—é—´çš„äº¤äº’ã€‚</li>
</ul>
<h3 id="3-æ–‡æ¡£æµ‹è¯•-doc-tests"><a class="header" href="#3-æ–‡æ¡£æµ‹è¯•-doc-tests">3. æ–‡æ¡£æµ‹è¯• (Doc-tests)</a></h3>
<p>å†™åœ¨æ–‡æ¡£æ³¨é‡Š <code>///</code> ä¸­çš„ä»£ç å—ã€‚<code>cargo test</code> ä¼šè‡ªåŠ¨è¿è¡Œå®ƒä»¬ã€‚
è¿™ç¡®ä¿äº†ä½ çš„æ–‡æ¡£ç¤ºä¾‹æ°¸è¿œæ˜¯å¯è¿è¡Œçš„ï¼Œä¸ä¼šè¿‡æœŸã€‚</p>
<h3 id="4-å¸¸ç”¨æ–­è¨€"><a class="header" href="#4-å¸¸ç”¨æ–­è¨€">4. å¸¸ç”¨æ–­è¨€</a></h3>
<ul>
<li><code>assert!(expr)</code>: éªŒè¯è¡¨è¾¾å¼ä¸ºçœŸã€‚</li>
<li><code>assert_eq!(left, right)</code>: éªŒè¯ç›¸ç­‰ã€‚</li>
<li><code>assert_ne!(left, right)</code>: éªŒè¯ä¸ç­‰ã€‚</li>
<li><code>debug_assert!(...)</code>: åªåœ¨ Debug æ¨¡å¼ä¸‹è¿è¡Œã€‚</li>
</ul>
<h2 id="-ä»£ç ç¤ºä¾‹-8"><a class="header" href="#-ä»£ç ç¤ºä¾‹-8">ğŸ’» ä»£ç ç¤ºä¾‹</a></h2>
<h3 id="ç¤ºä¾‹-1-åŸºæœ¬æµ‹è¯•ä¸-panic-æµ‹è¯•"><a class="header" href="#ç¤ºä¾‹-1-åŸºæœ¬æµ‹è¯•ä¸-panic-æµ‹è¯•">ç¤ºä¾‹ 1: åŸºæœ¬æµ‹è¯•ä¸ Panic æµ‹è¯•</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct Guess {
    value: i32,
}

impl Guess {
    pub fn new(value: i32) -&gt; Guess {
        if value &lt; 1 || value &gt; 100 {
            panic!("Guess value must be between 1 and 100, got {}.", value);
        }

        Guess { value }
    }
}

#[cfg(test)]
mod tests {
    use super::*;

    #[test]
    #[should_panic(expected = "must be between 1 and 100")] // æ£€æŸ¥ panic ä¿¡æ¯åŒ…å«ç‰¹å®šå­—ç¬¦ä¸²
    fn greater_than_100() {
        Guess::new(200);
    }
}
<span class="boring">}</span></code></pre>
<h3 id="ç¤ºä¾‹-2-ä½¿ç”¨-result-ç¼–å†™æµ‹è¯•"><a class="header" href="#ç¤ºä¾‹-2-ä½¿ç”¨-result-ç¼–å†™æµ‹è¯•">ç¤ºä¾‹ 2: ä½¿ç”¨ Result ç¼–å†™æµ‹è¯•</a></h3>
<p>å…è®¸åœ¨æµ‹è¯•ä¸­ä½¿ç”¨ <code>?</code> è¿ç®—ç¬¦ã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[test]
fn it_works() -&gt; Result&lt;(), String&gt; {
    if 2 + 2 == 4 {
        Ok(())
    } else {
        Err(String::from("two plus two does not equal four"))
    }
}
<span class="boring">}</span></code></pre>
<h2 id="-ç»ƒä¹ é¢˜-11"><a class="header" href="#-ç»ƒä¹ é¢˜-11">ğŸ‹ï¸ ç»ƒä¹ é¢˜</a></h2>
<p>æˆ‘ä»¬å‡†å¤‡äº†ç»ƒä¹ é¢˜æ¥å¸®åŠ©ä½ æŒæ¡æµ‹è¯•çš„ç¼–å†™ã€‚</p>
<ul>
<li><strong>ç»ƒä¹  1</strong>: ç¼–å†™åŸºæœ¬çš„å•å…ƒæµ‹è¯•</li>
<li><strong>ç»ƒä¹  2</strong>: æµ‹è¯•è‡ªå®šä¹‰ç»“æ„ä½“ä¸ panic</li>
<li><strong>ç»ƒä¹  3</strong>: ç¼–å†™æ–‡æ¡£æµ‹è¯•ï¼ˆæ¨¡æ‹Ÿï¼‰</li>
</ul>
<p>ğŸ‘‰ <strong><a href="Day01-15/15.Testing/exercises/README.html">ç‚¹å‡»è¿™é‡ŒæŸ¥çœ‹ç»ƒä¹ é¢˜</a></strong></p>
<h2 id="-å¸¸è§é—®é¢˜-faq-8"><a class="header" href="#-å¸¸è§é—®é¢˜-faq-8">ğŸ¤” å¸¸è§é—®é¢˜ (FAQ)</a></h2>
<h3 id="q1-cargo-test-é»˜è®¤æ˜¯å¹¶è¡Œè¿è¡Œçš„å—"><a class="header" href="#q1-cargo-test-é»˜è®¤æ˜¯å¹¶è¡Œè¿è¡Œçš„å—">Q1: <code>cargo test</code> é»˜è®¤æ˜¯å¹¶è¡Œè¿è¡Œçš„å—ï¼Ÿ</a></h3>
<p>A: æ˜¯çš„ã€‚å¦‚æœä½ çš„æµ‹è¯•ç›¸äº’ä¾èµ–ï¼ˆä¾‹å¦‚éƒ½æ“ä½œåŒä¸€ä¸ªæ–‡ä»¶æˆ–æ•°æ®åº“ï¼‰ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´é—®é¢˜ã€‚å¯ä»¥ä½¿ç”¨ <code>cargo test -- --test-threads=1</code> æ¥ä¸²è¡Œè¿è¡Œæµ‹è¯•ã€‚</p>
<h3 id="q2-æ—¢ç„¶å¯ä»¥æµ‹è¯•ç§æœ‰å‡½æ•°é‚£è¿˜éœ€è¦é›†æˆæµ‹è¯•å—"><a class="header" href="#q2-æ—¢ç„¶å¯ä»¥æµ‹è¯•ç§æœ‰å‡½æ•°é‚£è¿˜éœ€è¦é›†æˆæµ‹è¯•å—">Q2: æ—¢ç„¶å¯ä»¥æµ‹è¯•ç§æœ‰å‡½æ•°ï¼Œé‚£è¿˜éœ€è¦é›†æˆæµ‹è¯•å—ï¼Ÿ</a></h3>
<p>A: éœ€è¦ã€‚å•å…ƒæµ‹è¯•å…³æ³¨å®ç°çš„ç»†èŠ‚ï¼ˆç™½ç›’ï¼‰ï¼Œé›†æˆæµ‹è¯•å…³æ³¨å¯¹å¤–æš´éœ²çš„ API æ˜¯å¦å¥½ç”¨ã€å¤šä¸ªç»„ä»¶èƒ½å¦æ­£ç¡®åä½œï¼ˆé»‘ç›’ï¼‰ã€‚ä¸¤è€…ç¼ºä¸€ä¸å¯ã€‚</p>
<h2 id="-æœ€ä½³å®è·µ-10"><a class="header" href="#-æœ€ä½³å®è·µ-10">ğŸ’¡ æœ€ä½³å®è·µ</a></h2>
<ul>
<li><strong>TDD (æµ‹è¯•é©±åŠ¨å¼€å‘)</strong>: å…ˆå†™ä¸€ä¸ªå¤±è´¥çš„æµ‹è¯•ï¼Œå†å†™ä»£ç è®©å®ƒé€šè¿‡ã€‚</li>
<li><strong>æµ‹è¯•è¦†ç›–ç‡</strong>: å°½é‡è¦†ç›–å„ç§è¾¹ç¼˜æƒ…å†µ (Edge Cases)ï¼Œä¸ä»…ä»…æ˜¯æ­£å¸¸è·¯å¾„ (Happy Path)ã€‚</li>
<li><strong>æ–‡æ¡£å³æµ‹è¯•</strong>: å°½é‡ä¸ºå…¬æœ‰ API ç¼–å†™åŒ…å«ç¤ºä¾‹ä»£ç çš„æ–‡æ¡£æ³¨é‡Šã€‚</li>
</ul>
<h2 id="-æ‰©å±•é˜…è¯»-8"><a class="header" href="#-æ‰©å±•é˜…è¯»-8">ğŸ”— æ‰©å±•é˜…è¯»</a></h2>
<ul>
<li><a href="https://doc.rust-lang.org/book/ch11-00-testing.html">Rust ç¨‹åºè®¾è®¡è¯­è¨€ - æµ‹è¯•</a></li>
</ul>
<h2 id="-ä¸‹ä¸€æ­¥-14"><a class="header" href="#-ä¸‹ä¸€æ­¥-14">â­ï¸ ä¸‹ä¸€æ­¥</a></h2>
<p>æ­å–œä½ å®Œæˆäº†ç¬¬ä¸€é˜¶æ®µï¼ˆåŸºç¡€çŸ¥è¯†ï¼‰çš„æ‰€æœ‰å†…å®¹ï¼ä½ å·²ç»æŒæ¡äº† Rust çš„å˜é‡ã€æ‰€æœ‰æƒã€ç±»å‹ç³»ç»Ÿã€æ³›å‹ã€Traitã€ç”Ÿå‘½å‘¨æœŸå’Œæµ‹è¯•ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†è¿›å…¥ç¬¬äºŒé˜¶æ®µï¼š<strong>è¿›é˜¶æ¦‚å¿µ</strong>ã€‚æˆ‘ä»¬å°†æ¢ç´¢å‡½æ•°å¼ç¼–ç¨‹ç‰¹æ€§ã€‚</p>
<p>ä¸‹ä¸€èŠ‚: <a href="Day01-15/Day16-30/16.Closures/README.html">Day 16: é—­åŒ…</a></p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-16-é—­åŒ…-closures"><a class="header" href="#day-16-é—­åŒ…-closures">Day 16: é—­åŒ… (Closures)</a></h1>
<h2 id="-å­¦ä¹ ç›®æ ‡-13"><a class="header" href="#-å­¦ä¹ ç›®æ ‡-13">ğŸ“ å­¦ä¹ ç›®æ ‡</a></h2>
<ul>
<li>ç†è§£é—­åŒ…çš„åŸºæœ¬æ¦‚å¿µå’Œè¯­æ³•ã€‚</li>
<li>æŒæ¡é—­åŒ…å¦‚ä½•æ•è·ç¯å¢ƒï¼ˆ<code>Fn</code>, <code>FnMut</code>, <code>FnOnce</code>ï¼‰ã€‚</li>
<li>å­¦ä¼šä½¿ç”¨ <code>move</code> å…³é”®å­—å¼ºåˆ¶è½¬ç§»æ‰€æœ‰æƒã€‚</li>
<li>èƒ½å¤Ÿå°†é—­åŒ…ä½œä¸ºå‚æ•°ä¼ é€’æˆ–ä½œä¸ºè¿”å›å€¼ã€‚</li>
</ul>
<h2 id="-ä¸ºä»€ä¹ˆè¦å­¦è¿™ä¸ª-10"><a class="header" href="#-ä¸ºä»€ä¹ˆè¦å­¦è¿™ä¸ª-10">ğŸ¯ ä¸ºä»€ä¹ˆè¦å­¦è¿™ä¸ª</a></h2>
<p>é—­åŒ…æ˜¯å‡½æ•°å¼ç¼–ç¨‹çš„æ ¸å¿ƒæ¦‚å¿µä¹‹ä¸€ï¼Œåœ¨ Rust ä¸­è¢«å¹¿æ³›ç”¨äºï¼š</p>
<ul>
<li><strong>è¿­ä»£å™¨é€‚é…å™¨</strong>ï¼šå¦‚ <code>map</code>, <code>filter</code> ç­‰ã€‚</li>
<li><strong>çº¿ç¨‹ç”Ÿæˆ</strong>ï¼š<code>thread::spawn</code> æ¥å—ä¸€ä¸ªé—­åŒ…ä½œä¸ºæ–°çº¿ç¨‹çš„ä»»åŠ¡ã€‚</li>
<li><strong>å›è°ƒå‡½æ•°</strong>ï¼šåœ¨å¼‚æ­¥ç¼–ç¨‹æˆ–äº‹ä»¶é©±åŠ¨ç¼–ç¨‹ä¸­ã€‚</li>
<li><strong>å»¶è¿Ÿè®¡ç®—</strong>ï¼šä»…åœ¨éœ€è¦æ—¶æ‰§è¡Œä»£ç ã€‚</li>
</ul>
<p>ç›¸æ¯”æ™®é€šå‡½æ•°ï¼Œé—­åŒ…æœ€å¼ºå¤§çš„èƒ½åŠ›æ˜¯<strong>æ•è·å…¶å®šä¹‰ä½œç”¨åŸŸä¸­çš„å˜é‡</strong>ï¼Œè¿™ä½¿å¾—å®ƒä»¬éå¸¸çµæ´»ã€‚</p>
<h2 id="-æ ¸å¿ƒæ¦‚å¿µ-9"><a class="header" href="#-æ ¸å¿ƒæ¦‚å¿µ-9">ğŸ“– æ ¸å¿ƒæ¦‚å¿µ</a></h2>
<h3 id="1-å®šä¹‰é—­åŒ…"><a class="header" href="#1-å®šä¹‰é—­åŒ…">1. å®šä¹‰é—­åŒ…</a></h3>
<p>é—­åŒ…é€šå¸¸ä¸éœ€è¦åƒå‡½æ•°é‚£æ ·æ ‡æ³¨å‚æ•°å’Œè¿”å›å€¼ç±»å‹ï¼Œç¼–è¯‘å™¨èƒ½è‡ªåŠ¨æ¨æ–­ã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let add_one = |x| x + 1;
// æ˜¾å¼æ ‡æ³¨ç±»å‹
let add_one_explicit = |x: i32| -&gt; i32 { x + 1 };
<span class="boring">}</span></code></pre>
<h3 id="2-æ•è·ç¯å¢ƒä¸-trait"><a class="header" href="#2-æ•è·ç¯å¢ƒä¸-trait">2. æ•è·ç¯å¢ƒä¸ Trait</a></h3>
<p>é—­åŒ…æ ¹æ®å…¶å¦‚ä½•ä½¿ç”¨æ•è·çš„å˜é‡ï¼Œè‡ªåŠ¨å®ç°ä»¥ä¸‹ Trait ä¹‹ä¸€ï¼ˆæˆ–å¤šä¸ªï¼‰ï¼š</p>
<ul>
<li><strong><code>FnOnce</code></strong>ï¼šé—­åŒ…æ¶ˆè€—æ•è·çš„å˜é‡ï¼ˆè·å–æ‰€æœ‰æƒï¼‰ã€‚åªèƒ½è°ƒç”¨ä¸€æ¬¡ã€‚</li>
<li><strong><code>FnMut</code></strong>ï¼šé—­åŒ…å¯å˜åœ°å€Ÿç”¨æ•è·çš„å˜é‡ã€‚å¯ä»¥å¤šæ¬¡è°ƒç”¨ï¼Œä¸”å¯èƒ½ä¼šæ”¹å˜ç¯å¢ƒã€‚</li>
<li><strong><code>Fn</code></strong>ï¼šé—­åŒ…ä¸å¯å˜åœ°å€Ÿç”¨æ•è·çš„å˜é‡ã€‚å¯ä»¥å¤šæ¬¡è°ƒç”¨ï¼Œä¸æ”¹å˜ç¯å¢ƒã€‚</li>
</ul>
<h3 id="3-move-å…³é”®å­—"><a class="header" href="#3-move-å…³é”®å­—">3. <code>move</code> å…³é”®å­—</a></h3>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œé—­åŒ…å°½å¯èƒ½ä»¥å¼•ç”¨çš„æ–¹å¼æ•è·å˜é‡ã€‚ä½¿ç”¨ <code>move</code> å…³é”®å­—å¯ä»¥å¼ºåˆ¶é—­åŒ…è·å–æ•è·å˜é‡çš„æ‰€æœ‰æƒã€‚è¿™åœ¨å¤šçº¿ç¨‹åœºæ™¯ä¸­éå¸¸é‡è¦ã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let list = vec![1, 2, 3];
// å¼ºåˆ¶è·å– list çš„æ‰€æœ‰æƒï¼Œå¦åˆ™ list çš„ç”Ÿå‘½å‘¨æœŸå¯èƒ½çŸ­äºæ–°çº¿ç¨‹
std::thread::spawn(move || {
    println!("From thread: {:?}", list);
});
<span class="boring">}</span></code></pre>
<h2 id="-ä»£ç ç¤ºä¾‹-9"><a class="header" href="#-ä»£ç ç¤ºä¾‹-9">ğŸ’» ä»£ç ç¤ºä¾‹</a></h2>
<h3 id="ç¤ºä¾‹-1-åŸºç¡€ç”¨æ³•ä¸ç±»å‹æ¨æ–­"><a class="header" href="#ç¤ºä¾‹-1-åŸºç¡€ç”¨æ³•ä¸ç±»å‹æ¨æ–­">ç¤ºä¾‹ 1: åŸºç¡€ç”¨æ³•ä¸ç±»å‹æ¨æ–­</a></h3>
<pre class="playground"><code class="language-rust">fn main() {
    let example_closure = |x| x;

    // ç¬¬ä¸€æ¬¡è°ƒç”¨é”å®šäº†ç±»å‹ä¸º String
    let s = example_closure(String::from("hello"));
    println!("s: {}", s);

    // let n = example_closure(5); // ç¼–è¯‘é”™è¯¯ï¼ç±»å‹å·²æ¨æ–­ä¸º String
}</code></pre>
<h3 id="ç¤ºä¾‹-2-å¸¦æœ‰è®°å¿†åŒ–-memoization-çš„-cacher"><a class="header" href="#ç¤ºä¾‹-2-å¸¦æœ‰è®°å¿†åŒ–-memoization-çš„-cacher">ç¤ºä¾‹ 2: å¸¦æœ‰è®°å¿†åŒ– (Memoization) çš„ Cacher</a></h3>
<p>æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªç»“æ„ä½“ï¼Œå®ƒæŒæœ‰ä¸€ä¸ªé—­åŒ…ï¼Œå¹¶ç¼“å­˜è¯¥é—­åŒ…çš„ç»“æœã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>struct Cacher&lt;T&gt;
where
    T: Fn(u32) -&gt; u32,
{
    calculation: T,
    value: Option&lt;u32&gt;,
}
<span class="boring">}</span></code></pre>
<h2 id="-ç»ƒä¹ é¢˜-12"><a class="header" href="#-ç»ƒä¹ é¢˜-12">ğŸ‹ï¸ ç»ƒä¹ é¢˜</a></h2>
<h3 id="ç»ƒä¹ -1-åŸºç¡€é—­åŒ…"><a class="header" href="#ç»ƒä¹ -1-åŸºç¡€é—­åŒ…">ç»ƒä¹  1: åŸºç¡€é—­åŒ…</a></h3>
<p>ç¼–å†™ä¸€ä¸ªé—­åŒ…ï¼Œæ¥å—ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¿”å›è¯¥å­—ç¬¦ä¸²çš„å¤§å†™å½¢å¼ã€‚
<a href="Day16-30/16.Closures/exercises/solutions/exercise1_solution.rs">æŸ¥çœ‹å‚è€ƒç­”æ¡ˆ</a></p>
<h3 id="ç»ƒä¹ -2-æ•è·è®¡æ•°å™¨"><a class="header" href="#ç»ƒä¹ -2-æ•è·è®¡æ•°å™¨">ç»ƒä¹  2: æ•è·è®¡æ•°å™¨</a></h3>
<p>å®ç°ä¸€ä¸ªé—­åŒ…ï¼Œæ¯æ¬¡è°ƒç”¨æ—¶ä½¿å†…éƒ¨æ•è·çš„è®¡æ•°å™¨åŠ  1ï¼Œå¹¶è¿”å›å½“å‰å€¼ã€‚æ€è€ƒéœ€è¦ä½¿ç”¨å“ªç§ Fn Traitï¼Ÿ
<a href="Day16-30/16.Closures/exercises/solutions/exercise2_solution.rs">æŸ¥çœ‹å‚è€ƒç­”æ¡ˆ</a></p>
<h3 id="ç»ƒä¹ -3-æ³›å‹-cacher"><a class="header" href="#ç»ƒä¹ -3-æ³›å‹-cacher">ç»ƒä¹  3: æ³›å‹ Cacher</a></h3>
<p>å®ç°ä¸€ä¸ªå¯ä»¥å¤„ç†ä¸åŒç±»å‹å‚æ•°å’Œè¿”å›å€¼çš„æ³›å‹ <code>Cacher</code> ç»“æ„ä½“ã€‚å®ƒåº”è¯¥åœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨ <code>value</code> æ–¹æ³•æ—¶æ‰§è¡Œé—­åŒ…å¹¶ç¼“å­˜ç»“æœï¼Œåç»­è°ƒç”¨ç›´æ¥è¿”å›ç¼“å­˜ã€‚
<a href="Day16-30/16.Closures/exercises/solutions/exercise3_solution.rs">æŸ¥çœ‹å‚è€ƒç­”æ¡ˆ</a></p>
<h2 id="-å¸¸è§é—®é¢˜-1"><a class="header" href="#-å¸¸è§é—®é¢˜-1">ğŸ¤” å¸¸è§é—®é¢˜</a></h2>
<h3 id="q1-ä»€ä¹ˆæ—¶å€™è¯¥ç”¨-move"><a class="header" href="#q1-ä»€ä¹ˆæ—¶å€™è¯¥ç”¨-move">Q1: ä»€ä¹ˆæ—¶å€™è¯¥ç”¨ <code>move</code>ï¼Ÿ</a></h3>
<p>A: å½“ä½ éœ€è¦å°†é—­åŒ…ä¼ é€’ç»™æ–°çº¿ç¨‹ï¼Œæˆ–è€…å¸Œæœ›é—­åŒ…å®Œå…¨æ‹¥æœ‰å®ƒæ•è·çš„æ•°æ®ï¼ˆä¾‹å¦‚ä¸ºäº†é˜²æ­¢å¤–éƒ¨ä¿®æ”¹ï¼Œæˆ–è€…ä¸ºäº†è¿”å›é—­åŒ…ï¼‰æ—¶ã€‚</p>
<h3 id="q2-ä¸ºä»€ä¹ˆä¸èƒ½ç›´æ¥è¿”å›é—­åŒ…"><a class="header" href="#q2-ä¸ºä»€ä¹ˆä¸èƒ½ç›´æ¥è¿”å›é—­åŒ…">Q2: ä¸ºä»€ä¹ˆä¸èƒ½ç›´æ¥è¿”å›é—­åŒ…ï¼Ÿ</a></h3>
<p>A: é—­åŒ…æ²¡æœ‰å…·ä½“çš„å¤§å°ï¼ˆUnsizedï¼‰ï¼Œå› ä¸ºæ¯ä¸ªé—­åŒ…éƒ½æ˜¯ç‹¬ç‰¹çš„åŒ¿åç±»å‹ã€‚è¦è¿”å›é—­åŒ…ï¼Œé€šå¸¸éœ€è¦å°†å…¶è£…ç®±ï¼š<code>Box&lt;dyn Fn(i32) -&gt; i32&gt;</code> æˆ–ä½¿ç”¨ <code>impl Trait</code> è¯­æ³•ï¼š<code>fn return_closure() -&gt; impl Fn(i32) -&gt; i32</code>ã€‚</p>
<h2 id="-æ‰©å±•é˜…è¯»-9"><a class="header" href="#-æ‰©å±•é˜…è¯»-9">ğŸ”— æ‰©å±•é˜…è¯»</a></h2>
<ul>
<li><a href="https://doc.rust-lang.org/book/ch13-01-closures.html">Rust Book: Closures</a></li>
<li><a href="https://doc.rust-lang.org/rust-by-example/fn/closures.html">Rust by Example: Closures</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-17-è¿­ä»£å™¨-iterators"><a class="header" href="#day-17-è¿­ä»£å™¨-iterators">Day 17: è¿­ä»£å™¨ (Iterators)</a></h1>
<h2 id="-å­¦ä¹ ç›®æ ‡-14"><a class="header" href="#-å­¦ä¹ ç›®æ ‡-14">ğŸ“ å­¦ä¹ ç›®æ ‡</a></h2>
<ul>
<li>ç†è§£ <code>Iterator</code> trait åŠå…¶æ ¸å¿ƒæ–¹æ³• <code>next</code>ã€‚</li>
<li>æŒæ¡æ¶ˆè´¹é€‚é…å™¨ï¼ˆConsuming Adaptorsï¼‰å¦‚ <code>sum</code>, <code>collect</code>ã€‚</li>
<li>æŒæ¡è¿­ä»£å™¨é€‚é…å™¨ï¼ˆIterator Adaptorsï¼‰å¦‚ <code>map</code>, <code>filter</code>, <code>zip</code>ã€‚</li>
<li>èƒ½å¤Ÿå®ç°è‡ªå®šä¹‰è¿­ä»£å™¨ã€‚</li>
</ul>
<h2 id="-ä¸ºä»€ä¹ˆè¦å­¦è¿™ä¸ª-11"><a class="header" href="#-ä¸ºä»€ä¹ˆè¦å­¦è¿™ä¸ª-11">ğŸ¯ ä¸ºä»€ä¹ˆè¦å­¦è¿™ä¸ª</a></h2>
<p>è¿­ä»£å™¨æ¨¡å¼æ˜¯ Rust å¤„ç†åºåˆ—æ•°æ®çš„ä¸»è¦æ–¹å¼ã€‚å®ƒä¸ä»…è¯­æ³•ç®€æ´ï¼Œè€Œä¸”åœ¨ Rust ä¸­æ˜¯<strong>é›¶æˆæœ¬æŠ½è±¡</strong>ï¼ˆZero-Cost Abstractionsï¼‰ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œä½¿ç”¨è¿­ä»£å™¨çš„é€Ÿåº¦ä¸æ‰‹å†™åº•å±‚ <code>for</code> å¾ªç¯ä¸€æ ·å¿«ï¼Œç”šè‡³æ›´å¿«ï¼ˆå› ä¸ºç¼–è¯‘å™¨èƒ½æ›´å¥½åœ°ä¼˜åŒ–è¾¹ç•Œæ£€æŸ¥ï¼‰ã€‚</p>
<h2 id="-æ ¸å¿ƒæ¦‚å¿µ-10"><a class="header" href="#-æ ¸å¿ƒæ¦‚å¿µ-10">ğŸ“– æ ¸å¿ƒæ¦‚å¿µ</a></h2>
<h3 id="1-iterator-trait"><a class="header" href="#1-iterator-trait">1. Iterator Trait</a></h3>
<p>æ‰€æœ‰è¿­ä»£å™¨éƒ½å®ç°äº† <code>Iterator</code> traitã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub trait Iterator {
    type Item;
    fn next(&amp;mut self) -&gt; Option&lt;Self::Item&gt;;
    // ... å…¶å®ƒæ–¹æ³•æœ‰é»˜è®¤å®ç°
}
<span class="boring">}</span></code></pre>
<ul>
<li><code>next</code> æ–¹æ³•è¿”å› <code>Option&lt;Self::Item&gt;</code>ã€‚å¦‚æœè¿”å› <code>Some(item)</code>ï¼Œåˆ™å¤„ç†ä¸‹ä¸€ä¸ªå…ƒç´ ï¼›å¦‚æœè¿”å› <code>None</code>ï¼Œåˆ™è¿­ä»£ç»“æŸã€‚</li>
</ul>
<h3 id="2-åˆ›å»ºè¿­ä»£å™¨"><a class="header" href="#2-åˆ›å»ºè¿­ä»£å™¨">2. åˆ›å»ºè¿­ä»£å™¨</a></h3>
<ul>
<li><code>iter()</code>: åˆ›å»ºä¸å¯å˜å¼•ç”¨çš„è¿­ä»£å™¨ã€‚</li>
<li><code>iter_mut()</code>: åˆ›å»ºå¯å˜å¼•ç”¨çš„è¿­ä»£å™¨ã€‚</li>
<li><code>into_iter()</code>: åˆ›å»ºè·å–æ‰€æœ‰æƒçš„è¿­ä»£å™¨ã€‚</li>
</ul>
<h3 id="3-æ¶ˆè´¹é€‚é…å™¨-consuming-adaptors"><a class="header" href="#3-æ¶ˆè´¹é€‚é…å™¨-consuming-adaptors">3. æ¶ˆè´¹é€‚é…å™¨ (Consuming Adaptors)</a></h3>
<p>è¿™äº›æ–¹æ³•ä¼šè°ƒç”¨ <code>next</code>ï¼Œæ¶ˆè€—æ‰è¿­ä»£å™¨ï¼Œå¹¶ç”Ÿæˆä¸€ä¸ªæœ€ç»ˆç»“æœã€‚</p>
<ul>
<li><code>collect()</code>: å°†è¿­ä»£å™¨è½¬æ¢æˆé›†åˆï¼ˆå¦‚ <code>Vec</code>, <code>HashMap</code>ï¼‰ã€‚</li>
<li><code>sum()</code>, <code>product()</code>: æ±‚å’Œã€æ±‚ç§¯ã€‚</li>
<li><code>count()</code>: è®¡ç®—å…ƒç´ ä¸ªæ•°ã€‚</li>
<li><code>for_each()</code>: å¯¹æ¯ä¸ªå…ƒç´ æ‰§è¡Œæ“ä½œã€‚</li>
</ul>
<h3 id="4-è¿­ä»£å™¨é€‚é…å™¨-iterator-adaptors"><a class="header" href="#4-è¿­ä»£å™¨é€‚é…å™¨-iterator-adaptors">4. è¿­ä»£å™¨é€‚é…å™¨ (Iterator Adaptors)</a></h3>
<p>è¿™äº›æ–¹æ³•å°†å½“å‰è¿­ä»£å™¨è½¬æ¢æˆå¦ä¸€ä¸ªè¿­ä»£å™¨ã€‚å®ƒä»¬æ˜¯<strong>æƒ°æ€§</strong>çš„ï¼ˆLazyï¼‰ï¼Œå¿…é¡»é…åˆæ¶ˆè´¹é€‚é…å™¨æ‰ä¼šæ‰§è¡Œã€‚</p>
<ul>
<li><code>map()</code>: è½¬æ¢å…ƒç´ ã€‚</li>
<li><code>filter()</code>: ç­›é€‰å…ƒç´ ã€‚</li>
<li><code>zip()</code>: å°†ä¸¤ä¸ªè¿­ä»£å™¨åˆå¹¶ä¸ºä¸€ä¸ªå…ƒç»„è¿­ä»£å™¨ã€‚</li>
<li><code>chain()</code>: è¿æ¥ä¸¤ä¸ªè¿­ä»£å™¨ã€‚</li>
<li><code>enumerate()</code>: æ·»åŠ ç´¢å¼•ã€‚</li>
</ul>
<h2 id="-ä»£ç ç¤ºä¾‹-10"><a class="header" href="#-ä»£ç ç¤ºä¾‹-10">ğŸ’» ä»£ç ç¤ºä¾‹</a></h2>
<h3 id="ç¤ºä¾‹-1-åŸºæœ¬ä½¿ç”¨"><a class="header" href="#ç¤ºä¾‹-1-åŸºæœ¬ä½¿ç”¨">ç¤ºä¾‹ 1: åŸºæœ¬ä½¿ç”¨</a></h3>
<pre class="playground"><code class="language-rust">fn main() {
    let v1 = vec![1, 2, 3];
    let v1_iter = v1.iter(); // æƒ°æ€§ï¼Œä¸äº§ç”Ÿä»»ä½•æ“ä½œ

    for val in v1_iter { // è¿™é‡Œéšå¼è°ƒç”¨ next
        println!("Got: {}", val);
    }
}</code></pre>
<h3 id="ç¤ºä¾‹-2-map-å’Œ-filter"><a class="header" href="#ç¤ºä¾‹-2-map-å’Œ-filter">ç¤ºä¾‹ 2: map å’Œ filter</a></h3>
<pre class="playground"><code class="language-rust">fn main() {
    let v1: Vec&lt;i32&gt; = vec![1, 2, 3];

    // map å’Œ filter éƒ½æ˜¯æƒ°æ€§çš„ï¼Œå¿…é¡»æœ€åè°ƒç”¨ collect
    let v2: Vec&lt;_&gt; = v1.iter()
                       .map(|x| x + 1)
                       .filter(|x| x % 2 == 0)
                       .collect();

    println!("{:?}", v2); // [2, 4]
}</code></pre>
<h2 id="-ç»ƒä¹ é¢˜-13"><a class="header" href="#-ç»ƒä¹ é¢˜-13">ğŸ‹ï¸ ç»ƒä¹ é¢˜</a></h2>
<h3 id="ç»ƒä¹ -1-å¹³æ–¹å’Œ"><a class="header" href="#ç»ƒä¹ -1-å¹³æ–¹å’Œ">ç»ƒä¹  1: å¹³æ–¹å’Œ</a></h3>
<p>ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œæ¥å—ä¸€ä¸ª <code>&amp;[i32]</code>ï¼Œè¿”å›å…¶ä¸­æ‰€æœ‰å¶æ•°çš„å¹³æ–¹å’Œã€‚ä½¿ç”¨è¿­ä»£å™¨é“¾å¼è°ƒç”¨å®ç°ã€‚
<a href="Day16-30/17.Iterators/exercises/solutions/exercise1_solution.rs">æŸ¥çœ‹å‚è€ƒç­”æ¡ˆ</a></p>
<h3 id="ç»ƒä¹ -2-è‡ªå®šä¹‰è¿­ä»£å™¨"><a class="header" href="#ç»ƒä¹ -2-è‡ªå®šä¹‰è¿­ä»£å™¨">ç»ƒä¹  2: è‡ªå®šä¹‰è¿­ä»£å™¨</a></h3>
<p>å®ç°ä¸€ä¸ª <code>Counter</code> ç»“æ„ä½“ï¼Œä» 1 æ•°åˆ° 5ã€‚
<a href="Day16-30/17.Iterators/exercises/solutions/exercise2_solution.rs">æŸ¥çœ‹å‚è€ƒç­”æ¡ˆ</a></p>
<h3 id="ç»ƒä¹ -3-å¤æ‚é“¾å¼æ“ä½œ"><a class="header" href="#ç»ƒä¹ -3-å¤æ‚é“¾å¼æ“ä½œ">ç»ƒä¹  3: å¤æ‚é“¾å¼æ“ä½œ</a></h3>
<p>ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²å‘é‡ï¼Œè¿‡æ»¤å‡ºé•¿åº¦å¤§äº 3 çš„å­—ç¬¦ä¸²ï¼Œå°†å…¶è½¬æ¢ä¸ºå¤§å†™ï¼Œå¹¶ç”¨é€—å·è¿æ¥æˆä¸€ä¸ªå•ä¸€çš„å­—ç¬¦ä¸²ã€‚
<a href="Day16-30/17.Iterators/exercises/solutions/exercise3_solution.rs">æŸ¥çœ‹å‚è€ƒç­”æ¡ˆ</a></p>
<h2 id="-å¸¸è§é—®é¢˜-2"><a class="header" href="#-å¸¸è§é—®é¢˜-2">ğŸ¤” å¸¸è§é—®é¢˜</a></h2>
<h3 id="q1-ä»€ä¹ˆæ—¶å€™ç”¨-iter-vs-into_iter"><a class="header" href="#q1-ä»€ä¹ˆæ—¶å€™ç”¨-iter-vs-into_iter">Q1: ä»€ä¹ˆæ—¶å€™ç”¨ <code>iter()</code> vs <code>into_iter()</code>?</a></h3>
<p>A:</p>
<ul>
<li><code>iter()</code>: å½“ä½ æƒ³éå†æ•°æ®çš„å¼•ç”¨ï¼ˆå€Ÿç”¨ï¼‰ï¼Œä¿ç•™åŸå§‹æ•°æ®æ—¶ã€‚</li>
<li><code>into_iter()</code>: å½“ä½ æƒ³è·å–æ•°æ®çš„æ‰€æœ‰æƒï¼ˆç§»åŠ¨ï¼‰ï¼ŒåŸå§‹æ•°æ®ä¸å†éœ€è¦æ—¶ã€‚</li>
</ul>
<h3 id="q2-ä¸ºä»€ä¹ˆ-collect-éœ€è¦ç±»å‹æ ‡æ³¨"><a class="header" href="#q2-ä¸ºä»€ä¹ˆ-collect-éœ€è¦ç±»å‹æ ‡æ³¨">Q2: ä¸ºä»€ä¹ˆ <code>collect()</code> éœ€è¦ç±»å‹æ ‡æ³¨ï¼Ÿ</a></h3>
<p>A: <code>collect()</code> å¯ä»¥å°†è¿­ä»£å™¨è½¬æ¢æˆå¤šç§ä¸åŒçš„é›†åˆï¼ˆVec, LinkedList, HashMap ç­‰ï¼‰ã€‚ç¼–è¯‘å™¨é€šå¸¸æ— æ³•æ¨æ–­ä½ æƒ³è½¬æ¢æˆå“ªç§å…·ä½“ç±»å‹ï¼Œæ‰€ä»¥éœ€è¦æ˜¾å¼æ ‡æ³¨ <code>Vec&lt;_&gt;</code> æˆ– <code>Vec&lt;i32&gt;</code>ã€‚</p>
<h2 id="-æ‰©å±•é˜…è¯»-10"><a class="header" href="#-æ‰©å±•é˜…è¯»-10">ğŸ”— æ‰©å±•é˜…è¯»</a></h2>
<ul>
<li><a href="https://doc.rust-lang.org/book/ch13-02-iterators.html">Rust Book: Processing a Series of Items with Iterators</a></li>
<li><a href="https://doc.rust-lang.org/std/iter/trait.Iterator.html">Standard Library: Iterator</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-18-cargo-è¿›é˜¶ä¸-cratesio"><a class="header" href="#day-18-cargo-è¿›é˜¶ä¸-cratesio">Day 18: Cargo è¿›é˜¶ä¸ Crates.io</a></h1>
<h2 id="-å­¦ä¹ ç›®æ ‡-15"><a class="header" href="#-å­¦ä¹ ç›®æ ‡-15">ğŸ“ å­¦ä¹ ç›®æ ‡</a></h2>
<ul>
<li>ç†è§£ Cargo çš„ Release Profiles (<code>dev</code> vs <code>release</code>)ã€‚</li>
<li>æŒæ¡å¦‚ä½•ç¼–å†™æ–‡æ¡£æ³¨é‡Š (<code>///</code>) å¹¶è¿è¡Œæ–‡æ¡£æµ‹è¯•ã€‚</li>
<li>å­¦ä¼šä½¿ç”¨ Cargo Workspaces ç®¡ç†å¤šä¸ªåŒ…ã€‚</li>
<li>äº†è§£å¦‚ä½•å‘å¸ƒåŒ…åˆ° Crates.io ä»¥åŠç‰ˆæœ¬ç®¡ç†ã€‚</li>
</ul>
<h2 id="-ä¸ºä»€ä¹ˆè¦å­¦è¿™ä¸ª-12"><a class="header" href="#-ä¸ºä»€ä¹ˆè¦å­¦è¿™ä¸ª-12">ğŸ¯ ä¸ºä»€ä¹ˆè¦å­¦è¿™ä¸ª</a></h2>
<p>Cargo æ˜¯ Rust ç”Ÿæ€ç³»ç»Ÿçš„åŸºçŸ³ã€‚å®ƒä¸ä»…ä»…æ˜¯ä¸€ä¸ªæ„å»ºå·¥å…·ï¼Œè¿˜æ˜¯ä¾èµ–ç®¡ç†å™¨ã€æ–‡æ¡£ç”Ÿæˆå™¨å’Œæµ‹è¯•è¿è¡Œå™¨ã€‚æŒæ¡ Cargo çš„é«˜çº§ç”¨æ³•å¯¹äºæ„å»ºå¤§å‹é¡¹ç›®ã€ä¼˜åŒ–æ„å»ºé€Ÿåº¦å’Œå‘å¸ƒé«˜è´¨é‡çš„åº“è‡³å…³é‡è¦ã€‚</p>
<h2 id="-æ ¸å¿ƒæ¦‚å¿µ-11"><a class="header" href="#-æ ¸å¿ƒæ¦‚å¿µ-11">ğŸ“– æ ¸å¿ƒæ¦‚å¿µ</a></h2>
<h3 id="1-å‘å¸ƒé…ç½®-release-profiles"><a class="header" href="#1-å‘å¸ƒé…ç½®-release-profiles">1. å‘å¸ƒé…ç½® (Release Profiles)</a></h3>
<p>Cargo æä¾›äº†ä¸¤ç§ä¸»è¦çš„é¢„è®¾é…ç½®ï¼š</p>
<ul>
<li><strong>dev</strong>: è¿è¡Œ <code>cargo build</code> æ—¶ä½¿ç”¨ã€‚é»˜è®¤ <code>opt-level = 0</code> (æ— ä¼˜åŒ–)ï¼ŒåŒ…å«è°ƒè¯•ä¿¡æ¯ï¼Œæ„å»ºé€Ÿåº¦å¿«ã€‚</li>
<li><strong>release</strong>: è¿è¡Œ <code>cargo build --release</code> æ—¶ä½¿ç”¨ã€‚é»˜è®¤ <code>opt-level = 3</code> (æœ€é«˜ä¼˜åŒ–)ï¼Œå»é™¤éƒ¨åˆ†è°ƒè¯•ä¿¡æ¯ï¼Œè¿è¡Œé€Ÿåº¦å¿«ä½†æ„å»ºæ…¢ã€‚</li>
</ul>
<p>å¯ä»¥åœ¨ <code>Cargo.toml</code> ä¸­è‡ªå®šä¹‰ï¼š</p>
<pre><code class="language-toml">[profile.dev]
opt-level = 1 # å¼€å‘æ—¶ç¨å¾®ä¼˜åŒ–ä¸€ç‚¹
</code></pre>
<h3 id="2-æ–‡æ¡£æ³¨é‡Š"><a class="header" href="#2-æ–‡æ¡£æ³¨é‡Š">2. æ–‡æ¡£æ³¨é‡Š</a></h3>
<p>Rust æ‹¥æœ‰ä¸€æµçš„æ–‡æ¡£æ”¯æŒã€‚ä½¿ç”¨ <code>///</code> ç¼–å†™æ–‡æ¡£æ³¨é‡Šï¼Œæ”¯æŒ Markdownã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>/// å°†ç»™å®šçš„æ•°å­—åŠ ä¸€ã€‚
///
/// # Examples
///
/// ```
/// let arg = 5;
/// let answer = my_crate::add_one(arg);
///
/// assert_eq!(6, answer);
/// ```
pub fn add_one(x: i32) -&gt; i32 {
    x + 1
}
<span class="boring">}</span></code></pre>
<ul>
<li><code>cargo doc --open</code>: ç”Ÿæˆå¹¶æ‰“å¼€ HTML æ–‡æ¡£ã€‚</li>
<li>ä»£ç å—å†…çš„ä»£ç ä¼šè¢«å½“åšæµ‹è¯•è¿è¡Œ (<code>cargo test</code>)ã€‚</li>
</ul>
<h3 id="3-cargo-workspaces-å·¥ä½œç©ºé—´"><a class="header" href="#3-cargo-workspaces-å·¥ä½œç©ºé—´">3. Cargo Workspaces (å·¥ä½œç©ºé—´)</a></h3>
<p>å½“é¡¹ç›®å˜å¾—å¾ˆå¤§æ—¶ï¼Œå¯ä»¥å°†å…¶æ‹†åˆ†ä¸ºå¤šä¸ª crateã€‚Workspace å…è®¸è¿™äº› crate å…±äº«åŒä¸€ä¸ª <code>Cargo.lock</code> å’Œè¾“å‡ºç›®å½• (<code>target/</code>)ã€‚</p>
<p><strong>ç›®å½•ç»“æ„ç¤ºä¾‹</strong>:</p>
<pre><code>my-project/
â”œâ”€â”€ Cargo.toml (Workspace root)
â”œâ”€â”€ crates/
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”œâ”€â”€ Cargo.toml
â”‚   â”‚   â””â”€â”€ src/lib.rs
â”‚   â””â”€â”€ core/
â”‚       â”œâ”€â”€ Cargo.toml
â”‚       â””â”€â”€ src/lib.rs
</code></pre>
<p><strong>æ ¹ Cargo.toml</strong>:</p>
<pre><code class="language-toml">[workspace]
members = [
    "crates/api",
    "crates/core",
]
</code></pre>
<h2 id="-ä»£ç ç¤ºä¾‹-11"><a class="header" href="#-ä»£ç ç¤ºä¾‹-11">ğŸ’» ä»£ç ç¤ºä¾‹</a></h2>
<h3 id="ç¤ºä¾‹-1-æ¡ä»¶ç¼–è¯‘-conditional-compilation"><a class="header" href="#ç¤ºä¾‹-1-æ¡ä»¶ç¼–è¯‘-conditional-compilation">ç¤ºä¾‹ 1: æ¡ä»¶ç¼–è¯‘ (Conditional Compilation)</a></h3>
<pre class="playground"><code class="language-rust">fn main() {
    if cfg!(target_os = "linux") {
        println!("Running on Linux!");
    } else {
        println!("Not running on Linux.");
    }
}

#[cfg(test)]
mod tests {
    // åªæœ‰åœ¨ cargo test æ—¶æ‰ç¼–è¯‘æ­¤æ¨¡å—
}</code></pre>
<h2 id="-ç»ƒä¹ é¢˜-14"><a class="header" href="#-ç»ƒä¹ é¢˜-14">ğŸ‹ï¸ ç»ƒä¹ é¢˜</a></h2>
<h3 id="ç»ƒä¹ -1-ç¼–å†™æ–‡æ¡£æµ‹è¯•"><a class="header" href="#ç»ƒä¹ -1-ç¼–å†™æ–‡æ¡£æµ‹è¯•">ç»ƒä¹  1: ç¼–å†™æ–‡æ¡£æµ‹è¯•</a></h3>
<p>ä¸ºä¸€ä¸ªç®€å•çš„æ•°å­¦å‡½æ•°ç¼–å†™æ–‡æ¡£æ³¨é‡Šï¼ŒåŒ…å« Examples éƒ¨åˆ†ï¼Œç¡®ä¿ä»£ç ç¤ºä¾‹æ˜¯å¯è¿è¡Œçš„æµ‹è¯•ã€‚
<a href="Day16-30/18.CargoAndCrates/exercises/solutions/exercise1_solution.rs">æŸ¥çœ‹å‚è€ƒç­”æ¡ˆ</a></p>
<h3 id="ç»ƒä¹ -2-æ¡ä»¶ç¼–è¯‘"><a class="header" href="#ç»ƒä¹ -2-æ¡ä»¶ç¼–è¯‘">ç»ƒä¹  2: æ¡ä»¶ç¼–è¯‘</a></h3>
<p>ç¼–å†™ä»£ç ï¼Œæ ¹æ®æ˜¯å¦å¼€å¯äº†æŸä¸ª Feature (å‡è®¾åä¸º â€œadvancedâ€) æ¥ç¼–è¯‘ä¸åŒçš„å‡½æ•°å®ç°ã€‚
<em>(æ³¨æ„ï¼šå•æ–‡ä»¶ç»ƒä¹ éš¾ä»¥æ¨¡æ‹Ÿ Cargo.toml feature é…ç½®ï¼Œè¿™é‡Œä½¿ç”¨ <code>cfg</code> å±æ€§æ¼”ç¤º)</em>
<a href="Day16-30/18.CargoAndCrates/exercises/solutions/exercise2_solution.rs">æŸ¥çœ‹å‚è€ƒç­”æ¡ˆ</a></p>
<h3 id="ç»ƒä¹ -3-workspace-æ¨¡æ‹Ÿ"><a class="header" href="#ç»ƒä¹ -3-workspace-æ¨¡æ‹Ÿ">ç»ƒä¹  3: Workspace æ¨¡æ‹Ÿ</a></h3>
<p>åˆ›å»ºä¸€ä¸ªæ¨¡æ‹Ÿ Workspace ç»“æ„çš„è¯´æ˜ã€‚è¿™ä¸ä»…æ˜¯ä¸€ä¸ªä»£ç ç»ƒä¹ ï¼Œè€Œæ˜¯ä¸€ä¸ªæ¶æ„è®¾è®¡ç»ƒä¹ ã€‚
<a href="Day16-30/18.CargoAndCrates/exercises/solutions/exercise3_solution.rs">æŸ¥çœ‹å‚è€ƒç­”æ¡ˆ</a></p>
<h2 id="-å¸¸è§é—®é¢˜-3"><a class="header" href="#-å¸¸è§é—®é¢˜-3">ğŸ¤” å¸¸è§é—®é¢˜</a></h2>
<h3 id="q1-cargolock-åº”è¯¥æäº¤åˆ°-git-å—"><a class="header" href="#q1-cargolock-åº”è¯¥æäº¤åˆ°-git-å—">Q1: <code>Cargo.lock</code> åº”è¯¥æäº¤åˆ° Git å—ï¼Ÿ</a></h3>
<p>A:</p>
<ul>
<li>å¦‚æœæ˜¯ <strong>äºŒè¿›åˆ¶é¡¹ç›® (bin)</strong>ï¼š<strong>åº”è¯¥</strong>æäº¤ï¼Œç¡®ä¿æ‰€æœ‰äººæ„å»ºå‡ºçš„å¯æ‰§è¡Œæ–‡ä»¶ä¾èµ–ç‰ˆæœ¬ä¸€è‡´ã€‚</li>
<li>å¦‚æœæ˜¯ <strong>åº“é¡¹ç›® (lib)</strong>ï¼šé€šå¸¸<strong>ä¸</strong>æäº¤ï¼Œè®©åº“çš„ä¾èµ–ç‰ˆæœ¬ç”±ä½¿ç”¨è€…çš„ <code>Cargo.lock</code> å†³å®šï¼ˆä½†è¿™æœ‰äº‰è®®ï¼Œç°ä»£è§‚ç‚¹å»ºè®®å°½é‡æäº¤ä»¥ä¿è¯ CI ç¨³å®šæ€§ï¼‰ã€‚</li>
</ul>
<h3 id="q2-ä»€ä¹ˆæ˜¯è¯­ä¹‰åŒ–ç‰ˆæœ¬-semver"><a class="header" href="#q2-ä»€ä¹ˆæ˜¯è¯­ä¹‰åŒ–ç‰ˆæœ¬-semver">Q2: ä»€ä¹ˆæ˜¯è¯­ä¹‰åŒ–ç‰ˆæœ¬ (SemVer)ï¼Ÿ</a></h3>
<p>A: æ ¼å¼ä¸º <code>Major.Minor.Patch</code> (å¦‚ <code>1.2.3</code>)ã€‚</p>
<ul>
<li>Major: ä¸å…¼å®¹çš„ API ä¿®æ”¹ã€‚</li>
<li>Minor: å‘åå…¼å®¹çš„åŠŸèƒ½æ–°å¢ã€‚</li>
<li>Patch: å‘åå…¼å®¹çš„ Bug ä¿®å¤ã€‚
Cargo é»˜è®¤é”å®š Major ç‰ˆæœ¬ä¸å˜ï¼ˆå¦‚ <code>^1.2.3</code> å…è®¸å‡çº§åˆ° <code>1.9.9</code> ä½†ä¸å…è®¸ <code>2.0.0</code>ï¼‰ã€‚</li>
</ul>
<h2 id="-æ‰©å±•é˜…è¯»-11"><a class="header" href="#-æ‰©å±•é˜…è¯»-11">ğŸ”— æ‰©å±•é˜…è¯»</a></h2>
<ul>
<li><a href="https://doc.rust-lang.org/cargo/">The Cargo Book</a></li>
<li><a href="https://rust-lang.github.io/api-guidelines/">Rust API Guidelines</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-19-æ™ºèƒ½æŒ‡é’ˆ---box"><a class="header" href="#day-19-æ™ºèƒ½æŒ‡é’ˆ---box">Day 19: æ™ºèƒ½æŒ‡é’ˆ - Box<t></t></a></h1>
<h2 id="-å­¦ä¹ ç›®æ ‡-16"><a class="header" href="#-å­¦ä¹ ç›®æ ‡-16">ğŸ“ å­¦ä¹ ç›®æ ‡</a></h2>
<ul>
<li>ç†è§£æ ˆ (Stack) ä¸å † (Heap) çš„åŒºåˆ«ã€‚</li>
<li>æŒæ¡ <code>Box&lt;T&gt;</code> çš„ä½¿ç”¨åœºæ™¯ã€‚</li>
<li>èƒ½å¤Ÿä½¿ç”¨ <code>Box&lt;T&gt;</code> å®šä¹‰é€’å½’æ•°æ®ç»“æ„ï¼ˆå¦‚é“¾è¡¨ï¼‰ã€‚</li>
<li>ç†è§£ <code>Deref</code> trait å’Œè§£å¼•ç”¨å¼ºåˆ¶è½¬æ¢ (Deref Coercion)ã€‚</li>
<li>ç†è§£ <code>Drop</code> trait å’Œèµ„æºæ¸…ç†ã€‚</li>
</ul>
<h2 id="-ä¸ºä»€ä¹ˆè¦å­¦è¿™ä¸ª-13"><a class="header" href="#-ä¸ºä»€ä¹ˆè¦å­¦è¿™ä¸ª-13">ğŸ¯ ä¸ºä»€ä¹ˆè¦å­¦è¿™ä¸ª</a></h2>
<p>åœ¨ Rust ä¸­ï¼Œé»˜è®¤æƒ…å†µä¸‹æ‰€æœ‰å€¼éƒ½åˆ†é…åœ¨æ ˆä¸Šã€‚æ ˆéå¸¸å¿«ï¼Œä½†ç©ºé—´æœ‰é™ä¸”è¦æ±‚æ•°æ®å¤§å°å›ºå®šã€‚æ™ºèƒ½æŒ‡é’ˆ <code>Box&lt;T&gt;</code> æ˜¯æœ€åŸºæœ¬çš„å·¥å…·ï¼Œç”¨äºå°†æ•°æ®ç§»åŠ¨åˆ°å †ä¸Šã€‚æŒæ¡å®ƒå¯¹äºå¤„ç†å¤§å‹æ•°æ®ç»“æ„ã€é€’å½’ç±»å‹ï¼ˆå¦‚æ ‘ã€å›¾ï¼‰ä»¥åŠé¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆTrait Objectsï¼‰è‡³å…³é‡è¦ã€‚</p>
<h2 id="-æ ¸å¿ƒæ¦‚å¿µ-12"><a class="header" href="#-æ ¸å¿ƒæ¦‚å¿µ-12">ğŸ“– æ ¸å¿ƒæ¦‚å¿µ</a></h2>
<h3 id="1-æ ˆ-vs-å †"><a class="header" href="#1-æ ˆ-vs-å †">1. æ ˆ vs å †</a></h3>
<ul>
<li><strong>æ ˆ</strong>: åè¿›å…ˆå‡ºï¼Œé€Ÿåº¦æå¿«ã€‚æ‰€æœ‰å­˜å‚¨åœ¨æ ˆä¸Šçš„æ•°æ®å¿…é¡»æœ‰å·²çŸ¥çš„å¤§å°ã€‚</li>
<li><strong>å †</strong>: å¯ä»¥åœ¨è¿è¡Œæ—¶è¯·æ±‚ä»»æ„å¤§å°çš„å†…å­˜ã€‚è®¿é—®é€Ÿåº¦ç¨æ…¢ï¼ˆéœ€è¦æŒ‡é’ˆè·³è½¬ï¼‰ï¼Œåˆ†é…å’Œé‡Šæ”¾éœ€è¦å¼€é”€ã€‚</li>
</ul>
<p><code>Box&lt;T&gt;</code> æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼Œå®ƒæœ¬èº«ï¼ˆæŒ‡é’ˆåœ°å€ï¼‰å­˜å‚¨åœ¨æ ˆä¸Šï¼Œè€Œå®ƒæŒ‡å‘çš„æ•°æ®å­˜å‚¨åœ¨å †ä¸Šã€‚</p>
<h3 id="2-box-çš„ä½¿ç”¨åœºæ™¯"><a class="header" href="#2-box-çš„ä½¿ç”¨åœºæ™¯">2. Box<t> çš„ä½¿ç”¨åœºæ™¯</t></a></h3>
<ol>
<li><strong>ç¼–è¯‘æ—¶å¤§å°æœªçŸ¥</strong>: ä¾‹å¦‚é€’å½’ç±»å‹ã€‚</li>
<li><strong>å¤§æ•°æ®è½¬ç§»</strong>: è½¬ç§»æ‰€æœ‰æƒæ—¶åªæ‹·è´æŒ‡é’ˆï¼Œä¸æ‹·è´æ•°æ®ã€‚</li>
<li><strong>Trait å¯¹è±¡</strong>: å½“ä½ åªå…³å¿ƒç±»å‹å®ç°äº†ä»€ä¹ˆ Traitï¼Œè€Œä¸å…³å¿ƒå…·ä½“ç±»å‹æ—¶ã€‚</li>
</ol>
<h3 id="3-é€’å½’ç±»å‹-recursive-types"><a class="header" href="#3-é€’å½’ç±»å‹-recursive-types">3. é€’å½’ç±»å‹ (Recursive Types)</a></h3>
<p>Rust éœ€è¦åœ¨ç¼–è¯‘æ—¶çŸ¥é“æ¯ä¸ªç±»å‹çš„å¤§å°ã€‚å¦‚æœä¸€ä¸ªç»“æ„ä½“ç›´æ¥åŒ…å«è‡ªèº«ï¼Œå¤§å°å°±æ˜¯æ— é™çš„ï¼ŒRust æ— æ³•ç¼–è¯‘ã€‚
<code>Box&lt;T&gt;</code> çš„å¤§å°æ˜¯å›ºå®šçš„ï¼ˆæŒ‡é’ˆå¤§å°ï¼‰ï¼Œå› æ­¤å¯ä»¥ç”¨æ¥æ‰“ç ´é€’å½’å¾ªç¯ã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// æ— æ³•ç¼–è¯‘ï¼šHas infinite size
// enum List { Cons(i32, List), Nil }

// å¯ä»¥ç¼–è¯‘
enum List {
    Cons(i32, Box&lt;List&gt;),
    Nil,
}
<span class="boring">}</span></code></pre>
<h3 id="4-deref-trait"><a class="header" href="#4-deref-trait">4. Deref Trait</a></h3>
<p>å®ç°äº† <code>Deref</code> trait çš„æ™ºèƒ½æŒ‡é’ˆå¯ä»¥åƒæ™®é€šå¼•ç”¨ä¸€æ ·ä½¿ç”¨ <code>*</code> è¿ç®—ç¬¦ã€‚
Rust æä¾›<strong>è§£å¼•ç”¨å¼ºåˆ¶è½¬æ¢ (Deref Coercion)</strong>ï¼šå¦‚æœ <code>T</code> å®ç°äº† <code>Deref&lt;Target=U&gt;</code>ï¼Œæˆ‘ä»¬å¯ä»¥å°† <code>&amp;T</code> ä¼ ç»™éœ€è¦ <code>&amp;U</code> çš„å‡½æ•°ã€‚
ä¾‹å¦‚ï¼š<code>String</code> å®ç° <code>Deref&lt;Target=str&gt;</code>ï¼Œæ‰€ä»¥ <code>&amp;String</code> å¯ä»¥ä¼ ç»™æ¥å— <code>&amp;str</code> çš„å‡½æ•°ã€‚</p>
<h3 id="5-drop-trait"><a class="header" href="#5-drop-trait">5. Drop Trait</a></h3>
<p><code>Drop</code> trait ç±»ä¼¼äºå…¶ä»–è¯­è¨€çš„ææ„å‡½æ•°ã€‚å½“å€¼ç¦»å¼€ä½œç”¨åŸŸæ—¶ï¼ŒRust ä¼šè‡ªåŠ¨è°ƒç”¨ <code>drop</code> æ–¹æ³•ã€‚æˆ‘ä»¬å¯ä»¥å®ç°å®ƒæ¥é‡Šæ”¾æ–‡ä»¶ã€ç½‘ç»œè¿æ¥ç­‰èµ„æºã€‚</p>
<h2 id="-ä»£ç ç¤ºä¾‹-12"><a class="header" href="#-ä»£ç ç¤ºä¾‹-12">ğŸ’» ä»£ç ç¤ºä¾‹</a></h2>
<h3 id="ç¤ºä¾‹-1-åŸºæœ¬-box-ä½¿ç”¨"><a class="header" href="#ç¤ºä¾‹-1-åŸºæœ¬-box-ä½¿ç”¨">ç¤ºä¾‹ 1: åŸºæœ¬ Box ä½¿ç”¨</a></h3>
<pre class="playground"><code class="language-rust">fn main() {
    let b = Box::new(5);
    println!("b = {}", b);
}</code></pre>
<h3 id="ç¤ºä¾‹-2-é€’å½’æ•°æ®ç»“æ„"><a class="header" href="#ç¤ºä¾‹-2-é€’å½’æ•°æ®ç»“æ„">ç¤ºä¾‹ 2: é€’å½’æ•°æ®ç»“æ„</a></h3>
<pre class="playground"><code class="language-rust">#[derive(Debug)]
enum List {
    Cons(i32, Box&lt;List&gt;),
    Nil,
}

use List::{Cons, Nil};

fn main() {
    let list = Cons(1, Box::new(Cons(2, Box::new(Nil))));
    println!("{:?}", list);
}</code></pre>
<h2 id="-ç»ƒä¹ é¢˜-15"><a class="header" href="#-ç»ƒä¹ é¢˜-15">ğŸ‹ï¸ ç»ƒä¹ é¢˜</a></h2>
<h3 id="ç»ƒä¹ -1-box-åŸºç¡€"><a class="header" href="#ç»ƒä¹ -1-box-åŸºç¡€">ç»ƒä¹  1: Box åŸºç¡€</a></h3>
<p>åˆ›å»ºä¸€ä¸ª <code>Box</code> æ¥å­˜å‚¨ä¸€ä¸ªéå¸¸å¤§çš„æ•°ç»„ï¼ˆä¾‹å¦‚ 1000 ä¸ª i32ï¼‰ï¼Œå¹¶éªŒè¯å®ƒç¡®å®æ˜¯åœ¨å †ä¸Šåˆ†é…çš„ï¼ˆè™½ç„¶éªŒè¯å †åˆ†é…æ¯”è¾ƒå›°éš¾ï¼Œè¿™é‡Œä¸»è¦ç»ƒä¹ è¯­æ³•ï¼‰ã€‚
<a href="Day16-30/19.SmartPointers_Box/exercises/solutions/exercise1_solution.rs">æŸ¥çœ‹å‚è€ƒç­”æ¡ˆ</a></p>
<h3 id="ç»ƒä¹ -2-é“¾è¡¨æ„å»º"><a class="header" href="#ç»ƒä¹ -2-é“¾è¡¨æ„å»º">ç»ƒä¹  2: é“¾è¡¨æ„å»º</a></h3>
<p>ä½¿ç”¨ <code>Box</code> å®šä¹‰ä¸€ä¸ª <code>Cons</code> åˆ—è¡¨ï¼Œå¹¶ç¼–å†™ä¸€ä¸ªå‡½æ•°æ¥æ±‚å’Œã€‚
<a href="Day16-30/19.SmartPointers_Box/exercises/solutions/exercise2_solution.rs">æŸ¥çœ‹å‚è€ƒç­”æ¡ˆ</a></p>
<h3 id="ç»ƒä¹ -3-è‡ªå®šä¹‰æ™ºèƒ½æŒ‡é’ˆ"><a class="header" href="#ç»ƒä¹ -3-è‡ªå®šä¹‰æ™ºèƒ½æŒ‡é’ˆ">ç»ƒä¹  3: è‡ªå®šä¹‰æ™ºèƒ½æŒ‡é’ˆ</a></h3>
<p>å®ç°ä¸€ä¸ª <code>MyBox&lt;T&gt;</code> ç»“æ„ä½“ï¼Œå¹¶å®ç° <code>Deref</code> traitï¼Œä½¿å…¶å¯ä»¥è¢«è§£å¼•ç”¨ã€‚
<a href="Day16-30/19.SmartPointers_Box/exercises/solutions/exercise3_solution.rs">æŸ¥çœ‹å‚è€ƒç­”æ¡ˆ</a></p>
<h2 id="-å¸¸è§é—®é¢˜-4"><a class="header" href="#-å¸¸è§é—®é¢˜-4">ğŸ¤” å¸¸è§é—®é¢˜</a></h2>
<h3 id="q1-boxnew-ä¼šå‘ç”Ÿæ‹·è´å—"><a class="header" href="#q1-boxnew-ä¼šå‘ç”Ÿæ‹·è´å—">Q1: <code>Box::new</code> ä¼šå‘ç”Ÿæ‹·è´å—ï¼Ÿ</a></h3>
<p>A: åœ¨ä¼˜åŒ–æ„å»º (<code>--release</code>) ä¸­ï¼Œç¼–è¯‘å™¨é€šå¸¸ä¼šä¼˜åŒ–æ‰ä¸­é—´çš„æ ˆæ‹·è´ï¼Œç›´æ¥åœ¨å †ä¸Šæ„å»ºå¯¹è±¡ã€‚ä½†åœ¨ Debug æ¨¡å¼ä¸‹ï¼Œå¯èƒ½ä¼šå…ˆåœ¨æ ˆä¸Šåˆ›å»ºå†ç§»åŠ¨åˆ°å †ä¸Šã€‚</p>
<h3 id="q2-æ—¢ç„¶-rust-æœ‰-gc-å—"><a class="header" href="#q2-æ—¢ç„¶-rust-æœ‰-gc-å—">Q2: æ—¢ç„¶ Rust æœ‰ GC å—ï¼Ÿ</a></h3>
<p>A: Rust æ²¡æœ‰åƒåœ¾å›æ”¶å™¨ (GC)ã€‚<code>Box</code> åˆ©ç”¨æ‰€æœ‰æƒç³»ç»Ÿå’Œ <code>Drop</code> trait æ¥ç®¡ç†å†…å­˜ã€‚å½“ <code>Box</code> ç¦»å¼€ä½œç”¨åŸŸæ—¶ï¼Œå®ƒæ‹¥æœ‰çš„å †å†…å­˜ä¼šè¢«ç«‹å³é‡Šæ”¾ã€‚</p>
<h2 id="-æ‰©å±•é˜…è¯»-12"><a class="header" href="#-æ‰©å±•é˜…è¯»-12">ğŸ”— æ‰©å±•é˜…è¯»</a></h2>
<ul>
<li><a href="https://doc.rust-lang.org/book/ch15-01-box.html">Rust Book: Using Box<t> to Point to Data on the Heap</t></a></li>
<li><a href="https://doc.rust-lang.org/book/ch15-00-smart-pointers.html">Rust Book: Smart Pointers</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-20-æ™ºèƒ½æŒ‡é’ˆ---rc-ä¸-refcell"><a class="header" href="#day-20-æ™ºèƒ½æŒ‡é’ˆ---rc-ä¸-refcell">Day 20: æ™ºèƒ½æŒ‡é’ˆ - Rc<t> ä¸ RefCell<t></t></t></a></h1>
<h2 id="-å­¦ä¹ ç›®æ ‡-17"><a class="header" href="#-å­¦ä¹ ç›®æ ‡-17">ğŸ“ å­¦ä¹ ç›®æ ‡</a></h2>
<ul>
<li>ç†è§£ <code>Rc&lt;T&gt;</code> å¦‚ä½•å®ç°å¤šé‡æ‰€æœ‰æƒã€‚</li>
<li>ç†è§£ <code>RefCell&lt;T&gt;</code> çš„å†…éƒ¨å¯å˜æ€§ï¼ˆInterior Mutabilityï¼‰æ¨¡å¼ã€‚</li>
<li>æŒæ¡ç¼–è¯‘æ—¶å€Ÿç”¨æ£€æŸ¥ä¸è¿è¡Œæ—¶å€Ÿç”¨æ£€æŸ¥çš„åŒºåˆ«ã€‚</li>
<li>èƒ½å¤Ÿç»„åˆä½¿ç”¨ <code>Rc&lt;RefCell&lt;T&gt;&gt;</code> æ¥å®ç°å¯å˜çš„å…±äº«æ•°æ®ã€‚</li>
</ul>
<h2 id="-ä¸ºä»€ä¹ˆè¦å­¦è¿™ä¸ª-14"><a class="header" href="#-ä¸ºä»€ä¹ˆè¦å­¦è¿™ä¸ª-14">ğŸ¯ ä¸ºä»€ä¹ˆè¦å­¦è¿™ä¸ª</a></h2>
<p>åœ¨ Rust ä¸­ï¼Œæ‰€æœ‰æƒè§„åˆ™éå¸¸ä¸¥æ ¼ï¼šä¸€ä¸ªå€¼åœ¨åŒä¸€æ—¶é—´åªèƒ½æœ‰ä¸€ä¸ªæ‰€æœ‰è€…ï¼Œæˆ–è€…å¤šä¸ªä¸å¯å˜å€Ÿç”¨ï¼Œæˆ–è€…ä¸€ä¸ªå¯å˜å€Ÿç”¨ã€‚
ä½†åœ¨å®é™…æ•°æ®ç»“æ„ï¼ˆå¦‚åŒå‘é“¾è¡¨ã€å›¾ã€GUI æ§ä»¶æ ‘ï¼‰ä¸­ï¼Œä¸€ä¸ªèŠ‚ç‚¹å¯èƒ½è¢«å¤šä¸ªå…¶ä»–èŠ‚ç‚¹å¼•ç”¨ï¼Œæˆ–è€…æˆ‘ä»¬éœ€è¦åœ¨ä¸å¯å˜å¼•ç”¨çš„ä¸Šä¸‹æ–‡ä¸­ä¿®æ”¹æ•°æ®ï¼ˆä¾‹å¦‚ç¼“å­˜ã€æ¨¡æ‹Ÿå¯¹è±¡ï¼‰ã€‚<code>Rc</code> å’Œ <code>RefCell</code> æä¾›äº†ç»•è¿‡ä¸¥æ ¼é™æ€æ£€æŸ¥çš„å®‰å…¨æœºåˆ¶ã€‚</p>
<h2 id="-æ ¸å¿ƒæ¦‚å¿µ-13"><a class="header" href="#-æ ¸å¿ƒæ¦‚å¿µ-13">ğŸ“– æ ¸å¿ƒæ¦‚å¿µ</a></h2>
<h3 id="1-rc-å¼•ç”¨è®¡æ•°"><a class="header" href="#1-rc-å¼•ç”¨è®¡æ•°">1. Rc<t> (å¼•ç”¨è®¡æ•°)</t></a></h3>
<p><code>Rc</code> ä»£è¡¨ <strong>Reference Counting</strong>ã€‚å®ƒç”¨äºåœ¨å †ä¸Šåˆ†é…æ•°æ®ï¼Œä¾›ç¨‹åºçš„å¤šä¸ªéƒ¨åˆ†è¯»å–ã€‚</p>
<ul>
<li><strong>å¤šé‡æ‰€æœ‰æƒ</strong>ï¼šé€šè¿‡ <code>Rc::clone(&amp;a)</code> åˆ›å»ºæ–°çš„æŒ‡å‘åŒä¸€æ•°æ®çš„å¼•ç”¨ï¼ˆå¢åŠ è®¡æ•°ï¼‰ï¼Œè€Œä¸æ˜¯æ·±æ‹·è´æ•°æ®ã€‚</li>
<li><strong>ä¸å¯å˜æ€§</strong>ï¼š<code>Rc&lt;T&gt;</code> æŒ‡å‘çš„æ•°æ®é»˜è®¤æ˜¯ä¸å¯å˜çš„ã€‚</li>
<li><strong>å•çº¿ç¨‹</strong>ï¼š<code>Rc</code> ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚å¤šçº¿ç¨‹è¯·ä½¿ç”¨ <code>Arc</code>ã€‚</li>
</ul>
<h3 id="2-refcell-å†…éƒ¨å¯å˜æ€§"><a class="header" href="#2-refcell-å†…éƒ¨å¯å˜æ€§">2. RefCell<t> (å†…éƒ¨å¯å˜æ€§)</t></a></h3>
<p><code>RefCell&lt;T&gt;</code> å…è®¸ä½ åœ¨æŒæœ‰ä¸å¯å˜å¼•ç”¨çš„å‰æä¸‹ä¿®æ”¹å†…éƒ¨æ•°æ®ã€‚</p>
<ul>
<li><strong>è¿è¡Œæ—¶æ£€æŸ¥</strong>ï¼šæ™®é€šå¼•ç”¨åœ¨ç¼–è¯‘æ—¶æ£€æŸ¥å€Ÿç”¨è§„åˆ™ã€‚<code>RefCell</code> åœ¨<strong>è¿è¡Œæ—¶</strong>æ£€æŸ¥ã€‚</li>
<li><strong>Borrowing</strong>ï¼š
<ul>
<li><code>borrow()</code>: è¿”å› <code>Ref&lt;T&gt;</code>ï¼ˆç±»ä¼¼ <code>&amp;T</code>ï¼‰ã€‚</li>
<li><code>borrow_mut()</code>: è¿”å› <code>RefMut&lt;T&gt;</code>ï¼ˆç±»ä¼¼ <code>&amp;mut T</code>ï¼‰ã€‚</li>
</ul>
</li>
<li><strong>Panic</strong>ï¼šå¦‚æœåœ¨è¿è¡Œæ—¶è¿åå€Ÿç”¨è§„åˆ™ï¼ˆä¾‹å¦‚åŒæ—¶å­˜åœ¨ä¸¤ä¸ª <code>RefMut</code>ï¼‰ï¼Œç¨‹åºä¼š Panicã€‚</li>
</ul>
<h3 id="3-ç»„åˆæŠ€-rcrefcell"><a class="header" href="#3-ç»„åˆæŠ€-rcrefcell">3. ç»„åˆæŠ€: Rc&lt;RefCell<t>&gt;</t></a></h3>
<p>å¦‚æœä½ éœ€è¦ä¸€ä¸ªæ•°æ®æ—¢æœ‰<strong>å¤šä¸ªæ‰€æœ‰è€…</strong>ï¼Œåˆèƒ½<strong>è¢«ä¿®æ”¹</strong>ï¼Œå°±å¯ä»¥ç»“åˆä½¿ç”¨ï¼š</p>
<ul>
<li><code>Rc</code> è´Ÿè´£è®©æ•°æ®æœ‰å¤šä¸ªæ‰€æœ‰è€…ã€‚</li>
<li><code>RefCell</code> è´Ÿè´£è®©æ‹¥æœ‰è€…å¯ä»¥ä¿®æ”¹æ•°æ®ã€‚</li>
</ul>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use std::rc::Rc;
use std::cell::RefCell;

let value = Rc::new(RefCell::new(5));
let a = Rc::clone(&amp;value);
let b = Rc::clone(&amp;value);

*a.borrow_mut() += 10;
println!("b sees: {}", b.borrow()); // 15
<span class="boring">}</span></code></pre>
<h2 id="-ä»£ç ç¤ºä¾‹-13"><a class="header" href="#-ä»£ç ç¤ºä¾‹-13">ğŸ’» ä»£ç ç¤ºä¾‹</a></h2>
<h3 id="ç¤ºä¾‹-1-rc-å…±äº«åˆ—è¡¨"><a class="header" href="#ç¤ºä¾‹-1-rc-å…±äº«åˆ—è¡¨">ç¤ºä¾‹ 1: Rc å…±äº«åˆ—è¡¨</a></h3>
<pre class="playground"><code class="language-rust">use std::rc::Rc;

enum List {
    Cons(i32, Rc&lt;List&gt;),
    Nil,
}

use List::{Cons, Nil};

fn main() {
    let a = Rc::new(Cons(5, Rc::new(Cons(10, Rc::new(Nil)))));
    let b = Cons(3, Rc::clone(&amp;a));
    let c = Cons(4, Rc::clone(&amp;a)); // b å’Œ c éƒ½å…±äº« a
}</code></pre>
<h3 id="ç¤ºä¾‹-2-refcell-ä¿®æ”¹å€¼"><a class="header" href="#ç¤ºä¾‹-2-refcell-ä¿®æ”¹å€¼">ç¤ºä¾‹ 2: RefCell ä¿®æ”¹å€¼</a></h3>
<pre class="playground"><code class="language-rust">use std::cell::RefCell;

fn main() {
    let x = RefCell::new(42);

    {
        let mut m = x.borrow_mut();
        *m += 1;
    } // m ç¦»å¼€ä½œç”¨åŸŸï¼Œå€Ÿç”¨ç»“æŸ

    println!("x = {:?}", x.borrow());
}</code></pre>
<h2 id="-ç»ƒä¹ é¢˜-16"><a class="header" href="#-ç»ƒä¹ é¢˜-16">ğŸ‹ï¸ ç»ƒä¹ é¢˜</a></h2>
<h3 id="ç»ƒä¹ -1-rc-åŸºç¡€"><a class="header" href="#ç»ƒä¹ -1-rc-åŸºç¡€">ç»ƒä¹  1: Rc åŸºç¡€</a></h3>
<p>åˆ›å»ºä¸¤ä¸ªåˆ—è¡¨ <code>b</code> å’Œ <code>c</code>ï¼Œå®ƒä»¬éƒ½å…±äº«åˆ—è¡¨ <code>a</code> çš„å°¾éƒ¨ã€‚æ‰“å°å¼•ç”¨è®¡æ•°çš„å˜åŒ–ã€‚
<a href="Day16-30/20.SmartPointers_RcRefCell/exercises/solutions/exercise1_solution.rs">æŸ¥çœ‹å‚è€ƒç­”æ¡ˆ</a></p>
<h3 id="ç»ƒä¹ -2-å†…éƒ¨å¯å˜æ€§"><a class="header" href="#ç»ƒä¹ -2-å†…éƒ¨å¯å˜æ€§">ç»ƒä¹  2: å†…éƒ¨å¯å˜æ€§</a></h3>
<p>ç¼–å†™ä¸€ä¸ª Mock Messengerï¼Œå®ƒè®°å½•å‘é€ç»™å®ƒçš„æ¶ˆæ¯ã€‚ä½¿ç”¨ <code>RefCell</code> æ¥åœ¨ä¸å¯å˜æ–¹æ³• <code>send</code> ä¸­ä¿®æ”¹å†…éƒ¨çš„ <code>sent_messages</code> åˆ—è¡¨ã€‚
<a href="Day16-30/20.SmartPointers_RcRefCell/exercises/solutions/exercise2_solution.rs">æŸ¥çœ‹å‚è€ƒç­”æ¡ˆ</a></p>
<h3 id="ç»ƒä¹ -3-å…±äº«å¯å˜æ ‘èŠ‚ç‚¹"><a class="header" href="#ç»ƒä¹ -3-å…±äº«å¯å˜æ ‘èŠ‚ç‚¹">ç»ƒä¹  3: å…±äº«å¯å˜æ ‘èŠ‚ç‚¹</a></h3>
<p>å®šä¹‰ä¸€ä¸ªæ ‘èŠ‚ç‚¹ç»“æ„ä½“ï¼Œæ¯ä¸ªèŠ‚ç‚¹åŒ…å«ä¸€ä¸ªå€¼å’Œå­èŠ‚ç‚¹åˆ—è¡¨ã€‚ä½¿ç”¨ <code>Rc&lt;RefCell&lt;Node&gt;&gt;</code> ä½¿å¾—çˆ¶èŠ‚ç‚¹å’Œå­èŠ‚ç‚¹å¯ä»¥äº’ç›¸å¼•ç”¨ï¼ˆæˆ–è€…ç®€å•çš„å¤šæ‰€æœ‰æƒä¿®æ”¹æµ‹è¯•ï¼‰ï¼Œå¹¶ä¿®æ”¹æŸä¸ªå­èŠ‚ç‚¹çš„å€¼ï¼ŒéªŒè¯çˆ¶èŠ‚ç‚¹ä¹Ÿèƒ½çœ‹åˆ°ä¿®æ”¹ã€‚
<a href="Day16-30/20.SmartPointers_RcRefCell/exercises/solutions/exercise3_solution.rs">æŸ¥çœ‹å‚è€ƒç­”æ¡ˆ</a></p>
<h2 id="-å¸¸è§é—®é¢˜-5"><a class="header" href="#-å¸¸è§é—®é¢˜-5">ğŸ¤” å¸¸è§é—®é¢˜</a></h2>
<h3 id="q1-cellt-å’Œ-refcellt-æœ‰ä»€ä¹ˆåŒºåˆ«"><a class="header" href="#q1-cellt-å’Œ-refcellt-æœ‰ä»€ä¹ˆåŒºåˆ«">Q1: <code>Cell&lt;T&gt;</code> å’Œ <code>RefCell&lt;T&gt;</code> æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</a></h3>
<p>A:</p>
<ul>
<li><code>Cell&lt;T&gt;</code>: é€‚ç”¨äºå®ç°äº† <code>Copy</code> çš„ç±»å‹ï¼ˆå¦‚æ•´æ•°ï¼‰ã€‚å®ƒé€šè¿‡<strong>å¤åˆ¶</strong>å€¼è¿›å‡ºæ¥å·¥ä½œ (<code>get</code>, <code>set</code>)ï¼Œæ²¡æœ‰å€Ÿç”¨æ£€æŸ¥å¼€é”€ï¼Œæ°¸è¿œä¸ä¼š Panicã€‚</li>
<li><code>RefCell&lt;T&gt;</code>: é€‚ç”¨äºä»»ä½•ç±»å‹ã€‚å®ƒé€šè¿‡<strong>å¼•ç”¨</strong>å·¥ä½œ (<code>borrow</code>, <code>borrow_mut</code>)ï¼Œæœ‰è¿è¡Œæ—¶å¼€é”€å’Œ Panic é£é™©ã€‚</li>
</ul>
<h3 id="q2-ä¸ºä»€ä¹ˆä¸æ€»æ˜¯ä½¿ç”¨-rcrefcellt"><a class="header" href="#q2-ä¸ºä»€ä¹ˆä¸æ€»æ˜¯ä½¿ç”¨-rcrefcellt">Q2: ä¸ºä»€ä¹ˆä¸æ€»æ˜¯ä½¿ç”¨ <code>Rc&lt;RefCell&lt;T&gt;&gt;</code>ï¼Ÿ</a></h3>
<p>A:</p>
<ol>
<li><strong>æ€§èƒ½å¼€é”€</strong>ï¼šå¼•ç”¨è®¡æ•°æ›´æ–°å’Œè¿è¡Œæ—¶å€Ÿç”¨æ£€æŸ¥éƒ½æœ‰å¼€é”€ã€‚</li>
<li><strong>å®‰å…¨æ€§</strong>ï¼šè¿è¡Œæ—¶ Panic æ¯”ç¼–è¯‘æ—¶é”™è¯¯æ›´ç³Ÿç³•ã€‚</li>
<li><strong>å¤æ‚æ€§</strong>ï¼šç±»å‹ç­¾åå˜å¾—å¾ˆé•¿ä¸”éš¾ä»¥é˜…è¯»ã€‚
åªåœ¨ç¡®å®éœ€è¦æ—¶ä½¿ç”¨ã€‚</li>
</ol>
<h2 id="-æ‰©å±•é˜…è¯»-13"><a class="header" href="#-æ‰©å±•é˜…è¯»-13">ğŸ”— æ‰©å±•é˜…è¯»</a></h2>
<ul>
<li><a href="https://doc.rust-lang.org/book/ch15-05-interior-mutability.html">Rust Book: RefCell<t> and the Interior Mutability Pattern</t></a></li>
<li><a href="https://doc.rust-lang.org/book/ch15-06-reference-cycles.html">Rust Book: Reference Cycles</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-21-å¼•ç”¨å¾ªç¯ä¸å†…å­˜æ³„æ¼"><a class="header" href="#day-21-å¼•ç”¨å¾ªç¯ä¸å†…å­˜æ³„æ¼">Day 21: å¼•ç”¨å¾ªç¯ä¸å†…å­˜æ³„æ¼</a></h1>
<p>Rust çš„å†…å­˜å®‰å…¨æ€§ä¿è¯ä½¿å…¶å¾ˆéš¾å‘ç”Ÿå†…å­˜æ³„æ¼ï¼Œä½†ä¸æ˜¯ä¸å¯èƒ½ã€‚å¦‚æœä½¿ç”¨ <code>Rc&lt;T&gt;</code> å’Œ <code>RefCell&lt;T&gt;</code> åˆ›å»ºäº†å¼•ç”¨å¾ªç¯ï¼Œitems çš„å¼•ç”¨è®¡æ•°æ°¸è¿œä¸ä¼šé™ä¸º 0ï¼Œå†…å­˜ä¹Ÿå°±æ°¸è¿œä¸ä¼šè¢«é‡Šæ”¾ã€‚</p>
<h2 id="1-åˆ¶é€ å¼•ç”¨å¾ªç¯"><a class="header" href="#1-åˆ¶é€ å¼•ç”¨å¾ªç¯">1. åˆ¶é€ å¼•ç”¨å¾ªç¯</a></h2>
<p>å¦‚æœä¸¤ä¸ª <code>Rc</code> æŒ‡é’ˆç›¸äº’å¼•ç”¨ï¼Œå°±ä¼šå½¢æˆå¾ªç¯ã€‚</p>
<pre class="playground"><code class="language-rust">use std::rc::Rc;
use std::cell::RefCell;
use crate::List::{Cons, Nil};

#[derive(Debug)]
enum List {
    Cons(i32, RefCell&lt;Rc&lt;List&gt;&gt;),
    Nil,
}

impl List {
    fn tail(&amp;self) -&gt; Option&lt;&amp;RefCell&lt;Rc&lt;List&gt;&gt;&gt; {
        match self {
            Cons(_, item) =&gt; Some(item),
            Nil =&gt; None,
        }
    }
}

fn main() {
    let a = Rc::new(Cons(5, RefCell::new(Rc::new(Nil))));

    println!("a initial rc count = {}", Rc::strong_count(&amp;a));
    println!("a next item = {:?}", a.tail());

    let b = Rc::new(Cons(10, RefCell::new(Rc::clone(&amp;a))));

    println!("a rc count after b creation = {}", Rc::strong_count(&amp;a));
    println!("b initial rc count = {}", Rc::strong_count(&amp;b));
    println!("b next item = {:?}", b.tail());

    if let Some(link) = a.tail() {
        *link.borrow_mut() = Rc::clone(&amp;b);
    }

    println!("b rc count after changing a = {}", Rc::strong_count(&amp;b));
    println!("a rc count after changing a = {}", Rc::strong_count(&amp;a));

    // å–æ¶ˆä¸‹é¢çš„æ³¨é‡Šä¼šé€ æˆæ ˆæº¢å‡ºï¼Œå› ä¸º debug æ‰“å°ä¼šå°è¯•é€’å½’æ‰“å°å¾ªç¯å¼•ç”¨
    // println!("a next item = {:?}", a.tail());
}</code></pre>
<h2 id="2-ä½¿ç”¨-weak-é¿å…å¼•ç”¨å¾ªç¯"><a class="header" href="#2-ä½¿ç”¨-weak-é¿å…å¼•ç”¨å¾ªç¯">2. ä½¿ç”¨ Weak<t> é¿å…å¼•ç”¨å¾ªç¯</t></a></h2>
<p><code>Weak&lt;T&gt;</code> æ˜¯å¼±å¼•ç”¨ï¼Œä¸å¢åŠ  <code>strong_count</code>ï¼Œè€Œæ˜¯å¢åŠ  <code>weak_count</code>ã€‚å½“ <code>strong_count</code> ä¸º 0 æ—¶ï¼Œå³ä½¿ <code>weak_count</code> ä¸ä¸º 0ï¼Œå¯¹è±¡ä¹Ÿä¼šè¢«æ¸…ç†ã€‚</p>
<p>ä½ éœ€è¦ä½¿ç”¨ <code>upgrade</code> æ–¹æ³•å°† <code>Weak&lt;T&gt;</code> å‡çº§ä¸º <code>Option&lt;Rc&lt;T&gt;&gt;</code> æ‰èƒ½è®¿é—®æ•°æ®ï¼Œè¿™ç¡®ä¿äº†æ•°æ®å­˜åœ¨ã€‚</p>
<h3 id="ç¤ºä¾‹æ ‘å½¢ç»“æ„çˆ¶èŠ‚ç‚¹æŒ‡é’ˆ"><a class="header" href="#ç¤ºä¾‹æ ‘å½¢ç»“æ„çˆ¶èŠ‚ç‚¹æŒ‡é’ˆ">ç¤ºä¾‹ï¼šæ ‘å½¢ç»“æ„ï¼ˆçˆ¶èŠ‚ç‚¹æŒ‡é’ˆï¼‰</a></h3>
<p>å­èŠ‚ç‚¹æ‹¥æœ‰çˆ¶èŠ‚ç‚¹çš„å¼•ç”¨ï¼Œå¦‚æœç”¨ <code>Rc</code> å°±ä¼šé€ æˆå¾ªç¯ã€‚åº”è¯¥ä½¿ç”¨ <code>Weak</code>ã€‚</p>
<pre class="playground"><code class="language-rust">use std::rc::{Rc, Weak};
use std::cell::RefCell;

#[derive(Debug)]
struct Node {
    value: i32,
    parent: RefCell&lt;Weak&lt;Node&gt;&gt;,
    children: RefCell&lt;Vec&lt;Rc&lt;Node&gt;&gt;&gt;,
}

fn main() {
    let leaf = Rc::new(Node {
        value: 3,
        parent: RefCell::new(Weak::new()),
        children: RefCell::new(vec![]),
    });

    let branch = Rc::new(Node {
        value: 5,
        parent: RefCell::new(Weak::new()),
        children: RefCell::new(vec![Rc::clone(&amp;leaf)]),
    });

    *leaf.parent.borrow_mut() = Rc::downgrade(&amp;branch);

    println!("leaf parent = {:?}", leaf.parent.borrow().upgrade());
}</code></pre>
<h2 id="3-strong-vs-weak"><a class="header" href="#3-strong-vs-weak">3. Strong vs Weak</a></h2>
<ul>
<li><code>Rc::clone</code> å¢åŠ  <code>strong_count</code>ã€‚<code>Rc&lt;T&gt;</code> å®ä¾‹åœ¨ <code>strong_count</code> ä¸º 0 æ—¶è¢«æ¸…ç†ã€‚</li>
<li><code>Rc::downgrade</code> å¢åŠ  <code>weak_count</code>ã€‚<code>Weak&lt;T&gt;</code> ä¸å½±å“æ¸…ç†æ—¶é—´ã€‚</li>
<li><code>Weak&lt;T&gt;</code> ç”¨äºæ‰“ç ´å¾ªç¯å¼•ç”¨ï¼Œé˜²æ­¢å†…å­˜æ³„æ¼ã€‚</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-22-å¹¶å‘ç¼–ç¨‹---çº¿ç¨‹-threads"><a class="header" href="#day-22-å¹¶å‘ç¼–ç¨‹---çº¿ç¨‹-threads">Day 22: å¹¶å‘ç¼–ç¨‹ - çº¿ç¨‹ (Threads)</a></h1>
<p>Rust ä¸­çš„å¹¶å‘ç¼–ç¨‹éå¸¸å®‰å…¨ï¼Œå› ä¸º Rust çš„æ‰€æœ‰æƒå’Œç±»å‹ç³»ç»Ÿä¼šåœ¨ç¼–è¯‘æ—¶æ•è·è®¸å¤šå¹¶å‘é”™è¯¯ï¼ˆå¦‚æ•°æ®ç«äº‰ï¼‰ã€‚</p>
<h2 id="1-åˆ›å»ºçº¿ç¨‹"><a class="header" href="#1-åˆ›å»ºçº¿ç¨‹">1. åˆ›å»ºçº¿ç¨‹</a></h2>
<p>ä½¿ç”¨ <code>std::thread::spawn</code> åˆ›å»ºæ–°çº¿ç¨‹ã€‚</p>
<pre class="playground"><code class="language-rust">use std::thread;
use std::time::Duration;

fn main() {
    thread::spawn(|| {
        for i in 1..10 {
            println!("hi number {} from the spawned thread!", i);
            thread::sleep(Duration::from_millis(1));
        }
    });

    for i in 1..5 {
        println!("hi number {} from the main thread!", i);
        thread::sleep(Duration::from_millis(1));
    }
}</code></pre>
<p>æ³¨æ„ï¼šå½“ä¸»çº¿ç¨‹ç»“æŸæ—¶ï¼Œæ‰€æœ‰æ´¾ç”Ÿçº¿ç¨‹ä¹Ÿä¼šç«‹å³åœæ­¢ï¼Œä¸ç®¡å®ƒä»¬æ˜¯å¦æ‰§è¡Œå®Œæ¯•ã€‚</p>
<h2 id="2-ç­‰å¾…çº¿ç¨‹ç»“æŸ-join"><a class="header" href="#2-ç­‰å¾…çº¿ç¨‹ç»“æŸ-join">2. ç­‰å¾…çº¿ç¨‹ç»“æŸ (join)</a></h2>
<p>ä¸ºäº†ç¡®ä¿æ´¾ç”Ÿçº¿ç¨‹æ‰§è¡Œå®Œæ¯•ï¼Œæˆ‘ä»¬å¯ä»¥ä¿å­˜ <code>spawn</code> è¿”å›çš„ <code>JoinHandle</code>ï¼Œå¹¶è°ƒç”¨ <code>.join()</code>ã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let handle = thread::spawn(|| {
    // ...
});

handle.join().unwrap(); // é˜»å¡ä¸»çº¿ç¨‹ç›´åˆ° handle ä»£è¡¨çš„çº¿ç¨‹ç»“æŸ
<span class="boring">}</span></code></pre>
<h2 id="3-çº¿ç¨‹ä¸-move-é—­åŒ…"><a class="header" href="#3-çº¿ç¨‹ä¸-move-é—­åŒ…">3. çº¿ç¨‹ä¸ move é—­åŒ…</a></h2>
<p>å¦‚æœè¦åœ¨çº¿ç¨‹ä¸­ä½¿ç”¨ä¸»çº¿ç¨‹çš„æ•°æ®ï¼Œé€šå¸¸éœ€è¦å°†æ•°æ®çš„æ‰€æœ‰æƒ<strong>ç§»åŠ¨ (move)</strong> åˆ°çº¿ç¨‹ä¸­ã€‚</p>
<pre class="playground"><code class="language-rust">use std::thread;

fn main() {
    let v = vec![1, 2, 3];

    // å¼ºè¡Œå°† v çš„æ‰€æœ‰æƒç§»å…¥é—­åŒ…
    let handle = thread::spawn(move || {
        println!("Here's a vector: {:?}", v);
    });

    handle.join().unwrap();
    // println!("{:?}", v); // é”™è¯¯ï¼v å·²ç»è¢«ç§»åŠ¨äº†
}</code></pre>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-23-å¹¶å‘ç¼–ç¨‹---æ¶ˆæ¯ä¼ é€’-message-passing"><a class="header" href="#day-23-å¹¶å‘ç¼–ç¨‹---æ¶ˆæ¯ä¼ é€’-message-passing">Day 23: å¹¶å‘ç¼–ç¨‹ - æ¶ˆæ¯ä¼ é€’ (Message Passing)</a></h1>
<p>Go è¯­è¨€æœ‰ä¸€å¥åè¨€ï¼šâ€œä¸è¦é€šè¿‡å…±äº«å†…å­˜æ¥é€šä¿¡ï¼Œè€Œè¦é€šè¿‡é€šä¿¡æ¥å…±äº«å†…å­˜ã€‚â€ Rust ä¹Ÿæ”¯æŒè¿™ç§æ–¹å¼ï¼Œä¸»è¦é€šè¿‡ <strong>Channel (é€šé“)</strong> æ¥å®ç°ã€‚</p>
<h2 id="1-mpsc-é€šé“"><a class="header" href="#1-mpsc-é€šé“">1. mpsc é€šé“</a></h2>
<p>Rust æ ‡å‡†åº“æä¾›äº† <code>mpsc</code> (Multiple Producer, Single Consumer)ï¼Œå³<strong>å¤šç”Ÿäº§è€…ï¼Œå•æ¶ˆè´¹è€…</strong>é€šé“ã€‚</p>
<pre class="playground"><code class="language-rust">use std::sync::mpsc;
use std::thread;

fn main() {
    // tx: å‘é€ç«¯ (transmitter)
    // rx: æ¥æ”¶ç«¯ (receiver)
    let (tx, rx) = mpsc::channel();

    thread::spawn(move || {
        let val = String::from("hi");
        tx.send(val).unwrap();
        // send ä¼šè½¬ç§»æ‰€æœ‰æƒï¼Œval åœ¨è¿™é‡Œä¹‹åä¸èƒ½å†è¢«ä½¿ç”¨
    });

    // recv() ä¼šé˜»å¡ç›´åˆ°æ”¶åˆ°ä¸€ä¸ªå€¼
    // try_recv() ä¸ä¼šé˜»å¡
    let received = rx.recv().unwrap();
    println!("Got: {}", received);
}</code></pre>
<h2 id="2-å‘é€å¤šä¸ªå€¼ä¸éå†æ¥æ”¶"><a class="header" href="#2-å‘é€å¤šä¸ªå€¼ä¸éå†æ¥æ”¶">2. å‘é€å¤šä¸ªå€¼ä¸éå†æ¥æ”¶</a></h2>
<p>æ¥æ”¶ç«¯ <code>rx</code> å¯ä»¥è¢«å½“ä½œè¿­ä»£å™¨ä½¿ç”¨ã€‚å½“é€šé“å…³é—­ä¸”æ²¡æœ‰å‰©ä½™å€¼æ—¶ï¼Œè¿­ä»£ç»“æŸã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>thread::spawn(move || {
    let vals = vec![
        String::from("hi"),
        String::from("from"),
        String::from("thread"),
    ];

    for val in vals {
        tx.send(val).unwrap();
        thread::sleep(Duration::from_secs(1));
    }
}); // é—­åŒ…ç»“æŸï¼Œtx ç¦»å¼€ä½œç”¨åŸŸï¼Œé€šé“è¢«å…³é—­

for received in rx {
    println!("Got: {}", received);
}
<span class="boring">}</span></code></pre>
<h2 id="3-å¤šç”Ÿäº§è€…"><a class="header" href="#3-å¤šç”Ÿäº§è€…">3. å¤šç”Ÿäº§è€…</a></h2>
<p>å¯ä»¥é€šè¿‡ <code>tx.clone()</code> åˆ›å»ºå¤šä¸ªå‘é€ç«¯ï¼Œå®ƒä»¬éƒ½å‘é€åˆ°åŒä¸€ä¸ªæ¥æ”¶ç«¯ã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let (tx, rx) = mpsc::channel();
let tx1 = tx.clone();
thread::spawn(move || { tx1.send(...).unwrap(); });
thread::spawn(move || { tx.send(...).unwrap(); });
<span class="boring">}</span></code></pre>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-24-å¹¶å‘ç¼–ç¨‹---å…±äº«çŠ¶æ€-shared-state"><a class="header" href="#day-24-å¹¶å‘ç¼–ç¨‹---å…±äº«çŠ¶æ€-shared-state">Day 24: å¹¶å‘ç¼–ç¨‹ - å…±äº«çŠ¶æ€ (Shared State)</a></h1>
<p>å¦ä¸€ç§å¹¶å‘æ¨¡å‹æ˜¯å…±äº«å†…å­˜ã€‚åœ¨ Rust ä¸­ï¼Œè¿™é€šå¸¸æ„å‘³ç€å¤šçº¿ç¨‹åŒæ—¶è®¿é—®å’Œä¿®æ”¹åŒä¸€å—æ•°æ®ã€‚</p>
<h2 id="1-mutex-äº’æ–¥å™¨"><a class="header" href="#1-mutex-äº’æ–¥å™¨">1. Mutex<t> (äº’æ–¥å™¨)</t></a></h2>
<p><code>Mutex</code> (Mutual Exclusion) å…è®¸ä¸€æ¬¡åªå…è®¸ä¸€ä¸ªçº¿ç¨‹è®¿é—®æ•°æ®ã€‚è¦è®¿é—®æ•°æ®ï¼Œçº¿ç¨‹å¿…é¡»å…ˆè·å–é” (<code>lock</code>)ã€‚</p>
<ul>
<li><code>Mutex&lt;T&gt;</code> æä¾›<strong>å†…éƒ¨å¯å˜æ€§</strong>ï¼ˆç±»ä¼¼äº <code>RefCell&lt;T&gt;</code>ï¼‰ã€‚</li>
<li><code>lock()</code> è¿”å›ä¸€ä¸ª <code>MutexGuard</code> æ™ºèƒ½æŒ‡é’ˆï¼Œå½“å®ƒç¦»å¼€ä½œç”¨åŸŸæ—¶ï¼Œé”ä¼šè‡ªåŠ¨é‡Šæ”¾ã€‚</li>
</ul>
<pre class="playground"><code class="language-rust">use std::sync::Mutex;

fn main() {
    let m = Mutex::new(5);

    {
        let mut num = m.lock().unwrap();
        *num = 6;
    } // é”åœ¨è¿™é‡Œè‡ªåŠ¨é‡Šæ”¾

    println!("m = {:?}", m);
}</code></pre>
<h2 id="2-arc-åŸå­å¼•ç”¨è®¡æ•°"><a class="header" href="#2-arc-åŸå­å¼•ç”¨è®¡æ•°">2. Arc<t> (åŸå­å¼•ç”¨è®¡æ•°)</t></a></h2>
<p>è¦åœ¨å¤šä¸ªçº¿ç¨‹é—´å…±äº« <code>Mutex&lt;T&gt;</code> çš„æ‰€æœ‰æƒï¼Œæˆ‘ä»¬éœ€è¦ç±»ä¼¼ <code>Rc&lt;T&gt;</code> çš„ä¸œè¥¿ã€‚ä½†æ˜¯ <code>Rc&lt;T&gt;</code> å¹¶ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚</p>
<p>Rust æä¾›äº† <code>Arc&lt;T&gt;</code> (Atomic Reference Counting)ï¼Œå®ƒæ˜¯çº¿ç¨‹å®‰å…¨çš„å¼•ç”¨è®¡æ•°æ™ºèƒ½æŒ‡é’ˆã€‚</p>
<pre class="playground"><code class="language-rust">use std::sync::{Arc, Mutex};
use std::thread;

fn main() {
    let counter = Arc::new(Mutex::new(0));
    let mut handles = vec![];

    for _ in 0..10 {
        let counter = Arc::clone(&amp;counter);
        let handle = thread::spawn(move || {
            let mut num = counter.lock().unwrap();
            *num += 1;
        });
        handles.push(handle);
    }

    for handle in handles {
        handle.join().unwrap();
    }

    println!("Result: {}", *counter.lock().unwrap());
}</code></pre>
<p>æ³¨æ„ï¼š<code>Arc</code> ä¼šå¸¦æ¥ä¸€äº›æ€§èƒ½æŸè€—ï¼Œæ‰€ä»¥å¦‚æœä¸éœ€è¦å¤šçº¿ç¨‹å…±äº«ï¼Œä¼˜å…ˆä½¿ç”¨ <code>Rc</code>ã€‚</p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-25-å¹¶å‘ç¼–ç¨‹---send-ä¸-sync-trait"><a class="header" href="#day-25-å¹¶å‘ç¼–ç¨‹---send-ä¸-sync-trait">Day 25: å¹¶å‘ç¼–ç¨‹ - Send ä¸ Sync Trait</a></h1>
<p><code>Send</code> å’Œ <code>Sync</code> æ˜¯ Rust å¹¶å‘å®‰å…¨çš„åŸºçŸ³ã€‚å®ƒä»¬æ˜¯ <strong>Marker Traits</strong>ï¼ˆæ ‡è®° Traitï¼‰ï¼Œæ²¡æœ‰ä»»ä½•æ–¹æ³•ï¼Œåªæ˜¯ç”¨æ¥æ ‡è®°ç±»å‹å…·æœ‰æŸäº›å¹¶å‘å±æ€§ã€‚</p>
<h2 id="1-send-trait"><a class="header" href="#1-send-trait">1. Send Trait</a></h2>
<p><code>Send</code> æ ‡è®°è¡¨æ˜ç±»å‹çš„æ‰€æœ‰æƒå¯ä»¥åœ¨çº¿ç¨‹é—´è½¬ç§»ã€‚</p>
<ul>
<li>å‡ ä¹æ‰€æœ‰çš„ Rust ç±»å‹éƒ½æ˜¯ <code>Send</code> çš„ã€‚</li>
<li>ä¸»è¦ä¾‹å¤–ï¼š<code>Rc&lt;T&gt;</code>ã€‚å› ä¸º <code>Rc</code> çš„å¼•ç”¨è®¡æ•°ä¸æ˜¯åŸå­çš„ï¼Œåœ¨å¤šçº¿ç¨‹é—´è½¬ç§»ä¼šå¯¼è‡´è®¡æ•°é”™è¯¯ã€‚</li>
<li><code>Raw Pointers</code> (è£¸æŒ‡é’ˆ) ä¹Ÿä¸æ˜¯ <code>Send</code> çš„ã€‚</li>
</ul>
<p>å¦‚æœä¸€ä¸ªç±»å‹å®Œå…¨ç”± <code>Send</code> çš„ç±»å‹ç»„æˆï¼Œé‚£ä¹ˆå®ƒè‡ªåŠ¨å°±æ˜¯ <code>Send</code> çš„ã€‚</p>
<h2 id="2-sync-trait"><a class="header" href="#2-sync-trait">2. Sync Trait</a></h2>
<p><code>Sync</code> æ ‡è®°è¡¨æ˜ç±»å‹å¯ä»¥è¢«å¤šä¸ªçº¿ç¨‹å®‰å…¨åœ°å…±äº«å¼•ç”¨ï¼ˆå³ <code>&amp;T</code> æ˜¯ <code>Send</code> çš„ï¼‰ã€‚</p>
<ul>
<li>åŸºæœ¬ç±»å‹æ˜¯ <code>Sync</code> çš„ã€‚</li>
<li><code>Mutex&lt;T&gt;</code> æ˜¯ <code>Sync</code> çš„ã€‚</li>
<li><code>RefCell&lt;T&gt;</code> ä¸æ˜¯ <code>Sync</code> çš„ï¼Œå› ä¸ºå®ƒçš„è¿è¡Œæ—¶å€Ÿç”¨æ£€æŸ¥ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚</li>
<li><code>Rc&lt;T&gt;</code> ä¸æ˜¯ <code>Sync</code> çš„ã€‚</li>
</ul>
<h2 id="3-æ‰‹åŠ¨å®ç°"><a class="header" href="#3-æ‰‹åŠ¨å®ç°">3. æ‰‹åŠ¨å®ç°</a></h2>
<p>é€šå¸¸ä¸éœ€è¦æ‰‹åŠ¨å®ç° <code>Send</code> å’Œ <code>Sync</code>ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨æ¨å¯¼ã€‚æ‰‹åŠ¨å®ç°æ˜¯ä¸å®‰å…¨çš„ï¼ˆ<code>unsafe</code>ï¼‰ï¼Œé€šå¸¸åªåœ¨ç¼–å†™åº•å±‚å¹¶å‘åŸè¯­æ—¶éœ€è¦ã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// ä»…ä½œæ¼”ç¤ºï¼Œé€šå¸¸ç”±ç¼–è¯‘å™¨è‡ªåŠ¨æ¨å¯¼
unsafe impl Send for MyType {}
unsafe impl Sync for MyType {}
<span class="boring">}</span></code></pre>
<h2 id="4-ç¼–è¯‘å™¨æ£€æŸ¥"><a class="header" href="#4-ç¼–è¯‘å™¨æ£€æŸ¥">4. ç¼–è¯‘å™¨æ£€æŸ¥</a></h2>
<p>Rust ç¼–è¯‘å™¨ä¼šåˆ©ç”¨è¿™äº› Trait æ¥æ£€æŸ¥å¹¶å‘ä»£ç çš„å®‰å…¨æ€§ã€‚ä¾‹å¦‚ <code>thread::spawn</code> çš„ç­¾åè¦æ±‚é—­åŒ…æ•è·çš„å˜é‡å¿…é¡»æ˜¯ <code>Send</code> çš„ã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub fn spawn&lt;F, T&gt;(f: F) -&gt; JoinHandle&lt;T&gt;
where
    F: FnOnce() -&gt; T,
    F: Send + 'static,
    T: Send + 'static,
<span class="boring">}</span></code></pre>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-26-é¢å‘å¯¹è±¡ç‰¹æ€§---trait-å¯¹è±¡"><a class="header" href="#day-26-é¢å‘å¯¹è±¡ç‰¹æ€§---trait-å¯¹è±¡">Day 26: é¢å‘å¯¹è±¡ç‰¹æ€§ - Trait å¯¹è±¡</a></h1>
<p>Rust ä¸æ˜¯ä¼ ç»Ÿçš„é¢å‘å¯¹è±¡è¯­è¨€ï¼ˆæ²¡æœ‰ç»§æ‰¿ï¼‰ï¼Œä½†å¯ä»¥ä½¿ç”¨ <strong>Trait å¯¹è±¡</strong> æ¥å®ç°å¤šæ€æ€§ã€‚</p>
<h2 id="1-trait-å¯¹è±¡-trait-objects"><a class="header" href="#1-trait-å¯¹è±¡-trait-objects">1. Trait å¯¹è±¡ (Trait Objects)</a></h2>
<p>å¦‚æœæˆ‘ä»¬éœ€è¦ä¸€ä¸ªé›†åˆï¼Œå…¶ä¸­åŒ…å«ä¸åŒç±»å‹ä½†éƒ½å®ç°äº†æŸä¸ª Trait çš„å¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Trait å¯¹è±¡ã€‚</p>
<p>è¯­æ³•ï¼š<code>Box&lt;dyn Trait&gt;</code> æˆ– <code>&amp;dyn Trait</code>ã€‚</p>
<p><code>dyn</code> å…³é”®å­—å¼ºè°ƒè¿™æ˜¯ä¸€ä¸ªåŠ¨æ€è°ƒåº¦çš„ç±»å‹ã€‚</p>
<h2 id="2-åŠ¨æ€è°ƒåº¦-dynamic-dispatch"><a class="header" href="#2-åŠ¨æ€è°ƒåº¦-dynamic-dispatch">2. åŠ¨æ€è°ƒåº¦ (Dynamic Dispatch)</a></h2>
<p>å½“æˆ‘ä»¬åœ¨æ³›å‹ä¸­ä½¿ç”¨ Trait Bound æ—¶ï¼ˆå¦‚ <code>fn foo&lt;T: Trait&gt;(t: T)</code>ï¼‰ï¼Œç¼–è¯‘å™¨ä¼šè¿›è¡Œ<strong>å•æ€åŒ– (Monomorphization)</strong>ï¼Œä¹Ÿå°±æ˜¯<strong>é™æ€è°ƒåº¦</strong>ã€‚ç¼–è¯‘å™¨ä¸ºæ¯ä¸ªå…·ä½“ç±»å‹ç”Ÿæˆä»£ç ï¼Œæ€§èƒ½å¥½ï¼Œä½†çµæ´»æ€§å—é™ï¼ˆé›†åˆä¸­åªèƒ½æ˜¯ä¸€ç§ç±»å‹ï¼‰ã€‚</p>
<p>ä½¿ç”¨ Trait å¯¹è±¡æ—¶ï¼ŒRust åœ¨è¿è¡Œæ—¶æŸ¥æ‰¾ Trait æ–¹æ³•çš„å®ç°ï¼ˆé€šè¿‡ vtableï¼‰ï¼Œè¿™å°±æ˜¯<strong>åŠ¨æ€è°ƒåº¦</strong>ã€‚è¿™ä¼šå¸¦æ¥å¾®å°çš„è¿è¡Œæ—¶å¼€é”€ï¼Œä½†å…è®¸æ›´å¤§çš„çµæ´»æ€§ã€‚</p>
<h2 id="3-å¯¹è±¡å®‰å…¨-object-safety"><a class="header" href="#3-å¯¹è±¡å®‰å…¨-object-safety">3. å¯¹è±¡å®‰å…¨ (Object Safety)</a></h2>
<p>åªæœ‰<strong>å¯¹è±¡å®‰å…¨</strong>çš„ Trait æ‰èƒ½ç»„æˆ Trait å¯¹è±¡ã€‚å¦‚æœä¸€ä¸ª Trait çš„æ‰€æœ‰æ–¹æ³•éƒ½æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼Œåˆ™å®ƒæ˜¯å¯¹è±¡å®‰å…¨çš„ï¼š</p>
<ol>
<li>è¿”å›å€¼ç±»å‹ä¸æ˜¯ <code>Self</code>ã€‚</li>
<li>æ–¹æ³•æ²¡æœ‰ä»»ä½•æ³›å‹ç±»å‹å‚æ•°ã€‚</li>
</ol>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>trait Draw {
    fn draw(&amp;self);
}

struct Screen {
    // è¿™é‡Œå¯ä»¥å­˜æ”¾ä»»ä½•å®ç°äº† Draw çš„ç±»å‹
    components: Vec&lt;Box&lt;dyn Draw&gt;&gt;,
}

impl Screen {
    fn run(&amp;self) {
        for component in self.components.iter() {
            component.draw();
        }
    }
}
<span class="boring">}</span></code></pre>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-27-æ¨¡å¼ä¸åŒ¹é…-patterns-and-matching"><a class="header" href="#day-27-æ¨¡å¼ä¸åŒ¹é…-patterns-and-matching">Day 27: æ¨¡å¼ä¸åŒ¹é… (Patterns and Matching)</a></h1>
<p>Rust çš„æ¨¡å¼åŒ¹é…åŠŸèƒ½éå¸¸å¼ºå¤§ï¼Œä¸ä»…é™äº <code>match</code> è¡¨è¾¾å¼ã€‚</p>
<h2 id="1-æ¨¡å¼çš„ä½¿ç”¨åœºæ™¯"><a class="header" href="#1-æ¨¡å¼çš„ä½¿ç”¨åœºæ™¯">1. æ¨¡å¼çš„ä½¿ç”¨åœºæ™¯</a></h2>
<ul>
<li><strong>match åˆ†æ”¯</strong>: æ¯ä¸ªåˆ†æ”¯éƒ½æ˜¯ä¸€ä¸ªæ¨¡å¼ã€‚</li>
<li><strong>if let</strong>: åªå¤„ç†ä¸€ç§åŒ¹é…æƒ…å†µã€‚</li>
<li><strong>while let</strong>: åªè¦æ¨¡å¼åŒ¹é…å°±ä¸€ç›´å¾ªç¯ã€‚</li>
<li><strong>for å¾ªç¯</strong>: <code>for (index, value) in v.iter().enumerate()</code> ä¸­çš„ <code>(index, value)</code> ä¹Ÿæ˜¯æ¨¡å¼ã€‚</li>
<li><strong>let è¯­å¥</strong>: <code>let (x, y) = (1, 2);</code> ä¹Ÿæ˜¯è§£æ„æ¨¡å¼ã€‚</li>
<li><strong>å‡½æ•°å‚æ•°</strong>: <code>fn print_coordinates(&amp;(x, y): &amp;(i32, i32))</code>ã€‚</li>
</ul>
<h2 id="2-refutability-å¯åé©³æ€§"><a class="header" href="#2-refutability-å¯åé©³æ€§">2. Refutability (å¯åé©³æ€§)</a></h2>
<ul>
<li><strong>Irrefutable (ä¸å¯åé©³)</strong>: ä»»ä½•å¯èƒ½çš„å€¼éƒ½èƒ½åŒ¹é…ã€‚ä¾‹å¦‚ <code>let x = 5;</code> ä¸­çš„ <code>x</code>ã€‚</li>
<li><strong>Refutable (å¯åé©³)</strong>: æŸäº›å€¼å¯èƒ½ä¸åŒ¹é…ã€‚ä¾‹å¦‚ <code>if let Some(x) = a_value</code> ä¸­çš„ <code>Some(x)</code>ï¼ˆå¦‚æœå€¼æ˜¯ <code>None</code> å°±ä¸åŒ¹é…ï¼‰ã€‚</li>
</ul>
<p><code>let</code> è¯­å¥ã€å‡½æ•°å‚æ•°ã€<code>for</code> å¾ªç¯å¿…é¡»æ¥å—ä¸å¯åé©³çš„æ¨¡å¼ã€‚</p>
<h2 id="3-æ¨¡å¼è¯­æ³•"><a class="header" href="#3-æ¨¡å¼è¯­æ³•">3. æ¨¡å¼è¯­æ³•</a></h2>
<h3 id="è§£æ„"><a class="header" href="#è§£æ„">è§£æ„</a></h3>
<p>å¯ä»¥è§£æ„ç»“æ„ä½“ã€æšä¸¾ã€å…ƒç»„ã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>struct Point { x: i32, y: i32 }
let p = Point { x: 0, y: 7 };

match p {
    Point { x, y: 0 } =&gt; println!("On the x axis at {}", x),
    Point { x: 0, y } =&gt; println!("On the y axis at {}", y),
    Point { x, y } =&gt; println!("On neither axis: ({}, {})", x, y),
}
<span class="boring">}</span></code></pre>
<h3 id="å¿½ç•¥å€¼"><a class="header" href="#å¿½ç•¥å€¼">å¿½ç•¥å€¼</a></h3>
<ul>
<li><code>_</code>: å¿½ç•¥å•ä¸ªå€¼ã€‚</li>
<li><code>..</code>: å¿½ç•¥å‰©ä½™å€¼ã€‚</li>
</ul>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let numbers = (2, 4, 8, 16, 32);

match numbers {
    (first, .., last) =&gt; {
        println!("Some numbers: {}, {}", first, last);
    }
}
<span class="boring">}</span></code></pre>
<h3 id="åŒ¹é…å®ˆå«-match-guards"><a class="header" href="#åŒ¹é…å®ˆå«-match-guards">åŒ¹é…å®ˆå« (Match Guards)</a></h3>
<p><code>match</code> åˆ†æ”¯æ¨¡å¼åå¯ä»¥è·Ÿä¸€ä¸ª <code>if</code> æ¡ä»¶ã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let num = Some(4);

match num {
    Some(x) if x &lt; 5 =&gt; println!("less than five: {}", x),
    Some(x) =&gt; println!("{}", x),
    None =&gt; (),
}
<span class="boring">}</span></code></pre>
<h3 id="-ç»‘å®š"><a class="header" href="#-ç»‘å®š">@ ç»‘å®š</a></h3>
<p>å…è®¸æˆ‘ä»¬åœ¨åˆ›å»ºä¸€ä¸ªå­˜æ”¾å€¼çš„å˜é‡çš„åŒæ—¶æµ‹è¯•å…¶å€¼æ˜¯å¦åŒ¹é…æ¨¡å¼ã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>match msg {
    Message::Hello { id: id_variable @ 3..=7 } =&gt; {
        println!("Found an id in range: {}", id_variable)
    },
    // ...
}
<span class="boring">}</span></code></pre>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-28-é«˜çº§-trait-advanced-traits"><a class="header" href="#day-28-é«˜çº§-trait-advanced-traits">Day 28: é«˜çº§ Trait (Advanced Traits)</a></h1>
<h2 id="1-å…³è”ç±»å‹-associated-types"><a class="header" href="#1-å…³è”ç±»å‹-associated-types">1. å…³è”ç±»å‹ (Associated Types)</a></h2>
<p>å…³è”ç±»å‹æ˜¯ Trait ä¸­çš„ç±»å‹å ä½ç¬¦ã€‚å®ç° Trait æ—¶éœ€è¦æŒ‡å®šå…·ä½“çš„ç±»å‹ã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>trait Iterator {
    type Item;
    fn next(&amp;mut self) -&gt; Option&lt;Self::Item&gt;;
}
<span class="boring">}</span></code></pre>
<p>ä¸æ³›å‹ <code>trait Iterator&lt;T&gt;</code> çš„åŒºåˆ«åœ¨äºï¼šå¯¹äºä¸€ä¸ªå…·ä½“çš„ç±»å‹ï¼Œåªèƒ½æœ‰ä¸€ä¸ªå…³è”ç±»å‹çš„å®ç°ã€‚è€Œæ³›å‹å¯ä»¥å¯¹åŒä¸€ç±»å‹å®ç°å¤šæ¬¡ï¼ˆé’ˆå¯¹ä¸åŒçš„ Tï¼‰ã€‚</p>
<h2 id="2-é»˜è®¤æ³›å‹ç±»å‹å‚æ•°ä¸è¿ç®—ç¬¦é‡è½½"><a class="header" href="#2-é»˜è®¤æ³›å‹ç±»å‹å‚æ•°ä¸è¿ç®—ç¬¦é‡è½½">2. é»˜è®¤æ³›å‹ç±»å‹å‚æ•°ä¸è¿ç®—ç¬¦é‡è½½</a></h2>
<p>Rust å…è®¸è¿ç®—ç¬¦é‡è½½ï¼Œè¿™æ˜¯é€šè¿‡å®ç° <code>std::ops</code> ä¸‹çš„ Trait æ¥å®Œæˆçš„ã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use std::ops::Add;

struct Point { x: i32, y: i32 }

impl Add for Point {
    type Output = Point;
    fn add(self, other: Point) -&gt; Point {
        Point { x: self.x + other.x, y: self.y + other.y }
    }
}
<span class="boring">}</span></code></pre>
<p><code>Add</code> Trait çš„å®šä¹‰ä½¿ç”¨äº†é»˜è®¤æ³›å‹å‚æ•°ï¼š<code>trait Add&lt;Rhs=Self&gt; { ... }</code>ã€‚å¦‚æœä¸æŒ‡å®š <code>Rhs</code>ï¼Œé»˜è®¤å°±æ˜¯ <code>Self</code>ã€‚</p>
<h2 id="3-å®Œå…¨é™å®šè¯­æ³•-fully-qualified-syntax"><a class="header" href="#3-å®Œå…¨é™å®šè¯­æ³•-fully-qualified-syntax">3. å®Œå…¨é™å®šè¯­æ³• (Fully Qualified Syntax)</a></h2>
<p>å½“åŒä¸€ç±»å‹å®ç°äº†ä¸¤ä¸ªå…·æœ‰ç›¸åŒæ–¹æ³•åçš„ Trait æ—¶ï¼Œéœ€è¦æ¶ˆé™¤æ­§ä¹‰ã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>trait Pilot { fn fly(&amp;self); }
trait Wizard { fn fly(&amp;self); }

struct Human;
impl Pilot for Human { ... }
impl Wizard for Human { ... }

let person = Human;
Pilot::fly(&amp;person);
Wizard::fly(&amp;person);
<span class="boring">}</span></code></pre>
<p>å¦‚æœæ˜¯å…³è”å‡½æ•°ï¼ˆæ²¡æœ‰ <code>self</code>ï¼‰ï¼š<code>&lt;Type as Trait&gt;::function(args)</code>ã€‚</p>
<h2 id="4-supertraits-çˆ¶-trait"><a class="header" href="#4-supertraits-çˆ¶-trait">4. Supertraits (çˆ¶ Trait)</a></h2>
<p>æœ‰æ—¶ä¸€ä¸ª Trait ä¾èµ–äºå¦ä¸€ä¸ª Traitã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>trait OutlinePrint: fmt::Display { ... }
<span class="boring">}</span></code></pre>
<p>å®ç° <code>OutlinePrint</code> çš„ç±»å‹å¿…é¡»ä¹Ÿå®ç° <code>Display</code>ã€‚</p>
<h2 id="5-newtype-æ¨¡å¼"><a class="header" href="#5-newtype-æ¨¡å¼">5. Newtype æ¨¡å¼</a></h2>
<p>å­¤å„¿è§„åˆ™ï¼ˆOrphan Ruleï¼‰ï¼šåªæœ‰å½“ Trait æˆ–ç±»å‹å®šä¹‰åœ¨æœ¬åœ° crate æ—¶ï¼Œæ‰èƒ½ä¸ºç±»å‹å®ç° Traitã€‚
ç»•è¿‡æ–¹æ³•ï¼šä½¿ç”¨ <strong>Newtype æ¨¡å¼</strong>ï¼ˆå…ƒç»„ç»“æ„ä½“åŒ…è£…ï¼‰ã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>struct Wrapper(Vec&lt;String&gt;);

impl fmt::Display for Wrapper { ... }
<span class="boring">}</span></code></pre>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-29-é«˜çº§ç±»å‹-advanced-types"><a class="header" href="#day-29-é«˜çº§ç±»å‹-advanced-types">Day 29: é«˜çº§ç±»å‹ (Advanced Types)</a></h1>
<h2 id="1-newtype-æ¨¡å¼"><a class="header" href="#1-newtype-æ¨¡å¼">1. Newtype æ¨¡å¼</a></h2>
<p>ä½¿ç”¨å…ƒç»„ç»“æ„ä½“åˆ›å»ºä¸€ä¸ªæ–°ç±»å‹ã€‚å³ä½¿å†…éƒ¨ç±»å‹ä¸€æ ·ï¼Œæ–°ç±»å‹ä¹Ÿè¢«è§†ä¸ºå®Œå…¨ä¸åŒçš„ç±»å‹ã€‚è¿™æä¾›äº†é™æ€ç±»å‹æ£€æŸ¥çš„å®‰å…¨æ€§ã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>struct Millimeters(u32);
struct Meters(u32);
<span class="boring">}</span></code></pre>
<h2 id="2-ç±»å‹åˆ«å-type-aliases"><a class="header" href="#2-ç±»å‹åˆ«å-type-aliases">2. ç±»å‹åˆ«å (Type Aliases)</a></h2>
<p>ä½¿ç”¨ <code>type</code> å…³é”®å­—ç»™ç°æœ‰ç±»å‹èµ·åˆ«åã€‚åˆ«å<strong>ä¸æ˜¯</strong>æ–°ç±»å‹ï¼Œå®ƒåªæ˜¯åŸç±»å‹çš„å¦ä¸€ä¸ªåå­—ã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>type Kilometers = i32;

let x: i32 = 5;
let y: Kilometers = 5;

println!("x + y = {}", x + y); // åˆæ³•ï¼Œå› ä¸º Kilometers å°±æ˜¯ i32
<span class="boring">}</span></code></pre>
<p>ä¸»è¦ç”¨é€”æ˜¯å‡å°‘é•¿ç±»å‹åçš„é‡å¤ï¼š</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>type Thunk = Box&lt;dyn Fn() + Send + 'static&gt;;
<span class="boring">}</span></code></pre>
<h2 id="3-never-type-"><a class="header" href="#3-never-type-">3. Never Type (!)</a></h2>
<p>Rust æœ‰ä¸€ä¸ªç‰¹æ®Šçš„ç±»å‹ <code>!</code>ï¼Œç§°ä¸º <strong>Never Type</strong>ï¼Œè¡¨ç¤ºæ°¸è¿œä¸ä¼šæœ‰å€¼è¿”å›ã€‚</p>
<ul>
<li><code>panic!</code> è¿”å› <code>!</code>ã€‚</li>
<li><code>continue</code> å’Œ <code>break</code> è¡¨è¾¾å¼çš„å€¼æ˜¯ <code>!</code>ã€‚</li>
<li><code>loop</code> å¦‚æœæ²¡æœ‰ breakï¼Œä¹Ÿè¿”å› <code>!</code>ã€‚</li>
</ul>
<p><code>!</code> å¯ä»¥è¢«å¼ºåˆ¶è½¬æ¢ä¸ºä»»ä½•ç±»å‹ï¼Œè¿™ä½¿å¾—å®ƒåœ¨ <code>match</code> åˆ†æ”¯ä¸­éå¸¸æœ‰ç”¨ã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let num: u32 = match guess.parse() {
    Ok(num) =&gt; num,
    Err(_) =&gt; continue, // continue è¿”å› !ï¼Œå¯ä»¥åŒ¹é… u32
};
<span class="boring">}</span></code></pre>
<h2 id="4-åŠ¨æ€å¤§å°ç±»å‹-dsts-ä¸-sized-trait"><a class="header" href="#4-åŠ¨æ€å¤§å°ç±»å‹-dsts-ä¸-sized-trait">4. åŠ¨æ€å¤§å°ç±»å‹ (DSTs) ä¸ Sized Trait</a></h2>
<p>Rust ä¸­å¤§å¤šæ•°ç±»å‹éƒ½æ˜¯ <strong>Sized</strong>ï¼ˆç¼–è¯‘æ—¶å·²çŸ¥å¤§å°ï¼‰ã€‚ä½†ä¹Ÿå­˜åœ¨ <strong>DSTs</strong> (Dynamically Sized Types)ï¼Œå¦‚ <code>str</code> å’Œ <code>[T]</code>ã€‚</p>
<p>æˆ‘ä»¬ä¸èƒ½ç›´æ¥ä½¿ç”¨ DSTï¼Œåªèƒ½é€šè¿‡å¼•ç”¨æˆ–æŒ‡é’ˆä½¿ç”¨å®ƒä»¬ï¼ˆ<code>&amp;str</code>, <code>Box&lt;str&gt;</code>ï¼‰ã€‚å¼•ç”¨æœ¬èº«æ˜¯æœ‰å›ºå®šå¤§å°çš„ï¼ˆæŒ‡é’ˆ+é•¿åº¦ï¼‰ã€‚</p>
<h3 id="sized-trait"><a class="header" href="#sized-trait">Sized Trait</a></h3>
<p>åªæœ‰å·²çŸ¥å¤§å°çš„ç±»å‹æ‰å®ç°äº† <code>Sized</code> Traitã€‚
æ³›å‹å‡½æ•°é»˜è®¤æœ‰ä¸€ä¸ªéšå¼çš„é™å®š <code>T: Sized</code>ã€‚</p>
<p>å¦‚æœè¦æ¥å— DSTï¼Œéœ€è¦ä½¿ç”¨ç‰¹æ®Šè¯­æ³• <code>T: ?Sized</code>ï¼ˆå¯èƒ½æ˜¯ Sizedï¼Œä¹Ÿå¯èƒ½ä¸æ˜¯ï¼‰ã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn generic&lt;T: ?Sized&gt;(t: &amp;T) { ... }
<span class="boring">}</span></code></pre>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-30-é«˜çº§å‡½æ•°ä¸å®-advanced-functions--macros"><a class="header" href="#day-30-é«˜çº§å‡½æ•°ä¸å®-advanced-functions--macros">Day 30: é«˜çº§å‡½æ•°ä¸å® (Advanced Functions &amp; Macros)</a></h1>
<h2 id="1-å‡½æ•°æŒ‡é’ˆ"><a class="header" href="#1-å‡½æ•°æŒ‡é’ˆ">1. å‡½æ•°æŒ‡é’ˆ</a></h2>
<p>æ™®é€šå‡½æ•°å¯ä»¥ç›´æ¥ä¼ é€’ç»™æœŸæœ›å‡½æ•°å‚æ•°çš„ä»£ç ã€‚ç±»å‹æ˜¯ <code>fn</code>ï¼ˆå°å†™ï¼‰ï¼Œè¿™è¢«ç§°ä¸º<strong>å‡½æ•°æŒ‡é’ˆ</strong>ã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn add_one(x: i32) -&gt; i32 { x + 1 }

fn do_twice(f: fn(i32) -&gt; i32, arg: i32) -&gt; i32 {
    f(arg) + f(arg)
}
<span class="boring">}</span></code></pre>
<p>åŒºåˆ«ï¼š</p>
<ul>
<li><code>Fn</code>, <code>FnMut</code>, <code>FnOnce</code>: æ˜¯ Traitï¼Œé—­åŒ…å®ç°äº†è¿™äº› Traitã€‚</li>
<li><code>fn</code>: æ˜¯å…·ä½“ç±»å‹ï¼Œæ²¡æœ‰è¿è¡Œæ—¶ç¯å¢ƒï¼ˆä¸èƒ½æ•è·ç¯å¢ƒï¼‰ï¼Œåªèƒ½æŒ‡å‘ä»£ç ã€‚</li>
<li><code>fn</code> ç±»å‹å®ç°äº† <code>Fn</code>, <code>FnMut</code>, <code>FnOnce</code>ï¼Œæ‰€ä»¥å¯ä»¥åœ¨éœ€è¦é—­åŒ…çš„åœ°æ–¹ä¼ å‡½æ•°æŒ‡é’ˆã€‚</li>
</ul>
<h2 id="2-è¿”å›é—­åŒ…"><a class="header" href="#2-è¿”å›é—­åŒ…">2. è¿”å›é—­åŒ…</a></h2>
<p>é—­åŒ…æ˜¯ç”¨ Trait è¡¨ç¤ºçš„ï¼Œå¤§å°ä¸ç¡®å®šï¼Œæ‰€ä»¥ä¸èƒ½ç›´æ¥ä½œä¸ºè¿”å›å€¼è¿”å› <code>dyn Fn</code>ã€‚å¿…é¡»æ”¾åœ¨æŒ‡é’ˆåé¢ï¼Œé€šå¸¸æ˜¯ <code>Box</code>ã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn returns_closure() -&gt; Box&lt;dyn Fn(i32) -&gt; i32&gt; {
    Box::new(|x| x + 1)
}
<span class="boring">}</span></code></pre>
<h2 id="3-å®-macros"><a class="header" href="#3-å®-macros">3. å® (Macros)</a></h2>
<p>Rust çš„å®éå¸¸å¼ºå¤§ï¼Œå±äº<strong>å…ƒç¼–ç¨‹</strong>ã€‚</p>
<h3 id="å£°æ˜å®-declarative-macros-macro_rules"><a class="header" href="#å£°æ˜å®-declarative-macros-macro_rules">å£°æ˜å® (Declarative Macros) <code>macro_rules!</code></a></h3>
<p>ç±»ä¼¼äº <code>match</code> è¡¨è¾¾å¼ã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[macro_export]
macro_rules! my_vec {
    ( $( $x:expr ),* ) =&gt; {
        {
            let mut temp_vec = Vec::new();
            $(
                temp_vec.push($x);
            )*
            temp_vec
        }
    };
}
<span class="boring">}</span></code></pre>
<ul>
<li><code>$x:expr</code>: åŒ¹é…ä»»ä½•è¡¨è¾¾å¼å¹¶ç»‘å®šåˆ° <code>$x</code>ã€‚</li>
<li><code>$(...),*</code>: åŒ¹é…æ‹¬å·å†…çš„æ¨¡å¼é›¶æ¬¡æˆ–å¤šæ¬¡ï¼Œä½¿ç”¨ <code>,</code> åˆ†éš”ã€‚</li>
</ul>
<h3 id="è¿‡ç¨‹å®-procedural-macros"><a class="header" href="#è¿‡ç¨‹å®-procedural-macros">è¿‡ç¨‹å® (Procedural Macros)</a></h3>
<p>æ›´åƒå‡½æ•°ï¼Œæ¥å—ä»£ç ä½œä¸ºè¾“å…¥ï¼Œç”Ÿæˆæ–°ä»£ç ä½œä¸ºè¾“å‡ºã€‚</p>
<ul>
<li>æ´¾ç”Ÿå® (<code>#[derive]</code>)</li>
<li>å±æ€§å®</li>
<li>å‡½æ•°å®</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-31-æ–‡ä»¶è¾“å…¥ä¸è¾“å‡º-file-io"><a class="header" href="#day-31-æ–‡ä»¶è¾“å…¥ä¸è¾“å‡º-file-io">Day 31: æ–‡ä»¶è¾“å…¥ä¸è¾“å‡º (File I/O)</a></h1>
<p>Rust çš„æ ‡å‡†åº“ <code>std::fs</code> å’Œ <code>std::io</code> æä¾›äº†å¤„ç†æ–‡ä»¶ç³»ç»Ÿçš„åŠŸèƒ½ã€‚</p>
<h2 id="1-æ‰“å¼€ä¸åˆ›å»ºæ–‡ä»¶"><a class="header" href="#1-æ‰“å¼€ä¸åˆ›å»ºæ–‡ä»¶">1. æ‰“å¼€ä¸åˆ›å»ºæ–‡ä»¶</a></h2>
<ul>
<li><code>File::open(path)</code>: ä»¥åªè¯»æ¨¡å¼æ‰“å¼€æ–‡ä»¶ã€‚</li>
<li><code>File::create(path)</code>: åˆ›å»ºæ–‡ä»¶ï¼ˆå¦‚æœå­˜åœ¨åˆ™æˆªæ–­/è¦†ç›–ï¼‰ã€‚</li>
<li><code>OpenOptions</code>: æä¾›æ›´å¤šæ§åˆ¶ï¼ˆå¦‚è¿½åŠ æ¨¡å¼ï¼‰ã€‚</li>
</ul>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use std::fs::File;
use std::fs::OpenOptions;

let f = File::open("hello.txt")?;
let f = File::create("hello.txt")?;
let f = OpenOptions::new().append(true).open("hello.txt")?;
<span class="boring">}</span></code></pre>
<h2 id="2-è¯»å–æ–‡ä»¶"><a class="header" href="#2-è¯»å–æ–‡ä»¶">2. è¯»å–æ–‡ä»¶</a></h2>
<ul>
<li><code>fs::read_to_string(path)</code>: ä¸€æ¬¡æ€§è¯»å–æ•´ä¸ªæ–‡ä»¶ä¸ºå­—ç¬¦ä¸²ã€‚</li>
<li><code>fs::read(path)</code>: ä¸€æ¬¡æ€§è¯»å–æ•´ä¸ªæ–‡ä»¶ä¸ºå­—èŠ‚å‘é‡ <code>Vec&lt;u8&gt;</code>ã€‚</li>
<li><code>BufReader</code>: ç¼“å†²è¯»å–ï¼Œé€‚åˆæŒ‰è¡Œè¯»å–ã€‚</li>
</ul>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use std::io::{BufRead, BufReader};

let f = File::open("hello.txt")?;
let reader = BufReader::new(f);

for line in reader.lines() {
    println!("{}", line?);
}
<span class="boring">}</span></code></pre>
<h2 id="3-å†™å…¥æ–‡ä»¶"><a class="header" href="#3-å†™å…¥æ–‡ä»¶">3. å†™å…¥æ–‡ä»¶</a></h2>
<ul>
<li><code>write_all</code>: å†™å…¥å­—èŠ‚åˆ‡ç‰‡ã€‚</li>
<li><code>writeln!</code>: å®ï¼Œæ–¹ä¾¿å†™å…¥å­—ç¬¦ä¸²å¹¶æ¢è¡Œã€‚</li>
</ul>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use std::io::Write;

let mut f = File::create("output.txt")?;
f.write_all(b"Hello")?;
writeln!(f, "World")?;
<span class="boring">}</span></code></pre>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-32-åºåˆ—åŒ–ä¸ååºåˆ—åŒ–-serialization-with-serde"><a class="header" href="#day-32-åºåˆ—åŒ–ä¸ååºåˆ—åŒ–-serialization-with-serde">Day 32: åºåˆ—åŒ–ä¸ååºåˆ—åŒ– (Serialization with Serde)</a></h1>
<p>åœ¨ Rust ä¸­ï¼Œå¤„ç†åºåˆ—åŒ–ï¼ˆå°†æ•°æ®è½¬æ¢ä¸ºå¯å­˜å‚¨/ä¼ è¾“çš„æ ¼å¼ï¼‰å’Œååºåˆ—åŒ–ï¼ˆå°†æ ¼å¼åŒ–æ•°æ®è½¬æ¢å› Rust å¯¹è±¡ï¼‰çš„äº‹å®æ ‡å‡†æ˜¯ <code>serde</code> æ¡†æ¶ã€‚</p>
<h2 id="1-serde-æ¦‚è§ˆ"><a class="header" href="#1-serde-æ¦‚è§ˆ">1. Serde æ¦‚è§ˆ</a></h2>
<p>Serde æ˜¯ <strong>Ser</strong>ialization å’Œ <strong>De</strong>serialization çš„ç¼©å†™ã€‚å®ƒæ˜¯ä¸€ä¸ªé«˜æ•ˆçš„é€šç”¨åºåˆ—åŒ–æ¡†æ¶ï¼Œä¸ä¾èµ–äºè¿è¡Œæ—¶åå°„ï¼Œè€Œæ˜¯ä½¿ç”¨ Rust çš„ Trait ç³»ç»Ÿå’Œç¼–è¯‘æ—¶å®æ´¾ç”Ÿã€‚</p>
<h2 id="2-è®¾ç½®-cargotoml"><a class="header" href="#2-è®¾ç½®-cargotoml">2. è®¾ç½® Cargo.toml</a></h2>
<p>ä½ éœ€è¦æ·»åŠ  <code>serde</code> ä»¥åŠä½ æƒ³è¦æ”¯æŒçš„æ•°æ®æ ¼å¼åº“ï¼ˆå¦‚ <code>serde_json</code>ï¼‰ã€‚</p>
<pre><code class="language-toml">[dependencies]
serde = { version = "1.0", features = ["derive"] }
serde_json = "1.0"
</code></pre>
<ul>
<li><code>features = ["derive"]</code>: å…è®¸æˆ‘ä»¬ä½¿ç”¨ <code>#[derive(Serialize, Deserialize)]</code> å®ã€‚</li>
</ul>
<h2 id="3-åŸºæœ¬ç”¨æ³•"><a class="header" href="#3-åŸºæœ¬ç”¨æ³•">3. åŸºæœ¬ç”¨æ³•</a></h2>
<h3 id="å®šä¹‰ç»“æ„ä½“"><a class="header" href="#å®šä¹‰ç»“æ„ä½“">å®šä¹‰ç»“æ„ä½“</a></h3>
<p>ä½¿ç”¨ <code>derive</code> å®è‡ªåŠ¨å®ç°åºåˆ—åŒ– Traitã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use serde::{Deserialize, Serialize};

#[derive(Serialize, Deserialize, Debug)]
struct Person {
    name: String,
    age: u8,
}
<span class="boring">}</span></code></pre>
<h3 id="åºåˆ—åŒ–-to-json"><a class="header" href="#åºåˆ—åŒ–-to-json">åºåˆ—åŒ– (To JSON)</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let p = Person { name: "Alice".into(), age: 30 };
let json = serde_json::to_string(&amp;p)?;
<span class="boring">}</span></code></pre>
<h3 id="ååºåˆ—åŒ–-from-json"><a class="header" href="#ååºåˆ—åŒ–-from-json">ååºåˆ—åŒ– (From JSON)</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let data = r#"{"name": "Bob", "age": 25}"#;
let p: Person = serde_json::from_str(data)?;
<span class="boring">}</span></code></pre>
<h2 id="4-å¸¸è§æ•°æ®æ ¼å¼"><a class="header" href="#4-å¸¸è§æ•°æ®æ ¼å¼">4. å¸¸è§æ•°æ®æ ¼å¼</a></h2>
<p>Serde æ”¯æŒå¤šç§æ ¼å¼ï¼Œä¸ä»…ä»…æ˜¯ JSONï¼š</p>
<ul>
<li><code>serde_json</code>: JSON</li>
<li><code>serde_yaml</code>: YAML</li>
<li><code>toml</code>: TOML (Cargo ä½¿ç”¨çš„æ ¼å¼)</li>
<li><code>bincode</code>: äºŒè¿›åˆ¶æ ¼å¼ (é«˜æ•ˆ)</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-33-æ„å»ºå‘½ä»¤è¡Œå·¥å…·-building-a-cli-tool"><a class="header" href="#day-33-æ„å»ºå‘½ä»¤è¡Œå·¥å…·-building-a-cli-tool">Day 33: æ„å»ºå‘½ä»¤è¡Œå·¥å…· (Building a CLI Tool)</a></h1>
<p>è¿™æ˜¯ä¸€ä¸ªç»å…¸çš„ Rust å…¥é—¨é¡¹ç›®ï¼šå®ç° <code>grep</code> å‘½ä»¤çš„ç®€åŒ–ç‰ˆ <code>minigrep</code>ã€‚</p>
<h2 id="æ¶‰åŠçš„æ¦‚å¿µ"><a class="header" href="#æ¶‰åŠçš„æ¦‚å¿µ">æ¶‰åŠçš„æ¦‚å¿µ</a></h2>
<ol>
<li><strong>æ¥æ”¶å‘½ä»¤è¡Œå‚æ•°</strong>: <code>std::env::args()</code>ã€‚</li>
<li><strong>æ–‡ä»¶è¯»å–</strong>: <code>std::fs::read_to_string()</code>ã€‚</li>
<li><strong>é”™è¯¯å¤„ç†</strong>: è¿”å› <code>Result</code> å¹¶ä½¿ç”¨ <code>Box&lt;dyn Error&gt;</code> å¤„ç†å¤šç§é”™è¯¯ç±»å‹ã€‚</li>
<li><strong>æ¨¡å—åŒ–</strong>: å°†é€»è¾‘æ‹†åˆ†åˆ° <code>lib.rs</code>ï¼Œ<code>main.rs</code> åªè´Ÿè´£å‚æ•°è§£æå’Œé”™è¯¯é€€å‡ºã€‚</li>
<li><strong>ç¯å¢ƒå˜é‡</strong>: ä½¿ç”¨ <code>std::env::var()</code> è¯»å–ç¯å¢ƒå˜é‡ã€‚</li>
<li><strong>æµ‹è¯•é©±åŠ¨å¼€å‘ (TDD)</strong>: å…ˆå†™æµ‹è¯•ï¼Œå†å†™å®ç°ã€‚</li>
</ol>
<h2 id="å¦‚ä½•è¿è¡Œ"><a class="header" href="#å¦‚ä½•è¿è¡Œ">å¦‚ä½•è¿è¡Œ</a></h2>
<p>æ ‡å‡†è¿è¡Œï¼ˆåŒºåˆ†å¤§å°å†™ï¼‰ï¼š</p>
<pre><code class="language-bash">cargo run -- query filename.txt
</code></pre>
<p>å¿½ç•¥å¤§å°å†™ï¼ˆè®¾ç½®ç¯å¢ƒå˜é‡ï¼‰ï¼š</p>
<pre><code class="language-bash">IGNORE_CASE=1 cargo run -- query filename.txt
</code></pre>
<h2 id="ä»£ç ç»“æ„"><a class="header" href="#ä»£ç ç»“æ„">ä»£ç ç»“æ„</a></h2>
<ul>
<li><code>src/main.rs</code>: äºŒè¿›åˆ¶å…¥å£ï¼Œå¤„ç†å‚æ•°æ”¶é›†å’Œé”™è¯¯æŠ¥å‘Šã€‚</li>
<li><code>src/lib.rs</code>: åŒ…å«é…ç½®ç»“æ„ä½“ã€ä¸šåŠ¡é€»è¾‘ (<code>run</code> å‡½æ•°) å’Œæœç´¢ç®—æ³•ã€‚</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-34-ç½‘ç»œç¼–ç¨‹-network-programming---tcp"><a class="header" href="#day-34-ç½‘ç»œç¼–ç¨‹-network-programming---tcp">Day 34: ç½‘ç»œç¼–ç¨‹ (Network Programming - TCP)</a></h1>
<p>Rust æ ‡å‡†åº“ <code>std::net</code> æä¾›äº† TCP ç½‘ç»œç¼–ç¨‹çš„åŸºç¡€ã€‚</p>
<h2 id="1-tcp-server-æœåŠ¡ç«¯"><a class="header" href="#1-tcp-server-æœåŠ¡ç«¯">1. TCP Server (æœåŠ¡ç«¯)</a></h2>
<ul>
<li><code>TcpListener::bind(addr)</code>: ç»‘å®šç«¯å£ã€‚</li>
<li><code>listener.incoming()</code>: è¿­ä»£æ¥æ”¶è¿æ¥ (<code>TcpStream</code>)ã€‚</li>
<li>é€šå¸¸ä¸ºæ¯ä¸ªè¿æ¥åˆ›å»ºä¸€ä¸ªæ–°çº¿ç¨‹æ¥å¤„ç†ã€‚</li>
</ul>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use std::net::TcpListener;
use std::thread;

let listener = TcpListener::bind("127.0.0.1:7878").unwrap();

for stream in listener.incoming() {
    let stream = stream.unwrap();
    thread::spawn(|| {
        handle_connection(stream);
    });
}
<span class="boring">}</span></code></pre>
<h2 id="2-tcp-client-å®¢æˆ·ç«¯"><a class="header" href="#2-tcp-client-å®¢æˆ·ç«¯">2. TCP Client (å®¢æˆ·ç«¯)</a></h2>
<ul>
<li><code>TcpStream::connect(addr)</code>: è¿æ¥åˆ°æœåŠ¡å™¨ã€‚</li>
<li><code>stream.write_all()</code>: å‘é€æ•°æ®ã€‚</li>
<li><code>stream.read()</code>: æ¥æ”¶æ•°æ®ã€‚</li>
</ul>
<p><code>TcpStream</code> å®ç°äº† <code>Read</code> å’Œ <code>Write</code> Traitã€‚</p>
<h2 id="3-æ³¨æ„äº‹é¡¹"><a class="header" href="#3-æ³¨æ„äº‹é¡¹">3. æ³¨æ„äº‹é¡¹</a></h2>
<ul>
<li>ç½‘ç»œæ“ä½œå¯èƒ½ä¼šé˜»å¡ï¼Œå¯ä»¥ä½¿ç”¨éé˜»å¡æ¨¡å¼æˆ–å¼‚æ­¥ I/O (å¦‚ Tokio) æ¥å¤„ç†é«˜å¹¶å‘ã€‚</li>
<li>å¤„ç† <code>read</code> è¿”å› <code>0</code> çš„æƒ…å†µï¼Œè¿™é€šå¸¸è¡¨ç¤ºè¿æ¥è¢«å¯¹æ–¹å…³é—­ã€‚</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-35-å¼‚æ­¥ç¼–ç¨‹å…¥é—¨-asyncawait"><a class="header" href="#day-35-å¼‚æ­¥ç¼–ç¨‹å…¥é—¨-asyncawait">Day 35: å¼‚æ­¥ç¼–ç¨‹å…¥é—¨ (Async/Await)</a></h1>
<p>Rust çš„å¼‚æ­¥ç¼–ç¨‹å…è®¸ä½ åœ¨å•ä¸ªçº¿ç¨‹ä¸Šå¹¶å‘è¿è¡Œå¤šä¸ªä»»åŠ¡ï¼Œéå¸¸é€‚åˆ I/O å¯†é›†å‹æ“ä½œï¼ˆå¦‚ç½‘ç»œæœåŠ¡ï¼‰ã€‚</p>
<h2 id="1-async-ä¸-await"><a class="header" href="#1-async-ä¸-await">1. async ä¸ .await</a></h2>
<ul>
<li><code>async fn</code>: æ ‡è®°ä¸€ä¸ªå‡½æ•°ä¸ºå¼‚æ­¥å‡½æ•°ã€‚å®ƒä¸ç›´æ¥è¿”å›ç»“æœï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ª <code>Future</code>ã€‚</li>
<li><code>.await</code>: æŒ‚èµ·å½“å‰ä»»åŠ¡ï¼Œç›´åˆ° <code>Future</code> å®Œæˆã€‚è¿™ä¸ä¼šé˜»å¡çº¿ç¨‹ï¼Œè€Œæ˜¯å…è®¸æ‰§è¡Œå…¶ä»–ä»»åŠ¡ã€‚</li>
</ul>
<pre class="playground"><code class="language-rust">async fn do_something() {
    // ...
}

async fn main_func() {
    do_something().await;
}</code></pre>
<h2 id="2-è¿è¡Œæ—¶-runtime"><a class="header" href="#2-è¿è¡Œæ—¶-runtime">2. è¿è¡Œæ—¶ (Runtime)</a></h2>
<p>Rust æ ‡å‡†åº“æ²¡æœ‰å†…ç½®å¼‚æ­¥è¿è¡Œæ—¶ã€‚ä½ éœ€è¦é€‰æ‹©ä¸€ä¸ªç¤¾åŒºåº“ï¼Œ<strong>Tokio</strong> æ˜¯æœ€æµè¡Œçš„é€‰æ‹©ã€‚</p>
<p>åœ¨ <code>Cargo.toml</code> ä¸­æ·»åŠ ï¼š</p>
<pre><code class="language-toml">[dependencies]
tokio = { version = "1", features = ["full"] }
</code></pre>
<p>ä½¿ç”¨ <code>#[tokio::main]</code> å®å°† <code>main</code> å‡½æ•°å˜ä¸ºå¼‚æ­¥å…¥å£ã€‚</p>
<h2 id="3-future-trait"><a class="header" href="#3-future-trait">3. Future Trait</a></h2>
<p><code>Future</code> æ˜¯å¼‚æ­¥ç¼–ç¨‹çš„æ ¸å¿ƒæŠ½è±¡ã€‚å®ƒè¡¨ç¤ºä¸€ä¸ªæœªæ¥æŸä¸ªæ—¶åˆ»ä¼šäº§ç”Ÿå€¼çš„å¯¹è±¡ã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub trait Future {
    type Output;
    fn poll(self: Pin&lt;&amp;mut Self&gt;, cx: &amp;mut Context&lt;'_&gt;) -&gt; Poll&lt;Self::Output&gt;;
}
<span class="boring">}</span></code></pre>
<p>é€šå¸¸æˆ‘ä»¬ä¸éœ€è¦æ‰‹åŠ¨å®ç° <code>Future</code>ï¼Œ<code>async/await</code> è¯­æ³•ä¼šè‡ªåŠ¨ä¸ºæˆ‘ä»¬å°†ä»£ç å—è½¬æ¢ä¸ºçŠ¶æ€æœºå¹¶å®ç° <code>Future</code>ã€‚</p>
<h2 id="4-å¹¶å‘æ‰§è¡Œ"><a class="header" href="#4-å¹¶å‘æ‰§è¡Œ">4. å¹¶å‘æ‰§è¡Œ</a></h2>
<p>ä½¿ç”¨ <code>tokio::join!</code> ç­‰å®å¯ä»¥åŒæ—¶ç­‰å¾…å¤šä¸ª <code>Future</code> å®Œæˆã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let f1 = task_one();
let f2 = task_two();
tokio::join!(f1, f2);
<span class="boring">}</span></code></pre>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-36-unsafe-rust-ä»‹ç»"><a class="header" href="#day-36-unsafe-rust-ä»‹ç»">Day 36: Unsafe Rust ä»‹ç»</a></h1>
<p>Rust çš„æ ¸å¿ƒæ‰¿è¯ºæ˜¯å†…å­˜å®‰å…¨ã€‚ç„¶è€Œï¼ŒRust ä¹Ÿæä¾›äº†ä¸€ç§é€ƒç”Ÿèˆ±ï¼ˆEscape Hatchï¼‰ï¼Œç§°ä¸º <strong>Unsafe Rust</strong>ã€‚å®ƒå…è®¸ä½ ç»•è¿‡ç¼–è¯‘å™¨çš„æŸäº›å®‰å…¨æ£€æŸ¥ï¼Œä»¥è·å¾—å¯¹å†…å­˜å’Œåº•å±‚ç¡¬ä»¶çš„æ›´å¤šæ§åˆ¶ã€‚</p>
<h2 id="ä¸ºä»€ä¹ˆéœ€è¦-unsafe-rust"><a class="header" href="#ä¸ºä»€ä¹ˆéœ€è¦-unsafe-rust">ä¸ºä»€ä¹ˆéœ€è¦ Unsafe Rustï¼Ÿ</a></h2>
<ol>
<li><strong>åº•å±‚ç³»ç»Ÿç¼–ç¨‹</strong>ï¼šç›´æ¥ä¸æ“ä½œç³»ç»Ÿæˆ–ç¡¬ä»¶äº¤äº’ã€‚</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šåœ¨å€Ÿç”¨æ£€æŸ¥å™¨æ— æ³•ç†è§£ä»£ç å®‰å…¨æ€§çš„æƒ…å†µä¸‹ï¼Œæ‰‹åŠ¨ç®¡ç†å†…å­˜ä»¥æå‡æ€§èƒ½ã€‚</li>
<li><strong>äº’æ“ä½œæ€§ (FFI)</strong>ï¼šè°ƒç”¨ C è¯­è¨€æˆ–å…¶ä»–è¯­è¨€çš„ä»£ç ã€‚</li>
</ol>
<h2 id="unsafe-çš„-5-ç§è¶…èƒ½åŠ›"><a class="header" href="#unsafe-çš„-5-ç§è¶…èƒ½åŠ›">Unsafe çš„ 5 ç§è¶…èƒ½åŠ›</a></h2>
<p>åœ¨ <code>unsafe</code> å—ä¸­ï¼Œä½ å¯ä»¥æ‰§è¡Œä»¥ä¸‹ 5 ç§åœ¨å®‰å…¨ Rust ä¸­è¢«ç¦æ­¢çš„æ“ä½œï¼š</p>
<ol>
<li>è§£å¼•ç”¨è£¸æŒ‡é’ˆã€‚</li>
<li>è°ƒç”¨ä¸å®‰å…¨çš„å‡½æ•°æˆ–æ–¹æ³•ã€‚</li>
<li>è®¿é—®æˆ–ä¿®æ”¹å¯å˜é™æ€å˜é‡ã€‚</li>
<li>å®ç°ä¸å®‰å…¨çš„ Traitã€‚</li>
<li>è®¿é—® <code>union</code> çš„å­—æ®µã€‚</li>
</ol>
<blockquote>
<p>æ³¨æ„ï¼š<code>unsafe</code> å¹¶ä¸ä¼šå…³é—­å€Ÿç”¨æ£€æŸ¥å™¨æˆ–ç¦ç”¨å…¶ä»– Rust å®‰å…¨æ£€æŸ¥ã€‚å®ƒåªæ˜¯èµ‹äºˆäº†ä½ ä¸Šè¿°ç‰¹å®šçš„æƒé™ã€‚ä½ ä»ç„¶éœ€è¦å¯¹è‡ªå·±å†™çš„ä»£ç çš„å®‰å…¨æ€§è´Ÿè´£ã€‚</p>
</blockquote>
<h2 id="1-è£¸æŒ‡é’ˆ-raw-pointers"><a class="header" href="#1-è£¸æŒ‡é’ˆ-raw-pointers">1. è£¸æŒ‡é’ˆ (Raw Pointers)</a></h2>
<p>è£¸æŒ‡é’ˆ (<code>*const T</code> å’Œ <code>*mut T</code>) ç±»ä¼¼äº C è¯­è¨€çš„æŒ‡é’ˆã€‚ä¸å¼•ç”¨ä¸åŒï¼š</p>
<ul>
<li>å…è®¸å¿½ç•¥å€Ÿç”¨è§„åˆ™ï¼ˆå¯ä»¥åŒæ—¶æ‹¥æœ‰å¤šä¸ªå¯å˜æŒ‡é’ˆï¼‰ã€‚</li>
<li>ä¸ä¿è¯æŒ‡å‘æœ‰æ•ˆçš„å†…å­˜ã€‚</li>
<li>å…è®¸ä¸ºç©ºã€‚</li>
<li>ä¸å®ç°è‡ªåŠ¨æ¸…ç†ã€‚</li>
</ul>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let mut num = 5;

// åˆ›å»ºè£¸æŒ‡é’ˆæ˜¯å®‰å…¨çš„
let r1 = &amp;num as *const i32;
let r2 = &amp;mut num as *mut i32;

unsafe {
    // è§£å¼•ç”¨è£¸æŒ‡é’ˆæ˜¯ä¸å®‰å…¨çš„
    println!("r1 is: {}", *r1);
    *r2 = 10;
}
<span class="boring">}</span></code></pre>
<h2 id="2-è°ƒç”¨ä¸å®‰å…¨çš„å‡½æ•°"><a class="header" href="#2-è°ƒç”¨ä¸å®‰å…¨çš„å‡½æ•°">2. è°ƒç”¨ä¸å®‰å…¨çš„å‡½æ•°</a></h2>
<p>å¦‚æœä¸€ä¸ªå‡½æ•°è¢«æ ‡è®°ä¸º <code>unsafe</code>ï¼Œè¯´æ˜ç¼–è¯‘å™¨æ— æ³•éªŒè¯å…¶å®‰å…¨æ€§ï¼Œéœ€è¦ç¨‹åºå‘˜æ‹…ä¿ã€‚</p>
<pre class="playground"><code class="language-rust">unsafe fn dangerous() {}

fn main() {
    unsafe {
        dangerous();
    }
}</code></pre>
<h2 id="3-åˆ›å»ºå®‰å…¨æŠ½è±¡"><a class="header" href="#3-åˆ›å»ºå®‰å…¨æŠ½è±¡">3. åˆ›å»ºå®‰å…¨æŠ½è±¡</a></h2>
<p>é€šå¸¸æˆ‘ä»¬å°† unsafe ä»£ç å°è£…åœ¨å®‰å…¨çš„ API åé¢ã€‚ä¾‹å¦‚ï¼Œæ ‡å‡†åº“çš„ <code>split_at_mut</code> æ–¹æ³•å†…éƒ¨ä½¿ç”¨äº† unsafe ä»£ç æ¥åˆ†å‰²åˆ‡ç‰‡ï¼Œä½†å¯¹å¤–æä¾›äº†å®‰å…¨çš„æ¥å£ã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use std::slice;

fn split_at_mut(values: &amp;mut [i32], mid: usize) -&gt; (&amp;mut [i32], &amp;mut [i32]) {
    let len = values.len();
    let ptr = values.as_mut_ptr();

    assert!(mid &lt;= len);

    unsafe {
        (
            slice::from_raw_parts_mut(ptr, mid),
            slice::from_raw_parts_mut(ptr.add(mid), len - mid),
        )
    }
}
<span class="boring">}</span></code></pre>
<h2 id="4-è®¿é—®å¯å˜é™æ€å˜é‡"><a class="header" href="#4-è®¿é—®å¯å˜é™æ€å˜é‡">4. è®¿é—®å¯å˜é™æ€å˜é‡</a></h2>
<p>å…¨å±€å˜é‡åœ¨ Rust ä¸­ç§°ä¸ºé™æ€å˜é‡ (<code>static</code>)ã€‚å¦‚æœå®ƒä»¬æ˜¯å¯å˜çš„ (<code>static mut</code>)ï¼Œå¤šçº¿ç¨‹è®¿é—®å¯èƒ½ä¼šå¯¼è‡´æ•°æ®ç«äº‰ï¼Œå› æ­¤è®¿é—®å®ƒä»¬å¿…é¡»åœ¨ <code>unsafe</code> å—ä¸­ã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>static mut COUNTER: u32 = 0;

fn add_to_count(inc: u32) {
    unsafe {
        COUNTER += inc;
    }
}
<span class="boring">}</span></code></pre>
<h2 id="5-ffi-å¤–éƒ¨å‡½æ•°æ¥å£"><a class="header" href="#5-ffi-å¤–éƒ¨å‡½æ•°æ¥å£">5. FFI (å¤–éƒ¨å‡½æ•°æ¥å£)</a></h2>
<p>è°ƒç”¨ C è¯­è¨€åº“å‡½æ•°éœ€è¦ä½¿ç”¨ <code>extern</code> å—ï¼Œå¹¶ä¸”è°ƒç”¨è¿‡ç¨‹æ˜¯ unsafe çš„ã€‚</p>
<pre class="playground"><code class="language-rust">extern "C" {
    fn abs(input: i32) -&gt; i32;
}

fn main() {
    unsafe {
        println!("Absolute value of -3: {}", abs(-3));
    }
}</code></pre>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-37-è¿‡ç¨‹å®-procedural-macros"><a class="header" href="#day-37-è¿‡ç¨‹å®-procedural-macros">Day 37: è¿‡ç¨‹å® (Procedural Macros)</a></h1>
<p>å®ï¼ˆMacrosï¼‰æ˜¯ Rust ä¸­ä¸€ç§è¿›è¡Œ<strong>å…ƒç¼–ç¨‹</strong>ï¼ˆMeta-programmingï¼‰çš„æ–¹å¼ï¼Œå³ç¼–å†™â€œå†™ä»£ç çš„ä»£ç â€ã€‚</p>
<p>åœ¨ Day 30 ä¸­æˆ‘ä»¬æåˆ°äº†<strong>å£°æ˜å®</strong>ï¼ˆ<code>macro_rules!</code>ï¼‰ã€‚ä»Šå¤©æˆ‘ä»¬å°†æ·±å…¥æ¢è®¨æ›´å¼ºå¤§çš„<strong>è¿‡ç¨‹å®</strong>ï¼ˆProcedural Macrosï¼‰ã€‚</p>
<h2 id="è¿‡ç¨‹å®-vs-å£°æ˜å®"><a class="header" href="#è¿‡ç¨‹å®-vs-å£°æ˜å®">è¿‡ç¨‹å® vs å£°æ˜å®</a></h2>
<ul>
<li><strong>å£°æ˜å®</strong>ï¼šç±»ä¼¼äºæ¨¡å¼åŒ¹é…æ›¿æ¢ã€‚ç®€å•ï¼Œæ˜“è¯»ï¼Œä½†èƒ½åŠ›æœ‰é™ã€‚</li>
<li><strong>è¿‡ç¨‹å®</strong>ï¼šå‡½æ•°å½¢å¼ï¼Œæ¥å— Rust ä»£ç ä½œä¸ºè¾“å…¥ï¼ˆTokenStreamï¼‰ï¼Œå¯¹å…¶è¿›è¡Œæ“ä½œï¼Œå¹¶ç”Ÿæˆæ–°çš„ Rust ä»£ç ä½œä¸ºè¾“å‡ºã€‚å®ƒå°±åƒæ˜¯ä¸€ä¸ªè¿è¡Œåœ¨ç¼–è¯‘æœŸé—´çš„æ’ä»¶ã€‚</li>
</ul>
<p>è¿‡ç¨‹å®å¿…é¡»å®šä¹‰åœ¨ç‹¬ç«‹çš„ crate ä¸­ï¼Œä¸”è¯¥ crate çš„ç±»å‹å¿…é¡»æ ‡è®°ä¸º <code>proc-macro</code>ã€‚</p>
<h2 id="è¿‡ç¨‹å®çš„ä¸‰ç§ç±»å‹"><a class="header" href="#è¿‡ç¨‹å®çš„ä¸‰ç§ç±»å‹">è¿‡ç¨‹å®çš„ä¸‰ç§ç±»å‹</a></h2>
<ol>
<li><strong>è‡ªå®šä¹‰æ´¾ç”Ÿå® (Custom Derive Macro)</strong>: <code>#[derive(CustomDerive)]</code>ï¼Œç”¨äºç»“æ„ä½“å’Œæšä¸¾ã€‚</li>
<li><strong>å±æ€§å® (Attribute Macro)</strong>: <code>#[CustomAttribute]</code>ï¼Œå¯ç”¨äºå‡½æ•°ã€ç»“æ„ä½“ã€æ¨¡å—ç­‰ã€‚</li>
<li><strong>å‡½æ•°å® (Function-like Macro)</strong>: <code>custom!(...)</code>ï¼Œçœ‹èµ·æ¥åƒå£°æ˜å®ï¼Œä½†æ›´çµæ´»ã€‚</li>
</ol>
<h2 id="æœ¬æ—¥å®æˆ˜å®ç°ä¸€ä¸ª-hellomacro-æ´¾ç”Ÿå®"><a class="header" href="#æœ¬æ—¥å®æˆ˜å®ç°ä¸€ä¸ª-hellomacro-æ´¾ç”Ÿå®">æœ¬æ—¥å®æˆ˜ï¼šå®ç°ä¸€ä¸ª <code>HelloMacro</code> æ´¾ç”Ÿå®</a></h2>
<p>æˆ‘ä»¬å°†å®ç°ä¸€ä¸ªç±»ä¼¼äº <code>Debug</code> çš„ derive å®ã€‚ä»»ä½•æ·»åŠ äº† <code>#[derive(HelloMacro)]</code> çš„ç»“æ„ä½“ï¼Œéƒ½ä¼šè‡ªåŠ¨è·å¾—ä¸€ä¸ª <code>hello_macro</code> å…³è”å‡½æ•°ï¼Œæ‰“å°å‡ºè¯¥ç»“æ„ä½“çš„åç§°ã€‚</p>
<h3 id="æ ¸å¿ƒåº“"><a class="header" href="#æ ¸å¿ƒåº“">æ ¸å¿ƒåº“</a></h3>
<p>ç¼–å†™è¿‡ç¨‹å®é€šå¸¸éœ€è¦ä¸¤ä¸ªæ ¸å¿ƒåº“ï¼š</p>
<ol>
<li><strong><code>syn</code></strong>: å°† Rust ä»£ç ï¼ˆTokenStreamï¼‰è§£æä¸ºè¯­æ³•æ ‘ï¼ˆASTï¼‰ï¼Œæ–¹ä¾¿æˆ‘ä»¬åˆ†æä»£ç ç»“æ„ï¼ˆå¦‚è·å–ç»“æ„ä½“åç§°ï¼‰ã€‚</li>
<li><strong><code>quote</code></strong>: å°†è¯­æ³•æ ‘æˆ–æˆ‘ä»¬æ„å»ºçš„æ•°æ®ç»“æ„è½¬æ¢å› Rust ä»£ç ï¼ˆTokenStreamï¼‰ã€‚</li>
</ol>
<h3 id="ä»£ç ç»“æ„-1"><a class="header" href="#ä»£ç ç»“æ„-1">ä»£ç ç»“æ„</a></h3>
<p>ç”±äºè¿‡ç¨‹å®å¿…é¡»åœ¨ç‹¬ç«‹çš„ crate ä¸­ï¼Œæœ¬ç« èŠ‚çš„é¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š</p>
<ul>
<li>æ ¹ç›®å½• (æ¶ˆè´¹è€…): å®šä¹‰ Traitï¼Œä½¿ç”¨å®ã€‚</li>
<li><code>hello_macro_derive/</code> (å®å®šä¹‰): è¿™æ˜¯ä¸€ä¸ªåº“ crateï¼Œè®¾ç½®äº† <code>proc-macro = true</code>ã€‚</li>
</ul>
<h3 id="å®ç°ç»†èŠ‚"><a class="header" href="#å®ç°ç»†èŠ‚">å®ç°ç»†èŠ‚</a></h3>
<p>åœ¨ <code>hello_macro_derive/src/lib.rs</code> ä¸­ï¼š</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[proc_macro_derive(HelloMacro)]
pub fn hello_macro_derive(input: TokenStream) -&gt; TokenStream {
    // 1. è§£æè¾“å…¥ä»£ç 
    let ast = syn::parse(input).unwrap();

    // 2. æ„å»ºå®ç°
    impl_hello_macro(&amp;ast)
}
<span class="boring">}</span></code></pre>
<p>æˆ‘ä»¬åˆ©ç”¨ <code>quote!</code> å®æ¥ç”Ÿæˆä»£ç æ¨¡æ¿ï¼š</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn impl_hello_macro(ast: &amp;syn::DeriveInput) -&gt; TokenStream {
    let name = &amp;ast.ident;
    let gen = quote! {
        impl HelloMacro for #name {
            fn hello_macro() {
                println!("Hello, Macro! My name is {}!", stringify!(#name));
            }
        }
    };
    gen.into()
}
<span class="boring">}</span></code></pre>
<h3 id="ä½¿ç”¨å®"><a class="header" href="#ä½¿ç”¨å®">ä½¿ç”¨å®</a></h3>
<pre class="playground"><code class="language-rust">#[derive(HelloMacro)]
struct Pancakes;

fn main() {
    Pancakes::hello_macro(); // è¾“å‡º: Hello, Macro! My name is Pancakes!
}</code></pre>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-38-ffi---ä¸-c-è¯­è¨€äº¤äº’"><a class="header" href="#day-38-ffi---ä¸-c-è¯­è¨€äº¤äº’">Day 38: FFI - ä¸ C è¯­è¨€äº¤äº’</a></h1>
<p>Rust æ‹¥æœ‰å¼ºå¤§çš„<strong>å¤–éƒ¨å‡½æ•°æ¥å£ (Foreign Function Interface, FFI)</strong>ï¼Œè¿™ä½¿å¾—å®ƒå¯ä»¥æ— ç¼åœ°è°ƒç”¨ C è¯­è¨€ä»£ç ï¼Œæˆ–è€…è¢« C è¯­è¨€è°ƒç”¨ã€‚è¿™å¯¹äºåˆ©ç”¨ç°æœ‰çš„ C åº“ç”Ÿæ€ç³»ç»Ÿæˆ–å°† Rust é›†æˆåˆ°ç°æœ‰çš„ C/C++ é¡¹ç›®ä¸­è‡³å…³é‡è¦ã€‚</p>
<h2 id="æ ¸å¿ƒæ¦‚å¿µ"><a class="header" href="#æ ¸å¿ƒæ¦‚å¿µ">æ ¸å¿ƒæ¦‚å¿µ</a></h2>
<ol>
<li><strong><code>extern "C"</code> å—</strong>: ç”¨äºåœ¨ Rust ä¸­å£°æ˜ C è¯­è¨€å®šä¹‰çš„å‡½æ•°ç­¾åã€‚</li>
<li><strong><code>unsafe</code> å—</strong>: è°ƒç”¨å¤–éƒ¨å‡½æ•°è¢«è®¤ä¸ºæ˜¯ä¸å®‰å…¨çš„ï¼Œå› ä¸ºç¼–è¯‘å™¨æ— æ³•æ£€æŸ¥ C ä»£ç çš„å†…å­˜å®‰å…¨æ€§å’Œç±»å‹æ­£ç¡®æ€§ã€‚</li>
<li><strong><code>#[repr(C)]</code></strong>: å‘Šè¯‰ Rust ç¼–è¯‘å™¨æŒ‰ç…§ C è¯­è¨€çš„è§„åˆ™æ¥å¸ƒå±€ç»“æ„ä½“å†…å­˜ï¼Œä»¥ç¡®ä¿ä¸¤è¾¹çœ‹åˆ°çš„æ•°æ®ç»“æ„ä¸€è‡´ã€‚</li>
<li><strong><code>libc</code> crate</strong>: æä¾›äº† C æ ‡å‡†åº“ä¸­çš„ç±»å‹å®šä¹‰ï¼ˆå¦‚ <code>c_int</code>, <code>c_void</code> ç­‰ï¼‰ï¼Œç¡®ä¿è·¨å¹³å°å…¼å®¹æ€§ã€‚</li>
</ol>
<h2 id="æœ¬æ—¥å®æˆ˜rust-è°ƒç”¨-c-ä»£ç "><a class="header" href="#æœ¬æ—¥å®æˆ˜rust-è°ƒç”¨-c-ä»£ç ">æœ¬æ—¥å®æˆ˜ï¼šRust è°ƒç”¨ C ä»£ç </a></h2>
<p>æˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªåŒ…å« C ä»£ç çš„ Cargo é¡¹ç›®ï¼Œå¹¶ä½¿ç”¨ <code>cc</code> crate åœ¨æ„å»ºæ—¶ç¼–è¯‘ C ä»£ç ï¼Œç„¶ååœ¨ Rust ä¸­è°ƒç”¨å®ƒã€‚</p>
<h3 id="1-ç¼–è¯‘-c-ä»£ç -buildrs"><a class="header" href="#1-ç¼–è¯‘-c-ä»£ç -buildrs">1. ç¼–è¯‘ C ä»£ç  (<code>build.rs</code>)</a></h3>
<p>Cargo å…è®¸é€šè¿‡ <code>build.rs</code> è„šæœ¬è‡ªå®šä¹‰æ„å»ºè¿‡ç¨‹ã€‚æˆ‘ä»¬ä½¿ç”¨ <code>cc</code> crate æ¥ç¼–è¯‘ <code>src/mylib.c</code>ã€‚</p>
<pre><code class="language-toml"># Cargo.toml
[build-dependencies]
cc = "1.0"
</code></pre>
<pre class="playground"><code class="language-rust">// build.rs
fn main() {
    cc::Build::new()
        .file("src/mylib.c")
        .compile("mylib");
}</code></pre>
<h3 id="2-å£°æ˜ä¸è°ƒç”¨-mainrs"><a class="header" href="#2-å£°æ˜ä¸è°ƒç”¨-mainrs">2. å£°æ˜ä¸è°ƒç”¨ (<code>main.rs</code>)</a></h3>
<p>åœ¨ Rust ä¸­ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ <code>extern "C"</code> å£°æ˜ C å‡½æ•°ã€‚</p>
<pre class="playground"><code class="language-rust">use std::os::raw::c_int;

extern "C" {
    fn c_add(a: c_int, b: c_int) -&gt; c_int;
}

fn main() {
    unsafe {
        println!("Result: {}", c_add(10, 20));
    }
}</code></pre>
<h3 id="3-å¤„ç†å­—ç¬¦ä¸²-cstring-vs-cstr"><a class="header" href="#3-å¤„ç†å­—ç¬¦ä¸²-cstring-vs-cstr">3. å¤„ç†å­—ç¬¦ä¸² (<code>CString</code> vs <code>CStr</code>)</a></h3>
<p>Rust çš„å­—ç¬¦ä¸² (<code>String</code>, <code>&amp;str</code>) ä¸æ˜¯ä»¥ç©ºå­—ç¬¦ç»“å°¾çš„ï¼Œè€Œ C å­—ç¬¦ä¸²æ˜¯ (<code>char*</code>)ã€‚</p>
<ul>
<li><strong><code>std::ffi::CString</code></strong>: ç”¨äºåˆ›å»ºæ‹¥æœ‰æ‰€æœ‰æƒçš„ã€å…¼å®¹ C çš„å­—ç¬¦ä¸²ï¼ˆè‡ªåŠ¨æ·»åŠ  <code>\0</code>ï¼‰ã€‚ç”¨äºä¼ ç»™ Cã€‚</li>
<li><strong><code>std::ffi::CStr</code></strong>: ç”¨äºå€Ÿç”¨ C å­—ç¬¦ä¸²ã€‚ç”¨äºä» C æ¥æ”¶ã€‚</li>
</ul>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use std::ffi::CString;

let c_name = CString::new("Rust").expect("Failed");
unsafe {
    c_print_hello(c_name.as_ptr());
}
<span class="boring">}</span></code></pre>
<h3 id="4-ç»“æ„ä½“å¸ƒå±€-reprc"><a class="header" href="#4-ç»“æ„ä½“å¸ƒå±€-reprc">4. ç»“æ„ä½“å¸ƒå±€ (<code>#[repr(C)]</code>)</a></h3>
<p>å¦‚æœè¦åœ¨ Rust å’Œ C ä¹‹é—´ä¼ é€’ç»“æ„ä½“ï¼Œå¿…é¡»ä¿è¯å†…å­˜å¸ƒå±€ä¸€è‡´ã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[repr(C)]
struct Point {
    x: i32,
    y: i32,
}
<span class="boring">}</span></code></pre>
<blockquote>
<p><strong>æ³¨æ„</strong>: åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæ‰‹åŠ¨ç»´æŠ¤ FFI ç»‘å®šéå¸¸ç¹çä¸”å®¹æ˜“å‡ºé”™ã€‚é€šå¸¸å»ºè®®ä½¿ç”¨ <strong><code>bindgen</code></strong> å·¥å…·è‡ªåŠ¨ç”Ÿæˆ Rust ç»‘å®šä»£ç ã€‚</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-39-tokio-è¿è¡Œæ—¶æ·±å…¥"><a class="header" href="#day-39-tokio-è¿è¡Œæ—¶æ·±å…¥">Day 39: Tokio è¿è¡Œæ—¶æ·±å…¥</a></h1>
<p>Tokio æ˜¯ Rust ç”Ÿæ€ä¸­æœ€æµè¡Œçš„å¼‚æ­¥è¿è¡Œæ—¶ã€‚ä¸ä»…æä¾›äº† executorï¼ˆæ‰§è¡Œå™¨ï¼‰ï¼Œè¿˜æä¾›äº†åŸºäº reactor æ¨¡å¼çš„éé˜»å¡ I/O é©±åŠ¨ï¼Œä»¥åŠå®šæ—¶å™¨ã€æ–‡ä»¶ç³»ç»Ÿæ“ä½œç­‰å·¥å…·ã€‚</p>
<h2 id="1-ä»»åŠ¡-tasks-vs-çº¿ç¨‹-threads"><a class="header" href="#1-ä»»åŠ¡-tasks-vs-çº¿ç¨‹-threads">1. ä»»åŠ¡ (Tasks) vs çº¿ç¨‹ (Threads)</a></h2>
<ul>
<li><strong>OS çº¿ç¨‹</strong>ï¼šé‡é‡çº§ï¼Œç”±æ“ä½œç³»ç»Ÿè°ƒåº¦ï¼Œä¸Šä¸‹æ–‡åˆ‡æ¢å¼€é”€å¤§ã€‚</li>
<li><strong>Tokio ä»»åŠ¡</strong>ï¼šè½»é‡çº§ï¼ˆGreen Threadsï¼‰ï¼Œç”± Tokio è¿è¡Œæ—¶åœ¨ç”¨æˆ·æ€è°ƒåº¦ã€‚</li>
<li><strong><code>tokio::spawn</code></strong>ï¼šç”Ÿæˆä¸€ä¸ªæ–°çš„å¼‚æ­¥ä»»åŠ¡ã€‚å®ƒéœ€è¦ä¸€ä¸ª <code>Future</code>ï¼Œå¹¶ä¸”è¯¥ <code>Future</code> å¿…é¡»æ˜¯ <code>Send</code> + <code>'static</code>ï¼ˆå› ä¸ºå®ƒå¯èƒ½åœ¨ä¸åŒçº¿ç¨‹é—´ç§»åŠ¨ï¼‰ã€‚</li>
</ul>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>tokio::spawn(async {
    // è¿™æ˜¯ä¸€ä¸ªå¹¶å‘è¿è¡Œçš„ä»»åŠ¡
});
<span class="boring">}</span></code></pre>
<h2 id="2-æ¶ˆæ¯ä¼ é€’-channels"><a class="header" href="#2-æ¶ˆæ¯ä¼ é€’-channels">2. æ¶ˆæ¯ä¼ é€’ (Channels)</a></h2>
<p>Tokio æä¾›äº†å‡ ç§å¼‚æ­¥é€šä¿¡åŸè¯­ï¼š</p>
<ul>
<li><strong><code>mpsc</code></strong> (Multi-Producer, Single-Consumer): å¤šç”Ÿäº§è€…å•æ¶ˆè´¹è€…ã€‚æœ€å¸¸ç”¨ã€‚</li>
<li><strong><code>oneshot</code></strong>: ä¸€æ¬¡æ€§é€šé“ï¼Œå‘é€ä¸€ä¸ªå€¼ã€‚</li>
<li><strong><code>broadcast</code></strong>: å¤šç”Ÿäº§è€…å¤šæ¶ˆè´¹è€…ï¼ˆå¹¿æ’­ï¼‰ã€‚</li>
<li><strong><code>watch</code></strong>: å•ç”Ÿäº§è€…å¤šæ¶ˆè´¹è€…ï¼Œåªä¿å­˜æœ€æ–°å€¼ã€‚</li>
</ul>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let (tx, mut rx) = mpsc::channel(32);
tx.send("message").await.unwrap();
let msg = rx.recv().await;
<span class="boring">}</span></code></pre>
<h2 id="3-tokioselect"><a class="header" href="#3-tokioselect">3. <code>tokio::select!</code></a></h2>
<p>å…è®¸åŒæ—¶ç­‰å¾…å¤šä¸ªå¼‚æ­¥æ“ä½œï¼Œå¹¶åœ¨<strong>ç¬¬ä¸€ä¸ª</strong>æ“ä½œå®Œæˆæ—¶ç»§ç»­æ‰§è¡Œã€‚å…¶ä»–çš„æ“ä½œä¼šè¢«å–æ¶ˆï¼ˆDroppedï¼‰ã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>tokio::select! {
    val = op1() =&gt; { println!("op1 finished: {:?}", val)},
    val = op2() =&gt; { println!("op2 finished: {:?}", val)},
}
<span class="boring">}</span></code></pre>
<h2 id="4-é˜»å¡æ“ä½œ-spawn_blocking"><a class="header" href="#4-é˜»å¡æ“ä½œ-spawn_blocking">4. é˜»å¡æ“ä½œ (<code>spawn_blocking</code>)</a></h2>
<p><strong>æ°¸è¿œä¸è¦åœ¨å¼‚æ­¥å‡½æ•°ä¸­æ‰§è¡Œé˜»å¡æ“ä½œï¼</strong>
å¦‚æœæ‰§è¡Œäº†é˜»å¡æ“ä½œï¼ˆå¦‚å¤§é‡çš„ CPU è®¡ç®—ã€åŒæ­¥çš„æ–‡ä»¶ IOã€<code>std::thread::sleep</code>ï¼‰ï¼Œä¼šé˜»å¡æ•´ä¸ª Tokio è°ƒåº¦å™¨çº¿ç¨‹ï¼Œå¯¼è‡´å…¶ä»–ä»»åŠ¡æ— æ³•æ‰§è¡Œã€‚</p>
<p>è§£å†³æ–¹æ¡ˆï¼š
ä½¿ç”¨ <code>tokio::task::spawn_blocking</code> å°†é˜»å¡ä»»åŠ¡æ”¾å…¥ä¸“é—¨çš„çº¿ç¨‹æ± ä¸­æ‰§è¡Œã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let res = tokio::task::spawn_blocking(|| {
    // è¿™é‡Œå¯ä»¥æ”¾å¿ƒåœ°æ‰§è¡Œé˜»å¡ä»£ç 
    std::thread::sleep(std::time::Duration::from_secs(1));
    "done"
}).await?;
<span class="boring">}</span></code></pre>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-40-æ„å»ºå¼‚æ­¥-web-æœåŠ¡å™¨-hyper"><a class="header" href="#day-40-æ„å»ºå¼‚æ­¥-web-æœåŠ¡å™¨-hyper">Day 40: æ„å»ºå¼‚æ­¥ Web æœåŠ¡å™¨ (Hyper)</a></h1>
<p>åœ¨ Rust ç”Ÿæ€ä¸­ï¼Œ<strong>Hyper</strong> æ˜¯ä¸€ä¸ªå¿«é€Ÿä¸”æ­£ç¡®çš„ HTTP å®ç°ï¼ˆåŒ…æ‹¬å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ï¼‰ã€‚å®ƒæ˜¯è®¸å¤šé«˜çº§ Web æ¡†æ¶ï¼ˆå¦‚ Axum, Warp, Reqwestï¼‰çš„åŸºç¡€ã€‚</p>
<p>ä»Šå¤©ï¼Œæˆ‘ä»¬ä¸ä½¿ç”¨é«˜çº§æ¡†æ¶ï¼Œè€Œæ˜¯ç›´æ¥ä½¿ç”¨ Hyper 1.0 æ¥æ„å»ºä¸€ä¸ªåº•å±‚çš„å¼‚æ­¥ Web æœåŠ¡å™¨ï¼Œä»¥ç†è§£å…¶å·¥ä½œåŸç†ã€‚</p>
<h2 id="1-hyper-10-æ¶æ„"><a class="header" href="#1-hyper-10-æ¶æ„">1. Hyper 1.0 æ¶æ„</a></h2>
<p>Hyper 1.0 ç»å†äº†é‡å¤§çš„ API å˜é©ï¼Œæ—¨åœ¨æ›´åŠ æ¨¡å—åŒ–å’Œè§£è€¦ã€‚</p>
<ul>
<li><strong><code>hyper</code></strong>: æ ¸å¿ƒåº“ï¼ŒåŒ…å« HTTP åè®®å®ç°ã€‚</li>
<li><strong><code>hyper-util</code></strong>: æä¾›ä¸è¿è¡Œæ—¶ï¼ˆå¦‚ Tokioï¼‰é›†æˆçš„å·¥å…·ã€‚</li>
<li><strong><code>http-body-util</code></strong>: å¤„ç†è¯·æ±‚å’Œå“åº”ä½“çš„å·¥å…·ã€‚</li>
</ul>
<h2 id="2-æ ¸å¿ƒç»„ä»¶"><a class="header" href="#2-æ ¸å¿ƒç»„ä»¶">2. æ ¸å¿ƒç»„ä»¶</a></h2>
<h3 id="service-trait"><a class="header" href="#service-trait">Service Trait</a></h3>
<p>Hyper åŸºäº <code>Service</code> æ¨¡å¼ã€‚ä¸€ä¸ª <code>Service</code> åªæ˜¯ä¸€ä¸ªå¼‚æ­¥å‡½æ•°ï¼Œå®ƒæ¥å—ä¸€ä¸ª Request å¹¶è¿”å›ä¸€ä¸ª Responseã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>async fn hello(req: Request&lt;Incoming&gt;) -&gt; Result&lt;Response&lt;Full&lt;Bytes&gt;&gt;, Infallible&gt; {
    Ok(Response::new(Full::new(Bytes::from("Hello World"))))
}
<span class="boring">}</span></code></pre>
<h3 id="io-é€‚é…å™¨-tokioio"><a class="header" href="#io-é€‚é…å™¨-tokioio">IO é€‚é…å™¨ (<code>TokioIo</code>)</a></h3>
<p>Hyper æ˜¯è¿è¡Œæ—¶æ— å…³çš„ã€‚ä¸ºäº†ä½¿ç”¨ Tokio çš„ TCP æµï¼Œæˆ‘ä»¬éœ€è¦ç”¨ <code>hyper_util::rt::TokioIo</code> åŒ…è£…å®ƒï¼Œä½¿å…¶æ»¡è¶³ Hyper çš„ IO Trait è¦æ±‚ã€‚</p>
<h3 id="è¿æ¥å¤„ç†-loop"><a class="header" href="#è¿æ¥å¤„ç†-loop">è¿æ¥å¤„ç† Loop</a></h3>
<p>æˆ‘ä»¬éœ€è¦æ‰‹åŠ¨ç¼–å†™ä¸€ä¸ªå¾ªç¯æ¥æ¥å— TCP è¿æ¥ï¼Œå¹¶ä¸ºæ¯ä¸ªè¿æ¥ç”Ÿæˆä¸€ä¸ªæ–°çš„ Tokio ä»»åŠ¡æ¥å¤„ç†ã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>loop {
    let (stream, _) = listener.accept().await?;
    let io = TokioIo::new(stream);

    tokio::task::spawn(async move {
        // ... serve connection
    });
}
<span class="boring">}</span></code></pre>
<h2 id="3-è¿è¡Œä¸æµ‹è¯•"><a class="header" href="#3-è¿è¡Œä¸æµ‹è¯•">3. è¿è¡Œä¸æµ‹è¯•</a></h2>
<p>å¯åŠ¨æœåŠ¡å™¨ï¼š</p>
<pre><code class="language-bash">cargo run
</code></pre>
<p>æµ‹è¯• Endpointï¼š</p>
<ul>
<li><strong>GET /</strong>: è¿”å› â€œHello, World!â€¦â€</li>
<li><strong>POST /echo</strong>: å›æ˜¾è¯·æ±‚ä½“å†…å®¹ã€‚</li>
</ul>
<pre><code class="language-bash">curl http://127.0.0.1:3000
curl -X POST -d "Rust is awesome" http://127.0.0.1:3000/echo
</code></pre>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-41-æ•°æ®åº“äº¤äº’-sqlx"><a class="header" href="#day-41-æ•°æ®åº“äº¤äº’-sqlx">Day 41: æ•°æ®åº“äº¤äº’ (SQLx)</a></h1>
<p>åœ¨ Rust ä¸­ï¼Œ<strong>SQLx</strong> æ˜¯ä¸€ä¸ªç°ä»£çš„å¼‚æ­¥ SQL æ•°æ®åº“ crateã€‚ä¸å…¶ä»– ORM (å¦‚ Diesel) ä¸åŒï¼ŒSQLx å€¾å‘äºä½¿ç”¨åŸç”Ÿ SQLï¼Œä½†æä¾›äº†å¼ºå¤§çš„ç±»å‹å®‰å…¨æ£€æŸ¥ã€‚</p>
<h2 id="ä¸ºä»€ä¹ˆé€‰æ‹©-sqlx"><a class="header" href="#ä¸ºä»€ä¹ˆé€‰æ‹©-sqlx">ä¸ºä»€ä¹ˆé€‰æ‹© SQLxï¼Ÿ</a></h2>
<ul>
<li><strong>å¼‚æ­¥è®¾è®¡</strong>: ä»å¤´å¼€å§‹æ„å»ºçš„ async/await æ”¯æŒï¼ˆåŸºäº Tokio æˆ– async-stdï¼‰ã€‚</li>
<li><strong>ç¼–è¯‘æ—¶æ£€æŸ¥</strong>: å¦‚æœä½¿ç”¨ <code>sqlx::query!</code> å®ï¼Œå®ƒå¯ä»¥åœ¨ç¼–è¯‘æ—¶è¿æ¥æ•°æ®åº“æ£€æŸ¥ SQL è¯­æ³•å’Œç±»å‹æ­£ç¡®æ€§ã€‚</li>
<li><strong>æ•°æ®åº“æ”¯æŒ</strong>: Postgres, MySQL, SQLite, MSSQLã€‚</li>
<li><strong>é ORM</strong>: å®ƒä¸å°è¯•éšè— SQLï¼Œè€Œæ˜¯æ‹¥æŠ± SQLã€‚</li>
</ul>
<h2 id="æ ¸å¿ƒæ¦‚å¿µ-1"><a class="header" href="#æ ¸å¿ƒæ¦‚å¿µ-1">æ ¸å¿ƒæ¦‚å¿µ</a></h2>
<h3 id="1-è¿æ¥æ± -pool"><a class="header" href="#1-è¿æ¥æ± -pool">1. è¿æ¥æ±  (<code>Pool</code>)</a></h3>
<p>åœ¨ Web åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä½¿ç”¨è¿æ¥æ± æ¥ç®¡ç†æ•°æ®åº“è¿æ¥ï¼Œä»¥æé«˜æ€§èƒ½ã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let pool = SqlitePoolOptions::new()
    .connect("sqlite::memory:")
    .await?;
<span class="boring">}</span></code></pre>
<h3 id="2-æŸ¥è¯¢-query-vs-query_as"><a class="header" href="#2-æŸ¥è¯¢-query-vs-query_as">2. æŸ¥è¯¢ (<code>query</code> vs <code>query_as</code>)</a></h3>
<ul>
<li><code>query</code>: è¿”å›æœªç±»å‹åŒ–çš„è¡Œ (<code>Row</code>)ã€‚</li>
<li><code>query_as</code>: å°†ç»“æœæ˜ å°„åˆ° Rust ç»“æ„ä½“ï¼ˆéœ€è¦å®ç° <code>FromRow</code> Traitï¼‰ã€‚</li>
</ul>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[derive(FromRow)]
struct User { id: i32, name: String }

let users: Vec&lt;User&gt; = sqlx::query_as("SELECT * FROM users")
    .fetch_all(&amp;pool)
    .await?;
<span class="boring">}</span></code></pre>
<h3 id="3-å‚æ•°ç»‘å®š-bind"><a class="header" href="#3-å‚æ•°ç»‘å®š-bind">3. å‚æ•°ç»‘å®š (<code>bind</code>)</a></h3>
<p><strong>æ°¸è¿œä¸è¦æ‹¼æ¥ SQL å­—ç¬¦ä¸²ï¼</strong> ä½¿ç”¨ <code>bind</code> æˆ–å ä½ç¬¦ï¼ˆSQLite ä¸­æ˜¯ <code>?</code>ï¼ŒPostgres ä¸­æ˜¯ <code>$1</code>ï¼‰æ¥é˜²æ­¢ SQL æ³¨å…¥ã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>sqlx::query("INSERT INTO users (name) VALUES (?)")
    .bind("Alice")
    .execute(&amp;pool)
    .await?;
<span class="boring">}</span></code></pre>
<h2 id="æœ¬æ—¥ç¤ºä¾‹"><a class="header" href="#æœ¬æ—¥ç¤ºä¾‹">æœ¬æ—¥ç¤ºä¾‹</a></h2>
<p>ä¸ºäº†ç®€åŒ–è¿è¡Œï¼Œæœ¬ç¤ºä¾‹ä½¿ç”¨å†…å­˜ä¸­çš„ SQLite æ•°æ®åº“ (<code>sqlite::memory:</code>)ï¼Œæ— éœ€å®‰è£…é¢å¤–æ•°æ®åº“æœåŠ¡ã€‚</p>
<p>è¿è¡Œï¼š</p>
<pre><code class="language-bash">cargo run
</code></pre>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-42-æ—¥å¿—ä¸ç›‘æ§-tracing"><a class="header" href="#day-42-æ—¥å¿—ä¸ç›‘æ§-tracing">Day 42: æ—¥å¿—ä¸ç›‘æ§ (Tracing)</a></h1>
<p>åœ¨ä¼ ç»Ÿçš„åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨æ—¥å¿—ï¼ˆLoggingï¼‰æ¥è®°å½•å‘ç”Ÿçš„äº‹ä»¶ã€‚ä½†åœ¨å¼‚æ­¥å’Œå¹¶å‘ç³»ç»Ÿä¸­ï¼Œä¼ ç»Ÿçš„æ—¥å¿—å¾ˆéš¾è¿½è¸ªä¸€ä¸ªè¯·æ±‚çš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸã€‚</p>
<p>Rust ç¤¾åŒºæ¨å‡ºäº† <strong>Tracing</strong>ï¼Œä¸€ä¸ªç”¨äºåº”ç”¨ç¨‹åºçº§è·Ÿè¸ªçš„æ¡†æ¶ã€‚</p>
<h2 id="1-ç»“æ„åŒ–æ—¥å¿—-vs-æ–‡æœ¬æ—¥å¿—"><a class="header" href="#1-ç»“æ„åŒ–æ—¥å¿—-vs-æ–‡æœ¬æ—¥å¿—">1. ç»“æ„åŒ–æ—¥å¿— vs æ–‡æœ¬æ—¥å¿—</a></h2>
<ul>
<li><strong>Log</strong>: åªæ˜¯æ–‡æœ¬è¡Œã€‚<code>INFO: User logged in</code>.</li>
<li><strong>Tracing</strong>: ç»“æ„åŒ–äº‹ä»¶ã€‚<code>{ level: "INFO", message: "User logged in", user_id: 42, span: "auth" }</code>.</li>
</ul>
<h2 id="2-æ ¸å¿ƒæ¦‚å¿µ"><a class="header" href="#2-æ ¸å¿ƒæ¦‚å¿µ">2. æ ¸å¿ƒæ¦‚å¿µ</a></h2>
<h3 id="span-è·¨åº¦"><a class="header" href="#span-è·¨åº¦">Span (è·¨åº¦)</a></h3>
<p>è¡¨ç¤ºä¸€æ®µæ—¶é—´å†…çš„æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ª HTTP è¯·æ±‚çš„å¤„ç†è¿‡ç¨‹å°±æ˜¯ä¸€ä¸ª Spanã€‚Span å¯ä»¥åµŒå¥—ã€‚</p>
<h3 id="event-äº‹ä»¶"><a class="header" href="#event-äº‹ä»¶">Event (äº‹ä»¶)</a></h3>
<p>è¡¨ç¤ºæŸä¸ªæ—¶é—´ç‚¹å‘ç”Ÿçš„äº‹æƒ…ã€‚ç±»ä¼¼äºä¼ ç»Ÿçš„æ—¥å¿—è®°å½•ã€‚</p>
<h3 id="subscriber-è®¢é˜…è€…"><a class="header" href="#subscriber-è®¢é˜…è€…">Subscriber (è®¢é˜…è€…)</a></h3>
<p>è´Ÿè´£æ”¶é›† Span å’Œ Event å¹¶å°†å…¶è®°å½•ä¸‹æ¥ï¼ˆå¦‚æ‰“å°åˆ° stdoutï¼Œå‘é€åˆ° Jaeger ç­‰ï¼‰ã€‚</p>
<h2 id="3-ä½¿ç”¨æ–¹æ³•"><a class="header" href="#3-ä½¿ç”¨æ–¹æ³•">3. ä½¿ç”¨æ–¹æ³•</a></h2>
<h3 id="åˆå§‹åŒ–"><a class="header" href="#åˆå§‹åŒ–">åˆå§‹åŒ–</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>tracing_subscriber::fmt::init();
<span class="boring">}</span></code></pre>
<h3 id="è®°å½•äº‹ä»¶"><a class="header" href="#è®°å½•äº‹ä»¶">è®°å½•äº‹ä»¶</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use tracing::{info, error};
info!("Something happened");
error!("Something bad happened");
<span class="boring">}</span></code></pre>
<h3 id="ä½¿ç”¨-span"><a class="header" href="#ä½¿ç”¨-span">ä½¿ç”¨ Span</a></h3>
<p>æ‰‹åŠ¨åˆ›å»ºï¼š</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let span = tracing::info_span!("my_span");
let _enter = span.enter();
// ... code ...
<span class="boring">}</span></code></pre>
<p>ä½¿ç”¨å®è‡ªåŠ¨ instrument å‡½æ•°ï¼š</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[tracing::instrument]
fn my_function(arg: i32) {
    // ...
}
<span class="boring">}</span></code></pre>
<h2 id="è¿è¡Œ"><a class="header" href="#è¿è¡Œ">è¿è¡Œ</a></h2>
<p>é»˜è®¤æƒ…å†µä¸‹ <code>tracing-subscriber</code> å¯èƒ½ä¼šè¿‡æ»¤æ‰éƒ¨åˆ†æ—¥å¿—ã€‚ä½¿ç”¨ <code>RUST_LOG</code> ç¯å¢ƒå˜é‡æ§åˆ¶çº§åˆ«ã€‚</p>
<pre><code class="language-bash">RUST_LOG=info cargo run
</code></pre>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-43-é”™è¯¯å¤„ç†æœ€ä½³å®è·µ"><a class="header" href="#day-43-é”™è¯¯å¤„ç†æœ€ä½³å®è·µ">Day 43: é”™è¯¯å¤„ç†æœ€ä½³å®è·µ</a></h1>
<p>Rust çš„é”™è¯¯å¤„ç†éå¸¸å¼ºå¤§ï¼Œä½†ä¹Ÿéœ€è¦æ ¹æ®åœºæ™¯é€‰æ‹©åˆé€‚çš„å·¥å…·ã€‚ä»Šå¤©æˆ‘ä»¬ä»‹ç»ä¸¤ä¸ªäº‹å®æ ‡å‡†çš„åº“ï¼š<strong><code>thiserror</code></strong> å’Œ <strong><code>anyhow</code></strong>ã€‚</p>
<h2 id="1-åº“-vs-åº”ç”¨-library-vs-application"><a class="header" href="#1-åº“-vs-åº”ç”¨-library-vs-application">1. åº“ vs åº”ç”¨ (Library vs Application)</a></h2>
<p>åœ¨ Rust ä¸­ï¼Œé”™è¯¯å¤„ç†é€šå¸¸åˆ†ä¸ºä¸¤ç§åœºæ™¯ï¼š</p>
<ol>
<li><strong>åº“ (Library)</strong>: ä½ åœ¨ç¼–å†™ä¾›ä»–äººä½¿ç”¨çš„åº“ã€‚
<ul>
<li><strong>éœ€æ±‚</strong>: ç”¨æˆ·éœ€è¦èƒ½å¤ŸåŒ¹é… (<code>match</code>) ç‰¹å®šçš„é”™è¯¯ç±»å‹ï¼Œä»¥ä¾¿è¿›è¡Œæ¢å¤å¤„ç†ã€‚</li>
<li><strong>å·¥å…·</strong>: <code>thiserror</code>ã€‚å®ƒå¸®åŠ©ä½ è½»æ¾æ´¾ç”Ÿ <code>Error</code> traitï¼Œè€Œæ— éœ€æ‰‹å†™ç¹ççš„æ ·æ¿ä»£ç ã€‚</li>
</ul>
</li>
<li><strong>åº”ç”¨ (Application)</strong>: ä½ åœ¨ç¼–å†™æœ€ç»ˆçš„äºŒè¿›åˆ¶ç¨‹åº (CLI, Web Server)ã€‚
<ul>
<li><strong>éœ€æ±‚</strong>: ä½ é€šå¸¸ä¸å…³å¿ƒå…·ä½“çš„é”™è¯¯ç±»å‹ï¼Œåªå…³å¿ƒå‘ç”Ÿäº†é”™è¯¯ï¼Œå¹¶å¸Œæœ›ä»¥äººç±»å¯è¯»çš„æ–¹å¼æŠ¥å‘Šå‡ºæ¥ï¼ˆåŒ…å«ä¸Šä¸‹æ–‡å †æ ˆï¼‰ã€‚</li>
<li><strong>å·¥å…·</strong>: <code>anyhow</code>ã€‚å®ƒæä¾›äº†ä¸€ä¸ªç±»ä¼¼ <code>Box&lt;dyn Error&gt;</code> çš„åŒ…è£…å™¨ï¼Œæ”¯æŒæ·»åŠ ä¸Šä¸‹æ–‡ (<code>.context()</code>)ã€‚</li>
</ul>
</li>
</ol>
<h2 id="2-ä½¿ç”¨-thiserror-å®šä¹‰é”™è¯¯"><a class="header" href="#2-ä½¿ç”¨-thiserror-å®šä¹‰é”™è¯¯">2. ä½¿ç”¨ <code>thiserror</code> (å®šä¹‰é”™è¯¯)</a></h2>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use thiserror::Error;

#[derive(Error, Debug)]
pub enum MyError {
    #[error("io error")]
    Io(#[from] std::io::Error), // è‡ªåŠ¨å®ç° From&lt;io::Error&gt;

    #[error("invalid header (expected {expected:?}, found {found:?})")]
    InvalidHeader { expected: String, found: String },
}
<span class="boring">}</span></code></pre>
<h2 id="3-ä½¿ç”¨-anyhow-å¤„ç†é”™è¯¯"><a class="header" href="#3-ä½¿ç”¨-anyhow-å¤„ç†é”™è¯¯">3. ä½¿ç”¨ <code>anyhow</code> (å¤„ç†é”™è¯¯)</a></h2>
<p><code>anyhow::Result&lt;T&gt;</code> æ˜¯ <code>Result&lt;T, anyhow::Error&gt;</code> çš„åˆ«åã€‚</p>
<pre class="playground"><code class="language-rust">use anyhow::{Context, Result};

fn main() -&gt; Result&lt;()&gt; {
    let content = std::fs::read_to_string("config.toml")
        .context("Failed to read config file")?; // æ·»åŠ ä¸Šä¸‹æ–‡

    Ok(())
}</code></pre>
<p>è¾“å‡ºçš„é”™è¯¯ä¿¡æ¯ä¼šåŒ…å«ä¸Šä¸‹æ–‡é“¾ï¼Œæ–¹ä¾¿è°ƒè¯•ï¼š</p>
<pre><code>Error: Failed to read config file

Caused by:
    No such file or directory (os error 2)
</code></pre>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-44-å‘½ä»¤è¡Œå‚æ•°è§£æ-clap"><a class="header" href="#day-44-å‘½ä»¤è¡Œå‚æ•°è§£æ-clap">Day 44: å‘½ä»¤è¡Œå‚æ•°è§£æ (Clap)</a></h1>
<p>åœ¨ Rust ä¸­ï¼Œç¼–å†™å‘½ä»¤è¡Œå·¥å…· (CLI) æ˜¯ä¸€ä»¶éå¸¸æ„‰å¿«çš„äº‹æƒ…ï¼Œè€Œ <strong><code>clap</code></strong> (Command Line Argument Parser) æ˜¯è¿™ä¸ªé¢†åŸŸç»å¯¹çš„äº‹å®æ ‡å‡†ã€‚å®ƒåŠŸèƒ½å¼ºå¤§ã€æ€§èƒ½ä¼˜å¼‚ï¼Œå¹¶ä¸”èƒ½è‡ªåŠ¨ç”Ÿæˆå¸®åŠ©ä¿¡æ¯ã€‚</p>
<h2 id="1-clap-çš„ä¸¤ç§é£æ ¼"><a class="header" href="#1-clap-çš„ä¸¤ç§é£æ ¼">1. <code>clap</code> çš„ä¸¤ç§é£æ ¼</a></h2>
<p><code>clap</code> æä¾›äº†ä¸¤ç§ä¸»è¦çš„ä½¿ç”¨æ–¹å¼ï¼š</p>
<ol>
<li><strong>Builder API</strong>: é€šè¿‡å‡½æ•°é“¾å¼è°ƒç”¨æ„å»ºå‚æ•°è§£æå™¨ã€‚çµæ´»æ€§é«˜ï¼Œç¼–è¯‘é€Ÿåº¦ç¨å¿«ï¼Œä½†ä»£ç è¾ƒå†—é•¿ã€‚</li>
<li><strong>Derive API</strong>: ä½¿ç”¨ Rust çš„å® (<code>derive</code>) ç›´æ¥åœ¨ç»“æ„ä½“ä¸Šå®šä¹‰å‚æ•°ã€‚ä»£ç ç®€æ´ç›´è§‚ï¼Œç±»å‹å®‰å…¨ï¼Œæ˜¯ç›®å‰æ¨èçš„æ–¹å¼ã€‚</li>
</ol>
<p>æˆ‘ä»¬ä»Šå¤©ä¸»è¦ä»‹ç» <strong>Derive API</strong>ã€‚</p>
<h2 id="2-æ ¸å¿ƒæ¦‚å¿µ-1"><a class="header" href="#2-æ ¸å¿ƒæ¦‚å¿µ-1">2. æ ¸å¿ƒæ¦‚å¿µ</a></h2>
<p>åœ¨ä½¿ç”¨ Derive API æ—¶ï¼Œä¸»è¦ä¼šç”¨åˆ°ä¸‰ä¸ª traitï¼š</p>
<ul>
<li><code>Parser</code>: é¡¶çº§ç»“æ„ä½“ï¼Œä»£è¡¨æ•´ä¸ªå‘½ä»¤è¡Œç¨‹åºã€‚</li>
<li><code>Subcommand</code>: ç”¨äºå®šä¹‰å­å‘½ä»¤ï¼ˆå¦‚ <code>git commit</code>, <code>git push</code>ï¼‰ã€‚é€šå¸¸æ˜¯ä¸€ä¸ªæšä¸¾ã€‚</li>
<li><code>Args</code>: ç”¨äºå®šä¹‰ä¸€ç»„å‚æ•°ã€‚å¯ä»¥è¢«åµŒå…¥åˆ° <code>Parser</code> æˆ– <code>Subcommand</code> ä¸­ã€‚</li>
</ul>
<h2 id="3-åŸºæœ¬ç”¨æ³•-1"><a class="header" href="#3-åŸºæœ¬ç”¨æ³•-1">3. åŸºæœ¬ç”¨æ³•</a></h2>
<p>é¦–å…ˆéœ€è¦åœ¨ <code>Cargo.toml</code> ä¸­æ·»åŠ ä¾èµ–ï¼Œå¹¶å¼€å¯ <code>derive</code> ç‰¹æ€§ï¼š</p>
<pre><code class="language-toml">[dependencies]
clap = { version = "4.0", features = ["derive"] }
</code></pre>
<h3 id="ç¤ºä¾‹ä»£ç "><a class="header" href="#ç¤ºä¾‹ä»£ç ">ç¤ºä¾‹ä»£ç </a></h3>
<pre class="playground"><code class="language-rust">use clap::{Parser, Subcommand};

#[derive(Parser)]
#[command(author, version, about, long_about = None)]
struct Cli {
    /// å¯é€‰çš„åå­—
    #[arg(short, long)]
    name: Option&lt;String&gt;,

    /// è®¡æ•°æ¬¡æ•° (é»˜è®¤ 1)
    #[arg(short, long, default_value_t = 1)]
    count: u8,

    #[command(subcommand)]
    command: Option&lt;Commands&gt;,
}

#[derive(Subcommand)]
enum Commands {
    /// æ‰§è¡Œæµ‹è¯•
    Test {
        /// æ˜¯å¦åˆ—å‡ºè¯¦æƒ…
        #[arg(short, long)]
        list: bool,
    },
}

fn main() {
    let cli = Cli::parse();

    if let Some(name) = cli.name.as_deref() {
        println!("Value for name: {}", name);
    }

    // ...
}</code></pre>
<h2 id="4-è¿è¡Œæ•ˆæœ"><a class="header" href="#4-è¿è¡Œæ•ˆæœ">4. è¿è¡Œæ•ˆæœ</a></h2>
<p><code>clap</code> ä¼šè‡ªåŠ¨ç”Ÿæˆ <code>--help</code> ä¿¡æ¯ï¼š</p>
<pre><code class="language-bash">$ cargo run -- --help
Usage: demo [OPTIONS] [COMMAND]

Commands:
  test  æ‰§è¡Œæµ‹è¯•
  help  Print this message or the help of the given subcommand(s)

Options:
  -n, --name &lt;NAME&gt;    å¯é€‰çš„åå­—
  -c, --count &lt;COUNT&gt;  è®¡æ•°æ¬¡æ•° (é»˜è®¤ 1) [default: 1]
  -h, --help           Print help
  -V, --version        Print version
</code></pre>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-45-http-å®¢æˆ·ç«¯-reqwest"><a class="header" href="#day-45-http-å®¢æˆ·ç«¯-reqwest">Day 45: HTTP å®¢æˆ·ç«¯ (Reqwest)</a></h1>
<p><strong><code>reqwest</code></strong> æ˜¯ Rust ç”Ÿæ€ä¸­æœ€æµè¡Œçš„ HTTP å®¢æˆ·ç«¯åº“ã€‚å®ƒå»ºç«‹åœ¨ <code>hyper</code> ä¹‹ä¸Šï¼Œæä¾›äº†æ›´é«˜çº§ã€æ›´æ˜“ç”¨çš„ APIã€‚</p>
<h2 id="1-ç‰¹æ€§"><a class="header" href="#1-ç‰¹æ€§">1. ç‰¹æ€§</a></h2>
<ul>
<li><strong>å¼‚æ­¥ä¸åŒæ­¥</strong>: é»˜è®¤æä¾›å¼‚æ­¥ (Async) APIï¼Œä¹Ÿé€šè¿‡ <code>blocking</code> ç‰¹æ€§æä¾›åŒæ­¥ APIã€‚</li>
<li><strong>JSON æ”¯æŒ</strong>: é›†æˆ <code>serde</code>ï¼Œæ–¹ä¾¿åœ°å¤„ç† JSON æ•°æ®ã€‚</li>
<li><strong>åŠŸèƒ½ä¸°å¯Œ</strong>: æ”¯æŒ HTTPS, Proxy, Cookies, Connection Pooling ç­‰ã€‚</li>
</ul>
<h2 id="2-ä¾èµ–é…ç½®"><a class="header" href="#2-ä¾èµ–é…ç½®">2. ä¾èµ–é…ç½®</a></h2>
<p>åœ¨ <code>Cargo.toml</code> ä¸­æ·»åŠ ä¾èµ–ï¼š</p>
<pre><code class="language-toml">[dependencies]
reqwest = { version = "0.12", features = ["json"] }
tokio = { version = "1", features = ["full"] } # å¼‚æ­¥è¿è¡Œæ—¶
serde = { version = "1.0", features = ["derive"] }
serde_json = "1.0"
</code></pre>
<h2 id="3-åŸºæœ¬ç”¨æ³•-2"><a class="header" href="#3-åŸºæœ¬ç”¨æ³•-2">3. åŸºæœ¬ç”¨æ³•</a></h2>
<h3 id="å‘é€-get-è¯·æ±‚"><a class="header" href="#å‘é€-get-è¯·æ±‚">å‘é€ GET è¯·æ±‚</a></h3>
<pre class="playground"><code class="language-rust">use std::collections::HashMap;

#[tokio::main]
async fn main() -&gt; Result&lt;(), Box&lt;dyn std::error::Error&gt;&gt; {
    let resp = reqwest::get("https://httpbin.org/ip")
        .await?
        .json::&lt;HashMap&lt;String, String&gt;&gt;()
        .await?;

    println!("{:#?}", resp);
    Ok(())
}</code></pre>
<h3 id="å‘é€-post-è¯·æ±‚"><a class="header" href="#å‘é€-post-è¯·æ±‚">å‘é€ POST è¯·æ±‚</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let client = reqwest::Client::new();
let res = client.post("https://httpbin.org/post")
    .body("the exact body that is sent")
    .send()
    .await?;
<span class="boring">}</span></code></pre>
<h3 id="å¤„ç†-json-å“åº”"><a class="header" href="#å¤„ç†-json-å“åº”">å¤„ç† JSON å“åº”</a></h3>
<p>æˆ‘ä»¬å¯ä»¥å®šä¹‰ç»“æ„ä½“æ¥è‡ªåŠ¨ååºåˆ—åŒ–å“åº”æ•°æ®ï¼š</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use serde::Deserialize;

#[derive(Deserialize, Debug)]
struct IpResponse {
    origin: String,
}

// ...
let ip: IpResponse = reqwest::get("https://httpbin.org/ip").await?.json().await?;
<span class="boring">}</span></code></pre>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-46-é¡¹ç›®åˆå§‹åŒ–ä¸é…ç½®"><a class="header" href="#day-46-é¡¹ç›®åˆå§‹åŒ–ä¸é…ç½®">Day 46: é¡¹ç›®åˆå§‹åŒ–ä¸é…ç½®</a></h1>
<p>ä»ä»Šå¤©å¼€å§‹ï¼Œæˆ‘ä»¬å°†è¿›å…¥ä¸ºæœŸ 15 å¤©çš„ <strong>å¼‚æ­¥ç½‘ç»œé¡¹ç›®å®æˆ˜</strong> é˜¶æ®µã€‚æˆ‘ä»¬å°†ä»é›¶å¼€å§‹å®ç°ä¸€ä¸ªå…¼å®¹ Redis åè®®çš„è½»é‡çº§ KV å­˜å‚¨æœåŠ¡å™¨ â€”â€” <strong>Mini-Redis</strong>ã€‚</p>
<p>è¿™ä¸ªé¡¹ç›®å°†ä¸²è”æˆ‘ä»¬ä¹‹å‰å­¦åˆ°çš„ä¼—å¤šçŸ¥è¯†ç‚¹ï¼š</p>
<ul>
<li><strong>å¼‚æ­¥ç¼–ç¨‹</strong>: ä½¿ç”¨ Tokio è¿è¡Œæ—¶ã€‚</li>
<li><strong>ç½‘ç»œç¼–ç¨‹</strong>: TCP Listener ä¸ Stream å¤„ç†ã€‚</li>
<li><strong>æ•°æ®ç»“æ„</strong>: HashMap å­˜å‚¨æ•°æ®ã€‚</li>
<li><strong>å¹¶å‘æ§åˆ¶</strong>: Mutex/RwLock ä¿æŠ¤å…±äº«çŠ¶æ€ã€‚</li>
<li><strong>åè®®è§£æ</strong>: å­—èŠ‚æµæ“ä½œã€‚</li>
<li><strong>é”™è¯¯å¤„ç†ä¸æ—¥å¿—</strong>: anyhow, thiserror, tracingã€‚</li>
</ul>
<h2 id="1-é¡¹ç›®ç›®æ ‡"><a class="header" href="#1-é¡¹ç›®ç›®æ ‡">1. é¡¹ç›®ç›®æ ‡</a></h2>
<p>å®ç°ä¸€ä¸ªæ”¯æŒ RESP (Redis Serialization Protocol) çš„æœåŠ¡å™¨ï¼Œæ”¯æŒä»¥ä¸‹å‘½ä»¤ï¼š</p>
<ul>
<li><code>GET key</code></li>
<li><code>SET key value</code></li>
<li><code>PUBLISH channel message</code></li>
<li><code>SUBSCRIBE channel</code></li>
</ul>
<h2 id="2-åˆå§‹åŒ–é¡¹ç›®"><a class="header" href="#2-åˆå§‹åŒ–é¡¹ç›®">2. åˆå§‹åŒ–é¡¹ç›®</a></h2>
<p>æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–°çš„äºŒè¿›åˆ¶é¡¹ç›®ï¼š</p>
<pre><code class="language-bash">cargo init --bin mini-redis
</code></pre>
<h2 id="3-ä¾èµ–é…ç½®"><a class="header" href="#3-ä¾èµ–é…ç½®">3. ä¾èµ–é…ç½®</a></h2>
<p>ç¼–è¾‘ <code>Cargo.toml</code>ï¼Œæ·»åŠ å¿…è¦çš„ä¾èµ–ï¼š</p>
<pre><code class="language-toml">[dependencies]
tokio = { version = "1", features = ["full"] }
tracing = "0.1"
tracing-subscriber = "0.3"
anyhow = "1.0"
bytes = "1.5"
thiserror = "1.0"
serde = { version = "1.0", features = ["derive"] }
</code></pre>
<ul>
<li><code>tokio</code>: å¼‚æ­¥è¿è¡Œæ—¶æ ¸å¿ƒã€‚</li>
<li><code>tracing</code>: ç»“æ„åŒ–æ—¥å¿—ã€‚</li>
<li><code>bytes</code>: é«˜æ•ˆå¤„ç†ç½‘ç»œå­—èŠ‚æµã€‚</li>
<li><code>anyhow</code>: çµæ´»çš„é”™è¯¯å¤„ç†ã€‚</li>
</ul>
<h2 id="4-åŸºç¡€éª¨æ¶"><a class="header" href="#4-åŸºç¡€éª¨æ¶">4. åŸºç¡€éª¨æ¶</a></h2>
<p>åœ¨ <code>src/main.rs</code> ä¸­åˆå§‹åŒ–æ—¥å¿—å’Œ Tokio è¿è¡Œæ—¶ï¼š</p>
<pre class="playground"><code class="language-rust">use tracing::info;

#[tokio::main]
async fn main() -&gt; anyhow::Result&lt;()&gt; {
    // åˆå§‹åŒ–æ—¥å¿—
    tracing_subscriber::fmt::init();

    info!("Mini-Redis server is starting...");

    // TODO: ç›‘å¬ç«¯å£ã€å¤„ç†è¿æ¥

    Ok(())
}</code></pre>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-47-åè®®è§£æ-resp"><a class="header" href="#day-47-åè®®è§£æ-resp">Day 47: åè®®è§£æ (Resp)</a></h1>
<p>Redis ä½¿ç”¨ RESP (Redis Serialization Protocol) åè®®è¿›è¡Œå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´çš„é€šä¿¡ã€‚å®ƒçš„è®¾è®¡ç›®æ ‡æ˜¯ï¼š</p>
<ol>
<li>æ˜“äºå®ç°ã€‚</li>
<li>è§£æé€Ÿåº¦å¿«ã€‚</li>
<li>äººç±»å¯è¯»ã€‚</li>
</ol>
<h2 id="1-resp-æ•°æ®ç±»å‹"><a class="header" href="#1-resp-æ•°æ®ç±»å‹">1. RESP æ•°æ®ç±»å‹</a></h2>
<p>RESP æ˜¯ä¸€ä¸ªåŸºäºæ–‡æœ¬çš„åè®®ï¼ˆé™¤äº† Bulk Strings ä¸­åŒ…å«çš„äºŒè¿›åˆ¶æ•°æ®ï¼‰ï¼Œé€šè¿‡ç¬¬ä¸€ä¸ªå­—èŠ‚æ¥åŒºåˆ†æ•°æ®ç±»å‹ï¼š</p>
<ul>
<li><code>+</code>: ç®€å•å­—ç¬¦ä¸² (Simple Strings)
<ul>
<li>ä¾‹å¦‚: <code>+OK\r\n</code></li>
</ul>
</li>
<li><code>-</code>: é”™è¯¯ (Errors)
<ul>
<li>ä¾‹å¦‚: <code>-Error message\r\n</code></li>
</ul>
</li>
<li><code>:</code>: æ•´æ•° (Integers)
<ul>
<li>ä¾‹å¦‚: <code>:1000\r\n</code></li>
</ul>
</li>
<li><code>$</code>: æ‰¹é‡å­—ç¬¦ä¸² (Bulk Strings)
<ul>
<li>ä¾‹å¦‚: <code>$6\r\nfoobar\r\n</code></li>
</ul>
</li>
<li><code>*</code>: æ•°ç»„ (Arrays)
<ul>
<li>ä¾‹å¦‚: <code>*2\r\n$3\r\nfoo\r\n$3\r\nbar\r\n</code></li>
</ul>
</li>
</ul>
<h2 id="2-å®šä¹‰-frame-æšä¸¾"><a class="header" href="#2-å®šä¹‰-frame-æšä¸¾">2. å®šä¹‰ Frame æšä¸¾</a></h2>
<p>æˆ‘ä»¬ä½¿ç”¨æšä¸¾ <code>Frame</code> æ¥è¡¨ç¤ºè§£æåçš„æ•°æ®å¸§ï¼š</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use bytes::Bytes;

#[derive(Clone, Debug)]
pub enum Frame {
    Simple(String),
    Error(String),
    Integer(i64),
    Bulk(Bytes),
    Null, // ç‰¹æ®Šçš„ Bulk String ($-1\r\n)
    Array(Vec&lt;Frame&gt;),
}
<span class="boring">}</span></code></pre>
<h2 id="3-å®ç°è§£æé€»è¾‘"><a class="header" href="#3-å®ç°è§£æé€»è¾‘">3. å®ç°è§£æé€»è¾‘</a></h2>
<p>æˆ‘ä»¬å°†å®ç°ä¸€ä¸ªç®€å•çš„è§£æå™¨ï¼Œèƒ½å¤Ÿå°†å­—èŠ‚æµè§£æä¸º <code>Frame</code>ã€‚ç”±äºè¿™é‡Œåªåšæ¼”ç¤ºï¼Œæˆ‘ä»¬é‡ç‚¹å®ç° <code>Frame</code> ç»“æ„çš„å®šä¹‰å’ŒåŸºæœ¬çš„è§£æå•å…ƒæµ‹è¯•ã€‚</p>
<p>åœ¨å®é™…çš„ç½‘ç»œç¼–ç¨‹ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸éœ€è¦å¤„ç†â€œåŠåŒ…â€å’Œâ€œç²˜åŒ…â€é—®é¢˜ï¼Œè¿™éœ€è¦é…åˆ <code>tokio_util::codec</code> æ¨¡å—ä¸­çš„ <code>Decoder</code> trait æ¥å®Œæˆã€‚ä½†åœ¨ä»Šå¤©ï¼Œæˆ‘ä»¬å…ˆæ‰‹åŠ¨å®ç°ä¸€ä¸ªç®€å•çš„è§£æå‡½æ•°æ¥ç†è§£åŸç†ã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use bytes::Bytes;
use std::io::Cursor;

// æ¨¡æ‹Ÿè§£æä¸€ä¸ªå­—ç¬¦ä¸²
pub fn parse_frame(src: &amp;mut Cursor&lt;&amp;[u8]&gt;) -&gt; Result&lt;Frame, String&gt; {
    // ... å®ç°è§£æé€»è¾‘
    Err("Not implemented".to_string())
}
<span class="boring">}</span></code></pre>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-48-å‘½ä»¤å¤„ç†æ¶æ„"><a class="header" href="#day-48-å‘½ä»¤å¤„ç†æ¶æ„">Day 48: å‘½ä»¤å¤„ç†æ¶æ„</a></h1>
<p>å°†åº•å±‚çš„ <code>Frame</code> è§£æå‡ºæ¥åï¼Œæˆ‘ä»¬éœ€è¦å°†å…¶è½¬æ¢ä¸ºå…·ä½“çš„<strong>ä¸šåŠ¡å‘½ä»¤</strong>ã€‚è¿™æ˜¯ä¸€ç§å…¸å‹çš„<strong>å‘½ä»¤æ¨¡å¼ (Command Pattern)</strong>ã€‚</p>
<h2 id="1-ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸€å±‚"><a class="header" href="#1-ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸€å±‚">1. ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸€å±‚ï¼Ÿ</a></h2>
<p><code>Frame</code> åªæ˜¯åè®®å±‚é¢çš„æ•°æ®è¡¨ç¤ºï¼ˆæ•°ç»„ã€å­—ç¬¦ä¸²ã€æ•´æ•°ï¼‰ã€‚ä¸šåŠ¡é€»è¾‘ä¸åº”è¯¥ç›´æ¥æ“ä½œ <code>Frame</code>ï¼Œè€Œåº”è¯¥æ“ä½œè¯­ä¹‰æ˜ç¡®çš„ <code>Command</code>ã€‚</p>
<p>ä¾‹å¦‚ï¼Œ<code>SET key value</code> å‘½ä»¤åœ¨ RESP ä¸­æ˜¯ä¸€ä¸ªç”± 3 ä¸ª Bulk Strings ç»„æˆçš„ Arrayã€‚
æˆ‘ä»¬éœ€è¦éªŒè¯ï¼š</p>
<ol>
<li>ç¡®å®æ˜¯ Array ç±»å‹ã€‚</li>
<li>ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯ â€œSETâ€ã€‚</li>
<li>æ€»å…±æœ‰ 3 ä¸ªå…ƒç´ ã€‚</li>
<li>æå–å‡º <code>key</code> å’Œ <code>value</code>ã€‚</li>
</ol>
<h2 id="2-å®šä¹‰-command-æšä¸¾"><a class="header" href="#2-å®šä¹‰-command-æšä¸¾">2. å®šä¹‰ Command æšä¸¾</a></h2>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub enum Command {
    Get(Get),
    Set(Set),
    Publish(Publish),
    Subscribe(Subscribe),
    Unsubscribe(Unsubscribe),
    Unknown(Unknown),
}
<span class="boring">}</span></code></pre>
<p>æ¯ä¸ªå…·ä½“çš„å‘½ä»¤éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ç»“æ„ä½“ï¼Œä¾‹å¦‚ <code>Set</code>ï¼š</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct Set {
    pub key: String,
    pub value: Bytes,
}
<span class="boring">}</span></code></pre>
<h2 id="3-å®ç°-from_frame"><a class="header" href="#3-å®ç°-from_frame">3. å®ç° from_frame</a></h2>
<p>æˆ‘ä»¬ä¸º <code>Command</code> å®ç°ä¸€ä¸ªæ–¹æ³•ï¼Œå°† <code>Frame</code> è½¬æ¢ä¸º <code>Command</code>ï¼š</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>impl Command {
    pub fn from_frame(frame: Frame) -&gt; crate::Result&lt;Command&gt; {
        // ...
    }
}
<span class="boring">}</span></code></pre>
<p>è¿™æ ·ï¼Œæˆ‘ä»¬çš„ä¸»æµç¨‹å°±å˜æˆäº†ï¼š
<code>Bytes -&gt; Frame -&gt; Command -&gt; Execute -&gt; Frame -&gt; Bytes</code></p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-49-å­˜å‚¨å¼•æ“å®ç°"><a class="header" href="#day-49-å­˜å‚¨å¼•æ“å®ç°">Day 49: å­˜å‚¨å¼•æ“å®ç°</a></h1>
<p>ä»Šå¤©æˆ‘ä»¬å°†å®ç° Mini-Redis çš„æ ¸å¿ƒï¼šå­˜å‚¨æ•°æ®çš„éƒ¨åˆ†ã€‚</p>
<h2 id="1-å¹¶å‘ä¸å…±äº«çŠ¶æ€"><a class="header" href="#1-å¹¶å‘ä¸å…±äº«çŠ¶æ€">1. å¹¶å‘ä¸å…±äº«çŠ¶æ€</a></h2>
<p>ç”±äºæˆ‘ä»¬çš„æœåŠ¡å™¨æ˜¯å¤šçº¿ç¨‹ï¼ˆé€šè¿‡ Tokio å¼‚æ­¥ä»»åŠ¡ï¼‰å¹¶å‘å¤„ç†è¯·æ±‚çš„ï¼Œå› æ­¤å­˜å‚¨å±‚å¿…é¡»æ˜¯<strong>çº¿ç¨‹å®‰å…¨</strong>çš„ã€‚</p>
<p>æœ€ç®€å•çš„æ–¹å¼æ˜¯ä½¿ç”¨ <code>std::collections::HashMap</code> é…åˆ <code>std::sync::Mutex</code>ã€‚ä¸ºäº†åœ¨å¤šä¸ªä»»åŠ¡é—´å…±äº«ï¼Œæˆ‘ä»¬éœ€è¦å°†å…¶åŒ…è£¹åœ¨ <code>std::sync::Arc</code> ä¸­ã€‚</p>
<h2 id="2-å®šä¹‰-db-ç»“æ„ä½“"><a class="header" href="#2-å®šä¹‰-db-ç»“æ„ä½“">2. å®šä¹‰ Db ç»“æ„ä½“</a></h2>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use std::collections::HashMap;
use std::sync::{Arc, Mutex};
use bytes::Bytes;

#[derive(Clone)]
pub struct Db {
    shared: Arc&lt;Shared&gt;,
}

struct Shared {
    state: Mutex&lt;State&gt;,
}

struct State {
    entries: HashMap&lt;String, Bytes&gt;,
}
<span class="boring">}</span></code></pre>
<p>è¿™é‡Œæˆ‘ä»¬å¤šåŒ…è£¹äº†ä¸€å±‚ <code>Shared</code> å’Œ <code>State</code>ï¼Œè™½ç„¶å¯¹äºç›®å‰çš„éœ€æ±‚çœ‹èµ·æ¥æœ‰ç‚¹å†—ä½™ï¼Œä½†è¿™æ˜¯ä¸ºäº†åç»­æ‰©å±•ï¼ˆä¾‹å¦‚æ·»åŠ  Pub/Sub åŠŸèƒ½ï¼‰åšå‡†å¤‡ã€‚</p>
<h2 id="3-å®ç°æ“ä½œæ–¹æ³•"><a class="header" href="#3-å®ç°æ“ä½œæ–¹æ³•">3. å®ç°æ“ä½œæ–¹æ³•</a></h2>
<p>æˆ‘ä»¬éœ€è¦å®ç° <code>new</code>, <code>get</code>, <code>set</code> ç­‰åŸºæœ¬æ“ä½œï¼š</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>impl Db {
    pub fn new() -&gt; Db {
        let shared = Arc::new(Shared {
            state: Mutex::new(State {
                entries: HashMap::new(),
            }),
        });
        Db { shared }
    }

    pub fn get(&amp;self, key: &amp;str) -&gt; Option&lt;Bytes&gt; {
        let state = self.shared.state.lock().unwrap();
        state.entries.get(key).cloned()
    }

    pub fn set(&amp;self, key: String, value: Bytes) {
        let mut state = self.shared.state.lock().unwrap();
        state.entries.insert(key, value);
    }
}
<span class="boring">}</span></code></pre>
<p>æ³¨æ„ï¼šåœ¨ Tokio ä¸­ä½¿ç”¨ <code>std::sync::Mutex</code> æ˜¯å¯ä»¥çš„ï¼Œåªè¦ä¸´ç•ŒåŒºï¼ˆé”æŒæœ‰çš„æ—¶é—´ï¼‰éå¸¸çŸ­ï¼Œä¸”ä¸è·¨è¶Š <code>.await</code> è°ƒç”¨ã€‚å¯¹äºç®€å•çš„ HashMap æ“ä½œï¼Œè¿™æ˜¯æ»¡è¶³è¦æ±‚çš„ï¼Œä¸”æ¯” <code>tokio::sync::Mutex</code> æ€§èƒ½æ›´å¥½ã€‚</p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-50-å¼‚æ­¥ç½‘ç»œå±‚-tokio"><a class="header" href="#day-50-å¼‚æ­¥ç½‘ç»œå±‚-tokio">Day 50: å¼‚æ­¥ç½‘ç»œå±‚ (Tokio)</a></h1>
<p>ä»Šå¤©æˆ‘ä»¬å°†å®Œæˆ Mini-Redis çš„æœ€åä¸€å—æ‹¼å›¾ï¼šç½‘ç»œå±‚ã€‚æˆ‘ä»¬å°†æŠŠä¹‹å‰çš„ç»„ä»¶ï¼ˆåè®®è§£æã€å‘½ä»¤å¤„ç†ã€å­˜å‚¨å¼•æ“ï¼‰æ•´åˆåˆ°ä¸€ä¸ªåŸºäº Tokio çš„å¼‚æ­¥æœåŠ¡å™¨ä¸­ã€‚</p>
<h2 id="1-connection-æŠ½è±¡"><a class="header" href="#1-connection-æŠ½è±¡">1. Connection æŠ½è±¡</a></h2>
<p>ç›´æ¥æ“ä½œ <code>TcpStream</code> è¿›è¡Œå­—èŠ‚è¯»å†™æ¯”è¾ƒç¹çã€‚æˆ‘ä»¬å°è£…ä¸€ä¸ª <code>Connection</code> ç»“æ„ä½“ï¼Œå®ƒè´Ÿè´£ï¼š</p>
<ol>
<li>ç»´æŠ¤åº•å±‚çš„ <code>TcpStream</code>ã€‚</li>
<li>ç»´æŠ¤è¯»å†™ç¼“å†²åŒº (<code>BytesMut</code> / <code>BufWriter</code>)ã€‚</li>
<li>æä¾›é¢å‘ Frame çš„ API: <code>read_frame()</code> å’Œ <code>write_frame(frame)</code>ã€‚</li>
</ol>
<h2 id="2-server-ä¸»å¾ªç¯"><a class="header" href="#2-server-ä¸»å¾ªç¯">2. Server ä¸»å¾ªç¯</a></h2>
<p>æœåŠ¡å™¨çš„é€»è¾‘éå¸¸æ ‡å‡†ï¼š</p>
<ol>
<li><code>TcpListener</code> ç›‘å¬ç«¯å£ã€‚</li>
<li>å¾ªç¯ <code>accept()</code> è·å–è¿æ¥ã€‚</li>
<li>ä¸ºæ¯ä¸ªè¿æ¥ <code>tokio::spawn</code> ä¸€ä¸ªæ–°çš„å¼‚æ­¥ä»»åŠ¡ã€‚</li>
</ol>
<h2 id="3-handler-é€»è¾‘"><a class="header" href="#3-handler-é€»è¾‘">3. Handler é€»è¾‘</a></h2>
<p>åœ¨æ¯ä¸ªä»»åŠ¡ä¸­ï¼š</p>
<ol>
<li>å¾ªç¯è°ƒç”¨ <code>connection.read_frame()</code>ã€‚</li>
<li>å¦‚æœæœ‰æ•°æ®ï¼Œè°ƒç”¨ <code>Command::from_frame()</code> è§£æä¸ºå‘½ä»¤ã€‚</li>
<li>è°ƒç”¨ <code>command.apply(&amp;db)</code> æ‰§è¡Œå‘½ä»¤ã€‚</li>
<li>å°†ç»“æœå†™å…¥ <code>connection.write_frame()</code>ã€‚</li>
</ol>
<h2 id="4-è¿è¡ŒéªŒè¯"><a class="header" href="#4-è¿è¡ŒéªŒè¯">4. è¿è¡ŒéªŒè¯</a></h2>
<p>å®Œæˆåï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨çœŸæ­£çš„ Redis å®¢æˆ·ç«¯ï¼ˆå¦‚ <code>redis-cli</code>ï¼‰æ¥æµ‹è¯•æˆ‘ä»¬çš„æœåŠ¡å™¨äº†ï¼</p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-51-å¹¶å‘æ§åˆ¶ä¸é”"><a class="header" href="#day-51-å¹¶å‘æ§åˆ¶ä¸é”">Day 51: å¹¶å‘æ§åˆ¶ä¸é”</a></h1>
<p>åœ¨ Day 50 ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº† <code>Mutex</code> æ¥ä¿æŠ¤ HashMapã€‚è¿™æ„å‘³ç€åœ¨ä»»ä½•æ—¶åˆ»ï¼Œåªèƒ½æœ‰ä¸€ä¸ªä»»åŠ¡è®¿é—®æ•°æ®åº“ï¼Œæ— è®ºæ˜¯è¯»è¿˜æ˜¯å†™ã€‚å¯¹äºè¯»å¤šå†™å°‘çš„åœºæ™¯ï¼ˆå¦‚ç¼“å­˜ï¼‰ï¼Œè¿™ä¼šæˆä¸ºä¸¥é‡çš„æ€§èƒ½ç“¶é¢ˆã€‚</p>
<p>ä»Šå¤©æˆ‘ä»¬å°†ä¼˜åŒ–å¹¶å‘æ§åˆ¶ï¼Œä½¿ç”¨ <strong>è¯»å†™é” (<code>RwLock</code>)</strong> æ¥æ›¿ä»£äº’æ–¥é”ã€‚</p>
<h2 id="1-mutex-vs-rwlock"><a class="header" href="#1-mutex-vs-rwlock">1. Mutex vs RwLock</a></h2>
<ul>
<li><strong>Mutex (äº’æ–¥é”)</strong>: ä¸€æ¬¡åªå…è®¸ä¸€ä¸ªçº¿ç¨‹æŒæœ‰é”ã€‚</li>
<li><strong>RwLock (è¯»å†™é”)</strong>:
<ul>
<li>å…è®¸å¤šä¸ª<strong>è¯»è€…</strong>åŒæ—¶æŒæœ‰è¯»é”ã€‚</li>
<li>åªå…è®¸ä¸€ä¸ª<strong>å†™è€…</strong>æŒæœ‰å†™é”ã€‚</li>
<li>è¯»é”ä¸å†™é”äº’æ–¥ã€‚</li>
</ul>
</li>
</ul>
<h2 id="2-é€‰æ‹©åˆé€‚çš„-rwlock"><a class="header" href="#2-é€‰æ‹©åˆé€‚çš„-rwlock">2. é€‰æ‹©åˆé€‚çš„ RwLock</a></h2>
<p>Rust æ ‡å‡†åº“æä¾›äº† <code>std::sync::RwLock</code>ï¼ŒTokio æä¾›äº† <code>tokio::sync::RwLock</code>ã€‚</p>
<ul>
<li>å¦‚æœä¸´ç•ŒåŒºéå¸¸çŸ­ä¸”éå¼‚æ­¥ï¼ˆå¦‚å•çº¯çš„ HashMap æŸ¥æ‰¾ï¼‰ï¼Œæ¨èä½¿ç”¨ <code>std::sync::RwLock</code> (æˆ–è€…æ€§èƒ½æ›´å¥½çš„ <code>parking_lot::RwLock</code>)ã€‚å› ä¸ºå®ƒå¼€é”€å°ï¼Œä¸”ä¸ä¼šé˜»å¡ Tokio è°ƒåº¦å™¨å¤ªä¹…ã€‚</li>
<li>å¦‚æœä¸´ç•ŒåŒºåŒ…å« <code>.await</code> ç‚¹ï¼ˆå¦‚ IO æ“ä½œï¼‰ï¼Œ<strong>å¿…é¡»</strong>ä½¿ç”¨ <code>tokio::sync::RwLock</code>ã€‚</li>
</ul>
<p>ç”±äºæˆ‘ä»¬çš„ <code>Db</code> æ“ä½œï¼ˆ<code>get</code>/<code>set</code>ï¼‰ä»…ä»…æ˜¯å†…å­˜æ“ä½œï¼Œä¸åŒ…å« IOï¼Œå› æ­¤æˆ‘ä»¬é€‰æ‹©åŒæ­¥çš„ <code>std::sync::RwLock</code>ã€‚</p>
<h2 id="3-å®ç°"><a class="header" href="#3-å®ç°">3. å®ç°</a></h2>
<p>ä¿®æ”¹ <code>src/db.rs</code>:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use std::sync::{Arc, RwLock};

struct Shared {
    state: RwLock&lt;State&gt;,
}

// ...

impl Db {
    pub fn get(&amp;self, key: &amp;str) -&gt; Option&lt;Bytes&gt; {
        // è·å–è¯»é”
        let state = self.shared.state.read().unwrap();
        state.entries.get(key).cloned()
    }

    pub fn set(&amp;self, key: String, value: Bytes) {
        // è·å–å†™é”
        let mut state = self.shared.state.write().unwrap();
        state.entries.insert(key, value);
    }
}
<span class="boring">}</span></code></pre>
<h2 id="4-è¿›ä¸€æ­¥ä¼˜åŒ–åˆ†ç‰‡-sharding"><a class="header" href="#4-è¿›ä¸€æ­¥ä¼˜åŒ–åˆ†ç‰‡-sharding">4. è¿›ä¸€æ­¥ä¼˜åŒ–ï¼šåˆ†ç‰‡ (Sharding)</a></h2>
<p>è™½ç„¶ <code>RwLock</code> è§£å†³äº†è¯»å¹¶å‘é—®é¢˜ï¼Œä½†åœ¨é«˜å¹¶å‘å†™å…¥æ—¶ï¼Œå•ä¸€çš„é”ä»ç„¶æ˜¯çƒ­ç‚¹ã€‚
ä¸€ç§å¸¸è§çš„ä¼˜åŒ–æ˜¯<strong>åˆ†ç‰‡</strong> (Sharding)ï¼šå°†æ•°æ®åˆ†æ•£åˆ°å¤šä¸ª HashMap ä¸­ï¼Œæ¯ä¸ª HashMap æœ‰è‡ªå·±çš„é”ã€‚é€šè¿‡ Hash(key) % N æ¥å†³å®šä½¿ç”¨å“ªä¸ªåˆ†ç‰‡ã€‚
Rust ç¤¾åŒºæœ‰ä¸€ä¸ªä¼˜ç§€çš„åº“ <strong><code>dashmap</code></strong> å®ç°äº†è¿™ç§å¹¶å‘ Hash Mapï¼Œæˆ‘ä»¬åœ¨åç»­å¯ä»¥æ¢ç´¢ä½¿ç”¨ã€‚</p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-52-æŒä¹…åŒ–æœºåˆ¶-aof"><a class="header" href="#day-52-æŒä¹…åŒ–æœºåˆ¶-aof">Day 52: æŒä¹…åŒ–æœºåˆ¶ (AOF)</a></h1>
<p>å†…å­˜æ•°æ®åº“è™½ç„¶é€Ÿåº¦å¿«ï¼Œä½†ä¸€æ—¦é‡å¯æ•°æ®å°±ä¼šä¸¢å¤±ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦å¼•å…¥<strong>æŒä¹…åŒ–</strong>æœºåˆ¶ã€‚</p>
<p>Redis ä¸»è¦æ”¯æŒä¸¤ç§æŒä¹…åŒ–æ–¹å¼ï¼š</p>
<ol>
<li><strong>RDB (Redis Database)</strong>: å®šæœŸå°†å†…å­˜å¿«ç…§ä¿å­˜åˆ°ç£ç›˜ã€‚</li>
<li><strong>AOF (Append Only File)</strong>: è®°å½•æœåŠ¡å™¨æ¥æ”¶åˆ°çš„æ¯ä¸€ä¸ªå†™å‘½ä»¤ã€‚é‡å¯æ—¶é‡æ–°æ‰§è¡Œè¿™äº›å‘½ä»¤å³å¯æ¢å¤æ•°æ®ã€‚</li>
</ol>
<p>è€ƒè™‘åˆ°å®ç°çš„å¤æ‚åº¦ä¸æ•™å­¦ç›®çš„ï¼Œæˆ‘ä»¬å°†å®ç°ä¸€ä¸ªç®€åŒ–ç‰ˆçš„ <strong>AOF</strong> æŒä¹…åŒ–ã€‚</p>
<h2 id="1-aof-åŸç†"><a class="header" href="#1-aof-åŸç†">1. AOF åŸç†</a></h2>
<p>AOF çš„æ ¸å¿ƒé€»è¾‘éå¸¸ç®€å•ï¼š</p>
<ol>
<li>å½“æœåŠ¡å™¨æ‰§è¡Œä¸€ä¸ªå†™å‘½ä»¤ï¼ˆå¦‚ <code>SET</code>ï¼‰æˆåŠŸåã€‚</li>
<li>å°†è¯¥å‘½ä»¤ä»¥ RESP åè®®æ ¼å¼è¿½åŠ å†™å…¥åˆ° AOF æ–‡ä»¶ä¸­ã€‚</li>
<li>æœåŠ¡å™¨å¯åŠ¨æ—¶ï¼Œè¯»å– AOF æ–‡ä»¶ï¼Œé€æ¡å›æ”¾å‘½ä»¤ã€‚</li>
</ol>
<h2 id="2-åºåˆ—åŒ–å‘½ä»¤"><a class="header" href="#2-åºåˆ—åŒ–å‘½ä»¤">2. åºåˆ—åŒ–å‘½ä»¤</a></h2>
<p>æˆ‘ä»¬éœ€è¦å°† <code>Command</code> ç»“æ„ä½“è½¬æ¢å› RESP å­—èŠ‚æµã€‚è¿™å…¶å®å°±æ˜¯è§£æçš„é€†è¿‡ç¨‹ã€‚</p>
<p>ä¾‹å¦‚ <code>SET key value</code> éœ€è¦è½¬æ¢ä¸ºï¼š
<code>*3\r\n$3\r\nSET\r\n$3\r\nkey\r\n$5\r\nvalue\r\n</code></p>
<h2 id="3-å¼‚æ­¥å†™å…¥"><a class="header" href="#3-å¼‚æ­¥å†™å…¥">3. å¼‚æ­¥å†™å…¥</a></h2>
<p>ä¸ºäº†ä¸é˜»å¡ä¸»çº¿ç¨‹ï¼Œæ–‡ä»¶å†™å…¥é€šå¸¸ä¹Ÿåº”è¯¥æ˜¯å¼‚æ­¥çš„ï¼Œæˆ–è€…ä½¿ç”¨ç¼“å†²ã€‚åœ¨ Tokio ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>tokio::fs::File</code> å’Œ <code>BufWriter</code>ã€‚</p>
<p>ä½†ä¸ºäº†ç®€åŒ–ï¼Œæˆ‘ä»¬æš‚æ—¶å¯ä»¥ä½¿ç”¨åŒæ­¥çš„ <code>std::fs</code> é…åˆ <code>BufWriter</code> åœ¨ç‹¬ç«‹çš„çº¿ç¨‹æˆ–è€…åœ¨è¯¥æ•™å­¦é˜¶æ®µæš‚ä¸”å®¹å¿å°‘é‡çš„é˜»å¡ï¼ˆæˆ–è€…ä½¿ç”¨ <code>tokio::fs</code>ï¼‰ã€‚è€ƒè™‘åˆ°è¿™æ˜¯å¼‚æ­¥é¡¹ç›®ï¼Œæˆ‘ä»¬å°½é‡ä½¿ç”¨ <code>tokio::fs</code>ã€‚</p>
<p>ä¸è¿‡ï¼ŒAOF å†™å…¥é€šå¸¸éœ€è¦ä¿è¯é¡ºåºï¼Œæœ€ç®€å•çš„åšæ³•æ˜¯åœ¨å¤„ç†å®Œå‘½ä»¤åï¼Œawait å†™å…¥æ“ä½œã€‚</p>
<h2 id="4-æ¶æ„è°ƒæ•´"><a class="header" href="#4-æ¶æ„è°ƒæ•´">4. æ¶æ„è°ƒæ•´</a></h2>
<p>æˆ‘ä»¬éœ€è¦åœ¨ <code>process</code> å¤„ç†å¾ªç¯ä¸­ï¼Œå¼•å…¥ <code>Aof</code> å¤„ç†å™¨ã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>struct Aof {
    file: File, // tokio::fs::File
}
<span class="boring">}</span></code></pre>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-53-å‘å¸ƒè®¢é˜…-pubsub"><a class="header" href="#day-53-å‘å¸ƒè®¢é˜…-pubsub">Day 53: å‘å¸ƒè®¢é˜… (Pub/Sub)</a></h1>
<p>Redis çš„å‘å¸ƒè®¢é˜… (Pub/Sub) æ˜¯ä¸€ç§æ¶ˆæ¯é€šä¿¡æ¨¡å¼ï¼šå‘é€è€… (Publisher) å‘é€æ¶ˆæ¯ï¼Œè®¢é˜…è€… (Subscriber) æ¥æ”¶æ¶ˆæ¯ï¼Œå®ƒä»¬ä¹‹é—´ä¸éœ€è¦ç›´æ¥å»ºç«‹è”ç³»ã€‚</p>
<h2 id="1-æ ¸å¿ƒæ¦‚å¿µ"><a class="header" href="#1-æ ¸å¿ƒæ¦‚å¿µ">1. æ ¸å¿ƒæ¦‚å¿µ</a></h2>
<ul>
<li><strong>Channel (é¢‘é“)</strong>: æ¶ˆæ¯ä¼ é€’çš„è½½ä½“ã€‚</li>
<li><strong>Publish (å‘å¸ƒ)</strong>: å‘æŒ‡å®šé¢‘é“å‘é€æ¶ˆæ¯ã€‚</li>
<li><strong>Subscribe (è®¢é˜…)</strong>: è®¢é˜…ä¸€ä¸ªæˆ–å¤šä¸ªé¢‘é“ï¼Œæ¥æ”¶å‘å¾€è¯¥é¢‘é“çš„æ¶ˆæ¯ã€‚</li>
</ul>
<h2 id="2-å®ç°æ€è·¯"><a class="header" href="#2-å®ç°æ€è·¯">2. å®ç°æ€è·¯</a></h2>
<p>åœ¨ Mini-Redis ä¸­ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ <code>Db</code> ä¸­ç»´æŠ¤é¢‘é“çš„è®¢é˜…å…³ç³»ã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use tokio::sync::broadcast;

struct State {
    entries: HashMap&lt;String, Bytes&gt;,
    /// Map channel name -&gt; broadcast sender
    pub_sub: HashMap&lt;String, broadcast::Sender&lt;Bytes&gt;&gt;,
}
<span class="boring">}</span></code></pre>
<p>æˆ‘ä»¬ä½¿ç”¨ <code>tokio::sync::broadcast</code> é€šé“ã€‚è¿™æ˜¯ä¸€ä¸ªå¤šç”Ÿäº§è€…ã€å¤šæ¶ˆè´¹è€…çš„é€šé“ï¼Œéå¸¸é€‚åˆå®ç° Pub/Subã€‚å½“æœ‰å®¢æˆ·ç«¯è®¢é˜…æŸä¸ªé¢‘é“æ—¶ï¼Œæˆ‘ä»¬å¦‚æœè¯¥é¢‘é“ä¸å­˜åœ¨ï¼Œå°±åˆ›å»ºä¸€ä¸ªæ–°çš„ broadcast channelã€‚</p>
<h2 id="3-å‘½ä»¤å¤„ç†"><a class="header" href="#3-å‘½ä»¤å¤„ç†">3. å‘½ä»¤å¤„ç†</a></h2>
<ul>
<li>
<p><strong>PUBLISH channel message</strong>:</p>
<ol>
<li>æŸ¥æ‰¾ <code>pub_sub</code> Map ä¸­æ˜¯å¦å­˜åœ¨è¯¥ <code>channel</code>ã€‚</li>
<li>å¦‚æœæœ‰ï¼Œå‘å…¶ <code>Sender</code> å‘é€ <code>message</code>ã€‚</li>
<li>è¿”å›æ¥æ”¶åˆ°æ¶ˆæ¯çš„è®¢é˜…è€…æ•°é‡ã€‚</li>
</ol>
</li>
<li>
<p><strong>SUBSCRIBE channel</strong>:</p>
<ol>
<li>æŸ¥æ‰¾æˆ–åˆ›å»º <code>channel</code> å¯¹åº”çš„ <code>Sender</code>ã€‚</li>
<li>è°ƒç”¨ <code>sender.subscribe()</code> è·å– <code>Receiver</code>ã€‚</li>
<li>è¿›å…¥<strong>è®¢é˜…æ¨¡å¼</strong>ï¼šä¸å†å¤„ç†æ™®é€šå‘½ä»¤ï¼Œè€Œæ˜¯å¾ªç¯è¯»å– <code>Receiver</code> ä¸­çš„æ¶ˆæ¯ï¼Œå¹¶å°†å…¶å°è£…ä¸º Frame å‘é€ç»™å®¢æˆ·ç«¯ã€‚</li>
</ol>
</li>
</ul>
<h2 id="4-é™åˆ¶"><a class="header" href="#4-é™åˆ¶">4. é™åˆ¶</a></h2>
<p>ä¸ºäº†ç®€åŒ–ï¼Œä»Šå¤©çš„å®ç°ä¸­ï¼Œä¸€æ—¦å®¢æˆ·ç«¯è¿›å…¥è®¢é˜…æ¨¡å¼ï¼Œå°±åªèƒ½æ¥æ”¶è®¢é˜…çš„æ¶ˆæ¯ï¼Œæ— æ³•å†é€€å‡ºï¼ˆCtrl+C æ–­å¼€è¿æ¥é™¤å¤–ï¼‰ï¼Œä¹Ÿæ— æ³•åŠ¨æ€å¢åŠ è®¢é˜…é¢‘é“ï¼ˆæ ‡å‡†çš„ Redis æ˜¯æ”¯æŒçš„ï¼‰ã€‚</p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-54-å®¢æˆ·ç«¯-sdk-å®ç°"><a class="header" href="#day-54-å®¢æˆ·ç«¯-sdk-å®ç°">Day 54: å®¢æˆ·ç«¯ SDK å®ç°</a></h1>
<p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»æ„å»ºäº†ä¸€ä¸ªåŠŸèƒ½ç›¸å¯¹å®Œå–„çš„ Mini-Redis æœåŠ¡å™¨ã€‚ç°åœ¨ï¼Œä¸ºäº†è®©å¼€å‘è€…æ›´æ–¹ä¾¿åœ°ä½¿ç”¨å®ƒï¼Œæˆ‘ä»¬éœ€è¦æä¾›ä¸€ä¸ª <strong>Client SDK</strong>ã€‚</p>
<h2 id="1-ç›®æ ‡"><a class="header" href="#1-ç›®æ ‡">1. ç›®æ ‡</a></h2>
<p>å°è£…åº•å±‚çš„ TCP è¿æ¥ã€Frame ç¼–è§£ç ï¼Œæä¾›ç¬¦åˆ Rust ä¹ æƒ¯çš„é«˜çº§ APIã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// ç›®æ ‡ API
let mut client = Client::connect("127.0.0.1:6379").await?;
client.set("hello", "world".into()).await?;
let val = client.get("hello").await?;
<span class="boring">}</span></code></pre>
<h2 id="2-ç»“æ„è®¾è®¡"><a class="header" href="#2-ç»“æ„è®¾è®¡">2. ç»“æ„è®¾è®¡</a></h2>
<ul>
<li><code>Client</code>: æ ¸å¿ƒç»“æ„ä½“ï¼ŒæŒæœ‰ä¸€ä¸ª <code>Connection</code>ã€‚</li>
<li><code>Subscriber</code>: ä¸“é—¨ç”¨äº Pub/Sub æ¨¡å¼çš„ç»“æ„ä½“ã€‚</li>
</ul>
<h2 id="3-å®ç°-1"><a class="header" href="#3-å®ç°-1">3. å®ç°</a></h2>
<p>æˆ‘ä»¬å°†é‡ç”¨ä¹‹å‰å®šä¹‰çš„ <code>Connection</code> å’Œ <code>Frame</code>ï¼Œå¹¶æš´éœ²ç»™å¤–éƒ¨ï¼ˆåœ¨ <code>lib.rs</code> ä¸­ï¼‰ã€‚</p>
<p>åœ¨ <code>src/client.rs</code> ä¸­ï¼š</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct Client {
    connection: Connection,
}

impl Client {
    pub async fn connect(addr: &amp;str) -&gt; Result&lt;Client&gt; { ... }
    pub async fn get(&amp;mut self, key: &amp;str) -&gt; Result&lt;Option&lt;Bytes&gt;&gt; { ... }
    pub async fn set(&amp;mut self, key: &amp;str, value: Bytes) -&gt; Result&lt;()&gt; { ... }
    // ...
}
<span class="boring">}</span></code></pre>
<h2 id="4-ç¤ºä¾‹"><a class="header" href="#4-ç¤ºä¾‹">4. ç¤ºä¾‹</a></h2>
<p>æä¾› <code>examples/hello_world.rs</code> æ¥å±•ç¤ºç”¨æ³•ã€‚</p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-55-æ€§èƒ½åŸºå‡†æµ‹è¯•"><a class="header" href="#day-55-æ€§èƒ½åŸºå‡†æµ‹è¯•">Day 55: æ€§èƒ½åŸºå‡†æµ‹è¯•</a></h1>
<p>åœ¨è½¯ä»¶å¼€å‘ä¸­ï¼Œæ€§èƒ½ä¼˜åŒ–ç¦»ä¸å¼€<strong>åŸºå‡†æµ‹è¯• (Benchmarking)</strong>ã€‚Rust ç¤¾åŒºæœ€æµè¡Œçš„åŸºå‡†æµ‹è¯•åº“æ˜¯ <strong>Criterion.rs</strong>ã€‚</p>
<h2 id="1-criterion-ç®€ä»‹"><a class="header" href="#1-criterion-ç®€ä»‹">1. Criterion ç®€ä»‹</a></h2>
<p>Criterion.rs æä¾›äº†ç»Ÿè®¡é©±åŠ¨çš„åŸºå‡†æµ‹è¯•ï¼Œèƒ½å¤Ÿè‡ªåŠ¨å¤„ç†é¢„çƒ­ã€å¤šæ¬¡è¿­ä»£ã€ç»Ÿè®¡åˆ†æï¼Œå¹¶ç”Ÿæˆè¯¦ç»†çš„ HTML æŠ¥å‘Šã€‚</p>
<h2 id="2-é…ç½®-benchmarking"><a class="header" href="#2-é…ç½®-benchmarking">2. é…ç½® Benchmarking</a></h2>
<p>é¦–å…ˆï¼Œåœ¨ <code>Cargo.toml</code> ä¸­æ·»åŠ ä¾èµ–ï¼Œå¹¶é…ç½® <code>[[bench]]</code>ï¼š</p>
<pre><code class="language-toml">[dev-dependencies]
criterion = "0.5"

[[bench]]
name = "my_benchmark"
harness = false
</code></pre>
<h2 id="3-ç¼–å†™-benchmark"><a class="header" href="#3-ç¼–å†™-benchmark">3. ç¼–å†™ Benchmark</a></h2>
<p>æˆ‘ä»¬å°†åœ¨ <code>benches/my_benchmark.rs</code> ä¸­ç¼–å†™æµ‹è¯•ä»£ç ã€‚ä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘ä»¬ç›´æ¥æµ‹è¯•æ ¸å¿ƒç»„ä»¶ï¼ˆå¦‚ RESP è§£ææˆ–å†…å­˜æ•°æ®åº“æ“ä½œï¼‰ï¼Œé¿å…ç½‘ç»œ I/O çš„å¹²æ‰°ï¼Œä»è€Œè·å¾—æ›´çº¯ç²¹çš„ä»£ç æ€§èƒ½æ•°æ®ã€‚</p>
<h3 id="æµ‹è¯•ç”¨ä¾‹frame-è§£æ"><a class="header" href="#æµ‹è¯•ç”¨ä¾‹frame-è§£æ">æµ‹è¯•ç”¨ä¾‹ï¼šFrame è§£æ</a></h3>
<p>æˆ‘ä»¬å°†æµ‹è¯• <code>Frame::parse</code> åœ¨å¤„ç†å¤§é‡æ•°æ®æ—¶çš„æ€§èƒ½ã€‚</p>
<h3 id="æµ‹è¯•ç”¨ä¾‹db-æ“ä½œ"><a class="header" href="#æµ‹è¯•ç”¨ä¾‹db-æ“ä½œ">æµ‹è¯•ç”¨ä¾‹ï¼šDB æ“ä½œ</a></h3>
<p>æˆ‘ä»¬å°†æµ‹è¯• <code>Db::set</code> å’Œ <code>Db::get</code> åœ¨é«˜å¹¶å‘ä¸‹çš„ååé‡ï¼ˆè™½ç„¶ Criterion ä¸»è¦æµ‹è¯•å»¶è¿Ÿï¼Œä½†æˆ‘ä»¬å¯ä»¥é€šè¿‡è¿­ä»£æ¬¡æ•°ä¼°ç®—ï¼‰ã€‚</p>
<h2 id="4-è¿è¡Œæµ‹è¯•"><a class="header" href="#4-è¿è¡Œæµ‹è¯•">4. è¿è¡Œæµ‹è¯•</a></h2>
<p>ä½¿ç”¨ <code>cargo bench</code> å‘½ä»¤è¿è¡Œã€‚</p>
<pre><code class="language-bash">cargo bench
</code></pre>
<p>è¿è¡Œå®Œæˆåï¼Œå¯ä»¥åœ¨ <code>target/criterion/report/index.html</code> æŸ¥çœ‹å¯è§†åŒ–çš„æŠ¥å‘Šã€‚</p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-56-é›†ç¾¤æ¨¡å¼æ¢ç´¢"><a class="header" href="#day-56-é›†ç¾¤æ¨¡å¼æ¢ç´¢">Day 56: é›†ç¾¤æ¨¡å¼æ¢ç´¢</a></h1>
<p>éšç€æ•°æ®é‡å’Œå¹¶å‘é‡çš„å¢åŠ ï¼Œå•æœº Redis å¾ˆéš¾æ»¡è¶³éœ€æ±‚ã€‚ä¸ºäº†è§£å†³æ‰©å±•æ€§ï¼ˆScalabilityï¼‰å’Œé«˜å¯ç”¨æ€§ï¼ˆHigh Availabilityï¼‰é—®é¢˜ï¼Œé€šå¸¸ä¼šé‡‡ç”¨**é›†ç¾¤ï¼ˆClusterï¼‰**æ¶æ„ã€‚</p>
<h2 id="1-é›†ç¾¤æ¶æ„æ¦‚è¿°"><a class="header" href="#1-é›†ç¾¤æ¶æ„æ¦‚è¿°">1. é›†ç¾¤æ¶æ„æ¦‚è¿°</a></h2>
<p>Redis é›†ç¾¤ä¸»è¦æœ‰ä¸¤ç§å¸¸è§çš„å®ç°æ–¹å¼ï¼š</p>
<ol>
<li>
<p><strong>å®¢æˆ·ç«¯åˆ†ç‰‡ (Client-side Sharding)</strong>:</p>
<ul>
<li>å®¢æˆ·ç«¯é€šè¿‡æŸç§ Hash ç®—æ³•ï¼ˆå¦‚ Consistent Hashing æˆ–ç®€å•çš„ Moduloï¼‰å†³å®šå°† Key å­˜å‚¨åœ¨å“ªä¸ªèŠ‚ç‚¹ã€‚</li>
<li>ä¼˜ç‚¹ï¼šå®ç°ç®€å•ï¼ŒæœåŠ¡ç«¯æ— çŠ¶æ€ï¼Œæ— ä¸­å¿ƒç»„ä»¶ã€‚</li>
<li>ç¼ºç‚¹ï¼šæ‰©å®¹ç¼©å®¹ï¼ˆReshardingï¼‰éº»çƒ¦ï¼Œå®¢æˆ·ç«¯éœ€è¦çŸ¥é“æ‰€æœ‰èŠ‚ç‚¹ä¿¡æ¯ã€‚</li>
</ul>
</li>
<li>
<p><strong>ä»£ç†åˆ†ç‰‡ (Proxy Sharding)</strong>:</p>
<ul>
<li>å¼•å…¥ä¸­é—´ä»¶ï¼ˆå¦‚ Twemproxy, Codisï¼‰ï¼Œå®¢æˆ·ç«¯åªè¿æ¥ Proxyï¼ŒProxy è´Ÿè´£è½¬å‘ã€‚</li>
<li>ä¼˜ç‚¹ï¼šå®¢æˆ·ç«¯é€æ˜ã€‚</li>
<li>ç¼ºç‚¹ï¼šå¤šäº†ä¸€è·³ç½‘ç»œå¼€é”€ï¼ŒProxy æˆä¸ºæ–°çš„ç“¶é¢ˆæˆ–å•ç‚¹ã€‚</li>
</ul>
</li>
<li>
<p><strong>Redis Cluster (æœåŠ¡ç«¯åˆ†ç‰‡)</strong>:</p>
<ul>
<li>Redis å®˜æ–¹é›†ç¾¤æ–¹æ¡ˆã€‚èŠ‚ç‚¹ä¹‹é—´é€šè¿‡ Gossip åè®®é€šä¿¡ï¼Œæ•°æ®åˆ†ç‰‡å­˜å‚¨åœ¨ 16384 ä¸ª Slot ä¸­ã€‚</li>
<li>æ”¯æŒè‡ªåŠ¨æ•…éšœè½¬ç§»å’Œé‡åˆ†ç‰‡ã€‚</li>
</ul>
</li>
</ol>
<h2 id="2-æœ¬èŠ‚ç›®æ ‡"><a class="header" href="#2-æœ¬èŠ‚ç›®æ ‡">2. æœ¬èŠ‚ç›®æ ‡</a></h2>
<p>åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†æ¢ç´¢æœ€åŸºç¡€çš„<strong>å®¢æˆ·ç«¯åˆ†ç‰‡</strong>æ¨¡å¼ã€‚æˆ‘ä»¬å°†æ”¹é€  <code>Client</code> SDKï¼Œä½¿å…¶èƒ½å¤Ÿç®¡ç†å¤šä¸ª Redis èŠ‚ç‚¹ï¼Œå¹¶æ ¹æ® Key å°†è¯·æ±‚è·¯ç”±åˆ°æ­£ç¡®çš„èŠ‚ç‚¹ã€‚</p>
<h2 id="3-å®ç°ç»†èŠ‚"><a class="header" href="#3-å®ç°ç»†èŠ‚">3. å®ç°ç»†èŠ‚</a></h2>
<h3 id="clusterclient"><a class="header" href="#clusterclient">ClusterClient</a></h3>
<p>æˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ–°çš„å®¢æˆ·ç«¯ç»“æ„ä½“ <code>ClusterClient</code>ï¼Œå®ƒç»´æŠ¤ä¸€ä¸ªèŠ‚ç‚¹åˆ—è¡¨ï¼š</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct ClusterClient {
    nodes: Vec&lt;String&gt;,
    clients: HashMap&lt;String, Arc&lt;Mutex&lt;Client&gt;&gt;&gt;,
}
<span class="boring">}</span></code></pre>
<h3 id="è·¯ç”±ç®—æ³•-routing"><a class="header" href="#è·¯ç”±ç®—æ³•-routing">è·¯ç”±ç®—æ³• (Routing)</a></h3>
<p>ä¸ºäº†æ¼”ç¤ºï¼Œæˆ‘ä»¬ä½¿ç”¨ Rust æ ‡å‡†åº“çš„ <code>DefaultHasher</code> å¯¹ Key è¿›è¡Œå“ˆå¸Œï¼Œç„¶åå¯¹èŠ‚ç‚¹æ•°é‡å–æ¨¡ï¼š</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let index = (hash(key) as usize) % self.nodes.len();
let target_node = &amp;self.nodes[index];
<span class="boring">}</span></code></pre>
<blockquote>
<p><strong>æ³¨æ„</strong>: åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œåº”è¯¥ä½¿ç”¨ä¸€è‡´æ€§å“ˆå¸Œï¼ˆConsistent Hashingï¼‰æˆ– Redis Cluster çš„ CRC16(key) % 16384 ç®—æ³•ï¼Œä»¥å‡å°‘èŠ‚ç‚¹å˜åŠ¨æ—¶çš„æ•°æ®è¿ç§»é‡ã€‚è¿™é‡Œä¸ºäº†æ¼”ç¤ºæ–¹ä¾¿ï¼Œä½¿ç”¨äº†ç®€å•çš„å–æ¨¡å“ˆå¸Œã€‚</p>
</blockquote>
<h2 id="4-è¿è¡Œæ¼”ç¤º"><a class="header" href="#4-è¿è¡Œæ¼”ç¤º">4. è¿è¡Œæ¼”ç¤º</a></h2>
<p>æˆ‘ä»¬æä¾›äº†ä¸€ä¸ªç¤ºä¾‹ <code>examples/cluster_demo.rs</code>ï¼Œå®ƒä¼šï¼š</p>
<ol>
<li>å¯åŠ¨ 3 ä¸ª Mini-Redis æœåŠ¡å™¨å®ä¾‹ï¼ˆç«¯å£ 9001, 9002, 9003ï¼‰ã€‚</li>
<li>åˆå§‹åŒ– <code>ClusterClient</code>ã€‚</li>
<li>å‘é›†ç¾¤å†™å…¥å¤šä¸ª Keyï¼Œå¹¶æ‰“å°æ¯ä¸ª Key è¢«è·¯ç”±åˆ°äº†å“ªä¸ªèŠ‚ç‚¹ã€‚</li>
<li>è¯»å–è¿™äº› Keyï¼ŒéªŒè¯æ•°æ®çš„ä¸€è‡´æ€§ã€‚</li>
</ol>
<p>è¿è¡Œå‘½ä»¤ï¼š</p>
<pre><code class="language-bash">cargo run --example cluster_demo
</code></pre>
<p>ä½ å°†çœ‹åˆ°ç±»ä¼¼ä»¥ä¸‹çš„è¾“å‡ºï¼Œæ˜¾ç¤º Key è¢«å‡åŒ€åˆ†å¸ƒåˆ°äº†ä¸åŒçš„èŠ‚ç‚¹ä¸Šï¼š</p>
<pre><code class="language-text">&gt;&gt;&gt; Cluster started with nodes: ["127.0.0.1:9001", "127.0.0.1:9002", "127.0.0.1:9003"]

&gt;&gt;&gt; Writing keys...
SET apple -&gt; value-apple (Target: 127.0.0.1:9003)
SET banana -&gt; value-banana (Target: 127.0.0.1:9001)
SET cherry -&gt; value-cherry (Target: 127.0.0.1:9002)
...
</code></pre>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-57-å“¨å…µä¸é«˜å¯ç”¨-sentinel"><a class="header" href="#day-57-å“¨å…µä¸é«˜å¯ç”¨-sentinel">Day 57: å“¨å…µä¸é«˜å¯ç”¨ (Sentinel)</a></h1>
<p>åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œ<strong>é«˜å¯ç”¨ (High Availability, HA)</strong> æ˜¯æ ¸å¿ƒéœ€æ±‚ä¹‹ä¸€ã€‚Redis Sentinel æ˜¯å®˜æ–¹çš„é«˜å¯ç”¨è§£å†³æ–¹æ¡ˆï¼Œå®ƒè´Ÿè´£ç›‘æ§ã€é€šçŸ¥å’Œè‡ªåŠ¨æ•…éšœè½¬ç§»ã€‚</p>
<h2 id="1-sentinel-æ ¸å¿ƒæ¦‚å¿µ"><a class="header" href="#1-sentinel-æ ¸å¿ƒæ¦‚å¿µ">1. Sentinel æ ¸å¿ƒæ¦‚å¿µ</a></h2>
<p>Sentinel ä¸»è¦åŒ…å«ä»¥ä¸‹ä¸‰ä¸ªåŠŸèƒ½ï¼š</p>
<ol>
<li><strong>ç›‘æ§ (Monitoring)</strong>: ä¸æ–­æ£€æŸ¥ Master å’Œ Replica æ˜¯å¦æ­£å¸¸è¿è¡Œã€‚</li>
<li><strong>é€šçŸ¥ (Notification)</strong>: å½“è¢«ç›‘æ§çš„ Redis å®ä¾‹å‡ºé—®é¢˜æ—¶ï¼Œé€šè¿‡ API é€šçŸ¥ç®¡ç†å‘˜æˆ–å…¶ä»–åº”ç”¨ç¨‹åºã€‚</li>
<li><strong>è‡ªåŠ¨æ•…éšœè½¬ç§» (Automatic Failover)</strong>: å¦‚æœ Master æŒ‚äº†ï¼ŒSentinel ä¼šå°†ä¸€ä¸ª Replica æå‡ä¸ºæ–°çš„ Masterï¼Œå¹¶é€šçŸ¥å…¶ä»– Replica å’Œå®¢æˆ·ç«¯ä½¿ç”¨æ–°çš„ Masterã€‚</li>
</ol>
<h2 id="2-æœ¬èŠ‚ç›®æ ‡-1"><a class="header" href="#2-æœ¬èŠ‚ç›®æ ‡-1">2. æœ¬èŠ‚ç›®æ ‡</a></h2>
<p>åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å®ç°äº†ä¸€ä¸ªç®€åŒ–çš„ Sentinel æ¨¡æ‹Ÿå™¨ (<code>SentinelService</code>)ï¼š</p>
<ul>
<li>å®ƒä½œä¸ºä¸€ä¸ªç‹¬ç«‹æœåŠ¡è¿è¡Œã€‚</li>
<li>å®ƒå®šæœŸå‘ Master å‘é€ <code>PING</code> å‘½ä»¤è¿›è¡Œå¥åº·æ£€æŸ¥ã€‚</li>
<li>å¦‚æœ Master æ— å“åº”ï¼Œå®ƒä¼šè‡ªåŠ¨æ›´æ–°å†…éƒ¨çŠ¶æ€ï¼Œå°† Master æŒ‡å‘å¤‡ç”¨çš„ Replica åœ°å€ï¼ˆæ¨¡æ‹Ÿ Failoverï¼‰ã€‚</li>
</ul>
<h2 id="3-å®ç°ç»†èŠ‚-1"><a class="header" href="#3-å®ç°ç»†èŠ‚-1">3. å®ç°ç»†èŠ‚</a></h2>
<h3 id="ping-å‘½ä»¤"><a class="header" href="#ping-å‘½ä»¤">PING å‘½ä»¤</a></h3>
<p>ä¸ºäº†æ”¯æŒå¥åº·æ£€æŸ¥ï¼Œæˆ‘ä»¬é¦–å…ˆåœ¨ Server ç«¯å®ç°äº† <code>PING</code> å‘½ä»¤ã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Client side
pub async fn ping(&amp;mut self, msg: Option&lt;Bytes&gt;) -&gt; Result&lt;Bytes, Error&gt;
<span class="boring">}</span></code></pre>
<h3 id="sentinel-æœåŠ¡"><a class="header" href="#sentinel-æœåŠ¡">Sentinel æœåŠ¡</a></h3>
<p><code>SentinelService</code> ç»´æŠ¤å½“å‰ Master çš„åœ°å€å’Œå‰¯æœ¬åˆ—è¡¨ã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct SentinelService {
    master_addr: Arc&lt;Mutex&lt;String&gt;&gt;,
    replicas: Vec&lt;String&gt;,
}
<span class="boring">}</span></code></pre>
<p>å®ƒå¯åŠ¨ä¸€ä¸ªå¾ªç¯ï¼Œæ¯éš”ä¸€æ®µæ—¶é—´ï¼ˆä¾‹å¦‚ 500msï¼‰è¿æ¥ Master å¹¶å‘é€ Pingã€‚å¦‚æœè¿æ¥å¤±è´¥æˆ– Ping å¤±è´¥ï¼Œè§¦å‘ <code>failover()</code> é€»è¾‘ã€‚</p>
<h3 id="æ¨¡æ‹Ÿæ•…éšœè½¬ç§»"><a class="header" href="#æ¨¡æ‹Ÿæ•…éšœè½¬ç§»">æ¨¡æ‹Ÿæ•…éšœè½¬ç§»</a></h3>
<p>ä¸ºäº†æ¼”ç¤ºï¼Œæˆ‘ä»¬çš„ <code>examples/sentinel_demo.rs</code> ä½¿ç”¨ <code>tokio::sync::broadcast</code> æ¥ç¼–ç¨‹æ§åˆ¶ Server çš„å¯åŠ¨å’Œå…³é—­ã€‚</p>
<ol>
<li>å¯åŠ¨ Master (6379) å’Œ Replica (6380)ã€‚</li>
<li>Sentinel å¼€å§‹ç›‘æ§ 6379ã€‚</li>
<li>Client é€šè¿‡å’¨è¯¢ Sentinel è·å– Master åœ°å€ï¼ˆ6379ï¼‰ï¼Œå¹¶å†™å…¥æ•°æ®ã€‚</li>
<li>Demo ç¨‹åºå‘é€å…³é—­ä¿¡å·ç»™ Masterã€‚</li>
<li>Sentinel æ£€æµ‹åˆ° 6379 ä¸å¯è¾¾ï¼Œå°† Master åˆ‡æ¢ä¸º 6380ã€‚</li>
<li>Client å†æ¬¡å’¨è¯¢ Sentinelï¼Œè·å–åˆ°æ–°çš„ Master åœ°å€ï¼ˆ6380ï¼‰ï¼Œå¹¶æˆåŠŸè¿æ¥ã€‚</li>
</ol>
<h2 id="4-è¿è¡Œæ¼”ç¤º-1"><a class="header" href="#4-è¿è¡Œæ¼”ç¤º-1">4. è¿è¡Œæ¼”ç¤º</a></h2>
<pre><code class="language-bash">cargo run --example sentinel_demo
</code></pre>
<p>è¾“å‡ºç¤ºä¾‹ï¼š</p>
<pre><code class="language-text">&gt;&gt;&gt; Servers started: Master(6379), Replica(6380)
&gt;&gt;&gt; Sentinel started monitoring.
&gt;&gt;&gt; Client querying Sentinel... Current Master: 127.0.0.1:6379
&gt;&gt;&gt; Client wrote 'status'='ok' to 127.0.0.1:6379

&gt;&gt;&gt; SIMULATING FAILURE: Shutting down Master(6379)...
&gt;&gt;&gt; Client querying Sentinel... New Master: 127.0.0.1:6380
&gt;&gt;&gt; SUCCESS: Failover occurred correctly.
&gt;&gt;&gt; Ping new master: b"PONG"
</code></pre>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-58-å®‰å…¨æ€§-tls"><a class="header" href="#day-58-å®‰å…¨æ€§-tls">Day 58: å®‰å…¨æ€§ (TLS)</a></h1>
<p>åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œæ•°æ®ä¼ è¾“çš„å®‰å…¨æ€§è‡³å…³é‡è¦ã€‚Redis æ”¯æŒ TLS/SSL åŠ å¯†ï¼Œä»¥é˜²æ­¢æ•°æ®åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­è¢«çªƒå¬æˆ–ç¯¡æ”¹ã€‚</p>
<h2 id="1-tls-åŸºç¡€"><a class="header" href="#1-tls-åŸºç¡€">1. TLS åŸºç¡€</a></h2>
<p><strong>TLS (Transport Layer Security)</strong> åè®®ä½äº TCP å’Œåº”ç”¨å±‚ä¹‹é—´ï¼Œä¸ºåº”ç”¨ç¨‹åºæä¾›åŠ å¯†é€šä¿¡ã€‚</p>
<p>æ ¸å¿ƒç»„ä»¶ï¼š</p>
<ul>
<li><strong>è¯ä¹¦ (Certificate)</strong>: ç”¨äºéªŒè¯æœåŠ¡å™¨ï¼ˆæˆ–å®¢æˆ·ç«¯ï¼‰çš„èº«ä»½ã€‚</li>
<li><strong>ç§é’¥ (Private Key)</strong>: ç”¨äºè§£å¯†æ•°æ®å’Œç­¾åã€‚</li>
<li><strong>CA (Certificate Authority)</strong>: è¯ä¹¦é¢å‘æœºæ„ï¼Œç”¨äºç­¾ç½²è¯ä¹¦ï¼Œå»ºç«‹ä¿¡ä»»é“¾ã€‚</li>
</ul>
<h2 id="2-æœ¬èŠ‚ç›®æ ‡-2"><a class="header" href="#2-æœ¬èŠ‚ç›®æ ‡-2">2. æœ¬èŠ‚ç›®æ ‡</a></h2>
<p>åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬ä¸º Mini-Redis æ·»åŠ  TLS æ”¯æŒï¼š</p>
<ol>
<li><strong>Server ç«¯</strong>: ä½¿ç”¨ <code>tokio-rustls</code> åŒ…è£… <code>TcpStream</code>ï¼Œå¹¶åœ¨æ¡æ‰‹æˆåŠŸåå¤„ç†åŠ å¯†æµã€‚</li>
<li><strong>Client ç«¯</strong>: å¢åŠ  <code>connect_tls</code> æ–¹æ³•ï¼ŒéªŒè¯æœåŠ¡å™¨è¯ä¹¦å¹¶å»ºç«‹åŠ å¯†è¿æ¥ã€‚</li>
<li><strong>è¯ä¹¦ç”Ÿæˆ</strong>: æä¾›è„šæœ¬ç”Ÿæˆè‡ªç­¾åçš„ CA å’ŒæœåŠ¡å™¨è¯ä¹¦ç”¨äºæµ‹è¯•ã€‚</li>
</ol>
<h2 id="3-å®ç°ç»†èŠ‚-2"><a class="header" href="#3-å®ç°ç»†èŠ‚-2">3. å®ç°ç»†èŠ‚</a></h2>
<h3 id="ä¾èµ–"><a class="header" href="#ä¾èµ–">ä¾èµ–</a></h3>
<p>æˆ‘ä»¬éœ€è¦ <code>tokio-rustls</code> (åŸºäº Rustls çš„ Tokio ç»‘å®š) å’Œ <code>rustls-pemfile</code> (ç”¨äºè§£æ PEM æ ¼å¼çš„è¯ä¹¦)ã€‚</p>
<pre><code class="language-toml">[dependencies]
tokio-rustls = "0.26"
rustls = "0.23"
rustls-pemfile = "2.1"
</code></pre>
<h3 id="server-å®ç°"><a class="header" href="#server-å®ç°">Server å®ç°</a></h3>
<p>æˆ‘ä»¬ä¿®æ”¹äº† <code>server::run</code>ï¼Œä½¿å…¶æ¥å—ä¸€ä¸ªå¯é€‰çš„ <code>TlsAcceptor</code>ã€‚å¦‚æœæä¾›äº† Acceptorï¼Œåˆ™å¯¹æ¯ä¸ªè¿æ¥æ‰§è¡Œ TLS æ¡æ‰‹ã€‚</p>
<p>ä¸ºäº†ä½¿ <code>process</code> å‡½æ•°èƒ½å¤ŸåŒæ—¶å¤„ç† <code>TcpStream</code> å’Œ <code>TlsStream&lt;TcpStream&gt;</code>ï¼Œæˆ‘ä»¬å°†è¿æ¥æŠ½è±¡ä¸º generic trait <code>AsyncStream</code> (éœ€æ»¡è¶³ <code>AsyncRead + AsyncWrite + Unpin + Send</code>)ã€‚</p>
<h3 id="client-å®ç°"><a class="header" href="#client-å®ç°">Client å®ç°</a></h3>
<p>å¢åŠ äº† <code>Client::connect_tls</code> æ–¹æ³•ï¼Œå®ƒéœ€è¦ä¸€ä¸ª <code>TlsConnector</code> å’Œç›®æ ‡åŸŸåï¼ˆç”¨äºéªŒè¯è¯ä¹¦ä¸Šçš„ CN/SANï¼‰ã€‚</p>
<h2 id="4-è¿è¡Œæ¼”ç¤º-2"><a class="header" href="#4-è¿è¡Œæ¼”ç¤º-2">4. è¿è¡Œæ¼”ç¤º</a></h2>
<p>é¦–å…ˆï¼Œç”Ÿæˆæµ‹è¯•è¯ä¹¦ï¼š</p>
<pre><code class="language-bash">cd Day46-60/58.TLS
./gen_certs.sh
</code></pre>
<p>è¿è¡Œ TLS æ¼”ç¤ºï¼š</p>
<pre><code class="language-bash">cargo run --example tls_demo
</code></pre>
<p>ä½ å°†çœ‹åˆ°å®¢æˆ·ç«¯æˆåŠŸé€šè¿‡ TLS è¿æ¥åˆ°æœåŠ¡å™¨ï¼Œå¹¶æ‰§è¡Œ PING, SET, GET å‘½ä»¤ã€‚</p>
<pre><code class="language-text">Certificates generated in certs/
&gt;&gt;&gt; TLS Server started on 127.0.0.1:6379
&gt;&gt;&gt; Client connecting via TLS...
&gt;&gt;&gt; PING...
&lt;&lt;&lt; PONG: b"PONG"
&gt;&gt;&gt; SET hello = world
&gt;&gt;&gt; GET hello
&lt;&lt;&lt; GET: Some(b"world")
&gt;&gt;&gt; TLS Communication Verified!
</code></pre>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-59-å®Œå–„æ–‡æ¡£ä¸ç¤ºä¾‹"><a class="header" href="#day-59-å®Œå–„æ–‡æ¡£ä¸ç¤ºä¾‹">Day 59: å®Œå–„æ–‡æ¡£ä¸ç¤ºä¾‹</a></h1>
<p>Rust ç¤¾åŒºéå¸¸é‡è§†æ–‡æ¡£ï¼Œè‰¯å¥½çš„æ–‡æ¡£ä¸ä»…æ˜¯ä»£ç çš„ä¸€éƒ¨åˆ†ï¼Œæ›´æ˜¯ç”Ÿæ€ç³»ç»Ÿçš„ä¸€ç­‰å…¬æ°‘ã€‚<code>cargo doc</code> å·¥å…·ä½¿å¾—ç”Ÿæˆé«˜è´¨é‡æ–‡æ¡£å˜å¾—éå¸¸ç®€å•ã€‚</p>
<h2 id="1-æ–‡æ¡£æ³¨é‡Š"><a class="header" href="#1-æ–‡æ¡£æ³¨é‡Š">1. æ–‡æ¡£æ³¨é‡Š</a></h2>
<p>åœ¨ Rust ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>///</code> æ¥ç¼–å†™æ–‡æ¡£æ³¨é‡Šï¼ˆDoc Commentsï¼‰ã€‚è¿™äº›æ³¨é‡Šæ”¯æŒ Markdown æ ¼å¼ã€‚</p>
<ul>
<li><strong>æ¨¡å—æ–‡æ¡£</strong>: ä½¿ç”¨ <code>//!</code> åœ¨æ–‡ä»¶çš„å¼€å¤´ç¼–å†™ã€‚</li>
<li><strong>å‡½æ•°/ç»“æ„ä½“æ–‡æ¡£</strong>: ä½¿ç”¨ <code>///</code> åœ¨å®šä¹‰ä¸Šæ–¹ç¼–å†™ã€‚</li>
</ul>
<h3 id="å¸¸ç”¨ç« èŠ‚"><a class="header" href="#å¸¸ç”¨ç« èŠ‚">å¸¸ç”¨ç« èŠ‚</a></h3>
<ul>
<li><code># Examples</code>: ç¤ºä¾‹ä»£ç ï¼Œè¿™æ˜¯æ–‡æ¡£ä¸­æœ€æœ‰ä»·å€¼çš„éƒ¨åˆ†ã€‚<code>cargo test</code> ä¼šè‡ªåŠ¨è¿è¡Œè¿™äº›ç¤ºä¾‹ï¼ˆDoctestsï¼‰ï¼Œç¡®ä¿æ–‡æ¡£ä¸ä»£ç ä¿æŒåŒæ­¥ã€‚</li>
<li><code># Panics</code>: è¯´æ˜å‡½æ•°åœ¨ä»€ä¹ˆæƒ…å†µä¸‹ä¼š Panicã€‚</li>
<li><code># Errors</code>: è¯´æ˜å‡½æ•°è¿”å› <code>Result</code> æ—¶å¯èƒ½åŒ…å«çš„é”™è¯¯ç±»å‹ã€‚</li>
<li><code># Safety</code>: å¦‚æœå‡½æ•°æ˜¯ <code>unsafe</code> çš„ï¼Œå¿…é¡»è¯´æ˜è°ƒç”¨è€…éœ€è¦ä¿è¯çš„å®‰å…¨æ¡ä»¶ã€‚</li>
</ul>
<h2 id="2-æœ¬èŠ‚ç›®æ ‡-3"><a class="header" href="#2-æœ¬èŠ‚ç›®æ ‡-3">2. æœ¬èŠ‚ç›®æ ‡</a></h2>
<p>åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å¯¹ Mini-Redis é¡¹ç›®è¿›è¡Œäº†æ–‡æ¡£åŒ–å¢å¼ºï¼š</p>
<ol>
<li><strong>Library Crate æ–‡æ¡£</strong>: åœ¨ <code>src/lib.rs</code> ä¸­æ·»åŠ äº† crate çº§åˆ«çš„è¯´æ˜ã€‚</li>
<li><strong>Public API æ–‡æ¡£</strong>: ä¸º <code>Client</code> ç­‰æ ¸å¿ƒç»“æ„ä½“æ·»åŠ äº†è¯¦ç»†çš„æ–‡æ¡£æ³¨é‡Šã€‚</li>
<li><strong>Doctests</strong>: åœ¨æ–‡æ¡£ä¸­åŠ å…¥äº†å¯è¿è¡Œçš„ä»£ç ç¤ºä¾‹ã€‚</li>
<li><strong>ç¤ºä¾‹ç¨‹åº</strong>: åœ¨ <code>examples/</code> ç›®å½•ä¸‹æ·»åŠ äº† <code>basic.rs</code> å’Œ <code>hello_redis.rs</code>ï¼Œå±•ç¤ºå®Œæ•´ç”¨æ³•ã€‚</li>
</ol>
<h2 id="3-ç”Ÿæˆæ–‡æ¡£"><a class="header" href="#3-ç”Ÿæˆæ–‡æ¡£">3. ç”Ÿæˆæ–‡æ¡£</a></h2>
<p>è¿è¡Œä»¥ä¸‹å‘½ä»¤ç”Ÿæˆå¹¶æŸ¥çœ‹æ–‡æ¡£ï¼š</p>
<pre><code class="language-bash">cargo doc --open
</code></pre>
<p>ç”Ÿæˆçš„ HTML æ–‡æ¡£ä½äº <code>target/doc/mini_redis_doc/index.html</code>ã€‚</p>
<h2 id="4-è¿è¡Œç¤ºä¾‹"><a class="header" href="#4-è¿è¡Œç¤ºä¾‹">4. è¿è¡Œç¤ºä¾‹</a></h2>
<p>æˆ‘ä»¬æä¾›äº†ä¸¤ä¸ªç¤ºä¾‹ç¨‹åºï¼š</p>
<p><strong>Basic Usage:</strong></p>
<pre><code class="language-bash">cargo run --example basic
</code></pre>
<p><strong>Walkthrough:</strong></p>
<pre><code class="language-bash">cargo run --example hello_redis
</code></pre>
<blockquote>
<p>æ³¨æ„ï¼šè¿è¡Œç¤ºä¾‹å‰è¯·ç¡®ä¿å·²å¯åŠ¨ Mini-Redis æœåŠ¡å™¨ï¼ˆå¯ä½¿ç”¨ä¹‹å‰ç« èŠ‚çš„ Serverï¼Œæˆ–æœ¬ç›®å½•ä¸‹ <code>cargo run --bin mini-redis-server</code> å¦‚æœæœ‰ binary target çš„è¯ã€‚æœ¬èŠ‚ä¸»è¦å…³æ³¨ Library æ–‡æ¡£ï¼ŒæœªåŒ…å« Server binary çš„æ˜¾å¼é…ç½®ï¼Œå¯å¤ç”¨ Day 54/55 çš„ Serverï¼‰ã€‚</p>
</blockquote>
<h2 id="5-å°è´´å£«"><a class="header" href="#5-å°è´´å£«">5. å°è´´å£«</a></h2>
<ul>
<li>ä½¿ç”¨ <code>cargo test</code> æ¥è¿è¡Œæ–‡æ¡£æµ‹è¯•ï¼Œç¡®ä¿ç¤ºä¾‹ä»£ç æ˜¯æ­£ç¡®çš„ã€‚</li>
<li>æ–‡æ¡£åº”è¯¥ç®€æ´æ˜äº†ï¼Œé‡ç‚¹çªå‡ºã€‚</li>
<li>å°½é‡ä¸ºæ¯ä¸ªå…¬å¼€çš„ API æ·»åŠ æ–‡æ¡£ã€‚</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-60-é¡¹ç›®å‘å¸ƒä¸-cicd"><a class="header" href="#day-60-é¡¹ç›®å‘å¸ƒä¸-cicd">Day 60: é¡¹ç›®å‘å¸ƒä¸ CI/CD</a></h1>
<p><a href="https://github.com/yourusername/mini-redis-cicd/actions"><img src="https://github.com/yourusername/mini-redis-cicd/workflows/CI/badge.svg" alt="CI"></a>
<a href="https://codecov.io/gh/yourusername/mini-redis-cicd"><img src="https://codecov.io/gh/yourusername/mini-redis-cicd/branch/main/graph/badge.svg" alt="Coverage"></a>
<a href="Day46-60/60.CICD/LICENSE-MIT"><img src="https://img.shields.io/badge/License-MIT%20OR%20Apache--2.0-blue.svg" alt="License: MIT OR Apache-2.0"></a>
<a href="https://www.rust-lang.org"><img src="https://img.shields.io/badge/rust-1.75%2B-orange.svg" alt="Rust Version"></a></p>
<p>æ­å–œä½ å®Œæˆäº† Mini-Redis é¡¹ç›®çš„å¼€å‘ï¼åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†å­¦ä¹ å¦‚ä½•å°†é¡¹ç›®å‘å¸ƒåˆ° crates.ioï¼Œå¹¶è®¾ç½®æŒç»­é›†æˆ/æŒç»­éƒ¨ç½² (CI/CD) æµæ°´çº¿ã€‚</p>
<h2 id="1-å‘å¸ƒåˆ°-cratesio"><a class="header" href="#1-å‘å¸ƒåˆ°-cratesio">1. å‘å¸ƒåˆ° Crates.io</a></h2>
<h3 id="11-å‡†å¤‡å·¥ä½œ"><a class="header" href="#11-å‡†å¤‡å·¥ä½œ">1.1 å‡†å¤‡å·¥ä½œ</a></h3>
<p>åœ¨å‘å¸ƒä¹‹å‰ï¼Œç¡®ä¿ä½ çš„ <code>Cargo.toml</code> åŒ…å«å¿…è¦çš„å…ƒæ•°æ®ï¼š</p>
<pre><code class="language-toml">[package]
name = "mini-redis"
version = "0.1.0"
edition = "2021"
authors = ["Your Name &lt;your.email@example.com&gt;"]
description = "A minimal Redis implementation in Rust for learning purposes"
license = "MIT OR Apache-2.0"
repository = "https://github.com/yourusername/mini-redis"
documentation = "https://docs.rs/mini-redis"
readme = "README.md"
keywords = ["redis", "database", "async", "tokio"]
categories = ["database", "network-programming"]

# æ’é™¤ä¸éœ€è¦å‘å¸ƒçš„æ–‡ä»¶
exclude = [
    "tests/*",
    "benches/*",
    "examples/*",
    ".github/*",
]
</code></pre>
<h3 id="12-ç™»å½•-cratesio"><a class="header" href="#12-ç™»å½•-cratesio">1.2 ç™»å½• Crates.io</a></h3>
<pre><code class="language-bash"># é¦–å…ˆåœ¨ https://crates.io æ³¨å†Œè´¦å·å¹¶è·å– API Token
cargo login &lt;your-api-token&gt;
</code></pre>
<h3 id="13-æ£€æŸ¥ä¸å‘å¸ƒ"><a class="header" href="#13-æ£€æŸ¥ä¸å‘å¸ƒ">1.3 æ£€æŸ¥ä¸å‘å¸ƒ</a></h3>
<pre><code class="language-bash"># æ£€æŸ¥åŒ…æ˜¯å¦å¯ä»¥å‘å¸ƒ
cargo publish --dry-run

# æ­£å¼å‘å¸ƒ
cargo publish
</code></pre>
<h2 id="2-github-actions-cicd"><a class="header" href="#2-github-actions-cicd">2. GitHub Actions CI/CD</a></h2>
<h3 id="21-åŸºç¡€-ci-é…ç½®"><a class="header" href="#21-åŸºç¡€-ci-é…ç½®">2.1 åŸºç¡€ CI é…ç½®</a></h3>
<p>åˆ›å»º <code>.github/workflows/ci.yml</code>ï¼š</p>
<pre><code class="language-yaml">name: CI

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main ]

env:
  CARGO_TERM_COLOR: always
  RUST_BACKTRACE: 1

jobs:
  check:
    name: Check
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: dtolnay/rust-toolchain@stable
      - uses: Swatinem/rust-cache@v2
      - run: cargo check --all-features

  test:
    name: Test Suite
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: dtolnay/rust-toolchain@stable
      - uses: Swatinem/rust-cache@v2
      - run: cargo test --all-features

  fmt:
    name: Rustfmt
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: dtolnay/rust-toolchain@stable
        with:
          components: rustfmt
      - run: cargo fmt --all -- --check

  clippy:
    name: Clippy
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: dtolnay/rust-toolchain@stable
        with:
          components: clippy
      - uses: Swatinem/rust-cache@v2
      - run: cargo clippy --all-features -- -D warnings

  docs:
    name: Documentation
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: dtolnay/rust-toolchain@stable
      - uses: Swatinem/rust-cache@v2
      - run: cargo doc --no-deps --all-features
        env:
          RUSTDOCFLAGS: -D warnings
</code></pre>
<h3 id="22-è·¨å¹³å°æµ‹è¯•"><a class="header" href="#22-è·¨å¹³å°æµ‹è¯•">2.2 è·¨å¹³å°æµ‹è¯•</a></h3>
<pre><code class="language-yaml">  cross-platform:
    name: Test on ${{ matrix.os }}
    runs-on: ${{ matrix.os }}
    strategy:
      matrix:
        os: [ubuntu-latest, windows-latest, macos-latest]
        rust: [stable, beta]
    steps:
      - uses: actions/checkout@v4
      - uses: dtolnay/rust-toolchain@master
        with:
          toolchain: ${{ matrix.rust }}
      - uses: Swatinem/rust-cache@v2
      - run: cargo test --all-features
</code></pre>
<h3 id="23-è‡ªåŠ¨å‘å¸ƒ"><a class="header" href="#23-è‡ªåŠ¨å‘å¸ƒ">2.3 è‡ªåŠ¨å‘å¸ƒ</a></h3>
<p>åˆ›å»º <code>.github/workflows/release.yml</code>ï¼š</p>
<pre><code class="language-yaml">name: Release

on:
  push:
    tags:
      - 'v*'

jobs:
  publish:
    name: Publish to crates.io
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: dtolnay/rust-toolchain@stable
      - run: cargo publish
        env:
          CARGO_REGISTRY_TOKEN: ${{ secrets.CARGO_REGISTRY_TOKEN }}

  release:
    name: Create GitHub Release
    runs-on: ubuntu-latest
    needs: publish
    steps:
      - uses: actions/checkout@v4
      - name: Create Release
        uses: softprops/action-gh-release@v1
        with:
          generate_release_notes: true
</code></pre>
<h2 id="3-ä»£ç è´¨é‡å·¥å…·"><a class="header" href="#3-ä»£ç è´¨é‡å·¥å…·">3. ä»£ç è´¨é‡å·¥å…·</a></h2>
<h3 id="31-pre-commit-hooks"><a class="header" href="#31-pre-commit-hooks">3.1 Pre-commit Hooks</a></h3>
<p>å®‰è£… <code>cargo-husky</code> æ¥è‡ªåŠ¨è¿è¡Œæ£€æŸ¥ï¼š</p>
<pre><code class="language-bash">cargo add cargo-husky --dev
</code></pre>
<p>åœ¨ <code>Cargo.toml</code> ä¸­é…ç½®ï¼š</p>
<pre><code class="language-toml">[dev-dependencies.cargo-husky]
version = "1"
default-features = false
features = ["precommit-hook", "run-cargo-test", "run-cargo-clippy", "run-cargo-fmt"]
</code></pre>
<h3 id="32-ä»£ç è¦†ç›–ç‡"><a class="header" href="#32-ä»£ç è¦†ç›–ç‡">3.2 ä»£ç è¦†ç›–ç‡</a></h3>
<p>ä½¿ç”¨ <code>cargo-tarpaulin</code> ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Šï¼š</p>
<pre><code class="language-bash">cargo install cargo-tarpaulin
cargo tarpaulin --out Html
</code></pre>
<p>æ·»åŠ åˆ° CIï¼š</p>
<pre><code class="language-yaml">  coverage:
    name: Code Coverage
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: dtolnay/rust-toolchain@stable
      - uses: Swatinem/rust-cache@v2
      - name: Install tarpaulin
        run: cargo install cargo-tarpaulin
      - name: Generate coverage
        run: cargo tarpaulin --out Xml
      - name: Upload to Codecov
        uses: codecov/codecov-action@v3
</code></pre>
<h2 id="4-ç‰ˆæœ¬ç®¡ç†"><a class="header" href="#4-ç‰ˆæœ¬ç®¡ç†">4. ç‰ˆæœ¬ç®¡ç†</a></h2>
<h3 id="41-è¯­ä¹‰åŒ–ç‰ˆæœ¬"><a class="header" href="#41-è¯­ä¹‰åŒ–ç‰ˆæœ¬">4.1 è¯­ä¹‰åŒ–ç‰ˆæœ¬</a></h3>
<p>éµå¾ª <a href="https://semver.org/">SemVer</a> è§„èŒƒï¼š</p>
<ul>
<li><strong>MAJOR</strong>: ä¸å…¼å®¹çš„ API å˜æ›´</li>
<li><strong>MINOR</strong>: å‘åå…¼å®¹çš„åŠŸèƒ½æ–°å¢</li>
<li><strong>PATCH</strong>: å‘åå…¼å®¹çš„é—®é¢˜ä¿®å¤</li>
</ul>
<h3 id="42-changelog"><a class="header" href="#42-changelog">4.2 Changelog</a></h3>
<p>ä½¿ç”¨ <code>git-cliff</code> è‡ªåŠ¨ç”Ÿæˆ CHANGELOGï¼š</p>
<pre><code class="language-bash">cargo install git-cliff
git cliff --init
git cliff -o CHANGELOG.md
</code></pre>
<h3 id="43-å‘å¸ƒæµç¨‹"><a class="header" href="#43-å‘å¸ƒæµç¨‹">4.3 å‘å¸ƒæµç¨‹</a></h3>
<pre><code class="language-bash"># 1. æ›´æ–°ç‰ˆæœ¬å·
cargo set-version 0.2.0

# 2. ç”Ÿæˆ Changelog
git cliff -o CHANGELOG.md

# 3. æäº¤å¹¶æ‰“æ ‡ç­¾
git add .
git commit -m "chore: release v0.2.0"
git tag v0.2.0

# 4. æ¨é€è§¦å‘ CI/CD
git push origin main --tags
</code></pre>
<h2 id="5-docker-æ”¯æŒ"><a class="header" href="#5-docker-æ”¯æŒ">5. Docker æ”¯æŒ</a></h2>
<p>åˆ›å»º <code>Dockerfile</code>ï¼š</p>
<pre><code class="language-dockerfile"># Build stage
FROM rust:1.75-alpine AS builder
WORKDIR /app
RUN apk add --no-cache musl-dev
COPY . .
RUN cargo build --release

# Runtime stage
FROM alpine:3.19
RUN apk add --no-cache ca-certificates
COPY --from=builder /app/target/release/mini-redis /usr/local/bin/
EXPOSE 6379
CMD ["mini-redis"]
</code></pre>
<p>æ„å»ºå¹¶è¿è¡Œï¼š</p>
<pre><code class="language-bash">docker build -t mini-redis .
docker run -p 6379:6379 mini-redis
</code></pre>
<h2 id="6-é¡¹ç›®æ€»ç»“"><a class="header" href="#6-é¡¹ç›®æ€»ç»“">6. é¡¹ç›®æ€»ç»“</a></h2>
<p>ç»è¿‡ 15 å¤©çš„å¼€å‘ï¼Œæˆ‘ä»¬çš„ Mini-Redis é¡¹ç›®å·²ç»å…·å¤‡ï¼š</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>åŠŸèƒ½</th><th>çŠ¶æ€</th></tr>
</thead>
<tbody>
<tr><td>RESP åè®®è§£æ</td><td>âœ…</td></tr>
<tr><td>åŸºç¡€å‘½ä»¤ (GET/SET/DEL)</td><td>âœ…</td></tr>
<tr><td>è¿‡æœŸæ—¶é—´æ”¯æŒ</td><td>âœ…</td></tr>
<tr><td>å¼‚æ­¥ç½‘ç»œå±‚</td><td>âœ…</td></tr>
<tr><td>å¹¶å‘æ§åˆ¶</td><td>âœ…</td></tr>
<tr><td>AOF æŒä¹…åŒ–</td><td>âœ…</td></tr>
<tr><td>Pub/Sub</td><td>âœ…</td></tr>
<tr><td>Client SDK</td><td>âœ…</td></tr>
<tr><td>æ€§èƒ½åŸºå‡†æµ‹è¯•</td><td>âœ…</td></tr>
<tr><td>é›†ç¾¤æ¨¡å¼</td><td>âœ…</td></tr>
<tr><td>å“¨å…µé«˜å¯ç”¨</td><td>âœ…</td></tr>
<tr><td>TLS åŠ å¯†</td><td>âœ…</td></tr>
<tr><td>å®Œå–„æ–‡æ¡£</td><td>âœ…</td></tr>
<tr><td>CI/CD</td><td>âœ…</td></tr>
</tbody>
</table>
</div>
<h2 id="ä¸‹ä¸€æ­¥"><a class="header" href="#ä¸‹ä¸€æ­¥">ä¸‹ä¸€æ­¥</a></h2>
<p>ç¬¬å››é˜¶æ®µåˆ°æ­¤ç»“æŸï¼åœ¨æ¥ä¸‹æ¥çš„ç¬¬äº”é˜¶æ®µï¼ˆDay 61-80ï¼‰ï¼Œæˆ‘ä»¬å°†è¿›å…¥ <strong>Web å¼€å‘å®æˆ˜</strong>ï¼Œä½¿ç”¨ Axum æˆ– Actix-web æ„å»ºå®Œæ•´çš„ RESTful API åº”ç”¨ã€‚</p>
<hr>
<p><strong>æ­å–œå®Œæˆ Mini-Redis é¡¹ç›®ï¼</strong> ğŸ‰</p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="ç¬¬äº”é˜¶æ®µweb-å¼€å‘å®æˆ˜-days-61-80---å®Œæ•´æ¦‚è§ˆ"><a class="header" href="#ç¬¬äº”é˜¶æ®µweb-å¼€å‘å®æˆ˜-days-61-80---å®Œæ•´æ¦‚è§ˆ">ç¬¬äº”é˜¶æ®µï¼šWeb å¼€å‘å®æˆ˜ (Days 61-80) - å®Œæ•´æ¦‚è§ˆ</a></h1>
<h2 id="é˜¶æ®µç›®æ ‡"><a class="header" href="#é˜¶æ®µç›®æ ‡">é˜¶æ®µç›®æ ‡</a></h2>
<p>æŒæ¡ Rust Web å¼€å‘å…¨æ ˆæŠ€èƒ½ï¼Œä»æ¡†æ¶åŸºç¡€åˆ°å®Œæ•´é¡¹ç›®å®æˆ˜ã€‚</p>
<h2 id="å­¦ä¹ è·¯å¾„-2"><a class="header" href="#å­¦ä¹ è·¯å¾„-2">å­¦ä¹ è·¯å¾„</a></h2>
<h3 id="week-1-web-æ¡†æ¶åŸºç¡€-days-61-65-1"><a class="header" href="#week-1-web-æ¡†æ¶åŸºç¡€-days-61-65-1">Week 1: Web æ¡†æ¶åŸºç¡€ (Days 61-65)</a></h3>
<h4 id="day-61-rust-web-å¼€å‘æ¦‚è§ˆ-"><a class="header" href="#day-61-rust-web-å¼€å‘æ¦‚è§ˆ-">Day 61: Rust Web å¼€å‘æ¦‚è§ˆ âœ…</a></h4>
<ul>
<li>Rust Web ç”Ÿæ€ç³»ç»Ÿä»‹ç»</li>
<li>ä¸»æµæ¡†æ¶å¯¹æ¯”ï¼ˆAxum, Actix-web, Rocket, Warpï¼‰</li>
<li>HTTP åŸºç¡€æ¦‚å¿µ</li>
<li>å¼‚æ­¥ Web å¼€å‘æ¨¡å¼</li>
</ul>
<h4 id="day-62-axumactix-web-å…¥é—¨-"><a class="header" href="#day-62-axumactix-web-å…¥é—¨-">Day 62: Axum/Actix-web å…¥é—¨ âœ…</a></h4>
<ul>
<li>Axum æ ¸å¿ƒæ¦‚å¿µå’Œæ¶æ„</li>
<li>Actix-web Actor æ¨¡å‹</li>
<li>æå–å™¨ï¼ˆExtractorsï¼‰è¯¦è§£</li>
<li>å“åº”ç±»å‹å’Œé”™è¯¯å¤„ç†</li>
</ul>
<h4 id="day-63-è·¯ç”±ä¸è¯·æ±‚å¤„ç†"><a class="header" href="#day-63-è·¯ç”±ä¸è¯·æ±‚å¤„ç†">Day 63: è·¯ç”±ä¸è¯·æ±‚å¤„ç†</a></h4>
<p><strong>æ ¸å¿ƒå†…å®¹ï¼š</strong></p>
<ul>
<li>åµŒå¥—è·¯ç”±å’Œè·¯ç”±ç»„</li>
<li>è·¯å¾„å‚æ•°å’ŒæŸ¥è¯¢å‚æ•°</li>
<li>è¯·æ±‚ä½“è§£æï¼ˆJSON, Form, Multipartï¼‰</li>
<li>è‡ªå®šä¹‰æå–å™¨</li>
</ul>
<p><strong>ç¤ºä¾‹ä»£ç ï¼š</strong></p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// åµŒå¥—è·¯ç”±
let api_routes = Router::new()
    .route("/users", get(list_users).post(create_user))
    .route("/users/:id", get(get_user).put(update_user).delete(delete_user))
    .route("/posts", get(list_posts).post(create_post));

let app = Router::new()
    .nest("/api/v1", api_routes)
    .route("/health", get(health_check));
<span class="boring">}</span></code></pre>
<h4 id="day-64-ä¸­é—´ä»¶å¼€å‘"><a class="header" href="#day-64-ä¸­é—´ä»¶å¼€å‘">Day 64: ä¸­é—´ä»¶å¼€å‘</a></h4>
<p><strong>æ ¸å¿ƒå†…å®¹ï¼š</strong></p>
<ul>
<li>Tower ä¸­é—´ä»¶ç³»ç»Ÿ</li>
<li>æ—¥å¿—ä¸­é—´ä»¶</li>
<li>è®¤è¯ä¸­é—´ä»¶</li>
<li>CORS å’Œå®‰å…¨å¤´</li>
<li>è‡ªå®šä¹‰ä¸­é—´ä»¶</li>
</ul>
<p><strong>ç¤ºä¾‹ä»£ç ï¼š</strong></p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use tower_http::{trace::TraceLayer, cors::CorsLayer};

let app = Router::new()
    .route("/api/users", get(list_users))
    .layer(TraceLayer::new_for_http())
    .layer(CorsLayer::permissive());
<span class="boring">}</span></code></pre>
<h4 id="day-65-è¯·æ±‚çŠ¶æ€ç®¡ç†"><a class="header" href="#day-65-è¯·æ±‚çŠ¶æ€ç®¡ç†">Day 65: è¯·æ±‚çŠ¶æ€ç®¡ç†</a></h4>
<p><strong>æ ¸å¿ƒå†…å®¹ï¼š</strong></p>
<ul>
<li>åº”ç”¨çŠ¶æ€å…±äº«</li>
<li>Arc + RwLock æ¨¡å¼</li>
<li>çŠ¶æ€æ³¨å…¥</li>
<li>è¿æ¥æ± ç®¡ç†</li>
</ul>
<p><strong>ç¤ºä¾‹ä»£ç ï¼š</strong></p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[derive(Clone)]
struct AppState {
    db: Arc&lt;RwLock&lt;Database&gt;&gt;,
    cache: Arc&lt;RwLock&lt;Cache&gt;&gt;,
}

async fn handler(State(state): State&lt;AppState&gt;) -&gt; Result&lt;Json&lt;Data&gt;&gt; {
    let db = state.db.read().await;
    // ä½¿ç”¨æ•°æ®åº“
}
<span class="boring">}</span></code></pre>
<h3 id="week-2-æ•°æ®åº“ä¸ä¸šåŠ¡é€»è¾‘-days-66-70-1"><a class="header" href="#week-2-æ•°æ®åº“ä¸ä¸šåŠ¡é€»è¾‘-days-66-70-1">Week 2: æ•°æ®åº“ä¸ä¸šåŠ¡é€»è¾‘ (Days 66-70)</a></h3>
<h4 id="day-66-æ•°æ®åº“è¿ç§»-migrations"><a class="header" href="#day-66-æ•°æ®åº“è¿ç§»-migrations">Day 66: æ•°æ®åº“è¿ç§» (Migrations)</a></h4>
<p><strong>æ ¸å¿ƒå†…å®¹ï¼š</strong></p>
<ul>
<li>SQLx è¿ç§»ç³»ç»Ÿ</li>
<li>è¿ç§»æ–‡ä»¶ç¼–å†™</li>
<li>ç‰ˆæœ¬æ§åˆ¶</li>
<li>å›æ»šç­–ç•¥</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="language-sql">-- migrations/20240101_create_users.sql
CREATE TABLE users (
    id SERIAL PRIMARY KEY,
    username VARCHAR(50) UNIQUE NOT NULL,
    email VARCHAR(100) UNIQUE NOT NULL,
    password_hash VARCHAR(255) NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
</code></pre>
<h4 id="day-67-crud-æ“ä½œå®æˆ˜"><a class="header" href="#day-67-crud-æ“ä½œå®æˆ˜">Day 67: CRUD æ“ä½œå®æˆ˜</a></h4>
<p><strong>æ ¸å¿ƒå†…å®¹ï¼š</strong></p>
<ul>
<li>SQLx æŸ¥è¯¢æ„å»º</li>
<li>å‚æ•°åŒ–æŸ¥è¯¢</li>
<li>äº‹åŠ¡å¤„ç†</li>
<li>é”™è¯¯å¤„ç†</li>
</ul>
<p><strong>ç¤ºä¾‹ä»£ç ï¼š</strong></p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>async fn create_user(pool: &amp;PgPool, user: CreateUser) -&gt; Result&lt;User&gt; {
    let user = sqlx::query_as!(
        User,
        r#"
        INSERT INTO users (username, email, password_hash)
        VALUES ($1, $2, $3)
        RETURNING id, username, email, created_at
        "#,
        user.username,
        user.email,
        user.password_hash
    )
    .fetch_one(pool)
    .await?;
    
    Ok(user)
}
<span class="boring">}</span></code></pre>
<h4 id="day-68-å¤æ‚æŸ¥è¯¢ä¸äº‹åŠ¡"><a class="header" href="#day-68-å¤æ‚æŸ¥è¯¢ä¸äº‹åŠ¡">Day 68: å¤æ‚æŸ¥è¯¢ä¸äº‹åŠ¡</a></h4>
<p><strong>æ ¸å¿ƒå†…å®¹ï¼š</strong></p>
<ul>
<li>JOIN æŸ¥è¯¢</li>
<li>èšåˆå‡½æ•°</li>
<li>å­æŸ¥è¯¢</li>
<li>äº‹åŠ¡ç®¡ç†</li>
<li>ä¹è§‚é”å’Œæ‚²è§‚é”</li>
</ul>
<p><strong>ç¤ºä¾‹ä»£ç ï¼š</strong></p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>async fn transfer_money(
    pool: &amp;PgPool,
    from_id: i32,
    to_id: i32,
    amount: Decimal,
) -&gt; Result&lt;()&gt; {
    let mut tx = pool.begin().await?;
    
    sqlx::query!(
        "UPDATE accounts SET balance = balance - $1 WHERE id = $2",
        amount,
        from_id
    )
    .execute(&amp;mut *tx)
    .await?;
    
    sqlx::query!(
        "UPDATE accounts SET balance = balance + $1 WHERE id = $2",
        amount,
        to_id
    )
    .execute(&amp;mut *tx)
    .await?;
    
    tx.commit().await?;
    Ok(())
}
<span class="boring">}</span></code></pre>
<h4 id="day-69-ç”¨æˆ·è®¤è¯-jwt"><a class="header" href="#day-69-ç”¨æˆ·è®¤è¯-jwt">Day 69: ç”¨æˆ·è®¤è¯ (JWT)</a></h4>
<p><strong>æ ¸å¿ƒå†…å®¹ï¼š</strong></p>
<ul>
<li>JWT åŸç†</li>
<li>ä»¤ç‰Œç”Ÿæˆå’ŒéªŒè¯</li>
<li>å¯†ç å“ˆå¸Œï¼ˆbcrypt/argon2ï¼‰</li>
<li>ç™»å½•/æ³¨å†Œæµç¨‹</li>
</ul>
<p><strong>ç¤ºä¾‹ä»£ç ï¼š</strong></p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use jsonwebtoken::{encode, decode, Header, Validation, EncodingKey, DecodingKey};

#[derive(Serialize, Deserialize)]
struct Claims {
    sub: String,
    exp: usize,
}

fn create_jwt(user_id: &amp;str) -&gt; Result&lt;String&gt; {
    let expiration = Utc::now()
        .checked_add_signed(Duration::hours(24))
        .unwrap()
        .timestamp() as usize;
    
    let claims = Claims {
        sub: user_id.to_owned(),
        exp: expiration,
    };
    
    encode(
        &amp;Header::default(),
        &amp;claims,
        &amp;EncodingKey::from_secret("secret".as_ref()),
    )
}
<span class="boring">}</span></code></pre>
<h4 id="day-70-æƒé™æ§åˆ¶-rbac"><a class="header" href="#day-70-æƒé™æ§åˆ¶-rbac">Day 70: æƒé™æ§åˆ¶ (RBAC)</a></h4>
<p><strong>æ ¸å¿ƒå†…å®¹ï¼š</strong></p>
<ul>
<li>è§’è‰²åŸºç¡€è®¿é—®æ§åˆ¶</li>
<li>æƒé™æ¨¡å‹è®¾è®¡</li>
<li>ä¸­é—´ä»¶å®ç°</li>
<li>èµ„æºçº§æƒé™</li>
</ul>
<p><strong>ç¤ºä¾‹ä»£ç ï¼š</strong></p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[derive(Debug, Clone)]
enum Role {
    Admin,
    User,
    Guest,
}

#[derive(Debug, Clone)]
enum Permission {
    ReadUser,
    WriteUser,
    DeleteUser,
}

async fn require_permission(
    Extension(user): Extension&lt;User&gt;,
    permission: Permission,
) -&gt; Result&lt;(), StatusCode&gt; {
    if user.has_permission(&amp;permission) {
        Ok(())
    } else {
        Err(StatusCode::FORBIDDEN)
    }
}
<span class="boring">}</span></code></pre>
<h3 id="week-3-å‰ç«¯äº¤äº’ä¸éƒ¨ç½²-days-71-75-1"><a class="header" href="#week-3-å‰ç«¯äº¤äº’ä¸éƒ¨ç½²-days-71-75-1">Week 3: å‰ç«¯äº¤äº’ä¸éƒ¨ç½² (Days 71-75)</a></h3>
<h4 id="day-71-æ¨¡æ¿å¼•æ“-askamatera"><a class="header" href="#day-71-æ¨¡æ¿å¼•æ“-askamatera">Day 71: æ¨¡æ¿å¼•æ“ (Askama/Tera)</a></h4>
<p><strong>æ ¸å¿ƒå†…å®¹ï¼š</strong></p>
<ul>
<li>Askama æ¨¡æ¿è¯­æ³•</li>
<li>æ¨¡æ¿ç»§æ‰¿</li>
<li>è¿‡æ»¤å™¨å’Œå‡½æ•°</li>
<li>æœåŠ¡ç«¯æ¸²æŸ“</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use askama::Template;

#[derive(Template)]
#[template(path = "index.html")]
struct IndexTemplate {
    title: String,
    users: Vec&lt;User&gt;,
}

async fn index() -&gt; impl IntoResponse {
    let template = IndexTemplate {
        title: "User List".to_string(),
        users: get_users().await,
    };
    
    HtmlTemplate(template)
}
<span class="boring">}</span></code></pre>
<h4 id="day-72-webassembly-wasm-ç®€ä»‹"><a class="header" href="#day-72-webassembly-wasm-ç®€ä»‹">Day 72: WebAssembly (WASM) ç®€ä»‹</a></h4>
<p><strong>æ ¸å¿ƒå†…å®¹ï¼š</strong></p>
<ul>
<li>Rust to WASM ç¼–è¯‘</li>
<li>wasm-bindgen ä½¿ç”¨</li>
<li>ä¸ JavaScript äº¤äº’</li>
<li>Yew æ¡†æ¶ç®€ä»‹</li>
</ul>
<p><strong>ç¤ºä¾‹ä»£ç ï¼š</strong></p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use wasm_bindgen::prelude::*;

#[wasm_bindgen]
pub fn greet(name: &amp;str) -&gt; String {
    format!("Hello, {}!", name)
}

#[wasm_bindgen]
pub fn fibonacci(n: u32) -&gt; u32 {
    match n {
        0 =&gt; 0,
        1 =&gt; 1,
        _ =&gt; fibonacci(n - 1) + fibonacci(n - 2),
    }
}
<span class="boring">}</span></code></pre>
<h4 id="day-73-å‰ç«¯é›†æˆå®æˆ˜"><a class="header" href="#day-73-å‰ç«¯é›†æˆå®æˆ˜">Day 73: å‰ç«¯é›†æˆå®æˆ˜</a></h4>
<p><strong>æ ¸å¿ƒå†…å®¹ï¼š</strong></p>
<ul>
<li>é™æ€æ–‡ä»¶æœåŠ¡</li>
<li>SPA è·¯ç”±é…ç½®</li>
<li>API ä»£ç†</li>
<li>å‰åç«¯åˆ†ç¦»æ¶æ„</li>
</ul>
<h4 id="day-74-api-æ–‡æ¡£ç”Ÿæˆ-openapi"><a class="header" href="#day-74-api-æ–‡æ¡£ç”Ÿæˆ-openapi">Day 74: API æ–‡æ¡£ç”Ÿæˆ (OpenAPI)</a></h4>
<p><strong>æ ¸å¿ƒå†…å®¹ï¼š</strong></p>
<ul>
<li>utoipa åº“ä½¿ç”¨</li>
<li>Swagger UI é›†æˆ</li>
<li>API æ–‡æ¡£è‡ªåŠ¨ç”Ÿæˆ</li>
<li>æ–‡æ¡£æµ‹è¯•</li>
</ul>
<p><strong>ç¤ºä¾‹ä»£ç ï¼š</strong></p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use utoipa::{OpenApi, ToSchema};

#[derive(ToSchema, Serialize, Deserialize)]
struct User {
    id: i32,
    username: String,
    email: String,
}

#[utoipa::path(
    get,
    path = "/api/users/{id}",
    responses(
        (status = 200, description = "User found", body = User),
        (status = 404, description = "User not found")
    )
)]
async fn get_user(Path(id): Path&lt;i32&gt;) -&gt; Result&lt;Json&lt;User&gt;&gt; {
    // Implementation
}
<span class="boring">}</span></code></pre>
<h4 id="day-75-å®¹å™¨åŒ–éƒ¨ç½²-docker"><a class="header" href="#day-75-å®¹å™¨åŒ–éƒ¨ç½²-docker">Day 75: å®¹å™¨åŒ–éƒ¨ç½² (Docker)</a></h4>
<p><strong>æ ¸å¿ƒå†…å®¹ï¼š</strong></p>
<ul>
<li>Dockerfile ç¼–å†™</li>
<li>å¤šé˜¶æ®µæ„å»º</li>
<li>Docker Compose</li>
<li>ç”Ÿäº§ç¯å¢ƒé…ç½®</li>
</ul>
<p><strong>Dockerfile ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="language-dockerfile">FROM rust:1.75 as builder
WORKDIR /app
COPY . .
RUN cargo build --release

FROM debian:bookworm-slim
RUN apt-get update &amp;&amp; apt-get install -y libssl3 ca-certificates
COPY --from=builder /app/target/release/app /usr/local/bin/app
EXPOSE 8080
CMD ["app"]
</code></pre>
<h3 id="week-4-å®Œæ•´é¡¹ç›®å®æˆ˜---åšå®¢ç³»ç»Ÿ-days-76-80"><a class="header" href="#week-4-å®Œæ•´é¡¹ç›®å®æˆ˜---åšå®¢ç³»ç»Ÿ-days-76-80">Week 4: å®Œæ•´é¡¹ç›®å®æˆ˜ - åšå®¢ç³»ç»Ÿ (Days 76-80)</a></h3>
<h4 id="day-76-éœ€æ±‚åˆ†æä¸è®¾è®¡"><a class="header" href="#day-76-éœ€æ±‚åˆ†æä¸è®¾è®¡">Day 76: éœ€æ±‚åˆ†æä¸è®¾è®¡</a></h4>
<p><strong>åŠŸèƒ½éœ€æ±‚ï¼š</strong></p>
<ul>
<li>ç”¨æˆ·æ³¨å†Œ/ç™»å½•</li>
<li>æ–‡ç«  CRUD</li>
<li>è¯„è®ºç³»ç»Ÿ</li>
<li>æ ‡ç­¾å’Œåˆ†ç±»</li>
<li>æœç´¢åŠŸèƒ½</li>
<li>Markdown æ”¯æŒ</li>
</ul>
<p><strong>æ•°æ®åº“è®¾è®¡ï¼š</strong></p>
<pre><code class="language-sql">-- ç”¨æˆ·è¡¨
CREATE TABLE users (
    id SERIAL PRIMARY KEY,
    username VARCHAR(50) UNIQUE NOT NULL,
    email VARCHAR(100) UNIQUE NOT NULL,
    password_hash VARCHAR(255) NOT NULL,
    role VARCHAR(20) DEFAULT 'user',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- æ–‡ç« è¡¨
CREATE TABLE posts (
    id SERIAL PRIMARY KEY,
    title VARCHAR(200) NOT NULL,
    slug VARCHAR(200) UNIQUE NOT NULL,
    content TEXT NOT NULL,
    author_id INTEGER REFERENCES users(id),
    published BOOLEAN DEFAULT false,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- è¯„è®ºè¡¨
CREATE TABLE comments (
    id SERIAL PRIMARY KEY,
    post_id INTEGER REFERENCES posts(id) ON DELETE CASCADE,
    user_id INTEGER REFERENCES users(id),
    content TEXT NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- æ ‡ç­¾è¡¨
CREATE TABLE tags (
    id SERIAL PRIMARY KEY,
    name VARCHAR(50) UNIQUE NOT NULL
);

-- æ–‡ç« æ ‡ç­¾å…³è”è¡¨
CREATE TABLE post_tags (
    post_id INTEGER REFERENCES posts(id) ON DELETE CASCADE,
    tag_id INTEGER REFERENCES tags(id) ON DELETE CASCADE,
    PRIMARY KEY (post_id, tag_id)
);
</code></pre>
<h4 id="day-77-æ ¸å¿ƒä¸šåŠ¡å®ç°"><a class="header" href="#day-77-æ ¸å¿ƒä¸šåŠ¡å®ç°">Day 77: æ ¸å¿ƒä¸šåŠ¡å®ç°</a></h4>
<p><strong>å®ç°æ¨¡å—ï¼š</strong></p>
<ul>
<li>ç”¨æˆ·æœåŠ¡ï¼ˆæ³¨å†Œã€ç™»å½•ã€ä¸ªäººèµ„æ–™ï¼‰</li>
<li>æ–‡ç« æœåŠ¡ï¼ˆCRUDã€å‘å¸ƒã€è‰ç¨¿ï¼‰</li>
<li>è¯„è®ºæœåŠ¡</li>
<li>æ ‡ç­¾æœåŠ¡</li>
</ul>
<h4 id="day-78-api-æ¥å£å¼€å‘"><a class="header" href="#day-78-api-æ¥å£å¼€å‘">Day 78: API æ¥å£å¼€å‘</a></h4>
<p><strong>API ç«¯ç‚¹ï¼š</strong></p>
<pre><code>POST   /api/auth/register
POST   /api/auth/login
GET    /api/users/me
PUT    /api/users/me

GET    /api/posts
POST   /api/posts
GET    /api/posts/:id
PUT    /api/posts/:id
DELETE /api/posts/:id

GET    /api/posts/:id/comments
POST   /api/posts/:id/comments
DELETE /api/comments/:id

GET    /api/tags
POST   /api/tags
</code></pre>
<h4 id="day-79-æµ‹è¯•ä¸ä¼˜åŒ–"><a class="header" href="#day-79-æµ‹è¯•ä¸ä¼˜åŒ–">Day 79: æµ‹è¯•ä¸ä¼˜åŒ–</a></h4>
<p><strong>æµ‹è¯•å†…å®¹ï¼š</strong></p>
<ul>
<li>å•å…ƒæµ‹è¯•</li>
<li>é›†æˆæµ‹è¯•</li>
<li>API æµ‹è¯•</li>
<li>æ€§èƒ½æµ‹è¯•</li>
</ul>
<p><strong>ä¼˜åŒ–æ–¹å‘ï¼š</strong></p>
<ul>
<li>æ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–</li>
<li>ç¼“å­˜ç­–ç•¥</li>
<li>è¿æ¥æ± è°ƒä¼˜</li>
<li>å“åº”å‹ç¼©</li>
</ul>
<h4 id="day-80-é¡¹ç›®æ€»ç»“ä¸å±•ç¤º"><a class="header" href="#day-80-é¡¹ç›®æ€»ç»“ä¸å±•ç¤º">Day 80: é¡¹ç›®æ€»ç»“ä¸å±•ç¤º</a></h4>
<p><strong>æ€»ç»“å†…å®¹ï¼š</strong></p>
<ul>
<li>æ¶æ„å›é¡¾</li>
<li>æŠ€æœ¯æ ˆæ€»ç»“</li>
<li>é‡åˆ°çš„é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ</li>
<li>æ€§èƒ½æŒ‡æ ‡</li>
<li>æœªæ¥æ”¹è¿›æ–¹å‘</li>
</ul>
<h2 id="æŠ€æœ¯æ ˆæ€»ç»“"><a class="header" href="#æŠ€æœ¯æ ˆæ€»ç»“">æŠ€æœ¯æ ˆæ€»ç»“</a></h2>
<h3 id="åç«¯æ¡†æ¶"><a class="header" href="#åç«¯æ¡†æ¶">åç«¯æ¡†æ¶</a></h3>
<ul>
<li>Axum 0.7 - Web æ¡†æ¶</li>
<li>Tower - ä¸­é—´ä»¶</li>
<li>SQLx - æ•°æ®åº“è®¿é—®</li>
</ul>
<h3 id="æ•°æ®åº“-1"><a class="header" href="#æ•°æ®åº“-1">æ•°æ®åº“</a></h3>
<ul>
<li>PostgreSQL - ä¸»æ•°æ®åº“</li>
<li>Redis - ç¼“å­˜ï¼ˆå¯é€‰ï¼‰</li>
</ul>
<h3 id="è®¤è¯æˆæƒ"><a class="header" href="#è®¤è¯æˆæƒ">è®¤è¯æˆæƒ</a></h3>
<ul>
<li>jsonwebtoken - JWT å¤„ç†</li>
<li>argon2 - å¯†ç å“ˆå¸Œ</li>
</ul>
<h3 id="åºåˆ—åŒ–-1"><a class="header" href="#åºåˆ—åŒ–-1">åºåˆ—åŒ–</a></h3>
<ul>
<li>Serde - JSON åºåˆ—åŒ–</li>
<li>Serde_json - JSON å¤„ç†</li>
</ul>
<h3 id="æ¨¡æ¿å¼•æ“"><a class="header" href="#æ¨¡æ¿å¼•æ“">æ¨¡æ¿å¼•æ“</a></h3>
<ul>
<li>Askama - æœåŠ¡ç«¯æ¸²æŸ“</li>
</ul>
<h3 id="æ–‡æ¡£"><a class="header" href="#æ–‡æ¡£">æ–‡æ¡£</a></h3>
<ul>
<li>utoipa - OpenAPI æ–‡æ¡£ç”Ÿæˆ</li>
</ul>
<h3 id="éƒ¨ç½²"><a class="header" href="#éƒ¨ç½²">éƒ¨ç½²</a></h3>
<ul>
<li>Docker - å®¹å™¨åŒ–</li>
<li>Docker Compose - ç¼–æ’</li>
</ul>
<h2 id="å­¦ä¹ èµ„æº"><a class="header" href="#å­¦ä¹ èµ„æº">å­¦ä¹ èµ„æº</a></h2>
<h3 id="ä¹¦ç±"><a class="header" href="#ä¹¦ç±">ä¹¦ç±</a></h3>
<ul>
<li>Zero To Production In Rust</li>
<li>Rust Web Development</li>
</ul>
<h3 id="æ–‡æ¡£-1"><a class="header" href="#æ–‡æ¡£-1">æ–‡æ¡£</a></h3>
<ul>
<li><a href="https://docs.rs/axum">Axum å®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://docs.rs/sqlx">SQLx æ–‡æ¡£</a></li>
<li><a href="https://docs.rs/tower">Tower æ–‡æ¡£</a></li>
</ul>
<h3 id="è§†é¢‘æ•™ç¨‹-1"><a class="header" href="#è§†é¢‘æ•™ç¨‹-1">è§†é¢‘æ•™ç¨‹</a></h3>
<ul>
<li>Letâ€™s Get Rusty - Web Development Series</li>
<li>Jon Gjengset - Rust Streams</li>
</ul>
<h2 id="é¡¹ç›®æ£€æŸ¥æ¸…å•"><a class="header" href="#é¡¹ç›®æ£€æŸ¥æ¸…å•">é¡¹ç›®æ£€æŸ¥æ¸…å•</a></h2>
<ul>
<li><input disabled="" type="checkbox"> ç”¨æˆ·è®¤è¯ç³»ç»Ÿå®Œæ•´</li>
<li><input disabled="" type="checkbox"> CRUD æ“ä½œæ­£å¸¸</li>
<li><input disabled="" type="checkbox"> é”™è¯¯å¤„ç†å®Œå–„</li>
<li><input disabled="" type="checkbox"> API æ–‡æ¡£å®Œæ•´</li>
<li><input disabled="" type="checkbox"> å•å…ƒæµ‹è¯•è¦†ç›–</li>
<li><input disabled="" type="checkbox"> é›†æˆæµ‹è¯•é€šè¿‡</li>
<li><input disabled="" type="checkbox"> Docker éƒ¨ç½²æˆåŠŸ</li>
<li><input disabled="" type="checkbox"> æ€§èƒ½è¾¾æ ‡</li>
<li><input disabled="" type="checkbox"> å®‰å…¨å®¡è®¡é€šè¿‡</li>
<li><input disabled="" type="checkbox"> ä»£ç æ–‡æ¡£å®Œæ•´</li>
</ul>
<h2 id="ä¸‹ä¸€é˜¶æ®µé¢„å‘Š"><a class="header" href="#ä¸‹ä¸€é˜¶æ®µé¢„å‘Š">ä¸‹ä¸€é˜¶æ®µé¢„å‘Š</a></h2>
<p>ç¬¬å…­é˜¶æ®µï¼ˆDays 81-90ï¼‰å°†æ·±å…¥ç³»ç»Ÿç¼–ç¨‹å’Œæ€§èƒ½ä¼˜åŒ–ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li>æ“ä½œç³»ç»Ÿåº•å±‚äº¤äº’</li>
<li>æ–‡ä»¶ç³»ç»Ÿæ·±å…¥</li>
<li>æ€§èƒ½åˆ†æå’Œä¼˜åŒ–</li>
<li>SIMD å’Œåº•å±‚ä¼˜åŒ–</li>
<li>CI/CD æµæ°´çº¿</li>
</ul>
<p>ç»§ç»­åŠ æ²¹ï¼ğŸš€</p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-61-rust-web-å¼€å‘æ¦‚è§ˆ"><a class="header" href="#day-61-rust-web-å¼€å‘æ¦‚è§ˆ">Day 61: Rust Web å¼€å‘æ¦‚è§ˆ</a></h1>
<h2 id="å­¦ä¹ ç›®æ ‡"><a class="header" href="#å­¦ä¹ ç›®æ ‡">å­¦ä¹ ç›®æ ‡</a></h2>
<ul>
<li>äº†è§£ Rust Web ç”Ÿæ€ç³»ç»Ÿ</li>
<li>æ¯”è¾ƒä¸»æµ Web æ¡†æ¶</li>
<li>ç†è§£å¼‚æ­¥ Web å¼€å‘æ¨¡å¼</li>
<li>æŒæ¡ HTTP åŸºç¡€æ¦‚å¿µ</li>
</ul>
<h2 id="rust-web-ç”Ÿæ€ç³»ç»Ÿ"><a class="header" href="#rust-web-ç”Ÿæ€ç³»ç»Ÿ">Rust Web ç”Ÿæ€ç³»ç»Ÿ</a></h2>
<h3 id="ä¸»æµ-web-æ¡†æ¶å¯¹æ¯”"><a class="header" href="#ä¸»æµ-web-æ¡†æ¶å¯¹æ¯”">ä¸»æµ Web æ¡†æ¶å¯¹æ¯”</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>æ¡†æ¶</th><th>ç‰¹ç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr>
</thead>
<tbody>
<tr><td><strong>Axum</strong></td><td>åŸºäº Towerï¼Œç±»å‹å®‰å…¨ï¼Œergonomic</td><td>ç°ä»£ API æœåŠ¡</td></tr>
<tr><td><strong>Actix-web</strong></td><td>é«˜æ€§èƒ½ï¼ŒActor æ¨¡å‹</td><td>é«˜å¹¶å‘åº”ç”¨</td></tr>
<tr><td><strong>Rocket</strong></td><td>æ˜“ç”¨ï¼Œå®é©±åŠ¨</td><td>å¿«é€ŸåŸå‹å¼€å‘</td></tr>
<tr><td><strong>Warp</strong></td><td>å‡½æ•°å¼ï¼Œç»„åˆå¼</td><td>å¾®æœåŠ¡</td></tr>
<tr><td><strong>Tide</strong></td><td>ç®€æ´ï¼Œasync-std</td><td>å­¦ä¹ å’Œå°é¡¹ç›®</td></tr>
</tbody>
</table>
</div>
<h3 id="æ ¸å¿ƒæ¦‚å¿µ-2"><a class="header" href="#æ ¸å¿ƒæ¦‚å¿µ-2">æ ¸å¿ƒæ¦‚å¿µ</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// 1. å¼‚æ­¥è¿è¡Œæ—¶
// Tokio - æœ€æµè¡Œçš„å¼‚æ­¥è¿è¡Œæ—¶
// async-std - æ ‡å‡†åº“é£æ ¼çš„å¼‚æ­¥è¿è¡Œæ—¶

// 2. HTTP æœåŠ¡å™¨
// Hyper - åº•å±‚ HTTP å®ç°
// Tower - ä¸­é—´ä»¶æŠ½è±¡å±‚

// 3. åºåˆ—åŒ–/ååºåˆ—åŒ–
// Serde - JSON/å…¶ä»–æ ¼å¼å¤„ç†
<span class="boring">}</span></code></pre>
<h2 id="axum-å¿«é€Ÿå…¥é—¨"><a class="header" href="#axum-å¿«é€Ÿå…¥é—¨">Axum å¿«é€Ÿå…¥é—¨</a></h2>
<h3 id="å®‰è£…ä¾èµ–"><a class="header" href="#å®‰è£…ä¾èµ–">å®‰è£…ä¾èµ–</a></h3>
<pre><code class="language-toml">[dependencies]
axum = "0.7"
tokio = { version = "1", features = ["full"] }
serde = { version = "1", features = ["derive"] }
serde_json = "1"
</code></pre>
<h3 id="hello-world-ç¤ºä¾‹"><a class="header" href="#hello-world-ç¤ºä¾‹">Hello World ç¤ºä¾‹</a></h3>
<pre class="playground"><code class="language-rust">use axum::{
    routing::get,
    Router,
};

#[tokio::main]
async fn main() {
    // åˆ›å»ºè·¯ç”±
    let app = Router::new()
        .route("/", get(handler));

    // å¯åŠ¨æœåŠ¡å™¨
    let listener = tokio::net::TcpListener::bind("127.0.0.1:3000")
        .await
        .unwrap();
    
    println!("ğŸš€ Server running on http://127.0.0.1:3000");
    
    axum::serve(listener, app)
        .await
        .unwrap();
}

async fn handler() -&gt; &amp;'static str {
    "Hello, Rust Web!"
}</code></pre>
<h2 id="actix-web-å¿«é€Ÿå…¥é—¨"><a class="header" href="#actix-web-å¿«é€Ÿå…¥é—¨">Actix-web å¿«é€Ÿå…¥é—¨</a></h2>
<h3 id="å®‰è£…ä¾èµ–-1"><a class="header" href="#å®‰è£…ä¾èµ–-1">å®‰è£…ä¾èµ–</a></h3>
<pre><code class="language-toml">[dependencies]
actix-web = "4"
serde = { version = "1", features = ["derive"] }
serde_json = "1"
</code></pre>
<h3 id="hello-world-ç¤ºä¾‹-1"><a class="header" href="#hello-world-ç¤ºä¾‹-1">Hello World ç¤ºä¾‹</a></h3>
<pre class="playground"><code class="language-rust">use actix_web::{get, App, HttpResponse, HttpServer, Responder};

#[get("/")]
async fn hello() -&gt; impl Responder {
    HttpResponse::Ok().body("Hello, Actix!")
}

#[actix_web::main]
async fn main() -&gt; std::io::Result&lt;()&gt; {
    println!("ğŸš€ Server running on http://127.0.0.1:8080");
    
    HttpServer::new(|| {
        App::new()
            .service(hello)
    })
    .bind(("127.0.0.1", 8080))?
    .run()
    .await
}</code></pre>
<h2 id="http-åŸºç¡€æ¦‚å¿µ"><a class="header" href="#http-åŸºç¡€æ¦‚å¿µ">HTTP åŸºç¡€æ¦‚å¿µ</a></h2>
<h3 id="è¯·æ±‚æ–¹æ³•"><a class="header" href="#è¯·æ±‚æ–¹æ³•">è¯·æ±‚æ–¹æ³•</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// GET - è·å–èµ„æº
Router::new().route("/users", get(get_users))

// POST - åˆ›å»ºèµ„æº
Router::new().route("/users", post(create_user))

// PUT - æ›´æ–°èµ„æº
Router::new().route("/users/:id", put(update_user))

// DELETE - åˆ é™¤èµ„æº
Router::new().route("/users/:id", delete(delete_user))

// PATCH - éƒ¨åˆ†æ›´æ–°
Router::new().route("/users/:id", patch(patch_user))
<span class="boring">}</span></code></pre>
<h3 id="çŠ¶æ€ç "><a class="header" href="#çŠ¶æ€ç ">çŠ¶æ€ç </a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use axum::http::StatusCode;

// 2xx æˆåŠŸ
StatusCode::OK                    // 200
StatusCode::CREATED               // 201
StatusCode::NO_CONTENT            // 204

// 4xx å®¢æˆ·ç«¯é”™è¯¯
StatusCode::BAD_REQUEST           // 400
StatusCode::UNAUTHORIZED          // 401
StatusCode::FORBIDDEN             // 403
StatusCode::NOT_FOUND             // 404

// 5xx æœåŠ¡å™¨é”™è¯¯
StatusCode::INTERNAL_SERVER_ERROR // 500
StatusCode::SERVICE_UNAVAILABLE   // 503
<span class="boring">}</span></code></pre>
<h3 id="è¯·æ±‚å“åº”ç»“æ„"><a class="header" href="#è¯·æ±‚å“åº”ç»“æ„">è¯·æ±‚/å“åº”ç»“æ„</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use axum::{
    extract::{Path, Query, Json},
    response::IntoResponse,
    http::StatusCode,
};
use serde::{Deserialize, Serialize};

// è·¯å¾„å‚æ•°
async fn get_user(Path(id): Path&lt;u32&gt;) -&gt; String {
    format!("User ID: {}", id)
}

// æŸ¥è¯¢å‚æ•°
#[derive(Deserialize)]
struct Pagination {
    page: Option&lt;u32&gt;,
    limit: Option&lt;u32&gt;,
}

async fn list_users(Query(params): Query&lt;Pagination&gt;) -&gt; String {
    format!("Page: {:?}, Limit: {:?}", params.page, params.limit)
}

// JSON è¯·æ±‚ä½“
#[derive(Deserialize)]
struct CreateUser {
    name: String,
    email: String,
}

#[derive(Serialize)]
struct User {
    id: u32,
    name: String,
    email: String,
}

async fn create_user(
    Json(payload): Json&lt;CreateUser&gt;
) -&gt; impl IntoResponse {
    let user = User {
        id: 1,
        name: payload.name,
        email: payload.email,
    };
    
    (StatusCode::CREATED, Json(user))
}
<span class="boring">}</span></code></pre>
<h2 id="æ¡†æ¶é€‰æ‹©å»ºè®®"><a class="header" href="#æ¡†æ¶é€‰æ‹©å»ºè®®">æ¡†æ¶é€‰æ‹©å»ºè®®</a></h2>
<h3 id="é€‰æ‹©-axum-å¦‚æœ"><a class="header" href="#é€‰æ‹©-axum-å¦‚æœ">é€‰æ‹© Axum å¦‚æœï¼š</a></h3>
<ul>
<li>âœ… éœ€è¦ç±»å‹å®‰å…¨å’Œç¼–è¯‘æ—¶æ£€æŸ¥</li>
<li>âœ… å–œæ¬¢ç»„åˆå¼ API è®¾è®¡</li>
<li>âœ… éœ€è¦ä¸ Tower ç”Ÿæ€é›†æˆ</li>
<li>âœ… æ„å»ºç°ä»£ RESTful API</li>
</ul>
<h3 id="é€‰æ‹©-actix-web-å¦‚æœ"><a class="header" href="#é€‰æ‹©-actix-web-å¦‚æœ">é€‰æ‹© Actix-web å¦‚æœï¼š</a></h3>
<ul>
<li>âœ… éœ€è¦æè‡´æ€§èƒ½</li>
<li>âœ… ç†Ÿæ‚‰ Actor æ¨¡å‹</li>
<li>âœ… éœ€è¦ WebSocket æ”¯æŒ</li>
<li>âœ… æ„å»ºé«˜å¹¶å‘åº”ç”¨</li>
</ul>
<h3 id="é€‰æ‹©-rocket-å¦‚æœ"><a class="header" href="#é€‰æ‹©-rocket-å¦‚æœ">é€‰æ‹© Rocket å¦‚æœï¼š</a></h3>
<ul>
<li>âœ… å¿«é€ŸåŸå‹å¼€å‘</li>
<li>âœ… å–œæ¬¢å®é©±åŠ¨çš„ API</li>
<li>âœ… éœ€è¦å†…ç½®è¡¨å•éªŒè¯</li>
<li>âœ… å­¦ä¹  Rust Web å¼€å‘</li>
</ul>
<h2 id="æ€§èƒ½å¯¹æ¯”"><a class="header" href="#æ€§èƒ½å¯¹æ¯”">æ€§èƒ½å¯¹æ¯”</a></h2>
<p>æ ¹æ® TechEmpower Benchmarkï¼š</p>
<pre><code>æ¡†æ¶æ€§èƒ½æ’åï¼ˆè¯·æ±‚/ç§’ï¼‰ï¼š
1. Actix-web: ~700k
2. Axum: ~650k
3. Warp: ~600k
4. Rocket: ~400k
</code></pre>
<h2 id="å®è·µé¡¹ç›®"><a class="header" href="#å®è·µé¡¹ç›®">å®è·µé¡¹ç›®</a></h2>
<p>åˆ›å»ºä¸€ä¸ªç®€å•çš„ API æœåŠ¡å™¨ï¼Œæ”¯æŒï¼š</p>
<ul>
<li>GET /health - å¥åº·æ£€æŸ¥</li>
<li>GET /api/v1/users - è·å–ç”¨æˆ·åˆ—è¡¨</li>
<li>POST /api/v1/users - åˆ›å»ºç”¨æˆ·</li>
<li>GET /api/v1/users/:id - è·å–å•ä¸ªç”¨æˆ·</li>
</ul>
<h2 id="å­¦ä¹ èµ„æº-1"><a class="header" href="#å­¦ä¹ èµ„æº-1">å­¦ä¹ èµ„æº</a></h2>
<ul>
<li><a href="https://docs.rs/axum">Axum å®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://actix.rs">Actix-web å®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://www.zero2prod.com">Rust Web å¼€å‘å®æˆ˜</a></li>
<li><a href="https://docs.rs/tower">Tower ä¸­é—´ä»¶æŒ‡å—</a></li>
</ul>
<h2 id="ä¸‹ä¸€æ­¥-1"><a class="header" href="#ä¸‹ä¸€æ­¥-1">ä¸‹ä¸€æ­¥</a></h2>
<p>Day 62 å°†æ·±å…¥å­¦ä¹  Axum å’Œ Actix-web çš„æ ¸å¿ƒç‰¹æ€§ï¼ŒåŒ…æ‹¬è·¯ç”±ã€æå–å™¨å’Œå“åº”ç±»å‹ã€‚</p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-62-axumactix-web-å…¥é—¨"><a class="header" href="#day-62-axumactix-web-å…¥é—¨">Day 62: Axum/Actix-web å…¥é—¨</a></h1>
<h2 id="å­¦ä¹ ç›®æ ‡-1"><a class="header" href="#å­¦ä¹ ç›®æ ‡-1">å­¦ä¹ ç›®æ ‡</a></h2>
<ul>
<li>æ·±å…¥ç†è§£ Axum æ¡†æ¶æ ¸å¿ƒæ¦‚å¿µ</li>
<li>æŒæ¡ Actix-web åŸºæœ¬ç”¨æ³•</li>
<li>å­¦ä¹ æå–å™¨ï¼ˆExtractorsï¼‰</li>
<li>ç†è§£å“åº”ç±»å‹</li>
</ul>
<h2 id="axum-æ·±å…¥"><a class="header" href="#axum-æ·±å…¥">Axum æ·±å…¥</a></h2>
<h3 id="é¡¹ç›®è®¾ç½®"><a class="header" href="#é¡¹ç›®è®¾ç½®">é¡¹ç›®è®¾ç½®</a></h3>
<pre><code class="language-toml">[package]
name = "axum_demo"
version = "0.1.0"
edition = "2021"

[dependencies]
axum = "0.7"
tokio = { version = "1", features = ["full"] }
serde = { version = "1", features = ["derive"] }
serde_json = "1"
tower = "0.4"
tower-http = { version = "0.5", features = ["trace", "cors"] }
tracing = "0.1"
tracing-subscriber = "0.3"
</code></pre>
<h3 id="å®Œæ•´ç¤ºä¾‹"><a class="header" href="#å®Œæ•´ç¤ºä¾‹">å®Œæ•´ç¤ºä¾‹</a></h3>
<pre class="playground"><code class="language-rust">use axum::{
    extract::{Path, Query, State, Json},
    http::StatusCode,
    response::{IntoResponse, Response},
    routing::{get, post},
    Router,
};
use serde::{Deserialize, Serialize};
use std::sync::Arc;
use tokio::sync::RwLock;

// åº”ç”¨çŠ¶æ€
#[derive(Clone)]
struct AppState {
    users: Arc&lt;RwLock&lt;Vec&lt;User&gt;&gt;&gt;,
}

// æ•°æ®æ¨¡å‹
#[derive(Debug, Clone, Serialize, Deserialize)]
struct User {
    id: u32,
    name: String,
    email: String,
}

#[derive(Deserialize)]
struct CreateUserRequest {
    name: String,
    email: String,
}

#[derive(Deserialize)]
struct ListQuery {
    page: Option&lt;u32&gt;,
    limit: Option&lt;u32&gt;,
}

// è·¯ç”±å¤„ç†å™¨
async fn health_check() -&gt; &amp;'static str {
    "OK"
}

async fn list_users(
    State(state): State&lt;AppState&gt;,
    Query(params): Query&lt;ListQuery&gt;,
) -&gt; Json&lt;Vec&lt;User&gt;&gt; {
    let users = state.users.read().await;
    let page = params.page.unwrap_or(1);
    let limit = params.limit.unwrap_or(10);
    
    let start = ((page - 1) * limit) as usize;
    let end = (start + limit as usize).min(users.len());
    
    Json(users[start..end].to_vec())
}

async fn get_user(
    State(state): State&lt;AppState&gt;,
    Path(id): Path&lt;u32&gt;,
) -&gt; Result&lt;Json&lt;User&gt;, AppError&gt; {
    let users = state.users.read().await;
    users
        .iter()
        .find(|u| u.id == id)
        .cloned()
        .map(Json)
        .ok_or(AppError::NotFound)
}

async fn create_user(
    State(state): State&lt;AppState&gt;,
    Json(payload): Json&lt;CreateUserRequest&gt;,
) -&gt; Result&lt;(StatusCode, Json&lt;User&gt;), AppError&gt; {
    let mut users = state.users.write().await;
    
    let id = users.len() as u32 + 1;
    let user = User {
        id,
        name: payload.name,
        email: payload.email,
    };
    
    users.push(user.clone());
    Ok((StatusCode::CREATED, Json(user)))
}

// é”™è¯¯å¤„ç†
enum AppError {
    NotFound,
    InternalError,
}

impl IntoResponse for AppError {
    fn into_response(self) -&gt; Response {
        let (status, message) = match self {
            AppError::NotFound =&gt; (StatusCode::NOT_FOUND, "Resource not found"),
            AppError::InternalError =&gt; (
                StatusCode::INTERNAL_SERVER_ERROR,
                "Internal server error",
            ),
        };
        
        (status, message).into_response()
    }
}

#[tokio::main]
async fn main() {
    // åˆå§‹åŒ–æ—¥å¿—
    tracing_subscriber::fmt::init();
    
    // åˆ›å»ºåº”ç”¨çŠ¶æ€
    let state = AppState {
        users: Arc::new(RwLock::new(vec![
            User {
                id: 1,
                name: "Alice".to_string(),
                email: "alice@example.com".to_string(),
            },
        ])),
    };
    
    // æ„å»ºè·¯ç”±
    let app = Router::new()
        .route("/health", get(health_check))
        .route("/api/users", get(list_users).post(create_user))
        .route("/api/users/:id", get(get_user))
        .with_state(state);
    
    // å¯åŠ¨æœåŠ¡å™¨
    let listener = tokio::net::TcpListener::bind("127.0.0.1:3000")
        .await
        .unwrap();
    
    println!("ğŸš€ Server running on http://127.0.0.1:3000");
    
    axum::serve(listener, app).await.unwrap();
}</code></pre>
<h2 id="actix-web-æ·±å…¥"><a class="header" href="#actix-web-æ·±å…¥">Actix-web æ·±å…¥</a></h2>
<h3 id="é¡¹ç›®è®¾ç½®-1"><a class="header" href="#é¡¹ç›®è®¾ç½®-1">é¡¹ç›®è®¾ç½®</a></h3>
<pre><code class="language-toml">[dependencies]
actix-web = "4"
actix-rt = "2"
serde = { version = "1", features = ["derive"] }
serde_json = "1"
tokio = { version = "1", features = ["sync"] }
</code></pre>
<h3 id="å®Œæ•´ç¤ºä¾‹-1"><a class="header" href="#å®Œæ•´ç¤ºä¾‹-1">å®Œæ•´ç¤ºä¾‹</a></h3>
<pre class="playground"><code class="language-rust">use actix_web::{
    get, post, web, App, HttpResponse, HttpServer, Responder, Result,
};
use serde::{Deserialize, Serialize};
use std::sync::Mutex;

// åº”ç”¨çŠ¶æ€
struct AppState {
    users: Mutex&lt;Vec&lt;User&gt;&gt;,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
struct User {
    id: u32,
    name: String,
    email: String,
}

#[derive(Deserialize)]
struct CreateUserRequest {
    name: String,
    email: String,
}

#[derive(Deserialize)]
struct ListQuery {
    page: Option&lt;u32&gt;,
    limit: Option&lt;u32&gt;,
}

// è·¯ç”±å¤„ç†å™¨
#[get("/health")]
async fn health_check() -&gt; impl Responder {
    HttpResponse::Ok().body("OK")
}

#[get("/api/users")]
async fn list_users(
    data: web::Data&lt;AppState&gt;,
    query: web::Query&lt;ListQuery&gt;,
) -&gt; Result&lt;impl Responder&gt; {
    let users = data.users.lock().unwrap();
    let page = query.page.unwrap_or(1);
    let limit = query.limit.unwrap_or(10);
    
    let start = ((page - 1) * limit) as usize;
    let end = (start + limit as usize).min(users.len());
    
    Ok(web::Json(&amp;users[start..end]))
}

#[get("/api/users/{id}")]
async fn get_user(
    data: web::Data&lt;AppState&gt;,
    path: web::Path&lt;u32&gt;,
) -&gt; Result&lt;impl Responder&gt; {
    let users = data.users.lock().unwrap();
    let id = path.into_inner();
    
    users
        .iter()
        .find(|u| u.id == id)
        .map(|u| HttpResponse::Ok().json(u))
        .ok_or_else(|| actix_web::error::ErrorNotFound("User not found"))
}

#[post("/api/users")]
async fn create_user(
    data: web::Data&lt;AppState&gt;,
    payload: web::Json&lt;CreateUserRequest&gt;,
) -&gt; Result&lt;impl Responder&gt; {
    let mut users = data.users.lock().unwrap();
    
    let id = users.len() as u32 + 1;
    let user = User {
        id,
        name: payload.name.clone(),
        email: payload.email.clone(),
    };
    
    users.push(user.clone());
    Ok(HttpResponse::Created().json(user))
}

#[actix_web::main]
async fn main() -&gt; std::io::Result&lt;()&gt; {
    // åˆ›å»ºåº”ç”¨çŠ¶æ€
    let app_state = web::Data::new(AppState {
        users: Mutex::new(vec![User {
            id: 1,
            name: "Alice".to_string(),
            email: "alice@example.com".to_string(),
        }]),
    });
    
    println!("ğŸš€ Server running on http://127.0.0.1:8080");
    
    HttpServer::new(move || {
        App::new()
            .app_data(app_state.clone())
            .service(health_check)
            .service(list_users)
            .service(get_user)
            .service(create_user)
    })
    .bind(("127.0.0.1", 8080))?
    .run()
    .await
}</code></pre>
<h2 id="æå–å™¨å¯¹æ¯”"><a class="header" href="#æå–å™¨å¯¹æ¯”">æå–å™¨å¯¹æ¯”</a></h2>
<h3 id="axum-æå–å™¨"><a class="header" href="#axum-æå–å™¨">Axum æå–å™¨</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// è·¯å¾„å‚æ•°
Path(id): Path&lt;u32&gt;

// æŸ¥è¯¢å‚æ•°
Query(params): Query&lt;MyQuery&gt;

// JSON è¯·æ±‚ä½“
Json(payload): Json&lt;MyPayload&gt;

// è¡¨å•æ•°æ®
Form(data): Form&lt;MyForm&gt;

// è¯·æ±‚å¤´
headers: HeaderMap

// åº”ç”¨çŠ¶æ€
State(state): State&lt;AppState&gt;

// æ‰©å±•æ•°æ®
Extension(ext): Extension&lt;MyExtension&gt;
<span class="boring">}</span></code></pre>
<h3 id="actix-web-æå–å™¨"><a class="header" href="#actix-web-æå–å™¨">Actix-web æå–å™¨</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// è·¯å¾„å‚æ•°
path: web::Path&lt;u32&gt;

// æŸ¥è¯¢å‚æ•°
query: web::Query&lt;MyQuery&gt;

// JSON è¯·æ±‚ä½“
payload: web::Json&lt;MyPayload&gt;

// è¡¨å•æ•°æ®
form: web::Form&lt;MyForm&gt;

// è¯·æ±‚å¤´
req: HttpRequest

// åº”ç”¨çŠ¶æ€
data: web::Data&lt;AppState&gt;
<span class="boring">}</span></code></pre>
<h2 id="æµ‹è¯•-api"><a class="header" href="#æµ‹è¯•-api">æµ‹è¯• API</a></h2>
<pre><code class="language-bash"># å¥åº·æ£€æŸ¥
curl http://localhost:3000/health

# è·å–ç”¨æˆ·åˆ—è¡¨
curl http://localhost:3000/api/users

# åˆ†é¡µæŸ¥è¯¢
curl "http://localhost:3000/api/users?page=1&amp;limit=5"

# è·å–å•ä¸ªç”¨æˆ·
curl http://localhost:3000/api/users/1

# åˆ›å»ºç”¨æˆ·
curl -X POST http://localhost:3000/api/users \
  -H "Content-Type: application/json" \
  -d '{"name":"Bob","email":"bob@example.com"}'
</code></pre>
<h2 id="ç»ƒä¹ "><a class="header" href="#ç»ƒä¹ ">ç»ƒä¹ </a></h2>
<ol>
<li>æ·»åŠ  PUT å’Œ DELETE ç«¯ç‚¹</li>
<li>å®ç°è¾“å…¥éªŒè¯</li>
<li>æ·»åŠ æ—¥å¿—ä¸­é—´ä»¶</li>
<li>å®ç°é”™è¯¯å¤„ç†ä¸­é—´ä»¶</li>
<li>æ·»åŠ  CORS æ”¯æŒ</li>
</ol>
<h2 id="ä¸‹ä¸€æ­¥-2"><a class="header" href="#ä¸‹ä¸€æ­¥-2">ä¸‹ä¸€æ­¥</a></h2>
<p>Day 63 å°†å­¦ä¹ é«˜çº§è·¯ç”±å’Œè¯·æ±‚å¤„ç†æŠ€æœ¯ã€‚</p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-63-è·¯ç”±ä¸è¯·æ±‚å¤„ç†-1"><a class="header" href="#day-63-è·¯ç”±ä¸è¯·æ±‚å¤„ç†-1">Day 63: è·¯ç”±ä¸è¯·æ±‚å¤„ç†</a></h1>
<h2 id="å­¦ä¹ ç›®æ ‡-2"><a class="header" href="#å­¦ä¹ ç›®æ ‡-2">å­¦ä¹ ç›®æ ‡</a></h2>
<ul>
<li>æŒæ¡åµŒå¥—è·¯ç”±</li>
<li>ç†è§£è·¯å¾„å‚æ•°å’ŒæŸ¥è¯¢å‚æ•°</li>
<li>å­¦ä¹ è¯·æ±‚ä½“è§£æ</li>
<li>å®ç°è‡ªå®šä¹‰æå–å™¨</li>
</ul>
<h2 id="åµŒå¥—è·¯ç”±"><a class="header" href="#åµŒå¥—è·¯ç”±">åµŒå¥—è·¯ç”±</a></h2>
<h3 id="axum-åµŒå¥—è·¯ç”±"><a class="header" href="#axum-åµŒå¥—è·¯ç”±">Axum åµŒå¥—è·¯ç”±</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use axum::{
    routing::{get, post, put, delete},
    Router,
};

// API v1 è·¯ç”±
fn api_v1_routes() -&gt; Router {
    Router::new()
        .route("/users", get(list_users).post(create_user))
        .route("/users/:id", get(get_user).put(update_user).delete(delete_user))
        .route("/posts", get(list_posts).post(create_post))
        .route("/posts/:id", get(get_post))
}

// API v2 è·¯ç”±
fn api_v2_routes() -&gt; Router {
    Router::new()
        .route("/users", get(list_users_v2))
        .route("/posts", get(list_posts_v2))
}

// ä¸»åº”ç”¨
fn app() -&gt; Router {
    Router::new()
        .route("/health", get(health_check))
        .nest("/api/v1", api_v1_routes())
        .nest("/api/v2", api_v2_routes())
        .fallback(not_found)
}
<span class="boring">}</span></code></pre>
<h3 id="è·¯ç”±ç»„"><a class="header" href="#è·¯ç”±ç»„">è·¯ç”±ç»„</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use axum::Router;

// ç”¨æˆ·ç›¸å…³è·¯ç”±
fn user_routes() -&gt; Router {
    Router::new()
        .route("/", get(list_users).post(create_user))
        .route("/:id", get(get_user).put(update_user).delete(delete_user))
        .route("/:id/posts", get(user_posts))
        .route("/:id/profile", get(user_profile))
}

// æ–‡ç« ç›¸å…³è·¯ç”±
fn post_routes() -&gt; Router {
    Router::new()
        .route("/", get(list_posts).post(create_post))
        .route("/:id", get(get_post).put(update_post).delete(delete_post))
        .route("/:id/comments", get(post_comments).post(create_comment))
}

// ç»„åˆè·¯ç”±
fn app() -&gt; Router {
    Router::new()
        .nest("/users", user_routes())
        .nest("/posts", post_routes())
}
<span class="boring">}</span></code></pre>
<h2 id="è·¯å¾„å‚æ•°"><a class="header" href="#è·¯å¾„å‚æ•°">è·¯å¾„å‚æ•°</a></h2>
<h3 id="å•ä¸ªå‚æ•°"><a class="header" href="#å•ä¸ªå‚æ•°">å•ä¸ªå‚æ•°</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use axum::{
    extract::Path,
    Json,
};

// GET /users/:id
async fn get_user(Path(id): Path&lt;i32&gt;) -&gt; Json&lt;User&gt; {
    let user = find_user_by_id(id).await;
    Json(user)
}

// GET /posts/:slug
async fn get_post_by_slug(Path(slug): Path&lt;String&gt;) -&gt; Json&lt;Post&gt; {
    let post = find_post_by_slug(&amp;slug).await;
    Json(post)
}
<span class="boring">}</span></code></pre>
<h3 id="å¤šä¸ªå‚æ•°"><a class="header" href="#å¤šä¸ªå‚æ•°">å¤šä¸ªå‚æ•°</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// GET /users/:user_id/posts/:post_id
async fn get_user_post(
    Path((user_id, post_id)): Path&lt;(i32, i32)&gt;
) -&gt; Json&lt;Post&gt; {
    let post = find_user_post(user_id, post_id).await;
    Json(post)
}

// ä½¿ç”¨ç»“æ„ä½“
#[derive(Deserialize)]
struct PostPath {
    user_id: i32,
    post_id: i32,
}

async fn get_user_post_v2(
    Path(params): Path&lt;PostPath&gt;
) -&gt; Json&lt;Post&gt; {
    let post = find_user_post(params.user_id, params.post_id).await;
    Json(post)
}
<span class="boring">}</span></code></pre>
<h2 id="æŸ¥è¯¢å‚æ•°"><a class="header" href="#æŸ¥è¯¢å‚æ•°">æŸ¥è¯¢å‚æ•°</a></h2>
<h3 id="åŸºæœ¬æŸ¥è¯¢å‚æ•°"><a class="header" href="#åŸºæœ¬æŸ¥è¯¢å‚æ•°">åŸºæœ¬æŸ¥è¯¢å‚æ•°</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use axum::extract::Query;
use serde::Deserialize;

#[derive(Deserialize)]
struct Pagination {
    page: Option&lt;u32&gt;,
    per_page: Option&lt;u32&gt;,
}

// GET /users?page=1&amp;per_page=20
async fn list_users(Query(params): Query&lt;Pagination&gt;) -&gt; Json&lt;Vec&lt;User&gt;&gt; {
    let page = params.page.unwrap_or(1);
    let per_page = params.per_page.unwrap_or(10);
    
    let users = fetch_users(page, per_page).await;
    Json(users)
}
<span class="boring">}</span></code></pre>
<h3 id="å¤æ‚æŸ¥è¯¢å‚æ•°"><a class="header" href="#å¤æ‚æŸ¥è¯¢å‚æ•°">å¤æ‚æŸ¥è¯¢å‚æ•°</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[derive(Deserialize)]
struct SearchParams {
    q: Option&lt;String&gt;,
    category: Option&lt;String&gt;,
    tags: Option&lt;Vec&lt;String&gt;&gt;,
    sort: Option&lt;String&gt;,
    order: Option&lt;String&gt;,
    #[serde(flatten)]
    pagination: Pagination,
}

// GET /posts?q=rust&amp;category=tech&amp;tags=web&amp;tags=async&amp;sort=date&amp;order=desc&amp;page=1
async fn search_posts(Query(params): Query&lt;SearchParams&gt;) -&gt; Json&lt;Vec&lt;Post&gt;&gt; {
    let posts = search_posts_with_params(params).await;
    Json(posts)
}
<span class="boring">}</span></code></pre>
<h2 id="è¯·æ±‚ä½“è§£æ"><a class="header" href="#è¯·æ±‚ä½“è§£æ">è¯·æ±‚ä½“è§£æ</a></h2>
<h3 id="json-è¯·æ±‚ä½“"><a class="header" href="#json-è¯·æ±‚ä½“">JSON è¯·æ±‚ä½“</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use axum::Json;
use serde::{Deserialize, Serialize};

#[derive(Deserialize)]
struct CreateUserRequest {
    username: String,
    email: String,
    password: String,
}

#[derive(Serialize)]
struct UserResponse {
    id: i32,
    username: String,
    email: String,
}

async fn create_user(
    Json(payload): Json&lt;CreateUserRequest&gt;
) -&gt; (StatusCode, Json&lt;UserResponse&gt;) {
    let user = User::create(payload).await;
    
    (
        StatusCode::CREATED,
        Json(UserResponse {
            id: user.id,
            username: user.username,
            email: user.email,
        })
    )
}
<span class="boring">}</span></code></pre>
<h3 id="è¡¨å•æ•°æ®"><a class="header" href="#è¡¨å•æ•°æ®">è¡¨å•æ•°æ®</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use axum::Form;

#[derive(Deserialize)]
struct LoginForm {
    username: String,
    password: String,
}

async fn login(Form(form): Form&lt;LoginForm&gt;) -&gt; Result&lt;String, StatusCode&gt; {
    if verify_credentials(&amp;form.username, &amp;form.password).await {
        Ok("Login successful".to_string())
    } else {
        Err(StatusCode::UNAUTHORIZED)
    }
}
<span class="boring">}</span></code></pre>
<h3 id="multipart-æ–‡ä»¶ä¸Šä¼ "><a class="header" href="#multipart-æ–‡ä»¶ä¸Šä¼ ">Multipart æ–‡ä»¶ä¸Šä¼ </a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use axum::extract::Multipart;

async fn upload_file(mut multipart: Multipart) -&gt; Result&lt;String, StatusCode&gt; {
    while let Some(field) = multipart.next_field().await.unwrap() {
        let name = field.name().unwrap().to_string();
        let data = field.bytes().await.unwrap();
        
        if name == "file" {
            // ä¿å­˜æ–‡ä»¶
            tokio::fs::write(format!("uploads/{}", name), data)
                .await
                .map_err(|_| StatusCode::INTERNAL_SERVER_ERROR)?;
        }
    }
    
    Ok("File uploaded successfully".to_string())
}
<span class="boring">}</span></code></pre>
<h2 id="è‡ªå®šä¹‰æå–å™¨"><a class="header" href="#è‡ªå®šä¹‰æå–å™¨">è‡ªå®šä¹‰æå–å™¨</a></h2>
<h3 id="ç®€å•æå–å™¨"><a class="header" href="#ç®€å•æå–å™¨">ç®€å•æå–å™¨</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use axum::{
    async_trait,
    extract::{FromRequestParts, rejection::JsonRejection},
    http::request::Parts,
};

// è‡ªå®šä¹‰ JSON æå–å™¨ï¼Œå¸¦éªŒè¯
struct ValidatedJson&lt;T&gt;(T);

#[async_trait]
impl&lt;S, T&gt; FromRequestParts&lt;S&gt; for ValidatedJson&lt;T&gt;
where
    T: DeserializeOwned + Validate,
    S: Send + Sync,
{
    type Rejection = (StatusCode, String);
    
    async fn from_request_parts(
        parts: &amp;mut Parts,
        state: &amp;S
    ) -&gt; Result&lt;Self, Self::Rejection&gt; {
        let Json(value) = Json::&lt;T&gt;::from_request_parts(parts, state)
            .await
            .map_err(|err| {
                (StatusCode::BAD_REQUEST, format!("Invalid JSON: {}", err))
            })?;
        
        value.validate().map_err(|err| {
            (StatusCode::BAD_REQUEST, format!("Validation error: {}", err))
        })?;
        
        Ok(ValidatedJson(value))
    }
}

// ä½¿ç”¨
async fn create_user(
    ValidatedJson(user): ValidatedJson&lt;CreateUserRequest&gt;
) -&gt; Json&lt;UserResponse&gt; {
    // user å·²ç»é€šè¿‡éªŒè¯
    let created = User::create(user).await;
    Json(created)
}
<span class="boring">}</span></code></pre>
<h3 id="è®¤è¯æå–å™¨"><a class="header" href="#è®¤è¯æå–å™¨">è®¤è¯æå–å™¨</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use axum::http::HeaderMap;

struct AuthUser {
    id: i32,
    username: String,
}

#[async_trait]
impl&lt;S&gt; FromRequestParts&lt;S&gt; for AuthUser
where
    S: Send + Sync,
{
    type Rejection = StatusCode;
    
    async fn from_request_parts(
        parts: &amp;mut Parts,
        _state: &amp;S
    ) -&gt; Result&lt;Self, Self::Rejection&gt; {
        let headers = &amp;parts.headers;
        
        let token = headers
            .get("Authorization")
            .and_then(|h| h.to_str().ok())
            .and_then(|h| h.strip_prefix("Bearer "))
            .ok_or(StatusCode::UNAUTHORIZED)?;
        
        let claims = verify_jwt(token)
            .map_err(|_| StatusCode::UNAUTHORIZED)?;
        
        Ok(AuthUser {
            id: claims.user_id,
            username: claims.username,
        })
    }
}

// ä½¿ç”¨
async fn get_profile(user: AuthUser) -&gt; Json&lt;Profile&gt; {
    let profile = fetch_profile(user.id).await;
    Json(profile)
}
<span class="boring">}</span></code></pre>
<h2 id="è¯·æ±‚å¤´å¤„ç†"><a class="header" href="#è¯·æ±‚å¤´å¤„ç†">è¯·æ±‚å¤´å¤„ç†</a></h2>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use axum::http::{HeaderMap, HeaderValue};

async fn handle_headers(headers: HeaderMap) -&gt; String {
    let user_agent = headers
        .get("user-agent")
        .and_then(|v| v.to_str().ok())
        .unwrap_or("unknown");
    
    let accept = headers
        .get("accept")
        .and_then(|v| v.to_str().ok())
        .unwrap_or("*/*");
    
    format!("User-Agent: {}, Accept: {}", user_agent, accept)
}

// è®¾ç½®å“åº”å¤´
async fn with_custom_headers() -&gt; (HeaderMap, String) {
    let mut headers = HeaderMap::new();
    headers.insert("X-Custom-Header", HeaderValue::from_static("value"));
    headers.insert("X-Request-Id", HeaderValue::from_static("123"));
    
    (headers, "Response with custom headers".to_string())
}
<span class="boring">}</span></code></pre>
<h2 id="å®Œæ•´ç¤ºä¾‹-2"><a class="header" href="#å®Œæ•´ç¤ºä¾‹-2">å®Œæ•´ç¤ºä¾‹</a></h2>
<pre class="playground"><code class="language-rust">use axum::{
    extract::{Path, Query, State, Json},
    http::StatusCode,
    routing::{get, post, put, delete},
    Router,
};
use serde::{Deserialize, Serialize};
use std::sync::Arc;
use tokio::sync::RwLock;

// æ•°æ®æ¨¡å‹
#[derive(Debug, Clone, Serialize, Deserialize)]
struct User {
    id: i32,
    username: String,
    email: String,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
struct Post {
    id: i32,
    user_id: i32,
    title: String,
    content: String,
}

// è¯·æ±‚/å“åº”æ¨¡å‹
#[derive(Deserialize)]
struct CreateUserRequest {
    username: String,
    email: String,
}

#[derive(Deserialize)]
struct UpdateUserRequest {
    username: Option&lt;String&gt;,
    email: Option&lt;String&gt;,
}

#[derive(Deserialize)]
struct ListQuery {
    page: Option&lt;u32&gt;,
    per_page: Option&lt;u32&gt;,
    sort: Option&lt;String&gt;,
}

// åº”ç”¨çŠ¶æ€
#[derive(Clone)]
struct AppState {
    users: Arc&lt;RwLock&lt;Vec&lt;User&gt;&gt;&gt;,
    posts: Arc&lt;RwLock&lt;Vec&lt;Post&gt;&gt;&gt;,
}

// ç”¨æˆ·å¤„ç†å™¨
async fn list_users(
    State(state): State&lt;AppState&gt;,
    Query(params): Query&lt;ListQuery&gt;,
) -&gt; Json&lt;Vec&lt;User&gt;&gt; {
    let users = state.users.read().await;
    let page = params.page.unwrap_or(1);
    let per_page = params.per_page.unwrap_or(10);
    
    let start = ((page - 1) * per_page) as usize;
    let end = (start + per_page as usize).min(users.len());
    
    Json(users[start..end].to_vec())
}

async fn get_user(
    State(state): State&lt;AppState&gt;,
    Path(id): Path&lt;i32&gt;,
) -&gt; Result&lt;Json&lt;User&gt;, StatusCode&gt; {
    let users = state.users.read().await;
    users
        .iter()
        .find(|u| u.id == id)
        .cloned()
        .map(Json)
        .ok_or(StatusCode::NOT_FOUND)
}

async fn create_user(
    State(state): State&lt;AppState&gt;,
    Json(payload): Json&lt;CreateUserRequest&gt;,
) -&gt; (StatusCode, Json&lt;User&gt;) {
    let mut users = state.users.write().await;
    let id = users.len() as i32 + 1;
    
    let user = User {
        id,
        username: payload.username,
        email: payload.email,
    };
    
    users.push(user.clone());
    (StatusCode::CREATED, Json(user))
}

async fn update_user(
    State(state): State&lt;AppState&gt;,
    Path(id): Path&lt;i32&gt;,
    Json(payload): Json&lt;UpdateUserRequest&gt;,
) -&gt; Result&lt;Json&lt;User&gt;, StatusCode&gt; {
    let mut users = state.users.write().await;
    
    let user = users
        .iter_mut()
        .find(|u| u.id == id)
        .ok_or(StatusCode::NOT_FOUND)?;
    
    if let Some(username) = payload.username {
        user.username = username;
    }
    if let Some(email) = payload.email {
        user.email = email;
    }
    
    Ok(Json(user.clone()))
}

async fn delete_user(
    State(state): State&lt;AppState&gt;,
    Path(id): Path&lt;i32&gt;,
) -&gt; StatusCode {
    let mut users = state.users.write().await;
    
    if let Some(pos) = users.iter().position(|u| u.id == id) {
        users.remove(pos);
        StatusCode::NO_CONTENT
    } else {
        StatusCode::NOT_FOUND
    }
}

// æ–‡ç« å¤„ç†å™¨
async fn user_posts(
    State(state): State&lt;AppState&gt;,
    Path(user_id): Path&lt;i32&gt;,
) -&gt; Json&lt;Vec&lt;Post&gt;&gt; {
    let posts = state.posts.read().await;
    let user_posts: Vec&lt;Post&gt; = posts
        .iter()
        .filter(|p| p.user_id == user_id)
        .cloned()
        .collect();
    
    Json(user_posts)
}

// è·¯ç”±é…ç½®
fn user_routes() -&gt; Router&lt;AppState&gt; {
    Router::new()
        .route("/", get(list_users).post(create_user))
        .route("/:id", get(get_user).put(update_user).delete(delete_user))
        .route("/:id/posts", get(user_posts))
}

#[tokio::main]
async fn main() {
    let state = AppState {
        users: Arc::new(RwLock::new(vec![
            User {
                id: 1,
                username: "alice".to_string(),
                email: "alice@example.com".to_string(),
            },
        ])),
        posts: Arc::new(RwLock::new(vec![])),
    };
    
    let app = Router::new()
        .nest("/api/users", user_routes())
        .with_state(state);
    
    let listener = tokio::net::TcpListener::bind("127.0.0.1:3000")
        .await
        .unwrap();
    
    println!("ğŸš€ Server running on http://127.0.0.1:3000");
    axum::serve(listener, app).await.unwrap();
}</code></pre>
<h2 id="æµ‹è¯•-api-1"><a class="header" href="#æµ‹è¯•-api-1">æµ‹è¯• API</a></h2>
<pre><code class="language-bash"># åˆ—å‡ºç”¨æˆ·
curl http://localhost:3000/api/users

# åˆ†é¡µæŸ¥è¯¢
curl "http://localhost:3000/api/users?page=1&amp;per_page=5"

# è·å–å•ä¸ªç”¨æˆ·
curl http://localhost:3000/api/users/1

# åˆ›å»ºç”¨æˆ·
curl -X POST http://localhost:3000/api/users \
  -H "Content-Type: application/json" \
  -d '{"username":"bob","email":"bob@example.com"}'

# æ›´æ–°ç”¨æˆ·
curl -X PUT http://localhost:3000/api/users/1 \
  -H "Content-Type: application/json" \
  -d '{"username":"alice_updated"}'

# åˆ é™¤ç”¨æˆ·
curl -X DELETE http://localhost:3000/api/users/1

# è·å–ç”¨æˆ·çš„æ–‡ç« 
curl http://localhost:3000/api/users/1/posts
</code></pre>
<h2 id="ç»ƒä¹ -1"><a class="header" href="#ç»ƒä¹ -1">ç»ƒä¹ </a></h2>
<ol>
<li>å®ç°æ–‡ç« çš„ CRUD æ“ä½œ</li>
<li>æ·»åŠ æœç´¢åŠŸèƒ½ï¼ˆæ”¯æŒå¤šä¸ªæŸ¥è¯¢å‚æ•°ï¼‰</li>
<li>å®ç°æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½</li>
<li>åˆ›å»ºè‡ªå®šä¹‰æå–å™¨è¿›è¡Œè¾“å…¥éªŒè¯</li>
<li>æ·»åŠ è¯·æ±‚æ—¥å¿—ä¸­é—´ä»¶</li>
</ol>
<h2 id="ä¸‹ä¸€æ­¥-3"><a class="header" href="#ä¸‹ä¸€æ­¥-3">ä¸‹ä¸€æ­¥</a></h2>
<p>Day 64 å°†å­¦ä¹ ä¸­é—´ä»¶å¼€å‘ï¼ŒåŒ…æ‹¬æ—¥å¿—ã€è®¤è¯ã€CORS ç­‰ã€‚</p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-64-ä¸­é—´ä»¶å¼€å‘-1"><a class="header" href="#day-64-ä¸­é—´ä»¶å¼€å‘-1">Day 64: ä¸­é—´ä»¶å¼€å‘</a></h1>
<h2 id="å­¦ä¹ ç›®æ ‡-3"><a class="header" href="#å­¦ä¹ ç›®æ ‡-3">å­¦ä¹ ç›®æ ‡</a></h2>
<ul>
<li>ç†è§£ä¸­é—´ä»¶æ¦‚å¿µå’Œå·¥ä½œåŸç†</li>
<li>æŒæ¡ Tower ä¸­é—´ä»¶ç³»ç»Ÿ</li>
<li>å®ç°å¸¸ç”¨ä¸­é—´ä»¶</li>
<li>åˆ›å»ºè‡ªå®šä¹‰ä¸­é—´ä»¶</li>
</ul>
<h2 id="ä¸­é—´ä»¶æ¦‚å¿µ"><a class="header" href="#ä¸­é—´ä»¶æ¦‚å¿µ">ä¸­é—´ä»¶æ¦‚å¿µ</a></h2>
<p>ä¸­é—´ä»¶æ˜¯åœ¨è¯·æ±‚åˆ°è¾¾å¤„ç†å™¨ä¹‹å‰æˆ–å“åº”è¿”å›å®¢æˆ·ç«¯ä¹‹å‰æ‰§è¡Œçš„ä»£ç å±‚ã€‚</p>
<pre><code>è¯·æ±‚ â†’ ä¸­é—´ä»¶1 â†’ ä¸­é—´ä»¶2 â†’ å¤„ç†å™¨ â†’ ä¸­é—´ä»¶2 â†’ ä¸­é—´ä»¶1 â†’ å“åº”
</code></pre>
<h2 id="tower-ä¸­é—´ä»¶"><a class="header" href="#tower-ä¸­é—´ä»¶">Tower ä¸­é—´ä»¶</a></h2>
<h3 id="åŸºæœ¬ä½¿ç”¨"><a class="header" href="#åŸºæœ¬ä½¿ç”¨">åŸºæœ¬ä½¿ç”¨</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use axum::{
    Router,
    middleware,
};
use tower::ServiceBuilder;
use tower_http::{
    trace::TraceLayer,
    cors::CorsLayer,
    compression::CompressionLayer,
};

let app = Router::new()
    .route("/api/users", get(list_users))
    .layer(
        ServiceBuilder::new()
            .layer(TraceLayer::new_for_http())
            .layer(CorsLayer::permissive())
            .layer(CompressionLayer::new())
    );
<span class="boring">}</span></code></pre>
<h2 id="å†…ç½®ä¸­é—´ä»¶"><a class="header" href="#å†…ç½®ä¸­é—´ä»¶">å†…ç½®ä¸­é—´ä»¶</a></h2>
<h3 id="1-æ—¥å¿—è¿½è¸ª-tracing"><a class="header" href="#1-æ—¥å¿—è¿½è¸ª-tracing">1. æ—¥å¿—è¿½è¸ª (Tracing)</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use tower_http::trace::{TraceLayer, DefaultMakeSpan, DefaultOnResponse};
use tracing::Level;

let trace_layer = TraceLayer::new_for_http()
    .make_span_with(DefaultMakeSpan::new().level(Level::INFO))
    .on_response(DefaultOnResponse::new().level(Level::INFO));

let app = Router::new()
    .route("/", get(handler))
    .layer(trace_layer);
<span class="boring">}</span></code></pre>
<h3 id="2-cors"><a class="header" href="#2-cors">2. CORS</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use tower_http::cors::{CorsLayer, Any};
use http::Method;

let cors = CorsLayer::new()
    .allow_origin(Any)
    .allow_methods([Method::GET, Method::POST, Method::PUT, Method::DELETE])
    .allow_headers(Any);

let app = Router::new()
    .route("/api/users", get(list_users))
    .layer(cors);
<span class="boring">}</span></code></pre>
<h3 id="3-å‹ç¼©"><a class="header" href="#3-å‹ç¼©">3. å‹ç¼©</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use tower_http::compression::CompressionLayer;

let app = Router::new()
    .route("/", get(handler))
    .layer(CompressionLayer::new());
<span class="boring">}</span></code></pre>
<h3 id="4-è¶…æ—¶"><a class="header" href="#4-è¶…æ—¶">4. è¶…æ—¶</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use tower::timeout::TimeoutLayer;
use std::time::Duration;

let app = Router::new()
    .route("/", get(handler))
    .layer(TimeoutLayer::new(Duration::from_secs(10)));
<span class="boring">}</span></code></pre>
<h3 id="5-é™æµ"><a class="header" href="#5-é™æµ">5. é™æµ</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use tower::limit::RateLimitLayer;
use std::time::Duration;

let app = Router::new()
    .route("/api/users", get(list_users))
    .layer(RateLimitLayer::new(100, Duration::from_secs(60)));
<span class="boring">}</span></code></pre>
<h2 id="è‡ªå®šä¹‰ä¸­é—´ä»¶"><a class="header" href="#è‡ªå®šä¹‰ä¸­é—´ä»¶">è‡ªå®šä¹‰ä¸­é—´ä»¶</a></h2>
<h3 id="æ–¹æ³•-1-ä½¿ç”¨-from_fn"><a class="header" href="#æ–¹æ³•-1-ä½¿ç”¨-from_fn">æ–¹æ³• 1: ä½¿ç”¨ <code>from_fn</code></a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use axum::{
    middleware::{self, Next},
    extract::Request,
    response::Response,
};

async fn my_middleware(
    request: Request,
    next: Next,
) -&gt; Response {
    // è¯·æ±‚å‰å¤„ç†
    println!("Request: {} {}", request.method(), request.uri());
    
    // è°ƒç”¨ä¸‹ä¸€ä¸ªä¸­é—´ä»¶æˆ–å¤„ç†å™¨
    let response = next.run(request).await;
    
    // å“åº”åå¤„ç†
    println!("Response status: {}", response.status());
    
    response
}

let app = Router::new()
    .route("/", get(handler))
    .layer(middleware::from_fn(my_middleware));
<span class="boring">}</span></code></pre>
<h3 id="æ–¹æ³•-2-å®ç°-layer-trait"><a class="header" href="#æ–¹æ³•-2-å®ç°-layer-trait">æ–¹æ³• 2: å®ç° <code>Layer</code> trait</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use tower::{Layer, Service};
use std::task::{Context, Poll};
use pin_project::pin_project;

#[derive(Clone)]
struct MyMiddlewareLayer;

impl&lt;S&gt; Layer&lt;S&gt; for MyMiddlewareLayer {
    type Service = MyMiddleware&lt;S&gt;;
    
    fn layer(&amp;self, inner: S) -&gt; Self::Service {
        MyMiddleware { inner }
    }
}

#[derive(Clone)]
struct MyMiddleware&lt;S&gt; {
    inner: S,
}

impl&lt;S&gt; Service&lt;Request&gt; for MyMiddleware&lt;S&gt;
where
    S: Service&lt;Request, Response = Response&gt; + Send + 'static,
    S::Future: Send + 'static,
{
    type Response = S::Response;
    type Error = S::Error;
    type Future = Pin&lt;Box&lt;dyn Future&lt;Output = Result&lt;Self::Response, Self::Error&gt;&gt; + Send&gt;&gt;;
    
    fn poll_ready(&amp;mut self, cx: &amp;mut Context&lt;'_&gt;) -&gt; Poll&lt;Result&lt;(), Self::Error&gt;&gt; {
        self.inner.poll_ready(cx)
    }
    
    fn call(&amp;mut self, request: Request) -&gt; Self::Future {
        let future = self.inner.call(request);
        
        Box::pin(async move {
            let response = future.await?;
            // å¤„ç†å“åº”
            Ok(response)
        })
    }
}
<span class="boring">}</span></code></pre>
<h2 id="å®ç”¨ä¸­é—´ä»¶ç¤ºä¾‹"><a class="header" href="#å®ç”¨ä¸­é—´ä»¶ç¤ºä¾‹">å®ç”¨ä¸­é—´ä»¶ç¤ºä¾‹</a></h2>
<h3 id="1-è¯·æ±‚-id-ä¸­é—´ä»¶"><a class="header" href="#1-è¯·æ±‚-id-ä¸­é—´ä»¶">1. è¯·æ±‚ ID ä¸­é—´ä»¶</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use axum::{
    middleware::Next,
    extract::Request,
    response::Response,
    http::HeaderValue,
};
use uuid::Uuid;

async fn request_id_middleware(
    mut request: Request,
    next: Next,
) -&gt; Response {
    let request_id = Uuid::new_v4().to_string();
    
    // æ·»åŠ åˆ°è¯·æ±‚æ‰©å±•
    request.extensions_mut().insert(request_id.clone());
    
    let mut response = next.run(request).await;
    
    // æ·»åŠ åˆ°å“åº”å¤´
    response.headers_mut().insert(
        "X-Request-ID",
        HeaderValue::from_str(&amp;request_id).unwrap(),
    );
    
    response
}
<span class="boring">}</span></code></pre>
<h3 id="2-è®¤è¯ä¸­é—´ä»¶"><a class="header" href="#2-è®¤è¯ä¸­é—´ä»¶">2. è®¤è¯ä¸­é—´ä»¶</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use axum::{
    middleware::Next,
    extract::Request,
    response::{Response, IntoResponse},
    http::StatusCode,
};

async fn auth_middleware(
    request: Request,
    next: Next,
) -&gt; Result&lt;Response, StatusCode&gt; {
    let auth_header = request
        .headers()
        .get("Authorization")
        .and_then(|h| h.to_str().ok());
    
    match auth_header {
        Some(token) if token.starts_with("Bearer ") =&gt; {
            let token = &amp;token[7..];
            
            match verify_token(token).await {
                Ok(user) =&gt; {
                    let mut request = request;
                    request.extensions_mut().insert(user);
                    Ok(next.run(request).await)
                }
                Err(_) =&gt; Err(StatusCode::UNAUTHORIZED),
            }
        }
        _ =&gt; Err(StatusCode::UNAUTHORIZED),
    }
}

// ä½¿ç”¨
let protected_routes = Router::new()
    .route("/profile", get(get_profile))
    .layer(middleware::from_fn(auth_middleware));
<span class="boring">}</span></code></pre>
<h3 id="3-æ—¥å¿—ä¸­é—´ä»¶"><a class="header" href="#3-æ—¥å¿—ä¸­é—´ä»¶">3. æ—¥å¿—ä¸­é—´ä»¶</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use axum::{
    middleware::Next,
    extract::Request,
    response::Response,
};
use std::time::Instant;

async fn logging_middleware(
    request: Request,
    next: Next,
) -&gt; Response {
    let method = request.method().clone();
    let uri = request.uri().clone();
    let start = Instant::now();
    
    let response = next.run(request).await;
    
    let duration = start.elapsed();
    let status = response.status();
    
    tracing::info!(
        method = %method,
        uri = %uri,
        status = %status,
        duration = ?duration,
        "Request completed"
    );
    
    response
}
<span class="boring">}</span></code></pre>
<h3 id="4-é”™è¯¯å¤„ç†ä¸­é—´ä»¶"><a class="header" href="#4-é”™è¯¯å¤„ç†ä¸­é—´ä»¶">4. é”™è¯¯å¤„ç†ä¸­é—´ä»¶</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use axum::{
    middleware::Next,
    extract::Request,
    response::{Response, IntoResponse},
    http::StatusCode,
    Json,
};
use serde_json::json;

async fn error_handler_middleware(
    request: Request,
    next: Next,
) -&gt; Response {
    let response = next.run(request).await;
    
    if response.status().is_server_error() {
        let error_response = Json(json!({
            "error": "Internal server error",
            "status": 500
        }));
        
        (StatusCode::INTERNAL_SERVER_ERROR, error_response).into_response()
    } else {
        response
    }
}
<span class="boring">}</span></code></pre>
<h3 id="5-é™æµä¸­é—´ä»¶"><a class="header" href="#5-é™æµä¸­é—´ä»¶">5. é™æµä¸­é—´ä»¶</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use axum::{
    middleware::Next,
    extract::Request,
    response::Response,
    http::StatusCode,
};
use std::sync::Arc;
use tokio::sync::Mutex;
use std::collections::HashMap;
use std::time::{Duration, Instant};

#[derive(Clone)]
struct RateLimiter {
    requests: Arc&lt;Mutex&lt;HashMap&lt;String, Vec&lt;Instant&gt;&gt;&gt;&gt;,
    max_requests: usize,
    window: Duration,
}

impl RateLimiter {
    fn new(max_requests: usize, window: Duration) -&gt; Self {
        Self {
            requests: Arc::new(Mutex::new(HashMap::new())),
            max_requests,
            window,
        }
    }
    
    async fn check(&amp;self, key: &amp;str) -&gt; bool {
        let mut requests = self.requests.lock().await;
        let now = Instant::now();
        
        let entry = requests.entry(key.to_string()).or_insert_with(Vec::new);
        
        // ç§»é™¤è¿‡æœŸçš„è¯·æ±‚
        entry.retain(|&amp;time| now.duration_since(time) &lt; self.window);
        
        if entry.len() &lt; self.max_requests {
            entry.push(now);
            true
        } else {
            false
        }
    }
}

async fn rate_limit_middleware(
    request: Request,
    next: Next,
    limiter: Arc&lt;RateLimiter&gt;,
) -&gt; Result&lt;Response, StatusCode&gt; {
    let ip = request
        .headers()
        .get("X-Forwarded-For")
        .and_then(|h| h.to_str().ok())
        .unwrap_or("unknown");
    
    if limiter.check(ip).await {
        Ok(next.run(request).await)
    } else {
        Err(StatusCode::TOO_MANY_REQUESTS)
    }
}
<span class="boring">}</span></code></pre>
<h3 id="6-ç¼“å­˜ä¸­é—´ä»¶"><a class="header" href="#6-ç¼“å­˜ä¸­é—´ä»¶">6. ç¼“å­˜ä¸­é—´ä»¶</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use axum::{
    middleware::Next,
    extract::Request,
    response::Response,
    body::Body,
};
use std::sync::Arc;
use tokio::sync::RwLock;
use std::collections::HashMap;

#[derive(Clone)]
struct CacheMiddleware {
    cache: Arc&lt;RwLock&lt;HashMap&lt;String, Vec&lt;u8&gt;&gt;&gt;&gt;,
}

impl CacheMiddleware {
    fn new() -&gt; Self {
        Self {
            cache: Arc::new(RwLock::new(HashMap::new())),
        }
    }
}

async fn cache_middleware(
    request: Request,
    next: Next,
    cache: Arc&lt;RwLock&lt;HashMap&lt;String, Vec&lt;u8&gt;&gt;&gt;&gt;,
) -&gt; Response {
    let key = format!("{} {}", request.method(), request.uri());
    
    // æ£€æŸ¥ç¼“å­˜
    if request.method() == "GET" {
        let cache_read = cache.read().await;
        if let Some(cached) = cache_read.get(&amp;key) {
            return Response::builder()
                .header("X-Cache", "HIT")
                .body(Body::from(cached.clone()))
                .unwrap();
        }
    }
    
    let response = next.run(request).await;
    
    // ç¼“å­˜ GET è¯·æ±‚çš„æˆåŠŸå“åº”
    if response.status().is_success() {
        // æ³¨æ„ï¼šå®é™…å®ç°éœ€è¦å¤„ç†å“åº”ä½“
        // è¿™é‡Œç®€åŒ–äº†
    }
    
    response
}
<span class="boring">}</span></code></pre>
<h2 id="ä¸­é—´ä»¶ç»„åˆ"><a class="header" href="#ä¸­é—´ä»¶ç»„åˆ">ä¸­é—´ä»¶ç»„åˆ</a></h2>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use tower::ServiceBuilder;
use std::time::Duration;

let app = Router::new()
    .route("/api/users", get(list_users))
    .layer(
        ServiceBuilder::new()
            // æœ€å¤–å±‚ï¼šè¯·æ±‚ ID
            .layer(middleware::from_fn(request_id_middleware))
            // æ—¥å¿—
            .layer(TraceLayer::new_for_http())
            // CORS
            .layer(CorsLayer::permissive())
            // å‹ç¼©
            .layer(CompressionLayer::new())
            // è¶…æ—¶
            .layer(TimeoutLayer::new(Duration::from_secs(30)))
            // é™æµ
            .layer(middleware::from_fn(rate_limit_middleware))
    );
<span class="boring">}</span></code></pre>
<h2 id="æ¡ä»¶ä¸­é—´ä»¶"><a class="header" href="#æ¡ä»¶ä¸­é—´ä»¶">æ¡ä»¶ä¸­é—´ä»¶</a></h2>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use axum::Router;

fn app() -&gt; Router {
    let mut app = Router::new()
        .route("/api/users", get(list_users));
    
    // ä»…åœ¨ç”Ÿäº§ç¯å¢ƒå¯ç”¨æŸäº›ä¸­é—´ä»¶
    if cfg!(not(debug_assertions)) {
        app = app.layer(CompressionLayer::new());
    }
    
    // æ ¹æ®é…ç½®å¯ç”¨è®¤è¯
    if std::env::var("ENABLE_AUTH").is_ok() {
        app = app.layer(middleware::from_fn(auth_middleware));
    }
    
    app
}
<span class="boring">}</span></code></pre>
<h2 id="å®Œæ•´ç¤ºä¾‹-3"><a class="header" href="#å®Œæ•´ç¤ºä¾‹-3">å®Œæ•´ç¤ºä¾‹</a></h2>
<pre class="playground"><code class="language-rust">use axum::{
    Router,
    routing::get,
    middleware::{self, Next},
    extract::Request,
    response::{Response, IntoResponse},
    http::{StatusCode, HeaderValue},
    Json,
};
use tower::ServiceBuilder;
use tower_http::{
    trace::TraceLayer,
    cors::CorsLayer,
    compression::CompressionLayer,
};
use std::time::Instant;
use uuid::Uuid;
use serde_json::json;

// è¯·æ±‚ ID ä¸­é—´ä»¶
async fn request_id_middleware(
    mut request: Request,
    next: Next,
) -&gt; Response {
    let request_id = Uuid::new_v4().to_string();
    request.extensions_mut().insert(request_id.clone());
    
    let mut response = next.run(request).await;
    response.headers_mut().insert(
        "X-Request-ID",
        HeaderValue::from_str(&amp;request_id).unwrap(),
    );
    
    response
}

// æ—¥å¿—ä¸­é—´ä»¶
async fn logging_middleware(
    request: Request,
    next: Next,
) -&gt; Response {
    let method = request.method().clone();
    let uri = request.uri().clone();
    let start = Instant::now();
    
    let response = next.run(request).await;
    
    let duration = start.elapsed();
    let status = response.status();
    
    println!(
        "{} {} - {} - {:?}",
        method, uri, status, duration
    );
    
    response
}

// é”™è¯¯å¤„ç†ä¸­é—´ä»¶
async fn error_handler(
    request: Request,
    next: Next,
) -&gt; Response {
    let response = next.run(request).await;
    
    if response.status().is_server_error() {
        (
            StatusCode::INTERNAL_SERVER_ERROR,
            Json(json!({
                "error": "Internal server error"
            }))
        ).into_response()
    } else {
        response
    }
}

// å¤„ç†å™¨
async fn handler() -&gt; &amp;'static str {
    "Hello, World!"
}

#[tokio::main]
async fn main() {
    tracing_subscriber::fmt::init();
    
    let app = Router::new()
        .route("/", get(handler))
        .layer(
            ServiceBuilder::new()
                .layer(middleware::from_fn(request_id_middleware))
                .layer(middleware::from_fn(logging_middleware))
                .layer(middleware::from_fn(error_handler))
                .layer(TraceLayer::new_for_http())
                .layer(CorsLayer::permissive())
                .layer(CompressionLayer::new())
        );
    
    let listener = tokio::net::TcpListener::bind("127.0.0.1:3000")
        .await
        .unwrap();
    
    println!("ğŸš€ Server running on http://127.0.0.1:3000");
    axum::serve(listener, app).await.unwrap();
}</code></pre>
<h2 id="ç»ƒä¹ -2"><a class="header" href="#ç»ƒä¹ -2">ç»ƒä¹ </a></h2>
<ol>
<li>å®ç° API å¯†é’¥è®¤è¯ä¸­é—´ä»¶</li>
<li>åˆ›å»ºè¯·æ±‚/å“åº”æ—¥å¿—ä¸­é—´ä»¶</li>
<li>å®ç°åŸºäº IP çš„é™æµä¸­é—´ä»¶</li>
<li>æ·»åŠ è¯·æ±‚ä½“å¤§å°é™åˆ¶ä¸­é—´ä»¶</li>
<li>åˆ›å»ºæ€§èƒ½ç›‘æ§ä¸­é—´ä»¶</li>
</ol>
<h2 id="ä¸‹ä¸€æ­¥-4"><a class="header" href="#ä¸‹ä¸€æ­¥-4">ä¸‹ä¸€æ­¥</a></h2>
<p>Day 65 å°†å­¦ä¹ è¯·æ±‚çŠ¶æ€ç®¡ç†ï¼ŒåŒ…æ‹¬åº”ç”¨çŠ¶æ€ã€è¿æ¥æ± ç­‰ã€‚</p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-65-è¯·æ±‚çŠ¶æ€ç®¡ç†-1"><a class="header" href="#day-65-è¯·æ±‚çŠ¶æ€ç®¡ç†-1">Day 65: è¯·æ±‚çŠ¶æ€ç®¡ç†</a></h1>
<h2 id="å­¦ä¹ ç›®æ ‡-4"><a class="header" href="#å­¦ä¹ ç›®æ ‡-4">å­¦ä¹ ç›®æ ‡</a></h2>
<ul>
<li>ç†è§£åº”ç”¨çŠ¶æ€ç®¡ç†</li>
<li>æŒæ¡ Arc + RwLock æ¨¡å¼</li>
<li>å­¦ä¹ è¿æ¥æ± ç®¡ç†</li>
<li>å®ç°çŠ¶æ€æ³¨å…¥</li>
</ul>
<h2 id="åº”ç”¨çŠ¶æ€æ¦‚å¿µ"><a class="header" href="#åº”ç”¨çŠ¶æ€æ¦‚å¿µ">åº”ç”¨çŠ¶æ€æ¦‚å¿µ</a></h2>
<p>åœ¨ Web åº”ç”¨ä¸­ï¼ŒçŠ¶æ€ç®¡ç†ç”¨äºï¼š</p>
<ul>
<li>å…±äº«æ•°æ®åº“è¿æ¥æ± </li>
<li>ç¼“å­˜é…ç½®ä¿¡æ¯</li>
<li>å…±äº«åº”ç”¨çº§æ•°æ®</li>
<li>ç®¡ç†å…¨å±€èµ„æº</li>
</ul>
<h2 id="axum-çŠ¶æ€ç®¡ç†"><a class="header" href="#axum-çŠ¶æ€ç®¡ç†">Axum çŠ¶æ€ç®¡ç†</a></h2>
<h3 id="åŸºæœ¬çŠ¶æ€"><a class="header" href="#åŸºæœ¬çŠ¶æ€">åŸºæœ¬çŠ¶æ€</a></h3>
<pre class="playground"><code class="language-rust">use axum::{
    Router,
    routing::get,
    extract::State,
    Json,
};
use std::sync::Arc;

// ç®€å•çŠ¶æ€
#[derive(Clone)]
struct AppState {
    app_name: String,
    version: String,
}

async fn info(State(state): State&lt;AppState&gt;) -&gt; Json&lt;serde_json::Value&gt; {
    Json(serde_json::json!({
        "app": state.app_name,
        "version": state.version
    }))
}

#[tokio::main]
async fn main() {
    let state = AppState {
        app_name: "My App".to_string(),
        version: "1.0.0".to_string(),
    };
    
    let app = Router::new()
        .route("/info", get(info))
        .with_state(state);
    
    let listener = tokio::net::TcpListener::bind("127.0.0.1:3000")
        .await
        .unwrap();
    
    axum::serve(listener, app).await.unwrap();
}</code></pre>
<h3 id="å…±äº«å¯å˜çŠ¶æ€"><a class="header" href="#å…±äº«å¯å˜çŠ¶æ€">å…±äº«å¯å˜çŠ¶æ€</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use std::sync::Arc;
use tokio::sync::RwLock;
use std::collections::HashMap;

#[derive(Clone)]
struct AppState {
    // ä½¿ç”¨ Arc + RwLock å®ç°å…±äº«å¯å˜çŠ¶æ€
    cache: Arc&lt;RwLock&lt;HashMap&lt;String, String&gt;&gt;&gt;,
    counter: Arc&lt;RwLock&lt;u64&gt;&gt;,
}

// è¯»å–ç¼“å­˜
async fn get_cache(
    State(state): State&lt;AppState&gt;,
    Path(key): Path&lt;String&gt;,
) -&gt; Result&lt;String, StatusCode&gt; {
    let cache = state.cache.read().await;
    cache
        .get(&amp;key)
        .cloned()
        .ok_or(StatusCode::NOT_FOUND)
}

// å†™å…¥ç¼“å­˜
async fn set_cache(
    State(state): State&lt;AppState&gt;,
    Path(key): Path&lt;String&gt;,
    body: String,
) -&gt; StatusCode {
    let mut cache = state.cache.write().await;
    cache.insert(key, body);
    StatusCode::CREATED
}

// å¢åŠ è®¡æ•°å™¨
async fn increment(State(state): State&lt;AppState&gt;) -&gt; String {
    let mut counter = state.counter.write().await;
    *counter += 1;
    format!("Counter: {}", *counter)
}

fn app() -&gt; Router {
    let state = AppState {
        cache: Arc::new(RwLock::new(HashMap::new())),
        counter: Arc::new(RwLock::new(0)),
    };
    
    Router::new()
        .route("/cache/:key", get(get_cache).post(set_cache))
        .route("/counter", get(increment))
        .with_state(state)
}
<span class="boring">}</span></code></pre>
<h2 id="æ•°æ®åº“è¿æ¥æ± "><a class="header" href="#æ•°æ®åº“è¿æ¥æ± ">æ•°æ®åº“è¿æ¥æ± </a></h2>
<h3 id="sqlx-è¿æ¥æ± "><a class="header" href="#sqlx-è¿æ¥æ± ">SQLx è¿æ¥æ± </a></h3>
<pre class="playground"><code class="language-rust">use sqlx::postgres::PgPoolOptions;
use sqlx::PgPool;

#[derive(Clone)]
struct AppState {
    db: PgPool,
}

async fn create_state() -&gt; AppState {
    let database_url = std::env::var("DATABASE_URL")
        .expect("DATABASE_URL must be set");
    
    let pool = PgPoolOptions::new()
        .max_connections(5)
        .connect(&amp;database_url)
        .await
        .expect("Failed to create pool");
    
    AppState { db: pool }
}

// ä½¿ç”¨æ•°æ®åº“
async fn get_users(
    State(state): State&lt;AppState&gt;,
) -&gt; Result&lt;Json&lt;Vec&lt;User&gt;&gt;, StatusCode&gt; {
    let users = sqlx::query_as!(
        User,
        "SELECT id, username, email FROM users"
    )
    .fetch_all(&amp;state.db)
    .await
    .map_err(|_| StatusCode::INTERNAL_SERVER_ERROR)?;
    
    Ok(Json(users))
}

#[tokio::main]
async fn main() {
    let state = create_state().await;
    
    let app = Router::new()
        .route("/users", get(get_users))
        .with_state(state);
    
    let listener = tokio::net::TcpListener::bind("127.0.0.1:3000")
        .await
        .unwrap();
    
    axum::serve(listener, app).await.unwrap();
}</code></pre>
<h3 id="redis-è¿æ¥æ± "><a class="header" href="#redis-è¿æ¥æ± ">Redis è¿æ¥æ± </a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use redis::{Client, aio::ConnectionManager};

#[derive(Clone)]
struct AppState {
    redis: ConnectionManager,
}

async fn create_redis_state() -&gt; AppState {
    let client = Client::open("redis://127.0.0.1/")
        .expect("Failed to create Redis client");
    
    let manager = ConnectionManager::new(client)
        .await
        .expect("Failed to create connection manager");
    
    AppState { redis: manager }
}

// ä½¿ç”¨ Redis
async fn get_value(
    State(state): State&lt;AppState&gt;,
    Path(key): Path&lt;String&gt;,
) -&gt; Result&lt;String, StatusCode&gt; {
    let mut conn = state.redis.clone();
    
    redis::cmd("GET")
        .arg(&amp;key)
        .query_async(&amp;mut conn)
        .await
        .map_err(|_| StatusCode::INTERNAL_SERVER_ERROR)
}

async fn set_value(
    State(state): State&lt;AppState&gt;,
    Path(key): Path&lt;String&gt;,
    body: String,
) -&gt; StatusCode {
    let mut conn = state.redis.clone();
    
    let _: () = redis::cmd("SET")
        .arg(&amp;key)
        .arg(&amp;body)
        .query_async(&amp;mut conn)
        .await
        .unwrap();
    
    StatusCode::CREATED
}
<span class="boring">}</span></code></pre>
<h2 id="å¤æ‚çŠ¶æ€ç®¡ç†"><a class="header" href="#å¤æ‚çŠ¶æ€ç®¡ç†">å¤æ‚çŠ¶æ€ç®¡ç†</a></h2>
<h3 id="å¤šå±‚çŠ¶æ€ç»“æ„"><a class="header" href="#å¤šå±‚çŠ¶æ€ç»“æ„">å¤šå±‚çŠ¶æ€ç»“æ„</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use std::sync::Arc;
use tokio::sync::RwLock;
use sqlx::PgPool;
use redis::aio::ConnectionManager;

// é…ç½®
#[derive(Clone)]
struct Config {
    app_name: String,
    max_upload_size: usize,
    jwt_secret: String,
}

// ç¼“å­˜å±‚
#[derive(Clone)]
struct CacheLayer {
    redis: ConnectionManager,
    local_cache: Arc&lt;RwLock&lt;HashMap&lt;String, String&gt;&gt;&gt;,
}

// æ•°æ®åº“å±‚
#[derive(Clone)]
struct DatabaseLayer {
    pg_pool: PgPool,
}

// åº”ç”¨çŠ¶æ€
#[derive(Clone)]
struct AppState {
    config: Arc&lt;Config&gt;,
    cache: CacheLayer,
    database: DatabaseLayer,
    metrics: Arc&lt;RwLock&lt;Metrics&gt;&gt;,
}

#[derive(Default)]
struct Metrics {
    request_count: u64,
    error_count: u64,
}

impl AppState {
    async fn new() -&gt; Self {
        let config = Arc::new(Config {
            app_name: "My App".to_string(),
            max_upload_size: 10 * 1024 * 1024, // 10MB
            jwt_secret: std::env::var("JWT_SECRET").unwrap(),
        });
        
        let redis_client = redis::Client::open("redis://127.0.0.1/").unwrap();
        let redis = ConnectionManager::new(redis_client).await.unwrap();
        
        let cache = CacheLayer {
            redis,
            local_cache: Arc::new(RwLock::new(HashMap::new())),
        };
        
        let pg_pool = PgPoolOptions::new()
            .max_connections(5)
            .connect(&amp;std::env::var("DATABASE_URL").unwrap())
            .await
            .unwrap();
        
        let database = DatabaseLayer { pg_pool };
        
        Self {
            config,
            cache,
            database,
            metrics: Arc::new(RwLock::new(Metrics::default())),
        }
    }
    
    async fn increment_request_count(&amp;self) {
        let mut metrics = self.metrics.write().await;
        metrics.request_count += 1;
    }
}

// ä½¿ç”¨çŠ¶æ€
async fn handler(State(state): State&lt;AppState&gt;) -&gt; String {
    state.increment_request_count().await;
    format!("App: {}", state.config.app_name)
}
<span class="boring">}</span></code></pre>
<h2 id="çŠ¶æ€åˆå§‹åŒ–"><a class="header" href="#çŠ¶æ€åˆå§‹åŒ–">çŠ¶æ€åˆå§‹åŒ–</a></h2>
<h3 id="å»¶è¿Ÿåˆå§‹åŒ–"><a class="header" href="#å»¶è¿Ÿåˆå§‹åŒ–">å»¶è¿Ÿåˆå§‹åŒ–</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use std::sync::Arc;
use tokio::sync::OnceCell;

#[derive(Clone)]
struct AppState {
    expensive_resource: Arc&lt;OnceCell&lt;ExpensiveResource&gt;&gt;,
}

struct ExpensiveResource {
    data: Vec&lt;u8&gt;,
}

impl ExpensiveResource {
    async fn new() -&gt; Self {
        // æ¨¡æ‹Ÿè€—æ—¶åˆå§‹åŒ–
        tokio::time::sleep(Duration::from_secs(2)).await;
        Self {
            data: vec![0; 1024 * 1024], // 1MB
        }
    }
}

async fn use_resource(State(state): State&lt;AppState&gt;) -&gt; String {
    let resource = state
        .expensive_resource
        .get_or_init(|| async {
            ExpensiveResource::new().await
        })
        .await;
    
    format!("Resource size: {}", resource.data.len())
}
<span class="boring">}</span></code></pre>
<h3 id="å¥åº·æ£€æŸ¥"><a class="header" href="#å¥åº·æ£€æŸ¥">å¥åº·æ£€æŸ¥</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>async fn health_check(State(state): State&lt;AppState&gt;) -&gt; Result&lt;Json&lt;HealthStatus&gt;, StatusCode&gt; {
    // æ£€æŸ¥æ•°æ®åº“è¿æ¥
    let db_healthy = sqlx::query("SELECT 1")
        .fetch_one(&amp;state.database.pg_pool)
        .await
        .is_ok();
    
    // æ£€æŸ¥ Redis è¿æ¥
    let mut redis_conn = state.cache.redis.clone();
    let redis_healthy = redis::cmd("PING")
        .query_async::&lt;_, String&gt;(&amp;mut redis_conn)
        .await
        .is_ok();
    
    let status = HealthStatus {
        status: if db_healthy &amp;&amp; redis_healthy { "healthy" } else { "unhealthy" },
        database: db_healthy,
        redis: redis_healthy,
    };
    
    if db_healthy &amp;&amp; redis_healthy {
        Ok(Json(status))
    } else {
        Err(StatusCode::SERVICE_UNAVAILABLE)
    }
}

#[derive(Serialize)]
struct HealthStatus {
    status: &amp;'static str,
    database: bool,
    redis: bool,
}
<span class="boring">}</span></code></pre>
<h2 id="çŠ¶æ€è®¿é—®æ¨¡å¼"><a class="header" href="#çŠ¶æ€è®¿é—®æ¨¡å¼">çŠ¶æ€è®¿é—®æ¨¡å¼</a></h2>
<h3 id="æœåŠ¡å±‚æ¨¡å¼"><a class="header" href="#æœåŠ¡å±‚æ¨¡å¼">æœåŠ¡å±‚æ¨¡å¼</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// æœåŠ¡å±‚å°è£…çŠ¶æ€è®¿é—®
struct UserService {
    db: PgPool,
    cache: ConnectionManager,
}

impl UserService {
    fn new(state: &amp;AppState) -&gt; Self {
        Self {
            db: state.database.pg_pool.clone(),
            cache: state.cache.redis.clone(),
        }
    }
    
    async fn get_user(&amp;self, id: i32) -&gt; Result&lt;User, Error&gt; {
        // å…ˆæŸ¥ç¼“å­˜
        let cache_key = format!("user:{}", id);
        let mut conn = self.cache.clone();
        
        if let Ok(cached) = redis::cmd("GET")
            .arg(&amp;cache_key)
            .query_async::&lt;_, String&gt;(&amp;mut conn)
            .await
        {
            return Ok(serde_json::from_str(&amp;cached)?);
        }
        
        // æŸ¥æ•°æ®åº“
        let user = sqlx::query_as!(
            User,
            "SELECT * FROM users WHERE id = $1",
            id
        )
        .fetch_one(&amp;self.db)
        .await?;
        
        // å†™å…¥ç¼“å­˜
        let _: () = redis::cmd("SETEX")
            .arg(&amp;cache_key)
            .arg(3600) // 1å°æ—¶è¿‡æœŸ
            .arg(serde_json::to_string(&amp;user)?)
            .query_async(&amp;mut conn)
            .await?;
        
        Ok(user)
    }
}

// åœ¨å¤„ç†å™¨ä¸­ä½¿ç”¨
async fn get_user_handler(
    State(state): State&lt;AppState&gt;,
    Path(id): Path&lt;i32&gt;,
) -&gt; Result&lt;Json&lt;User&gt;, StatusCode&gt; {
    let service = UserService::new(&amp;state);
    let user = service
        .get_user(id)
        .await
        .map_err(|_| StatusCode::INTERNAL_SERVER_ERROR)?;
    
    Ok(Json(user))
}
<span class="boring">}</span></code></pre>
<h2 id="å®Œæ•´ç¤ºä¾‹-4"><a class="header" href="#å®Œæ•´ç¤ºä¾‹-4">å®Œæ•´ç¤ºä¾‹</a></h2>
<pre class="playground"><code class="language-rust">use axum::{
    Router,
    routing::{get, post},
    extract::{State, Path},
    Json,
    http::StatusCode,
};
use sqlx::postgres::PgPoolOptions;
use redis::aio::ConnectionManager;
use serde::{Deserialize, Serialize};
use std::sync::Arc;
use tokio::sync::RwLock;
use std::collections::HashMap;

// é…ç½®
#[derive(Clone)]
struct Config {
    database_url: String,
    redis_url: String,
    jwt_secret: String,
}

// åº”ç”¨çŠ¶æ€
#[derive(Clone)]
struct AppState {
    config: Arc&lt;Config&gt;,
    db: sqlx::PgPool,
    redis: ConnectionManager,
    cache: Arc&lt;RwLock&lt;HashMap&lt;String, String&gt;&gt;&gt;,
}

impl AppState {
    async fn new(config: Config) -&gt; Self {
        let db = PgPoolOptions::new()
            .max_connections(5)
            .connect(&amp;config.database_url)
            .await
            .expect("Failed to connect to database");
        
        let redis_client = redis::Client::open(config.redis_url.as_str())
            .expect("Failed to create Redis client");
        let redis = ConnectionManager::new(redis_client)
            .await
            .expect("Failed to create Redis connection");
        
        Self {
            config: Arc::new(config),
            db,
            redis,
            cache: Arc::new(RwLock::new(HashMap::new())),
        }
    }
}

// æ•°æ®æ¨¡å‹
#[derive(Debug, Serialize, Deserialize, sqlx::FromRow)]
struct User {
    id: i32,
    username: String,
    email: String,
}

// å¤„ç†å™¨
async fn list_users(
    State(state): State&lt;AppState&gt;,
) -&gt; Result&lt;Json&lt;Vec&lt;User&gt;&gt;, StatusCode&gt; {
    let users = sqlx::query_as!(
        User,
        "SELECT id, username, email FROM users"
    )
    .fetch_all(&amp;state.db)
    .await
    .map_err(|_| StatusCode::INTERNAL_SERVER_ERROR)?;
    
    Ok(Json(users))
}

async fn get_user(
    State(state): State&lt;AppState&gt;,
    Path(id): Path&lt;i32&gt;,
) -&gt; Result&lt;Json&lt;User&gt;, StatusCode&gt; {
    let user = sqlx::query_as!(
        User,
        "SELECT id, username, email FROM users WHERE id = $1",
        id
    )
    .fetch_one(&amp;state.db)
    .await
    .map_err(|_| StatusCode::NOT_FOUND)?;
    
    Ok(Json(user))
}

async fn health(State(state): State&lt;AppState&gt;) -&gt; StatusCode {
    // æ£€æŸ¥æ•°æ®åº“
    if sqlx::query("SELECT 1")
        .fetch_one(&amp;state.db)
        .await
        .is_err()
    {
        return StatusCode::SERVICE_UNAVAILABLE;
    }
    
    // æ£€æŸ¥ Redis
    let mut conn = state.redis.clone();
    if redis::cmd("PING")
        .query_async::&lt;_, String&gt;(&amp;mut conn)
        .await
        .is_err()
    {
        return StatusCode::SERVICE_UNAVAILABLE;
    }
    
    StatusCode::OK
}

#[tokio::main]
async fn main() {
    let config = Config {
        database_url: std::env::var("DATABASE_URL")
            .unwrap_or_else(|_| "postgres://localhost/mydb".to_string()),
        redis_url: std::env::var("REDIS_URL")
            .unwrap_or_else(|_| "redis://127.0.0.1/".to_string()),
        jwt_secret: std::env::var("JWT_SECRET")
            .unwrap_or_else(|_| "secret".to_string()),
    };
    
    let state = AppState::new(config).await;
    
    let app = Router::new()
        .route("/health", get(health))
        .route("/users", get(list_users))
        .route("/users/:id", get(get_user))
        .with_state(state);
    
    let listener = tokio::net::TcpListener::bind("127.0.0.1:3000")
        .await
        .unwrap();
    
    println!("ğŸš€ Server running on http://127.0.0.1:3000");
    
    axum::serve(listener, app).await.unwrap();
}</code></pre>
<h2 id="æœ€ä½³å®è·µ"><a class="header" href="#æœ€ä½³å®è·µ">æœ€ä½³å®è·µ</a></h2>
<h3 id="1-ä½¿ç”¨-arc-å…±äº«ä¸å¯å˜æ•°æ®"><a class="header" href="#1-ä½¿ç”¨-arc-å…±äº«ä¸å¯å˜æ•°æ®">1. ä½¿ç”¨ Arc å…±äº«ä¸å¯å˜æ•°æ®</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[derive(Clone)]
struct AppState {
    config: Arc&lt;Config&gt;,  // é…ç½®ä¸éœ€è¦ä¿®æ”¹
}
<span class="boring">}</span></code></pre>
<h3 id="2-ä½¿ç”¨-rwlock-å…±äº«å¯å˜æ•°æ®"><a class="header" href="#2-ä½¿ç”¨-rwlock-å…±äº«å¯å˜æ•°æ®">2. ä½¿ç”¨ RwLock å…±äº«å¯å˜æ•°æ®</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[derive(Clone)]
struct AppState {
    cache: Arc&lt;RwLock&lt;HashMap&lt;String, String&gt;&gt;&gt;,  // éœ€è¦ä¿®æ”¹çš„ç¼“å­˜
}
<span class="boring">}</span></code></pre>
<h3 id="3-è¿æ¥æ± ç›´æ¥å…‹éš†"><a class="header" href="#3-è¿æ¥æ± ç›´æ¥å…‹éš†">3. è¿æ¥æ± ç›´æ¥å…‹éš†</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[derive(Clone)]
struct AppState {
    db: PgPool,  // PgPool å†…éƒ¨å·²ç»ä½¿ç”¨ Arc
}
<span class="boring">}</span></code></pre>
<h3 id="4-é¿å…è¿‡åº¦é”å®š"><a class="header" href="#4-é¿å…è¿‡åº¦é”å®š">4. é¿å…è¿‡åº¦é”å®š</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// âŒ ä¸å¥½ï¼šé•¿æ—¶é—´æŒæœ‰é”
async fn bad_handler(State(state): State&lt;AppState&gt;) {
    let mut cache = state.cache.write().await;
    // æ‰§è¡Œè€—æ—¶æ“ä½œ
    expensive_operation().await;
    cache.insert(key, value);
}

// âœ… å¥½ï¼šæœ€å°åŒ–é”æŒæœ‰æ—¶é—´
async fn good_handler(State(state): State&lt;AppState&gt;) {
    let value = expensive_operation().await;
    let mut cache = state.cache.write().await;
    cache.insert(key, value);
}
<span class="boring">}</span></code></pre>
<h2 id="ç»ƒä¹ -3"><a class="header" href="#ç»ƒä¹ -3">ç»ƒä¹ </a></h2>
<ol>
<li>å®ç°å¸¦ç¼“å­˜çš„ç”¨æˆ·æœåŠ¡</li>
<li>æ·»åŠ è¯·æ±‚è®¡æ•°å™¨å’Œç»Ÿè®¡</li>
<li>å®ç°é…ç½®çƒ­é‡è½½</li>
<li>åˆ›å»ºè¿æ¥æ± ç›‘æ§ç«¯ç‚¹</li>
<li>å®ç°åˆ†å¸ƒå¼ç¼“å­˜</li>
</ol>
<h2 id="ä¸‹ä¸€æ­¥-5"><a class="header" href="#ä¸‹ä¸€æ­¥-5">ä¸‹ä¸€æ­¥</a></h2>
<p>Day 66 å°†å­¦ä¹ æ•°æ®åº“è¿ç§»ï¼Œä½¿ç”¨ SQLx ç®¡ç†æ•°æ®åº“schemaå˜æ›´ã€‚</p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-66-æ•°æ®åº“è¿ç§»-migrations-1"><a class="header" href="#day-66-æ•°æ®åº“è¿ç§»-migrations-1">Day 66: æ•°æ®åº“è¿ç§» (Migrations)</a></h1>
<h2 id="å­¦ä¹ ç›®æ ‡-5"><a class="header" href="#å­¦ä¹ ç›®æ ‡-5">å­¦ä¹ ç›®æ ‡</a></h2>
<ul>
<li>ç†è§£æ•°æ®åº“è¿ç§»æ¦‚å¿µ</li>
<li>æŒæ¡ SQLx è¿ç§»ç³»ç»Ÿ</li>
<li>å­¦ä¹ ç‰ˆæœ¬æ§åˆ¶ç­–ç•¥</li>
<li>å®ç°å›æ»šæœºåˆ¶</li>
</ul>
<h2 id="æ•°æ®åº“è¿ç§»æ¦‚å¿µ"><a class="header" href="#æ•°æ®åº“è¿ç§»æ¦‚å¿µ">æ•°æ®åº“è¿ç§»æ¦‚å¿µ</a></h2>
<p>æ•°æ®åº“è¿ç§»æ˜¯ç®¡ç†æ•°æ®åº“ schema å˜æ›´çš„ç³»ç»ŸåŒ–æ–¹æ³•ï¼š</p>
<ul>
<li>ç‰ˆæœ¬æ§åˆ¶æ•°æ®åº“ç»“æ„</li>
<li>å›¢é˜Ÿåä½œåŒæ­¥</li>
<li>ç”Ÿäº§ç¯å¢ƒå®‰å…¨éƒ¨ç½²</li>
<li>æ”¯æŒå›æ»šæ“ä½œ</li>
</ul>
<h2 id="sqlx-è¿ç§»ç³»ç»Ÿ"><a class="header" href="#sqlx-è¿ç§»ç³»ç»Ÿ">SQLx è¿ç§»ç³»ç»Ÿ</a></h2>
<h3 id="å®‰è£…-sqlx-cli"><a class="header" href="#å®‰è£…-sqlx-cli">å®‰è£… SQLx CLI</a></h3>
<pre><code class="language-bash"># å®‰è£… SQLx CLI
cargo install sqlx-cli --no-default-features --features postgres

# æˆ–è€…æ”¯æŒå¤šç§æ•°æ®åº“
cargo install sqlx-cli
</code></pre>
<h3 id="é¡¹ç›®é…ç½®"><a class="header" href="#é¡¹ç›®é…ç½®">é¡¹ç›®é…ç½®</a></h3>
<pre><code class="language-toml"># Cargo.toml
[dependencies]
sqlx = { version = "0.7", features = ["runtime-tokio-rustls", "postgres", "migrate"] }
tokio = { version = "1", features = ["full"] }
</code></pre>
<h3 id="åˆ›å»ºè¿ç§»"><a class="header" href="#åˆ›å»ºè¿ç§»">åˆ›å»ºè¿ç§»</a></h3>
<pre><code class="language-bash"># åˆ›å»ºæ–°è¿ç§»
sqlx migrate add create_users_table

# è¿™ä¼šåˆ›å»ºæ–‡ä»¶ï¼šmigrations/20240116000000_create_users_table.sql
</code></pre>
<h3 id="è¿ç§»æ–‡ä»¶ç¤ºä¾‹"><a class="header" href="#è¿ç§»æ–‡ä»¶ç¤ºä¾‹">è¿ç§»æ–‡ä»¶ç¤ºä¾‹</a></h3>
<pre><code class="language-sql">-- migrations/20240116000000_create_users_table.sql
-- åˆ›å»ºç”¨æˆ·è¡¨
CREATE TABLE users (
    id SERIAL PRIMARY KEY,
    username VARCHAR(50) UNIQUE NOT NULL,
    email VARCHAR(100) UNIQUE NOT NULL,
    password_hash VARCHAR(255) NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- åˆ›å»ºç´¢å¼•
CREATE INDEX idx_users_username ON users(username);
CREATE INDEX idx_users_email ON users(email);

-- åˆ›å»ºæ›´æ–°æ—¶é—´è§¦å‘å™¨
CREATE OR REPLACE FUNCTION update_updated_at_column()
RETURNS TRIGGER AS $$
BEGIN
    NEW.updated_at = CURRENT_TIMESTAMP;
    RETURN NEW;
END;
$$ language 'plpgsql';

CREATE TRIGGER update_users_updated_at
    BEFORE UPDATE ON users
    FOR EACH ROW
    EXECUTE FUNCTION update_updated_at_column();
</code></pre>
<h3 id="è¿è¡Œè¿ç§»"><a class="header" href="#è¿è¡Œè¿ç§»">è¿è¡Œè¿ç§»</a></h3>
<pre><code class="language-bash"># è®¾ç½®æ•°æ®åº“ URL
export DATABASE_URL="postgres://username:password@localhost/dbname"

# è¿è¡Œæ‰€æœ‰å¾…æ‰§è¡Œçš„è¿ç§»
sqlx migrate run

# æŸ¥çœ‹è¿ç§»çŠ¶æ€
sqlx migrate info

# å›æ»šæœ€åä¸€æ¬¡è¿ç§»
sqlx migrate revert
</code></pre>
<h2 id="è¿ç§»æœ€ä½³å®è·µ"><a class="header" href="#è¿ç§»æœ€ä½³å®è·µ">è¿ç§»æœ€ä½³å®è·µ</a></h2>
<h3 id="1-å‘å‰å…¼å®¹çš„è¿ç§»"><a class="header" href="#1-å‘å‰å…¼å®¹çš„è¿ç§»">1. å‘å‰å…¼å®¹çš„è¿ç§»</a></h3>
<pre><code class="language-sql">-- âœ… å¥½ï¼šæ·»åŠ å¯ç©ºåˆ—
ALTER TABLE users ADD COLUMN phone VARCHAR(20);

-- âŒ ä¸å¥½ï¼šæ·»åŠ éç©ºåˆ—ï¼ˆä¼šå¯¼è‡´ç°æœ‰æ•°æ®å¤±è´¥ï¼‰
ALTER TABLE users ADD COLUMN phone VARCHAR(20) NOT NULL;

-- âœ… å¥½ï¼šåˆ†ä¸¤æ­¥æ·»åŠ éç©ºåˆ—
-- ç¬¬ä¸€æ­¥ï¼šæ·»åŠ å¯ç©ºåˆ—
ALTER TABLE users ADD COLUMN phone VARCHAR(20);

-- ç¬¬äºŒæ­¥ï¼šå¡«å……æ•°æ®åè®¾ç½®éç©º
-- migrations/20240116000002_make_phone_not_null.sql
UPDATE users SET phone = '' WHERE phone IS NULL;
ALTER TABLE users ALTER COLUMN phone SET NOT NULL;
</code></pre>
<h3 id="2-é‡å‘½ååˆ—"><a class="header" href="#2-é‡å‘½ååˆ—">2. é‡å‘½ååˆ—</a></h3>
<pre><code class="language-sql">-- migrations/20240116000003_rename_username_to_user_name.sql
ALTER TABLE users RENAME COLUMN username TO user_name;
</code></pre>
<h3 id="3-ä¿®æ”¹åˆ—ç±»å‹"><a class="header" href="#3-ä¿®æ”¹åˆ—ç±»å‹">3. ä¿®æ”¹åˆ—ç±»å‹</a></h3>
<pre><code class="language-sql">-- migrations/20240116000004_change_email_length.sql
ALTER TABLE users ALTER COLUMN email TYPE VARCHAR(255);
</code></pre>
<h3 id="4-æ·»åŠ å¤–é”®"><a class="header" href="#4-æ·»åŠ å¤–é”®">4. æ·»åŠ å¤–é”®</a></h3>
<pre><code class="language-sql">-- migrations/20240116000005_create_posts_table.sql
CREATE TABLE posts (
    id SERIAL PRIMARY KEY,
    user_id INTEGER NOT NULL,
    title VARCHAR(200) NOT NULL,
    content TEXT NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE
);

CREATE INDEX idx_posts_user_id ON posts(user_id);
</code></pre>
<h2 id="å¤æ‚è¿ç§»ç¤ºä¾‹"><a class="header" href="#å¤æ‚è¿ç§»ç¤ºä¾‹">å¤æ‚è¿ç§»ç¤ºä¾‹</a></h2>
<h3 id="å¤šå¯¹å¤šå…³ç³»"><a class="header" href="#å¤šå¯¹å¤šå…³ç³»">å¤šå¯¹å¤šå…³ç³»</a></h3>
<pre><code class="language-sql">-- migrations/20240116000006_create_tags_and_post_tags.sql
-- æ ‡ç­¾è¡¨
CREATE TABLE tags (
    id SERIAL PRIMARY KEY,
    name VARCHAR(50) UNIQUE NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- æ–‡ç« æ ‡ç­¾å…³è”è¡¨
CREATE TABLE post_tags (
    post_id INTEGER NOT NULL,
    tag_id INTEGER NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    PRIMARY KEY (post_id, tag_id),
    FOREIGN KEY (post_id) REFERENCES posts(id) ON DELETE CASCADE,
    FOREIGN KEY (tag_id) REFERENCES tags(id) ON DELETE CASCADE
);

CREATE INDEX idx_post_tags_post_id ON post_tags(post_id);
CREATE INDEX idx_post_tags_tag_id ON post_tags(tag_id);
</code></pre>
<h3 id="æ•°æ®è¿ç§»"><a class="header" href="#æ•°æ®è¿ç§»">æ•°æ®è¿ç§»</a></h3>
<pre><code class="language-sql">-- migrations/20240116000007_migrate_user_data.sql
-- å‡è®¾è¦å°†æ—§çš„ full_name æ‹†åˆ†ä¸º first_name å’Œ last_name

-- æ·»åŠ æ–°åˆ—
ALTER TABLE users ADD COLUMN first_name VARCHAR(50);
ALTER TABLE users ADD COLUMN last_name VARCHAR(50);

-- è¿ç§»æ•°æ®
UPDATE users
SET 
    first_name = SPLIT_PART(full_name, ' ', 1),
    last_name = SPLIT_PART(full_name, ' ', 2)
WHERE full_name IS NOT NULL;

-- åˆ é™¤æ—§åˆ—ï¼ˆå¯é€‰ï¼Œå¯ä»¥åœ¨åç»­è¿ç§»ä¸­åˆ é™¤ï¼‰
-- ALTER TABLE users DROP COLUMN full_name;
</code></pre>
<h3 id="æ·»åŠ æšä¸¾ç±»å‹"><a class="header" href="#æ·»åŠ æšä¸¾ç±»å‹">æ·»åŠ æšä¸¾ç±»å‹</a></h3>
<pre><code class="language-sql">-- migrations/20240116000008_add_user_role.sql
-- åˆ›å»ºæšä¸¾ç±»å‹
CREATE TYPE user_role AS ENUM ('admin', 'editor', 'user');

-- æ·»åŠ è§’è‰²åˆ—
ALTER TABLE users ADD COLUMN role user_role DEFAULT 'user' NOT NULL;

-- åˆ›å»ºç´¢å¼•
CREATE INDEX idx_users_role ON users(role);
</code></pre>
<h2 id="åœ¨ä»£ç ä¸­è¿è¡Œè¿ç§»"><a class="header" href="#åœ¨ä»£ç ä¸­è¿è¡Œè¿ç§»">åœ¨ä»£ç ä¸­è¿è¡Œè¿ç§»</a></h2>
<h3 id="å¯åŠ¨æ—¶è‡ªåŠ¨è¿ç§»"><a class="header" href="#å¯åŠ¨æ—¶è‡ªåŠ¨è¿ç§»">å¯åŠ¨æ—¶è‡ªåŠ¨è¿ç§»</a></h3>
<pre class="playground"><code class="language-rust">use sqlx::postgres::PgPoolOptions;
use sqlx::migrate::MigrateDatabase;

#[tokio::main]
async fn main() -&gt; Result&lt;(), Box&lt;dyn std::error::Error&gt;&gt; {
    let database_url = std::env::var("DATABASE_URL")?;
    
    // å¦‚æœæ•°æ®åº“ä¸å­˜åœ¨ï¼Œåˆ›å»ºå®ƒ
    if !sqlx::Postgres::database_exists(&amp;database_url).await? {
        println!("Creating database...");
        sqlx::Postgres::create_database(&amp;database_url).await?;
    }
    
    // è¿æ¥æ•°æ®åº“
    let pool = PgPoolOptions::new()
        .max_connections(5)
        .connect(&amp;database_url)
        .await?;
    
    // è¿è¡Œè¿ç§»
    println!("Running migrations...");
    sqlx::migrate!("./migrations")
        .run(&amp;pool)
        .await?;
    
    println!("Migrations completed successfully!");
    
    Ok(())
}</code></pre>
<h3 id="æ¡ä»¶è¿ç§»"><a class="header" href="#æ¡ä»¶è¿ç§»">æ¡ä»¶è¿ç§»</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use sqlx::migrate::Migrator;

static MIGRATOR: Migrator = sqlx::migrate!();

async fn run_migrations_if_needed(pool: &amp;PgPool) -&gt; Result&lt;(), sqlx::Error&gt; {
    // æ£€æŸ¥æ˜¯å¦éœ€è¦è¿ç§»
    let version = MIGRATOR.migrations.last().map(|m| m.version).unwrap_or(0);
    
    println!("Latest migration version: {}", version);
    
    // è¿è¡Œè¿ç§»
    MIGRATOR.run(pool).await?;
    
    Ok(())
}
<span class="boring">}</span></code></pre>
<h2 id="è¿ç§»æµ‹è¯•"><a class="header" href="#è¿ç§»æµ‹è¯•">è¿ç§»æµ‹è¯•</a></h2>
<h3 id="æµ‹è¯•è¿ç§»"><a class="header" href="#æµ‹è¯•è¿ç§»">æµ‹è¯•è¿ç§»</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[cfg(test)]
mod tests {
    use super::*;
    use sqlx::postgres::PgPoolOptions;
    
    #[tokio::test]
    async fn test_migrations() {
        let database_url = "postgres://localhost/test_db";
        
        // åˆ›å»ºæµ‹è¯•æ•°æ®åº“
        sqlx::Postgres::create_database(database_url)
            .await
            .ok();
        
        let pool = PgPoolOptions::new()
            .connect(database_url)
            .await
            .unwrap();
        
        // è¿è¡Œè¿ç§»
        sqlx::migrate!("./migrations")
            .run(&amp;pool)
            .await
            .unwrap();
        
        // éªŒè¯è¡¨å­˜åœ¨
        let result: (i64,) = sqlx::query_as(
            "SELECT COUNT(*) FROM information_schema.tables WHERE table_name = 'users'"
        )
        .fetch_one(&amp;pool)
        .await
        .unwrap();
        
        assert_eq!(result.0, 1);
        
        // æ¸…ç†
        sqlx::Postgres::drop_database(database_url)
            .await
            .ok();
    }
}
<span class="boring">}</span></code></pre>
<h2 id="å›æ»šç­–ç•¥"><a class="header" href="#å›æ»šç­–ç•¥">å›æ»šç­–ç•¥</a></h2>
<h3 id="åˆ›å»ºå¯å›æ»šçš„è¿ç§»"><a class="header" href="#åˆ›å»ºå¯å›æ»šçš„è¿ç§»">åˆ›å»ºå¯å›æ»šçš„è¿ç§»</a></h3>
<pre><code class="language-sql">-- migrations/20240116000009_add_user_bio.up.sql
ALTER TABLE users ADD COLUMN bio TEXT;

-- migrations/20240116000009_add_user_bio.down.sql
ALTER TABLE users DROP COLUMN bio;
</code></pre>
<h3 id="æ‰‹åŠ¨å›æ»š"><a class="header" href="#æ‰‹åŠ¨å›æ»š">æ‰‹åŠ¨å›æ»š</a></h3>
<pre><code class="language-bash"># å›æ»šæœ€åä¸€æ¬¡è¿ç§»
sqlx migrate revert

# å›æ»šåˆ°ç‰¹å®šç‰ˆæœ¬
sqlx migrate revert --target-version 20240116000005
</code></pre>
<h2 id="ç”Ÿäº§ç¯å¢ƒè¿ç§»"><a class="header" href="#ç”Ÿäº§ç¯å¢ƒè¿ç§»">ç”Ÿäº§ç¯å¢ƒè¿ç§»</a></h2>
<h3 id="è¿ç§»è„šæœ¬"><a class="header" href="#è¿ç§»è„šæœ¬">è¿ç§»è„šæœ¬</a></h3>
<pre><code class="language-bash">#!/bin/bash
# deploy-migrations.sh

set -e

echo "Starting database migration..."

# å¤‡ä»½æ•°æ®åº“
pg_dump $DATABASE_URL &gt; backup_$(date +%Y%m%d_%H%M%S).sql

# è¿è¡Œè¿ç§»
sqlx migrate run

echo "Migration completed successfully!"
</code></pre>
<h3 id="é›¶åœæœºè¿ç§»"><a class="header" href="#é›¶åœæœºè¿ç§»">é›¶åœæœºè¿ç§»</a></h3>
<pre><code class="language-sql">-- æ­¥éª¤ 1: æ·»åŠ æ–°åˆ—ï¼ˆå¯ç©ºï¼‰
ALTER TABLE users ADD COLUMN new_email VARCHAR(255);

-- æ­¥éª¤ 2: åŒå†™ï¼ˆåº”ç”¨ä»£ç åŒæ—¶å†™å…¥ä¸¤åˆ—ï¼‰
-- åœ¨åº”ç”¨ä»£ç ä¸­å®ç°

-- æ­¥éª¤ 3: æ•°æ®å›å¡«
UPDATE users SET new_email = email WHERE new_email IS NULL;

-- æ­¥éª¤ 4: è®¾ç½®éç©ºçº¦æŸ
ALTER TABLE users ALTER COLUMN new_email SET NOT NULL;

-- æ­¥éª¤ 5: æ·»åŠ å”¯ä¸€çº¦æŸ
ALTER TABLE users ADD CONSTRAINT users_new_email_key UNIQUE (new_email);

-- æ­¥éª¤ 6: åˆ é™¤æ—§åˆ—ï¼ˆåœ¨ç¡®è®¤æ— é—®é¢˜åï¼‰
ALTER TABLE users DROP COLUMN email;

-- æ­¥éª¤ 7: é‡å‘½åæ–°åˆ—
ALTER TABLE users RENAME COLUMN new_email TO email;
</code></pre>
<h2 id="å®Œæ•´ç¤ºä¾‹é¡¹ç›®"><a class="header" href="#å®Œæ•´ç¤ºä¾‹é¡¹ç›®">å®Œæ•´ç¤ºä¾‹é¡¹ç›®</a></h2>
<pre class="playground"><code class="language-rust">// src/main.rs
use sqlx::postgres::PgPoolOptions;
use std::env;

mod models;
mod migrations;

#[tokio::main]
async fn main() -&gt; Result&lt;(), Box&lt;dyn std::error::Error&gt;&gt; {
    // åŠ è½½ç¯å¢ƒå˜é‡
    dotenv::dotenv().ok();
    
    let database_url = env::var("DATABASE_URL")
        .expect("DATABASE_URL must be set");
    
    // åˆ›å»ºè¿æ¥æ± 
    let pool = PgPoolOptions::new()
        .max_connections(5)
        .connect(&amp;database_url)
        .await?;
    
    // è¿è¡Œè¿ç§»
    println!("Running database migrations...");
    sqlx::migrate!("./migrations")
        .run(&amp;pool)
        .await?;
    println!("Migrations completed!");
    
    // å¯åŠ¨åº”ç”¨
    start_server(pool).await?;
    
    Ok(())
}

async fn start_server(pool: sqlx::PgPool) -&gt; Result&lt;(), Box&lt;dyn std::error::Error&gt;&gt; {
    // åº”ç”¨é€»è¾‘
    Ok(())
}</code></pre>
<pre><code class="language-sql">-- migrations/20240116000001_initial_schema.sql
-- ç”¨æˆ·è¡¨
CREATE TABLE users (
    id SERIAL PRIMARY KEY,
    username VARCHAR(50) UNIQUE NOT NULL,
    email VARCHAR(100) UNIQUE NOT NULL,
    password_hash VARCHAR(255) NOT NULL,
    role VARCHAR(20) DEFAULT 'user' NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- æ–‡ç« è¡¨
CREATE TABLE posts (
    id SERIAL PRIMARY KEY,
    user_id INTEGER NOT NULL REFERENCES users(id) ON DELETE CASCADE,
    title VARCHAR(200) NOT NULL,
    slug VARCHAR(200) UNIQUE NOT NULL,
    content TEXT NOT NULL,
    published BOOLEAN DEFAULT FALSE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- è¯„è®ºè¡¨
CREATE TABLE comments (
    id SERIAL PRIMARY KEY,
    post_id INTEGER NOT NULL REFERENCES posts(id) ON DELETE CASCADE,
    user_id INTEGER NOT NULL REFERENCES users(id) ON DELETE CASCADE,
    content TEXT NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- ç´¢å¼•
CREATE INDEX idx_posts_user_id ON posts(user_id);
CREATE INDEX idx_posts_slug ON posts(slug);
CREATE INDEX idx_posts_published ON posts(published);
CREATE INDEX idx_comments_post_id ON comments(post_id);
CREATE INDEX idx_comments_user_id ON comments(user_id);

-- æ›´æ–°æ—¶é—´è§¦å‘å™¨
CREATE OR REPLACE FUNCTION update_updated_at_column()
RETURNS TRIGGER AS $$
BEGIN
    NEW.updated_at = CURRENT_TIMESTAMP;
    RETURN NEW;
END;
$$ language 'plpgsql';

CREATE TRIGGER update_users_updated_at
    BEFORE UPDATE ON users
    FOR EACH ROW
    EXECUTE FUNCTION update_updated_at_column();

CREATE TRIGGER update_posts_updated_at
    BEFORE UPDATE ON posts
    FOR EACH ROW
    EXECUTE FUNCTION update_updated_at_column();
</code></pre>
<h2 id="è¿ç§»æ£€æŸ¥æ¸…å•"><a class="header" href="#è¿ç§»æ£€æŸ¥æ¸…å•">è¿ç§»æ£€æŸ¥æ¸…å•</a></h2>
<ul>
<li><input disabled="" type="checkbox"> è¿ç§»æ–‡ä»¶å‘½åæ¸…æ™°</li>
<li><input disabled="" type="checkbox"> åŒ…å«å‘å‰å’Œå‘åå…¼å®¹æ€§</li>
<li><input disabled="" type="checkbox"> æµ‹è¯•è¿ç§»åœ¨å¹²å‡€æ•°æ®åº“ä¸Šè¿è¡Œ</li>
<li><input disabled="" type="checkbox"> æµ‹è¯•è¿ç§»åœ¨ç°æœ‰æ•°æ®ä¸Šè¿è¡Œ</li>
<li><input disabled="" type="checkbox"> å‡†å¤‡å›æ»šè®¡åˆ’</li>
<li><input disabled="" type="checkbox"> åœ¨ç”Ÿäº§å‰å¤‡ä»½æ•°æ®åº“</li>
<li><input disabled="" type="checkbox"> æ–‡æ¡£åŒ–é‡è¦å˜æ›´</li>
<li><input disabled="" type="checkbox"> é€šçŸ¥å›¢é˜Ÿæˆå‘˜</li>
</ul>
<h2 id="ç»ƒä¹ -4"><a class="header" href="#ç»ƒä¹ -4">ç»ƒä¹ </a></h2>
<ol>
<li>åˆ›å»ºå®Œæ•´çš„åšå®¢æ•°æ®åº“ schema</li>
<li>å®ç°ç”¨æˆ·è§’è‰²ç³»ç»Ÿçš„è¿ç§»</li>
<li>æ·»åŠ å…¨æ–‡æœç´¢ç´¢å¼•</li>
<li>å®ç°æ•°æ®å½’æ¡£è¿ç§»</li>
<li>åˆ›å»ºè¿ç§»æµ‹è¯•å¥—ä»¶</li>
</ol>
<h2 id="ä¸‹ä¸€æ­¥-6"><a class="header" href="#ä¸‹ä¸€æ­¥-6">ä¸‹ä¸€æ­¥</a></h2>
<p>Day 67 å°†å­¦ä¹  CRUD æ“ä½œå®æˆ˜ï¼Œä½¿ç”¨ SQLx è¿›è¡Œæ•°æ®åº“æ“ä½œã€‚</p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-67-crud-æ“ä½œå®æˆ˜-1"><a class="header" href="#day-67-crud-æ“ä½œå®æˆ˜-1">Day 67: CRUD æ“ä½œå®æˆ˜</a></h1>
<h2 id="å­¦ä¹ ç›®æ ‡-6"><a class="header" href="#å­¦ä¹ ç›®æ ‡-6">å­¦ä¹ ç›®æ ‡</a></h2>
<ul>
<li>æŒæ¡ SQLx æŸ¥è¯¢æ„å»º</li>
<li>å®ç°å®Œæ•´çš„ CRUD æ“ä½œ</li>
<li>å­¦ä¹ å‚æ•°åŒ–æŸ¥è¯¢</li>
<li>ç†è§£äº‹åŠ¡å¤„ç†</li>
</ul>
<h2 id="crud-æ¦‚å¿µ"><a class="header" href="#crud-æ¦‚å¿µ">CRUD æ¦‚å¿µ</a></h2>
<p>CRUD ä»£è¡¨ï¼š</p>
<ul>
<li><strong>C</strong>reate - åˆ›å»º</li>
<li><strong>R</strong>ead - è¯»å–</li>
<li><strong>U</strong>pdate - æ›´æ–°</li>
<li><strong>D</strong>elete - åˆ é™¤</li>
</ul>
<h2 id="sqlx-åŸºç¡€"><a class="header" href="#sqlx-åŸºç¡€">SQLx åŸºç¡€</a></h2>
<h3 id="æŸ¥è¯¢å®"><a class="header" href="#æŸ¥è¯¢å®">æŸ¥è¯¢å®</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use sqlx::{PgPool, FromRow};
use serde::{Deserialize, Serialize};

#[derive(Debug, Serialize, Deserialize, FromRow)]
struct User {
    id: i32,
    username: String,
    email: String,
}

// ä½¿ç”¨ query! å®ï¼ˆç¼–è¯‘æ—¶æ£€æŸ¥ï¼‰
async fn get_user_by_id(pool: &amp;PgPool, id: i32) -&gt; Result&lt;User, sqlx::Error&gt; {
    let user = sqlx::query_as!(
        User,
        "SELECT id, username, email FROM users WHERE id = $1",
        id
    )
    .fetch_one(pool)
    .await?;
    
    Ok(user)
}

// ä½¿ç”¨ query_asï¼ˆè¿è¡Œæ—¶æ£€æŸ¥ï¼‰
async fn get_user_by_username(pool: &amp;PgPool, username: &amp;str) -&gt; Result&lt;User, sqlx::Error&gt; {
    let user = sqlx::query_as::&lt;_, User&gt;(
        "SELECT id, username, email FROM users WHERE username = $1"
    )
    .bind(username)
    .fetch_one(pool)
    .await?;
    
    Ok(user)
}
<span class="boring">}</span></code></pre>
<h2 id="create---åˆ›å»ºæ“ä½œ"><a class="header" href="#create---åˆ›å»ºæ“ä½œ">Create - åˆ›å»ºæ“ä½œ</a></h2>
<h3 id="æ’å…¥å•æ¡è®°å½•"><a class="header" href="#æ’å…¥å•æ¡è®°å½•">æ’å…¥å•æ¡è®°å½•</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[derive(Deserialize)]
struct CreateUser {
    username: String,
    email: String,
    password: String,
}

async fn create_user(pool: &amp;PgPool, user: CreateUser) -&gt; Result&lt;User, sqlx::Error&gt; {
    let password_hash = hash_password(&amp;user.password);
    
    let user = sqlx::query_as!(
        User,
        r#"
        INSERT INTO users (username, email, password_hash)
        VALUES ($1, $2, $3)
        RETURNING id, username, email
        "#,
        user.username,
        user.email,
        password_hash
    )
    .fetch_one(pool)
    .await?;
    
    Ok(user)
}
<span class="boring">}</span></code></pre>
<h3 id="æ‰¹é‡æ’å…¥"><a class="header" href="#æ‰¹é‡æ’å…¥">æ‰¹é‡æ’å…¥</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>async fn create_users_batch(
    pool: &amp;PgPool,
    users: Vec&lt;CreateUser&gt;
) -&gt; Result&lt;Vec&lt;User&gt;, sqlx::Error&gt; {
    let mut tx = pool.begin().await?;
    let mut created_users = Vec::new();
    
    for user in users {
        let password_hash = hash_password(&amp;user.password);
        
        let created = sqlx::query_as!(
            User,
            r#"
            INSERT INTO users (username, email, password_hash)
            VALUES ($1, $2, $3)
            RETURNING id, username, email
            "#,
            user.username,
            user.email,
            password_hash
        )
        .fetch_one(&amp;mut *tx)
        .await?;
        
        created_users.push(created);
    }
    
    tx.commit().await?;
    Ok(created_users)
}
<span class="boring">}</span></code></pre>
<h2 id="read---è¯»å–æ“ä½œ"><a class="header" href="#read---è¯»å–æ“ä½œ">Read - è¯»å–æ“ä½œ</a></h2>
<h3 id="æŸ¥è¯¢å•æ¡è®°å½•"><a class="header" href="#æŸ¥è¯¢å•æ¡è®°å½•">æŸ¥è¯¢å•æ¡è®°å½•</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>async fn get_user(pool: &amp;PgPool, id: i32) -&gt; Result&lt;Option&lt;User&gt;, sqlx::Error&gt; {
    let user = sqlx::query_as!(
        User,
        "SELECT id, username, email FROM users WHERE id = $1",
        id
    )
    .fetch_optional(pool)
    .await?;
    
    Ok(user)
}
<span class="boring">}</span></code></pre>
<h3 id="æŸ¥è¯¢å¤šæ¡è®°å½•"><a class="header" href="#æŸ¥è¯¢å¤šæ¡è®°å½•">æŸ¥è¯¢å¤šæ¡è®°å½•</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>async fn list_users(pool: &amp;PgPool) -&gt; Result&lt;Vec&lt;User&gt;, sqlx::Error&gt; {
    let users = sqlx::query_as!(
        User,
        "SELECT id, username, email FROM users ORDER BY id"
    )
    .fetch_all(pool)
    .await?;
    
    Ok(users)
}
<span class="boring">}</span></code></pre>
<h3 id="åˆ†é¡µæŸ¥è¯¢"><a class="header" href="#åˆ†é¡µæŸ¥è¯¢">åˆ†é¡µæŸ¥è¯¢</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[derive(Deserialize)]
struct Pagination {
    page: i64,
    per_page: i64,
}

async fn list_users_paginated(
    pool: &amp;PgPool,
    pagination: Pagination
) -&gt; Result&lt;Vec&lt;User&gt;, sqlx::Error&gt; {
    let offset = (pagination.page - 1) * pagination.per_page;
    
    let users = sqlx::query_as!(
        User,
        r#"
        SELECT id, username, email
        FROM users
        ORDER BY id
        LIMIT $1 OFFSET $2
        "#,
        pagination.per_page,
        offset
    )
    .fetch_all(pool)
    .await?;
    
    Ok(users)
}

async fn count_users(pool: &amp;PgPool) -&gt; Result&lt;i64, sqlx::Error&gt; {
    let count = sqlx::query_scalar!("SELECT COUNT(*) FROM users")
        .fetch_one(pool)
        .await?;
    
    Ok(count.unwrap_or(0))
}
<span class="boring">}</span></code></pre>
<h3 id="æ¡ä»¶æŸ¥è¯¢"><a class="header" href="#æ¡ä»¶æŸ¥è¯¢">æ¡ä»¶æŸ¥è¯¢</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[derive(Deserialize)]
struct UserFilter {
    username: Option&lt;String&gt;,
    email: Option&lt;String&gt;,
}

async fn search_users(
    pool: &amp;PgPool,
    filter: UserFilter
) -&gt; Result&lt;Vec&lt;User&gt;, sqlx::Error&gt; {
    let mut query = String::from("SELECT id, username, email FROM users WHERE 1=1");
    let mut bindings = Vec::new();
    
    if let Some(username) = &amp;filter.username {
        query.push_str(&amp;format!(" AND username ILIKE ${}", bindings.len() + 1));
        bindings.push(format!("%{}%", username));
    }
    
    if let Some(email) = &amp;filter.email {
        query.push_str(&amp;format!(" AND email ILIKE ${}", bindings.len() + 1));
        bindings.push(format!("%{}%", email));
    }
    
    let mut query_builder = sqlx::query_as::&lt;_, User&gt;(&amp;query);
    
    for binding in bindings {
        query_builder = query_builder.bind(binding);
    }
    
    let users = query_builder.fetch_all(pool).await?;
    
    Ok(users)
}
<span class="boring">}</span></code></pre>
<h2 id="update---æ›´æ–°æ“ä½œ"><a class="header" href="#update---æ›´æ–°æ“ä½œ">Update - æ›´æ–°æ“ä½œ</a></h2>
<h3 id="æ›´æ–°å•æ¡è®°å½•"><a class="header" href="#æ›´æ–°å•æ¡è®°å½•">æ›´æ–°å•æ¡è®°å½•</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[derive(Deserialize)]
struct UpdateUser {
    username: Option&lt;String&gt;,
    email: Option&lt;String&gt;,
}

async fn update_user(
    pool: &amp;PgPool,
    id: i32,
    update: UpdateUser
) -&gt; Result&lt;User, sqlx::Error&gt; {
    let user = sqlx::query_as!(
        User,
        r#"
        UPDATE users
        SET 
            username = COALESCE($1, username),
            email = COALESCE($2, email),
            updated_at = CURRENT_TIMESTAMP
        WHERE id = $3
        RETURNING id, username, email
        "#,
        update.username,
        update.email,
        id
    )
    .fetch_one(pool)
    .await?;
    
    Ok(user)
}
<span class="boring">}</span></code></pre>
<h3 id="æ‰¹é‡æ›´æ–°"><a class="header" href="#æ‰¹é‡æ›´æ–°">æ‰¹é‡æ›´æ–°</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>async fn update_users_role(
    pool: &amp;PgPool,
    user_ids: Vec&lt;i32&gt;,
    role: &amp;str
) -&gt; Result&lt;u64, sqlx::Error&gt; {
    let result = sqlx::query!(
        "UPDATE users SET role = $1 WHERE id = ANY($2)",
        role,
        &amp;user_ids
    )
    .execute(pool)
    .await?;
    
    Ok(result.rows_affected())
}
<span class="boring">}</span></code></pre>
<h2 id="delete---åˆ é™¤æ“ä½œ"><a class="header" href="#delete---åˆ é™¤æ“ä½œ">Delete - åˆ é™¤æ“ä½œ</a></h2>
<h3 id="åˆ é™¤å•æ¡è®°å½•"><a class="header" href="#åˆ é™¤å•æ¡è®°å½•">åˆ é™¤å•æ¡è®°å½•</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>async fn delete_user(pool: &amp;PgPool, id: i32) -&gt; Result&lt;bool, sqlx::Error&gt; {
    let result = sqlx::query!("DELETE FROM users WHERE id = $1", id)
        .execute(pool)
        .await?;
    
    Ok(result.rows_affected() &gt; 0)
}
<span class="boring">}</span></code></pre>
<h3 id="è½¯åˆ é™¤"><a class="header" href="#è½¯åˆ é™¤">è½¯åˆ é™¤</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>async fn soft_delete_user(pool: &amp;PgPool, id: i32) -&gt; Result&lt;User, sqlx::Error&gt; {
    let user = sqlx::query_as!(
        User,
        r#"
        UPDATE users
        SET deleted_at = CURRENT_TIMESTAMP
        WHERE id = $1 AND deleted_at IS NULL
        RETURNING id, username, email
        "#,
        id
    )
    .fetch_one(pool)
    .await?;
    
    Ok(user)
}
<span class="boring">}</span></code></pre>
<h2 id="å®Œæ•´çš„-repository-æ¨¡å¼"><a class="header" href="#å®Œæ•´çš„-repository-æ¨¡å¼">å®Œæ•´çš„ Repository æ¨¡å¼</a></h2>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use sqlx::PgPool;
use async_trait::async_trait;

#[async_trait]
trait UserRepository {
    async fn create(&amp;self, user: CreateUser) -&gt; Result&lt;User, sqlx::Error&gt;;
    async fn find_by_id(&amp;self, id: i32) -&gt; Result&lt;Option&lt;User&gt;, sqlx::Error&gt;;
    async fn find_all(&amp;self) -&gt; Result&lt;Vec&lt;User&gt;, sqlx::Error&gt;;
    async fn update(&amp;self, id: i32, user: UpdateUser) -&gt; Result&lt;User, sqlx::Error&gt;;
    async fn delete(&amp;self, id: i32) -&gt; Result&lt;bool, sqlx::Error&gt;;
}

struct PostgresUserRepository {
    pool: PgPool,
}

impl PostgresUserRepository {
    fn new(pool: PgPool) -&gt; Self {
        Self { pool }
    }
}

#[async_trait]
impl UserRepository for PostgresUserRepository {
    async fn create(&amp;self, user: CreateUser) -&gt; Result&lt;User, sqlx::Error&gt; {
        let password_hash = hash_password(&amp;user.password);
        
        sqlx::query_as!(
            User,
            r#"
            INSERT INTO users (username, email, password_hash)
            VALUES ($1, $2, $3)
            RETURNING id, username, email
            "#,
            user.username,
            user.email,
            password_hash
        )
        .fetch_one(&amp;self.pool)
        .await
    }
    
    async fn find_by_id(&amp;self, id: i32) -&gt; Result&lt;Option&lt;User&gt;, sqlx::Error&gt; {
        sqlx::query_as!(
            User,
            "SELECT id, username, email FROM users WHERE id = $1",
            id
        )
        .fetch_optional(&amp;self.pool)
        .await
    }
    
    async fn find_all(&amp;self) -&gt; Result&lt;Vec&lt;User&gt;, sqlx::Error&gt; {
        sqlx::query_as!(
            User,
            "SELECT id, username, email FROM users ORDER BY id"
        )
        .fetch_all(&amp;self.pool)
        .await
    }
    
    async fn update(&amp;self, id: i32, user: UpdateUser) -&gt; Result&lt;User, sqlx::Error&gt; {
        sqlx::query_as!(
            User,
            r#"
            UPDATE users
            SET 
                username = COALESCE($1, username),
                email = COALESCE($2, email)
            WHERE id = $3
            RETURNING id, username, email
            "#,
            user.username,
            user.email,
            id
        )
        .fetch_one(&amp;self.pool)
        .await
    }
    
    async fn delete(&amp;self, id: i32) -&gt; Result&lt;bool, sqlx::Error&gt; {
        let result = sqlx::query!("DELETE FROM users WHERE id = $1", id)
            .execute(&amp;self.pool)
            .await?;
        
        Ok(result.rows_affected() &gt; 0)
    }
}
<span class="boring">}</span></code></pre>
<h2 id="ä¸-axum-é›†æˆ"><a class="header" href="#ä¸-axum-é›†æˆ">ä¸ Axum é›†æˆ</a></h2>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use axum::{
    Router,
    routing::{get, post, put, delete},
    extract::{State, Path},
    Json,
    http::StatusCode,
};

#[derive(Clone)]
struct AppState {
    user_repo: Arc&lt;PostgresUserRepository&gt;,
}

async fn create_user_handler(
    State(state): State&lt;AppState&gt;,
    Json(user): Json&lt;CreateUser&gt;,
) -&gt; Result&lt;(StatusCode, Json&lt;User&gt;), StatusCode&gt; {
    let user = state.user_repo
        .create(user)
        .await
        .map_err(|_| StatusCode::INTERNAL_SERVER_ERROR)?;
    
    Ok((StatusCode::CREATED, Json(user)))
}

async fn get_user_handler(
    State(state): State&lt;AppState&gt;,
    Path(id): Path&lt;i32&gt;,
) -&gt; Result&lt;Json&lt;User&gt;, StatusCode&gt; {
    let user = state.user_repo
        .find_by_id(id)
        .await
        .map_err(|_| StatusCode::INTERNAL_SERVER_ERROR)?
        .ok_or(StatusCode::NOT_FOUND)?;
    
    Ok(Json(user))
}

async fn list_users_handler(
    State(state): State&lt;AppState&gt;,
) -&gt; Result&lt;Json&lt;Vec&lt;User&gt;&gt;, StatusCode&gt; {
    let users = state.user_repo
        .find_all()
        .await
        .map_err(|_| StatusCode::INTERNAL_SERVER_ERROR)?;
    
    Ok(Json(users))
}

async fn update_user_handler(
    State(state): State&lt;AppState&gt;,
    Path(id): Path&lt;i32&gt;,
    Json(user): Json&lt;UpdateUser&gt;,
) -&gt; Result&lt;Json&lt;User&gt;, StatusCode&gt; {
    let user = state.user_repo
        .update(id, user)
        .await
        .map_err(|_| StatusCode::INTERNAL_SERVER_ERROR)?;
    
    Ok(Json(user))
}

async fn delete_user_handler(
    State(state): State&lt;AppState&gt;,
    Path(id): Path&lt;i32&gt;,
) -&gt; StatusCode {
    match state.user_repo.delete(id).await {
        Ok(true) =&gt; StatusCode::NO_CONTENT,
        Ok(false) =&gt; StatusCode::NOT_FOUND,
        Err(_) =&gt; StatusCode::INTERNAL_SERVER_ERROR,
    }
}

fn app(state: AppState) -&gt; Router {
    Router::new()
        .route("/users", get(list_users_handler).post(create_user_handler))
        .route("/users/:id", 
            get(get_user_handler)
            .put(update_user_handler)
            .delete(delete_user_handler)
        )
        .with_state(state)
}
<span class="boring">}</span></code></pre>
<h2 id="ç»ƒä¹ -5"><a class="header" href="#ç»ƒä¹ -5">ç»ƒä¹ </a></h2>
<ol>
<li>å®ç°æ–‡ç« çš„å®Œæ•´ CRUD æ“ä½œ</li>
<li>æ·»åŠ å¤æ‚çš„æœç´¢å’Œè¿‡æ»¤åŠŸèƒ½</li>
<li>å®ç°è½¯åˆ é™¤å’Œæ¢å¤åŠŸèƒ½</li>
<li>åˆ›å»ºå®¡è®¡æ—¥å¿—ç³»ç»Ÿ</li>
<li>å®ç°æ‰¹é‡æ“ä½œ API</li>
</ol>
<h2 id="ä¸‹ä¸€æ­¥-7"><a class="header" href="#ä¸‹ä¸€æ­¥-7">ä¸‹ä¸€æ­¥</a></h2>
<p>Day 68 å°†å­¦ä¹ å¤æ‚æŸ¥è¯¢ä¸äº‹åŠ¡ï¼ŒåŒ…æ‹¬ JOINã€èšåˆå’Œäº‹åŠ¡ç®¡ç†ã€‚</p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-68-å¤æ‚æŸ¥è¯¢ä¸äº‹åŠ¡-1"><a class="header" href="#day-68-å¤æ‚æŸ¥è¯¢ä¸äº‹åŠ¡-1">Day 68: å¤æ‚æŸ¥è¯¢ä¸äº‹åŠ¡</a></h1>
<h2 id="å­¦ä¹ ç›®æ ‡-7"><a class="header" href="#å­¦ä¹ ç›®æ ‡-7">å­¦ä¹ ç›®æ ‡</a></h2>
<ul>
<li>æŒæ¡ JOIN æŸ¥è¯¢</li>
<li>å­¦ä¹ èšåˆå‡½æ•°</li>
<li>ç†è§£äº‹åŠ¡ç®¡ç†</li>
<li>å®ç°å¤æ‚ä¸šåŠ¡é€»è¾‘</li>
</ul>
<h2 id="join-æŸ¥è¯¢"><a class="header" href="#join-æŸ¥è¯¢">JOIN æŸ¥è¯¢</a></h2>
<h3 id="inner-join"><a class="header" href="#inner-join">INNER JOIN</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[derive(Debug, Serialize, FromRow)]
struct PostWithAuthor {
    post_id: i32,
    title: String,
    content: String,
    author_id: i32,
    author_name: String,
    author_email: String,
}

async fn get_posts_with_authors(pool: &amp;PgPool) -&gt; Result&lt;Vec&lt;PostWithAuthor&gt;, sqlx::Error&gt; {
    let posts = sqlx::query_as!(
        PostWithAuthor,
        r#"
        SELECT 
            p.id as post_id,
            p.title,
            p.content,
            u.id as author_id,
            u.username as author_name,
            u.email as author_email
        FROM posts p
        INNER JOIN users u ON p.user_id = u.id
        ORDER BY p.created_at DESC
        "#
    )
    .fetch_all(pool)
    .await?;
    
    Ok(posts)
}
<span class="boring">}</span></code></pre>
<h3 id="left-join"><a class="header" href="#left-join">LEFT JOIN</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[derive(Debug, Serialize, FromRow)]
struct UserWithPostCount {
    user_id: i32,
    username: String,
    post_count: Option&lt;i64&gt;,
}

async fn get_users_with_post_count(pool: &amp;PgPool) -&gt; Result&lt;Vec&lt;UserWithPostCount&gt;, sqlx::Error&gt; {
    let users = sqlx::query_as!(
        UserWithPostCount,
        r#"
        SELECT 
            u.id as user_id,
            u.username,
            COUNT(p.id) as "post_count?"
        FROM users u
        LEFT JOIN posts p ON u.id = p.user_id
        GROUP BY u.id, u.username
        ORDER BY post_count DESC
        "#
    )
    .fetch_all(pool)
    .await?;
    
    Ok(users)
}
<span class="boring">}</span></code></pre>
<h2 id="èšåˆæŸ¥è¯¢"><a class="header" href="#èšåˆæŸ¥è¯¢">èšåˆæŸ¥è¯¢</a></h2>
<h3 id="ç»Ÿè®¡å‡½æ•°"><a class="header" href="#ç»Ÿè®¡å‡½æ•°">ç»Ÿè®¡å‡½æ•°</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[derive(Debug, Serialize, FromRow)]
struct PostStatistics {
    total_posts: i64,
    published_posts: i64,
    draft_posts: i64,
    avg_content_length: f64,
}

async fn get_post_statistics(pool: &amp;PgPool) -&gt; Result&lt;PostStatistics, sqlx::Error&gt; {
    let stats = sqlx::query_as!(
        PostStatistics,
        r#"
        SELECT 
            COUNT(*) as "total_posts!",
            COUNT(*) FILTER (WHERE published = true) as "published_posts!",
            COUNT(*) FILTER (WHERE published = false) as "draft_posts!",
            AVG(LENGTH(content))::float as "avg_content_length!"
        FROM posts
        "#
    )
    .fetch_one(pool)
    .await?;
    
    Ok(stats)
}
<span class="boring">}</span></code></pre>
<h2 id="äº‹åŠ¡ç®¡ç†"><a class="header" href="#äº‹åŠ¡ç®¡ç†">äº‹åŠ¡ç®¡ç†</a></h2>
<h3 id="åŸºæœ¬äº‹åŠ¡"><a class="header" href="#åŸºæœ¬äº‹åŠ¡">åŸºæœ¬äº‹åŠ¡</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>async fn transfer_points(
    pool: &amp;PgPool,
    from_user: i32,
    to_user: i32,
    amount: i32
) -&gt; Result&lt;(), sqlx::Error&gt; {
    let mut tx = pool.begin().await?;
    
    // æ‰£é™¤å‘é€æ–¹ç§¯åˆ†
    sqlx::query!(
        "UPDATE users SET points = points - $1 WHERE id = $2",
        amount,
        from_user
    )
    .execute(&amp;mut *tx)
    .await?;
    
    // å¢åŠ æ¥æ”¶æ–¹ç§¯åˆ†
    sqlx::query!(
        "UPDATE users SET points = points + $1 WHERE id = $2",
        amount,
        to_user
    )
    .execute(&amp;mut *tx)
    .await?;
    
    // è®°å½•è½¬è´¦
    sqlx::query!(
        "INSERT INTO point_transfers (from_user, to_user, amount) VALUES ($1, $2, $3)",
        from_user,
        to_user,
        amount
    )
    .execute(&amp;mut *tx)
    .await?;
    
    tx.commit().await?;
    
    Ok(())
}
<span class="boring">}</span></code></pre>
<h3 id="äº‹åŠ¡å›æ»š"><a class="header" href="#äº‹åŠ¡å›æ»š">äº‹åŠ¡å›æ»š</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>async fn create_post_with_tags(
    pool: &amp;PgPool,
    post: CreatePost,
    tag_names: Vec&lt;String&gt;
) -&gt; Result&lt;Post, sqlx::Error&gt; {
    let mut tx = pool.begin().await?;
    
    // åˆ›å»ºæ–‡ç« 
    let post = sqlx::query_as!(
        Post,
        r#"
        INSERT INTO posts (user_id, title, content)
        VALUES ($1, $2, $3)
        RETURNING id, user_id, title, content, created_at
        "#,
        post.user_id,
        post.title,
        post.content
    )
    .fetch_one(&amp;mut *tx)
    .await?;
    
    // å¤„ç†æ ‡ç­¾
    for tag_name in tag_names {
        // è·å–æˆ–åˆ›å»ºæ ‡ç­¾
        let tag = sqlx::query_as!(
            Tag,
            r#"
            INSERT INTO tags (name)
            VALUES ($1)
            ON CONFLICT (name) DO UPDATE SET name = EXCLUDED.name
            RETURNING id, name
            "#,
            tag_name
        )
        .fetch_one(&amp;mut *tx)
        .await?;
        
        // å…³è”æ–‡ç« å’Œæ ‡ç­¾
        sqlx::query!(
            "INSERT INTO post_tags (post_id, tag_id) VALUES ($1, $2)",
            post.id,
            tag.id
        )
        .execute(&amp;mut *tx)
        .await?;
    }
    
    tx.commit().await?;
    
    Ok(post)
}
<span class="boring">}</span></code></pre>
<h2 id="å­æŸ¥è¯¢"><a class="header" href="#å­æŸ¥è¯¢">å­æŸ¥è¯¢</a></h2>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>async fn get_popular_posts(pool: &amp;PgPool, limit: i64) -&gt; Result&lt;Vec&lt;Post&gt;, sqlx::Error&gt; {
    let posts = sqlx::query_as!(
        Post,
        r#"
        SELECT p.*
        FROM posts p
        WHERE p.id IN (
            SELECT post_id
            FROM comments
            GROUP BY post_id
            HAVING COUNT(*) &gt; 10
        )
        ORDER BY p.created_at DESC
        LIMIT $1
        "#,
        limit
    )
    .fetch_all(pool)
    .await?;
    
    Ok(posts)
}
<span class="boring">}</span></code></pre>
<h2 id="å®Œæ•´ç¤ºä¾‹-5"><a class="header" href="#å®Œæ•´ç¤ºä¾‹-5">å®Œæ•´ç¤ºä¾‹</a></h2>
<p>è¯¦è§ Day61-80/STAGE5_OVERVIEW.md ä¸­çš„å¤æ‚æŸ¥è¯¢éƒ¨åˆ†ã€‚</p>
<h2 id="ç»ƒä¹ -6"><a class="header" href="#ç»ƒä¹ -6">ç»ƒä¹ </a></h2>
<ol>
<li>å®ç°å¤šè¡¨å…³è”æŸ¥è¯¢</li>
<li>åˆ›å»ºå¤æ‚çš„ç»Ÿè®¡æŠ¥è¡¨</li>
<li>å®ç°äº‹åŠ¡æ€§çš„è®¢å•ç³»ç»Ÿ</li>
<li>ä¼˜åŒ–æ…¢æŸ¥è¯¢</li>
<li>å®ç°æ•°æ®å¯¼å…¥å¯¼å‡º</li>
</ol>
<h2 id="ä¸‹ä¸€æ­¥-8"><a class="header" href="#ä¸‹ä¸€æ­¥-8">ä¸‹ä¸€æ­¥</a></h2>
<p>Day 69 å·²å®Œæˆ - JWT ç”¨æˆ·è®¤è¯ç³»ç»Ÿã€‚</p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-69-ç”¨æˆ·è®¤è¯-jwt-1"><a class="header" href="#day-69-ç”¨æˆ·è®¤è¯-jwt-1">Day 69: ç”¨æˆ·è®¤è¯ (JWT)</a></h1>
<h2 id="å­¦ä¹ ç›®æ ‡-8"><a class="header" href="#å­¦ä¹ ç›®æ ‡-8">å­¦ä¹ ç›®æ ‡</a></h2>
<ul>
<li>ç†è§£ JWT å·¥ä½œåŸç†</li>
<li>å®ç°ç”¨æˆ·æ³¨å†Œå’Œç™»å½•</li>
<li>æŒæ¡å¯†ç å®‰å…¨å­˜å‚¨</li>
<li>å®ç°è®¤è¯ä¸­é—´ä»¶</li>
</ul>
<h2 id="jwt-ç®€ä»‹"><a class="header" href="#jwt-ç®€ä»‹">JWT ç®€ä»‹</a></h2>
<p>JWT (JSON Web Token) æ˜¯ä¸€ç§å¼€æ”¾æ ‡å‡† (RFC 7519)ï¼Œç”¨äºåœ¨å„æ–¹ä¹‹é—´å®‰å…¨åœ°ä¼ è¾“ä¿¡æ¯ã€‚</p>
<h3 id="jwt-ç»“æ„"><a class="header" href="#jwt-ç»“æ„">JWT ç»“æ„</a></h3>
<pre><code>Header.Payload.Signature
</code></pre>
<p><strong>Header (å¤´éƒ¨)</strong></p>
<pre><code class="language-json">{
  "alg": "HS256",
  "typ": "JWT"
}
</code></pre>
<p><strong>Payload (è½½è·)</strong></p>
<pre><code class="language-json">{
  "sub": "user_id",
  "name": "John Doe",
  "exp": 1516239022
}
</code></pre>
<p><strong>Signature (ç­¾å)</strong></p>
<pre><code>HMACSHA256(
  base64UrlEncode(header) + "." +
  base64UrlEncode(payload),
  secret
)
</code></pre>
<h2 id="é¡¹ç›®è®¾ç½®-2"><a class="header" href="#é¡¹ç›®è®¾ç½®-2">é¡¹ç›®è®¾ç½®</a></h2>
<h3 id="cargotoml"><a class="header" href="#cargotoml">Cargo.toml</a></h3>
<pre><code class="language-toml">[package]
name = "jwt_auth"
version = "0.1.0"
edition = "2021"

[dependencies]
axum = "0.7"
tokio = { version = "1", features = ["full"] }
serde = { version = "1", features = ["derive"] }
serde_json = "1"
jsonwebtoken = "9"
bcrypt = "0.15"
sqlx = { version = "0.7", features = ["runtime-tokio-rustls", "postgres"] }
chrono = { version = "0.4", features = ["serde"] }
tower = "0.4"
tower-http = { version = "0.5", features = ["trace"] }
tracing = "0.1"
tracing-subscriber = "0.3"
</code></pre>
<h2 id="å®Œæ•´å®ç°"><a class="header" href="#å®Œæ•´å®ç°">å®Œæ•´å®ç°</a></h2>
<h3 id="1-æ•°æ®æ¨¡å‹"><a class="header" href="#1-æ•°æ®æ¨¡å‹">1. æ•°æ®æ¨¡å‹</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// src/models.rs
use serde::{Deserialize, Serialize};
use sqlx::FromRow;

#[derive(Debug, Clone, Serialize, Deserialize, FromRow)]
pub struct User {
    pub id: i32,
    pub username: String,
    pub email: String,
    pub password_hash: String,
    pub created_at: chrono::DateTime&lt;chrono::Utc&gt;,
}

#[derive(Debug, Deserialize)]
pub struct RegisterRequest {
    pub username: String,
    pub email: String,
    pub password: String,
}

#[derive(Debug, Deserialize)]
pub struct LoginRequest {
    pub username: String,
    pub password: String,
}

#[derive(Debug, Serialize)]
pub struct AuthResponse {
    pub token: String,
    pub user: UserResponse,
}

#[derive(Debug, Serialize)]
pub struct UserResponse {
    pub id: i32,
    pub username: String,
    pub email: String,
}

#[derive(Debug, Serialize, Deserialize)]
pub struct Claims {
    pub sub: String,  // user_id
    pub username: String,
    pub exp: usize,   // è¿‡æœŸæ—¶é—´
}
<span class="boring">}</span></code></pre>
<h3 id="2-jwt-å·¥å…·å‡½æ•°"><a class="header" href="#2-jwt-å·¥å…·å‡½æ•°">2. JWT å·¥å…·å‡½æ•°</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// src/jwt.rs
use jsonwebtoken::{encode, decode, Header, Validation, EncodingKey, DecodingKey};
use chrono::{Utc, Duration};
use crate::models::Claims;

const SECRET: &amp;str = "your-secret-key"; // ç”Ÿäº§ç¯å¢ƒåº”ä»ç¯å¢ƒå˜é‡è¯»å–

pub fn create_jwt(user_id: i32, username: &amp;str) -&gt; Result&lt;String, jsonwebtoken::errors::Error&gt; {
    let expiration = Utc::now()
        .checked_add_signed(Duration::hours(24))
        .expect("valid timestamp")
        .timestamp() as usize;
    
    let claims = Claims {
        sub: user_id.to_string(),
        username: username.to_string(),
        exp: expiration,
    };
    
    encode(
        &amp;Header::default(),
        &amp;claims,
        &amp;EncodingKey::from_secret(SECRET.as_ref()),
    )
}

pub fn verify_jwt(token: &amp;str) -&gt; Result&lt;Claims, jsonwebtoken::errors::Error&gt; {
    decode::&lt;Claims&gt;(
        token,
        &amp;DecodingKey::from_secret(SECRET.as_ref()),
        &amp;Validation::default(),
    )
    .map(|data| data.claims)
}
<span class="boring">}</span></code></pre>
<h3 id="3-å¯†ç å¤„ç†"><a class="header" href="#3-å¯†ç å¤„ç†">3. å¯†ç å¤„ç†</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// src/password.rs
use bcrypt::{hash, verify, DEFAULT_COST};

pub fn hash_password(password: &amp;str) -&gt; Result&lt;String, bcrypt::BcryptError&gt; {
    hash(password, DEFAULT_COST)
}

pub fn verify_password(password: &amp;str, hash: &amp;str) -&gt; Result&lt;bool, bcrypt::BcryptError&gt; {
    verify(password, hash)
}
<span class="boring">}</span></code></pre>
<h3 id="4-è®¤è¯æœåŠ¡"><a class="header" href="#4-è®¤è¯æœåŠ¡">4. è®¤è¯æœåŠ¡</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// src/auth.rs
use sqlx::PgPool;
use crate::models::*;
use crate::jwt::create_jwt;
use crate::password::{hash_password, verify_password};

pub struct AuthService {
    pool: PgPool,
}

impl AuthService {
    pub fn new(pool: PgPool) -&gt; Self {
        Self { pool }
    }
    
    pub async fn register(&amp;self, req: RegisterRequest) -&gt; Result&lt;AuthResponse, String&gt; {
        // æ£€æŸ¥ç”¨æˆ·åæ˜¯å¦å·²å­˜åœ¨
        let existing = sqlx::query!(
            "SELECT id FROM users WHERE username = $1 OR email = $2",
            req.username,
            req.email
        )
        .fetch_optional(&amp;self.pool)
        .await
        .map_err(|e| e.to_string())?;
        
        if existing.is_some() {
            return Err("Username or email already exists".to_string());
        }
        
        // å“ˆå¸Œå¯†ç 
        let password_hash = hash_password(&amp;req.password)
            .map_err(|e| e.to_string())?;
        
        // åˆ›å»ºç”¨æˆ·
        let user = sqlx::query_as!(
            User,
            r#"
            INSERT INTO users (username, email, password_hash)
            VALUES ($1, $2, $3)
            RETURNING id, username, email, password_hash, created_at
            "#,
            req.username,
            req.email,
            password_hash
        )
        .fetch_one(&amp;self.pool)
        .await
        .map_err(|e| e.to_string())?;
        
        // ç”Ÿæˆ JWT
        let token = create_jwt(user.id, &amp;user.username)
            .map_err(|e| e.to_string())?;
        
        Ok(AuthResponse {
            token,
            user: UserResponse {
                id: user.id,
                username: user.username,
                email: user.email,
            },
        })
    }
    
    pub async fn login(&amp;self, req: LoginRequest) -&gt; Result&lt;AuthResponse, String&gt; {
        // æŸ¥æ‰¾ç”¨æˆ·
        let user = sqlx::query_as!(
            User,
            "SELECT * FROM users WHERE username = $1",
            req.username
        )
        .fetch_optional(&amp;self.pool)
        .await
        .map_err(|e| e.to_string())?
        .ok_or("Invalid credentials")?;
        
        // éªŒè¯å¯†ç 
        let valid = verify_password(&amp;req.password, &amp;user.password_hash)
            .map_err(|e| e.to_string())?;
        
        if !valid {
            return Err("Invalid credentials".to_string());
        }
        
        // ç”Ÿæˆ JWT
        let token = create_jwt(user.id, &amp;user.username)
            .map_err(|e| e.to_string())?;
        
        Ok(AuthResponse {
            token,
            user: UserResponse {
                id: user.id,
                username: user.username,
                email: user.email,
            },
        })
    }
}
<span class="boring">}</span></code></pre>
<h3 id="5-è®¤è¯ä¸­é—´ä»¶"><a class="header" href="#5-è®¤è¯ä¸­é—´ä»¶">5. è®¤è¯ä¸­é—´ä»¶</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// src/middleware.rs
use axum::{
    extract::Request,
    http::{StatusCode, HeaderMap},
    middleware::Next,
    response::Response,
};
use crate::jwt::verify_jwt;
use crate::models::Claims;

pub async fn auth_middleware(
    headers: HeaderMap,
    mut req: Request,
    next: Next,
) -&gt; Result&lt;Response, StatusCode&gt; {
    let auth_header = headers
        .get("Authorization")
        .and_then(|h| h.to_str().ok())
        .ok_or(StatusCode::UNAUTHORIZED)?;
    
    let token = auth_header
        .strip_prefix("Bearer ")
        .ok_or(StatusCode::UNAUTHORIZED)?;
    
    let claims = verify_jwt(token)
        .map_err(|_| StatusCode::UNAUTHORIZED)?;
    
    // å°† claims æ·»åŠ åˆ°è¯·æ±‚æ‰©å±•ä¸­
    req.extensions_mut().insert(claims);
    
    Ok(next.run(req).await)
}
<span class="boring">}</span></code></pre>
<h3 id="6-api-å¤„ç†å™¨"><a class="header" href="#6-api-å¤„ç†å™¨">6. API å¤„ç†å™¨</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// src/handlers.rs
use axum::{
    extract::{State, Extension},
    http::StatusCode,
    Json,
};
use crate::auth::AuthService;
use crate::models::*;

pub async fn register(
    State(service): State&lt;AuthService&gt;,
    Json(req): Json&lt;RegisterRequest&gt;,
) -&gt; Result&lt;Json&lt;AuthResponse&gt;, (StatusCode, String)&gt; {
    service
        .register(req)
        .await
        .map(Json)
        .map_err(|e| (StatusCode::BAD_REQUEST, e))
}

pub async fn login(
    State(service): State&lt;AuthService&gt;,
    Json(req): Json&lt;LoginRequest&gt;,
) -&gt; Result&lt;Json&lt;AuthResponse&gt;, (StatusCode, String)&gt; {
    service
        .login(req)
        .await
        .map(Json)
        .map_err(|e| (StatusCode::UNAUTHORIZED, e))
}

pub async fn me(
    Extension(claims): Extension&lt;Claims&gt;,
) -&gt; Json&lt;Claims&gt; {
    Json(claims)
}

pub async fn protected_route(
    Extension(claims): Extension&lt;Claims&gt;,
) -&gt; String {
    format!("Hello, {}! This is a protected route.", claims.username)
}
<span class="boring">}</span></code></pre>
<h3 id="7-ä¸»ç¨‹åº"><a class="header" href="#7-ä¸»ç¨‹åº">7. ä¸»ç¨‹åº</a></h3>
<pre class="playground"><code class="language-rust">// src/main.rs
use axum::{
    routing::{get, post},
    Router,
    middleware,
};
use sqlx::postgres::PgPoolOptions;
use tower_http::trace::TraceLayer;

mod models;
mod jwt;
mod password;
mod auth;
mod handlers;
mod middleware as mw;

#[tokio::main]
async fn main() {
    // åˆå§‹åŒ–æ—¥å¿—
    tracing_subscriber::fmt::init();
    
    // è¿æ¥æ•°æ®åº“
    let pool = PgPoolOptions::new()
        .max_connections(5)
        .connect("postgres://localhost/auth_db")
        .await
        .expect("Failed to connect to database");
    
    // åˆ›å»ºæœåŠ¡
    let auth_service = auth::AuthService::new(pool);
    
    // å…¬å¼€è·¯ç”±
    let public_routes = Router::new()
        .route("/register", post(handlers::register))
        .route("/login", post(handlers::login))
        .with_state(auth_service);
    
    // å—ä¿æŠ¤è·¯ç”±
    let protected_routes = Router::new()
        .route("/me", get(handlers::me))
        .route("/protected", get(handlers::protected_route))
        .layer(middleware::from_fn(mw::auth_middleware));
    
    // ç»„åˆè·¯ç”±
    let app = Router::new()
        .nest("/api/auth", public_routes)
        .nest("/api", protected_routes)
        .layer(TraceLayer::new_for_http());
    
    // å¯åŠ¨æœåŠ¡å™¨
    let listener = tokio::net::TcpListener::bind("127.0.0.1:3000")
        .await
        .unwrap();
    
    println!("ğŸš€ Server running on http://127.0.0.1:3000");
    
    axum::serve(listener, app).await.unwrap();
}</code></pre>
<h3 id="8-æ•°æ®åº“è¿ç§»"><a class="header" href="#8-æ•°æ®åº“è¿ç§»">8. æ•°æ®åº“è¿ç§»</a></h3>
<pre><code class="language-sql">-- migrations/001_create_users.sql
CREATE TABLE users (
    id SERIAL PRIMARY KEY,
    username VARCHAR(50) UNIQUE NOT NULL,
    email VARCHAR(100) UNIQUE NOT NULL,
    password_hash VARCHAR(255) NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX idx_users_username ON users(username);
CREATE INDEX idx_users_email ON users(email);
</code></pre>
<h2 id="æµ‹è¯•-api-2"><a class="header" href="#æµ‹è¯•-api-2">æµ‹è¯• API</a></h2>
<h3 id="æ³¨å†Œç”¨æˆ·"><a class="header" href="#æ³¨å†Œç”¨æˆ·">æ³¨å†Œç”¨æˆ·</a></h3>
<pre><code class="language-bash">curl -X POST http://localhost:3000/api/auth/register \
  -H "Content-Type: application/json" \
  -d '{
    "username": "alice",
    "email": "alice@example.com",
    "password": "password123"
  }'
</code></pre>
<h3 id="ç™»å½•"><a class="header" href="#ç™»å½•">ç™»å½•</a></h3>
<pre><code class="language-bash">curl -X POST http://localhost:3000/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{
    "username": "alice",
    "password": "password123"
  }'
</code></pre>
<h3 id="è®¿é—®å—ä¿æŠ¤è·¯ç”±"><a class="header" href="#è®¿é—®å—ä¿æŠ¤è·¯ç”±">è®¿é—®å—ä¿æŠ¤è·¯ç”±</a></h3>
<pre><code class="language-bash">TOKEN="your-jwt-token"

curl http://localhost:3000/api/me \
  -H "Authorization: Bearer $TOKEN"

curl http://localhost:3000/api/protected \
  -H "Authorization: Bearer $TOKEN"
</code></pre>
<h2 id="å®‰å…¨æœ€ä½³å®è·µ"><a class="header" href="#å®‰å…¨æœ€ä½³å®è·µ">å®‰å…¨æœ€ä½³å®è·µ</a></h2>
<h3 id="1-å¯†ç å®‰å…¨"><a class="header" href="#1-å¯†ç å®‰å…¨">1. å¯†ç å®‰å…¨</a></h3>
<ul>
<li>âœ… ä½¿ç”¨ bcrypt/argon2 å“ˆå¸Œ</li>
<li>âœ… è®¾ç½®æœ€å°å¯†ç é•¿åº¦</li>
<li>âœ… è¦æ±‚å¯†ç å¤æ‚åº¦</li>
<li>âœ… é˜²æ­¢æš´åŠ›ç ´è§£</li>
</ul>
<h3 id="2-jwt-å®‰å…¨"><a class="header" href="#2-jwt-å®‰å…¨">2. JWT å®‰å…¨</a></h3>
<ul>
<li>âœ… ä½¿ç”¨å¼ºå¯†é’¥</li>
<li>âœ… è®¾ç½®åˆç†è¿‡æœŸæ—¶é—´</li>
<li>âœ… ä½¿ç”¨ HTTPS ä¼ è¾“</li>
<li>âœ… å®ç°åˆ·æ–°ä»¤ç‰Œæœºåˆ¶</li>
</ul>
<h3 id="3-api-å®‰å…¨"><a class="header" href="#3-api-å®‰å…¨">3. API å®‰å…¨</a></h3>
<ul>
<li>âœ… é™æµä¿æŠ¤</li>
<li>âœ… CORS é…ç½®</li>
<li>âœ… è¾“å…¥éªŒè¯</li>
<li>âœ… SQL æ³¨å…¥é˜²æŠ¤</li>
</ul>
<h2 id="è¿›é˜¶åŠŸèƒ½"><a class="header" href="#è¿›é˜¶åŠŸèƒ½">è¿›é˜¶åŠŸèƒ½</a></h2>
<h3 id="åˆ·æ–°ä»¤ç‰Œ"><a class="header" href="#åˆ·æ–°ä»¤ç‰Œ">åˆ·æ–°ä»¤ç‰Œ</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[derive(Debug, Serialize, Deserialize)]
pub struct RefreshToken {
    pub token: String,
    pub user_id: i32,
    pub expires_at: chrono::DateTime&lt;chrono::Utc&gt;,
}

pub async fn refresh_token(
    State(service): State&lt;AuthService&gt;,
    Json(req): Json&lt;RefreshTokenRequest&gt;,
) -&gt; Result&lt;Json&lt;AuthResponse&gt;, StatusCode&gt; {
    // éªŒè¯åˆ·æ–°ä»¤ç‰Œ
    // ç”Ÿæˆæ–°çš„è®¿é—®ä»¤ç‰Œ
    todo!()
}
<span class="boring">}</span></code></pre>
<h3 id="å¯†ç é‡ç½®"><a class="header" href="#å¯†ç é‡ç½®">å¯†ç é‡ç½®</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub async fn forgot_password(
    State(service): State&lt;AuthService&gt;,
    Json(req): Json&lt;ForgotPasswordRequest&gt;,
) -&gt; Result&lt;StatusCode, StatusCode&gt; {
    // ç”Ÿæˆé‡ç½®ä»¤ç‰Œ
    // å‘é€é‡ç½®é‚®ä»¶
    todo!()
}

pub async fn reset_password(
    State(service): State&lt;AuthService&gt;,
    Json(req): Json&lt;ResetPasswordRequest&gt;,
) -&gt; Result&lt;StatusCode, StatusCode&gt; {
    // éªŒè¯é‡ç½®ä»¤ç‰Œ
    // æ›´æ–°å¯†ç 
    todo!()
}
<span class="boring">}</span></code></pre>
<h2 id="ç»ƒä¹ -7"><a class="header" href="#ç»ƒä¹ -7">ç»ƒä¹ </a></h2>
<ol>
<li>å®ç°åˆ·æ–°ä»¤ç‰Œæœºåˆ¶</li>
<li>æ·»åŠ é‚®ç®±éªŒè¯åŠŸèƒ½</li>
<li>å®ç°å¯†ç é‡ç½®æµç¨‹</li>
<li>æ·»åŠ  OAuth2 ç™»å½•</li>
<li>å®ç°å¤šå› ç´ è®¤è¯ (MFA)</li>
</ol>
<h2 id="ä¸‹ä¸€æ­¥-9"><a class="header" href="#ä¸‹ä¸€æ­¥-9">ä¸‹ä¸€æ­¥</a></h2>
<p>Day 70 å°†å­¦ä¹ åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ (RBAC)ï¼Œå®ç°æ›´ç»†ç²’åº¦çš„æƒé™ç®¡ç†ã€‚</p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-70-æƒé™æ§åˆ¶-rbac-1"><a class="header" href="#day-70-æƒé™æ§åˆ¶-rbac-1">Day 70: æƒé™æ§åˆ¶ (RBAC)</a></h1>
<h2 id="å­¦ä¹ ç›®æ ‡-9"><a class="header" href="#å­¦ä¹ ç›®æ ‡-9">å­¦ä¹ ç›®æ ‡</a></h2>
<ul>
<li>ç†è§£ RBAC æ¦‚å¿µ</li>
<li>è®¾è®¡æƒé™æ¨¡å‹</li>
<li>å®ç°è§’è‰²å’Œæƒé™ç³»ç»Ÿ</li>
<li>åˆ›å»ºæƒé™æ£€æŸ¥ä¸­é—´ä»¶</li>
</ul>
<h2 id="rbac-æ¦‚å¿µ"><a class="header" href="#rbac-æ¦‚å¿µ">RBAC æ¦‚å¿µ</a></h2>
<p>RBAC (Role-Based Access Control) æ˜¯ä¸€ç§åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶æ¨¡å‹ã€‚</p>
<pre><code>ç”¨æˆ· â†’ è§’è‰² â†’ æƒé™ â†’ èµ„æº
</code></pre>
<h3 id="æ ¸å¿ƒæ¦‚å¿µ-3"><a class="header" href="#æ ¸å¿ƒæ¦‚å¿µ-3">æ ¸å¿ƒæ¦‚å¿µ</a></h3>
<ul>
<li><strong>ç”¨æˆ· (User)</strong>: ç³»ç»Ÿçš„ä½¿ç”¨è€…</li>
<li><strong>è§’è‰² (Role)</strong>: ç”¨æˆ·çš„èŒèƒ½åˆ†ç±»</li>
<li><strong>æƒé™ (Permission)</strong>: å¯¹èµ„æºçš„æ“ä½œè®¸å¯</li>
<li><strong>èµ„æº (Resource)</strong>: è¢«ä¿æŠ¤çš„å¯¹è±¡</li>
</ul>
<h2 id="æ•°æ®åº“è®¾è®¡"><a class="header" href="#æ•°æ®åº“è®¾è®¡">æ•°æ®åº“è®¾è®¡</a></h2>
<pre><code class="language-sql">-- ç”¨æˆ·è¡¨
CREATE TABLE users (
    id SERIAL PRIMARY KEY,
    username VARCHAR(50) UNIQUE NOT NULL,
    email VARCHAR(100) UNIQUE NOT NULL,
    password_hash VARCHAR(255) NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- è§’è‰²è¡¨
CREATE TABLE roles (
    id SERIAL PRIMARY KEY,
    name VARCHAR(50) UNIQUE NOT NULL,
    description TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- æƒé™è¡¨
CREATE TABLE permissions (
    id SERIAL PRIMARY KEY,
    name VARCHAR(100) UNIQUE NOT NULL,
    resource VARCHAR(50) NOT NULL,
    action VARCHAR(50) NOT NULL,
    description TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- ç”¨æˆ·è§’è‰²å…³è”è¡¨
CREATE TABLE user_roles (
    user_id INTEGER REFERENCES users(id) ON DELETE CASCADE,
    role_id INTEGER REFERENCES roles(id) ON DELETE CASCADE,
    PRIMARY KEY (user_id, role_id)
);

-- è§’è‰²æƒé™å…³è”è¡¨
CREATE TABLE role_permissions (
    role_id INTEGER REFERENCES roles(id) ON DELETE CASCADE,
    permission_id INTEGER REFERENCES permissions(id) ON DELETE CASCADE,
    PRIMARY KEY (role_id, permission_id)
);

-- ç´¢å¼•
CREATE INDEX idx_user_roles_user_id ON user_roles(user_id);
CREATE INDEX idx_user_roles_role_id ON user_roles(role_id);
CREATE INDEX idx_role_permissions_role_id ON role_permissions(role_id);
CREATE INDEX idx_role_permissions_permission_id ON role_permissions(permission_id);
</code></pre>
<h2 id="æ•°æ®æ¨¡å‹"><a class="header" href="#æ•°æ®æ¨¡å‹">æ•°æ®æ¨¡å‹</a></h2>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use serde::{Deserialize, Serialize};
use sqlx::FromRow;

#[derive(Debug, Clone, Serialize, Deserialize, FromRow)]
pub struct User {
    pub id: i32,
    pub username: String,
    pub email: String,
    pub password_hash: String,
}

#[derive(Debug, Clone, Serialize, Deserialize, FromRow)]
pub struct Role {
    pub id: i32,
    pub name: String,
    pub description: Option&lt;String&gt;,
}

#[derive(Debug, Clone, Serialize, Deserialize, FromRow)]
pub struct Permission {
    pub id: i32,
    pub name: String,
    pub resource: String,
    pub action: String,
    pub description: Option&lt;String&gt;,
}

#[derive(Debug, Clone)]
pub struct UserWithRoles {
    pub user: User,
    pub roles: Vec&lt;Role&gt;,
    pub permissions: Vec&lt;Permission&gt;,
}
<span class="boring">}</span></code></pre>
<h2 id="æƒé™æšä¸¾"><a class="header" href="#æƒé™æšä¸¾">æƒé™æšä¸¾</a></h2>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[derive(Debug, Clone, PartialEq, Eq, Hash)]
pub enum Resource {
    User,
    Post,
    Comment,
    Category,
}

#[derive(Debug, Clone, PartialEq, Eq, Hash)]
pub enum Action {
    Create,
    Read,
    Update,
    Delete,
    List,
}

#[derive(Debug, Clone, PartialEq, Eq, Hash)]
pub struct PermissionCheck {
    pub resource: Resource,
    pub action: Action,
}

impl PermissionCheck {
    pub fn new(resource: Resource, action: Action) -&gt; Self {
        Self { resource, action }
    }
    
    pub fn to_string(&amp;self) -&gt; String {
        format!("{}:{:?}", self.resource_name(), self.action)
    }
    
    fn resource_name(&amp;self) -&gt; &amp;str {
        match self.resource {
            Resource::User =&gt; "user",
            Resource::Post =&gt; "post",
            Resource::Comment =&gt; "comment",
            Resource::Category =&gt; "category",
        }
    }
}

// ä¾¿æ·å®
macro_rules! permission {
    ($resource:ident, $action:ident) =&gt; {
        PermissionCheck::new(Resource::$resource, Action::$action)
    };
}
<span class="boring">}</span></code></pre>
<h2 id="æƒé™æœåŠ¡"><a class="header" href="#æƒé™æœåŠ¡">æƒé™æœåŠ¡</a></h2>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use sqlx::PgPool;
use std::collections::HashSet;

pub struct PermissionService {
    pool: PgPool,
}

impl PermissionService {
    pub fn new(pool: PgPool) -&gt; Self {
        Self { pool }
    }
    
    // è·å–ç”¨æˆ·çš„æ‰€æœ‰è§’è‰²
    pub async fn get_user_roles(&amp;self, user_id: i32) -&gt; Result&lt;Vec&lt;Role&gt;&gt; {
        let roles = sqlx::query_as!(
            Role,
            r#"
            SELECT r.id, r.name, r.description
            FROM roles r
            INNER JOIN user_roles ur ON r.id = ur.role_id
            WHERE ur.user_id = $1
            "#,
            user_id
        )
        .fetch_all(&amp;self.pool)
        .await?;
        
        Ok(roles)
    }
    
    // è·å–ç”¨æˆ·çš„æ‰€æœ‰æƒé™
    pub async fn get_user_permissions(&amp;self, user_id: i32) -&gt; Result&lt;Vec&lt;Permission&gt;&gt; {
        let permissions = sqlx::query_as!(
            Permission,
            r#"
            SELECT DISTINCT p.id, p.name, p.resource, p.action, p.description
            FROM permissions p
            INNER JOIN role_permissions rp ON p.id = rp.permission_id
            INNER JOIN user_roles ur ON rp.role_id = ur.role_id
            WHERE ur.user_id = $1
            "#,
            user_id
        )
        .fetch_all(&amp;self.pool)
        .await?;
        
        Ok(permissions)
    }
    
    // æ£€æŸ¥ç”¨æˆ·æ˜¯å¦æœ‰ç‰¹å®šæƒé™
    pub async fn has_permission(
        &amp;self,
        user_id: i32,
        resource: &amp;str,
        action: &amp;str,
    ) -&gt; Result&lt;bool&gt; {
        let result = sqlx::query!(
            r#"
            SELECT EXISTS(
                SELECT 1
                FROM permissions p
                INNER JOIN role_permissions rp ON p.id = rp.permission_id
                INNER JOIN user_roles ur ON rp.role_id = ur.role_id
                WHERE ur.user_id = $1
                  AND p.resource = $2
                  AND p.action = $3
            ) as "exists!"
            "#,
            user_id,
            resource,
            action
        )
        .fetch_one(&amp;self.pool)
        .await?;
        
        Ok(result.exists)
    }
    
    // åˆ†é…è§’è‰²ç»™ç”¨æˆ·
    pub async fn assign_role(&amp;self, user_id: i32, role_id: i32) -&gt; Result&lt;()&gt; {
        sqlx::query!(
            "INSERT INTO user_roles (user_id, role_id) VALUES ($1, $2) ON CONFLICT DO NOTHING",
            user_id,
            role_id
        )
        .execute(&amp;self.pool)
        .await?;
        
        Ok(())
    }
    
    // ç§»é™¤ç”¨æˆ·è§’è‰²
    pub async fn remove_role(&amp;self, user_id: i32, role_id: i32) -&gt; Result&lt;()&gt; {
        sqlx::query!(
            "DELETE FROM user_roles WHERE user_id = $1 AND role_id = $2",
            user_id,
            role_id
        )
        .execute(&amp;self.pool)
        .await?;
        
        Ok(())
    }
    
    // åˆ†é…æƒé™ç»™è§’è‰²
    pub async fn assign_permission(&amp;self, role_id: i32, permission_id: i32) -&gt; Result&lt;()&gt; {
        sqlx::query!(
            "INSERT INTO role_permissions (role_id, permission_id) VALUES ($1, $2) ON CONFLICT DO NOTHING",
            role_id,
            permission_id
        )
        .execute(&amp;self.pool)
        .await?;
        
        Ok(())
    }
}
<span class="boring">}</span></code></pre>
<h2 id="æƒé™ä¸­é—´ä»¶"><a class="header" href="#æƒé™ä¸­é—´ä»¶">æƒé™ä¸­é—´ä»¶</a></h2>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use axum::{
    extract::{Request, State},
    middleware::Next,
    response::{Response, IntoResponse},
    http::StatusCode,
};

// æƒé™æ£€æŸ¥ä¸­é—´ä»¶
pub async fn require_permission(
    resource: String,
    action: String,
) -&gt; impl Fn(Request, Next) -&gt; impl Future&lt;Output = Result&lt;Response, StatusCode&gt;&gt; {
    move |request: Request, next: Next| {
        let resource = resource.clone();
        let action = action.clone();
        
        async move {
            // ä»è¯·æ±‚æ‰©å±•ä¸­è·å–ç”¨æˆ·ä¿¡æ¯
            let user = request
                .extensions()
                .get::&lt;AuthUser&gt;()
                .ok_or(StatusCode::UNAUTHORIZED)?;
            
            // æ£€æŸ¥æƒé™
            if !user.has_permission(&amp;resource, &amp;action) {
                return Err(StatusCode::FORBIDDEN);
            }
            
            Ok(next.run(request).await)
        }
    }
}

// è§’è‰²æ£€æŸ¥ä¸­é—´ä»¶
pub async fn require_role(
    required_role: String,
) -&gt; impl Fn(Request, Next) -&gt; impl Future&lt;Output = Result&lt;Response, StatusCode&gt;&gt; {
    move |request: Request, next: Next| {
        let required_role = required_role.clone();
        
        async move {
            let user = request
                .extensions()
                .get::&lt;AuthUser&gt;()
                .ok_or(StatusCode::UNAUTHORIZED)?;
            
            if !user.has_role(&amp;required_role) {
                return Err(StatusCode::FORBIDDEN);
            }
            
            Ok(next.run(request).await)
        }
    }
}
<span class="boring">}</span></code></pre>
<h2 id="è®¤è¯ç”¨æˆ·æ‰©å±•"><a class="header" href="#è®¤è¯ç”¨æˆ·æ‰©å±•">è®¤è¯ç”¨æˆ·æ‰©å±•</a></h2>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use std::collections::HashSet;

#[derive(Debug, Clone)]
pub struct AuthUser {
    pub id: i32,
    pub username: String,
    pub roles: HashSet&lt;String&gt;,
    pub permissions: HashSet&lt;String&gt;,
}

impl AuthUser {
    pub fn has_role(&amp;self, role: &amp;str) -&gt; bool {
        self.roles.contains(role)
    }
    
    pub fn has_permission(&amp;self, resource: &amp;str, action: &amp;str) -&gt; bool {
        let permission = format!("{}:{}", resource, action);
        self.permissions.contains(&amp;permission)
    }
    
    pub fn has_any_role(&amp;self, roles: &amp;[&amp;str]) -&gt; bool {
        roles.iter().any(|role| self.has_role(role))
    }
    
    pub fn has_all_roles(&amp;self, roles: &amp;[&amp;str]) -&gt; bool {
        roles.iter().all(|role| self.has_role(role))
    }
}

// ä»æ•°æ®åº“åŠ è½½ç”¨æˆ·æƒé™
pub async fn load_auth_user(
    user_id: i32,
    service: &amp;PermissionService,
) -&gt; Result&lt;AuthUser&gt; {
    let user = service.get_user(user_id).await?;
    let roles = service.get_user_roles(user_id).await?;
    let permissions = service.get_user_permissions(user_id).await?;
    
    let role_names: HashSet&lt;String&gt; = roles
        .into_iter()
        .map(|r| r.name)
        .collect();
    
    let permission_names: HashSet&lt;String&gt; = permissions
        .into_iter()
        .map(|p| format!("{}:{}", p.resource, p.action))
        .collect();
    
    Ok(AuthUser {
        id: user.id,
        username: user.username,
        roles: role_names,
        permissions: permission_names,
    })
}
<span class="boring">}</span></code></pre>
<h2 id="è·¯ç”±ä¿æŠ¤"><a class="header" href="#è·¯ç”±ä¿æŠ¤">è·¯ç”±ä¿æŠ¤</a></h2>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use axum::{
    Router,
    routing::{get, post, put, delete},
    middleware,
};

// ç”¨æˆ·ç®¡ç†è·¯ç”±ï¼ˆéœ€è¦ç®¡ç†å‘˜æƒé™ï¼‰
fn admin_routes() -&gt; Router {
    Router::new()
        .route("/users", get(list_users).post(create_user))
        .route("/users/:id", put(update_user).delete(delete_user))
        .route("/roles", get(list_roles).post(create_role))
        .layer(middleware::from_fn(require_role("admin")))
}

// æ–‡ç« ç®¡ç†è·¯ç”±ï¼ˆéœ€è¦ç¼–è¾‘æƒé™ï¼‰
fn post_routes() -&gt; Router {
    Router::new()
        .route("/posts", post(create_post))
        .route("/posts/:id", put(update_post).delete(delete_post))
        .layer(middleware::from_fn(|req, next| {
            require_permission("post".to_string(), "write".to_string())(req, next)
        }))
}

// å…¬å¼€è·¯ç”±
fn public_routes() -&gt; Router {
    Router::new()
        .route("/posts", get(list_posts))
        .route("/posts/:id", get(get_post))
}

fn app() -&gt; Router {
    Router::new()
        .nest("/admin", admin_routes())
        .nest("/api", post_routes())
        .merge(public_routes())
}
<span class="boring">}</span></code></pre>
<h2 id="å¤„ç†å™¨ä¸­çš„æƒé™æ£€æŸ¥"><a class="header" href="#å¤„ç†å™¨ä¸­çš„æƒé™æ£€æŸ¥">å¤„ç†å™¨ä¸­çš„æƒé™æ£€æŸ¥</a></h2>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use axum::{
    extract::{Path, State, Extension},
    Json,
    http::StatusCode,
};

// æ›´æ–°æ–‡ç« ï¼ˆæ£€æŸ¥æ‰€æœ‰æƒï¼‰
async fn update_post(
    Path(post_id): Path&lt;i32&gt;,
    Extension(user): Extension&lt;AuthUser&gt;,
    State(service): State&lt;PostService&gt;,
    Json(payload): Json&lt;UpdatePostRequest&gt;,
) -&gt; Result&lt;Json&lt;Post&gt;, StatusCode&gt; {
    let post = service
        .get_post(post_id)
        .await
        .map_err(|_| StatusCode::NOT_FOUND)?;
    
    // æ£€æŸ¥æ˜¯å¦æ˜¯æ–‡ç« ä½œè€…æˆ–ç®¡ç†å‘˜
    if post.author_id != user.id &amp;&amp; !user.has_role("admin") {
        return Err(StatusCode::FORBIDDEN);
    }
    
    let updated = service
        .update_post(post_id, payload)
        .await
        .map_err(|_| StatusCode::INTERNAL_SERVER_ERROR)?;
    
    Ok(Json(updated))
}

// åˆ é™¤ç”¨æˆ·ï¼ˆä»…ç®¡ç†å‘˜ï¼‰
async fn delete_user(
    Path(user_id): Path&lt;i32&gt;,
    Extension(auth_user): Extension&lt;AuthUser&gt;,
    State(service): State&lt;UserService&gt;,
) -&gt; Result&lt;StatusCode, StatusCode&gt; {
    // æ£€æŸ¥ç®¡ç†å‘˜æƒé™
    if !auth_user.has_role("admin") {
        return Err(StatusCode::FORBIDDEN);
    }
    
    // ä¸èƒ½åˆ é™¤è‡ªå·±
    if user_id == auth_user.id {
        return Err(StatusCode::BAD_REQUEST);
    }
    
    service
        .delete_user(user_id)
        .await
        .map_err(|_| StatusCode::INTERNAL_SERVER_ERROR)?;
    
    Ok(StatusCode::NO_CONTENT)
}
<span class="boring">}</span></code></pre>
<h2 id="æƒé™åˆå§‹åŒ–"><a class="header" href="#æƒé™åˆå§‹åŒ–">æƒé™åˆå§‹åŒ–</a></h2>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub async fn init_permissions(pool: &amp;PgPool) -&gt; Result&lt;()&gt; {
    // åˆ›å»ºè§’è‰²
    let admin_role = sqlx::query!(
        "INSERT INTO roles (name, description) VALUES ($1, $2) RETURNING id",
        "admin",
        "Administrator with full access"
    )
    .fetch_one(pool)
    .await?;
    
    let editor_role = sqlx::query!(
        "INSERT INTO roles (name, description) VALUES ($1, $2) RETURNING id",
        "editor",
        "Can create and edit posts"
    )
    .fetch_one(pool)
    .await?;
    
    let user_role = sqlx::query!(
        "INSERT INTO roles (name, description) VALUES ($1, $2) RETURNING id",
        "user",
        "Regular user"
    )
    .fetch_one(pool)
    .await?;
    
    // åˆ›å»ºæƒé™
    let permissions = vec![
        ("user:create", "user", "create"),
        ("user:read", "user", "read"),
        ("user:update", "user", "update"),
        ("user:delete", "user", "delete"),
        ("post:create", "post", "create"),
        ("post:read", "post", "read"),
        ("post:update", "post", "update"),
        ("post:delete", "post", "delete"),
    ];
    
    for (name, resource, action) in permissions {
        let perm = sqlx::query!(
            "INSERT INTO permissions (name, resource, action) VALUES ($1, $2, $3) RETURNING id",
            name,
            resource,
            action
        )
        .fetch_one(pool)
        .await?;
        
        // ç®¡ç†å‘˜æ‹¥æœ‰æ‰€æœ‰æƒé™
        sqlx::query!(
            "INSERT INTO role_permissions (role_id, permission_id) VALUES ($1, $2)",
            admin_role.id,
            perm.id
        )
        .execute(pool)
        .await?;
        
        // ç¼–è¾‘æ‹¥æœ‰æ–‡ç« ç›¸å…³æƒé™
        if resource == "post" {
            sqlx::query!(
                "INSERT INTO role_permissions (role_id, permission_id) VALUES ($1, $2)",
                editor_role.id,
                perm.id
            )
            .execute(pool)
            .await?;
        }
        
        // æ™®é€šç”¨æˆ·åªæœ‰è¯»æƒé™
        if action == "read" {
            sqlx::query!(
                "INSERT INTO role_permissions (role_id, permission_id) VALUES ($1, $2)",
                user_role.id,
                perm.id
            )
            .execute(pool)
            .await?;
        }
    }
    
    Ok(())
}
<span class="boring">}</span></code></pre>
<h2 id="å®Œæ•´ç¤ºä¾‹-6"><a class="header" href="#å®Œæ•´ç¤ºä¾‹-6">å®Œæ•´ç¤ºä¾‹</a></h2>
<pre class="playground"><code class="language-rust">use axum::{
    Router,
    routing::{get, post},
    middleware,
    extract::{State, Extension},
    Json,
    http::StatusCode,
};
use sqlx::PgPool;

#[tokio::main]
async fn main() {
    // è¿æ¥æ•°æ®åº“
    let pool = PgPool::connect("postgres://localhost/rbac_db")
        .await
        .unwrap();
    
    // åˆå§‹åŒ–æƒé™
    init_permissions(&amp;pool).await.unwrap();
    
    // åˆ›å»ºæœåŠ¡
    let permission_service = PermissionService::new(pool.clone());
    
    // æ„å»ºåº”ç”¨
    let app = Router::new()
        // å…¬å¼€è·¯ç”±
        .route("/api/posts", get(list_posts))
        .route("/api/posts/:id", get(get_post))
        
        // éœ€è¦è®¤è¯çš„è·¯ç”±
        .route("/api/posts", post(create_post))
        .layer(middleware::from_fn(auth_middleware))
        
        // ç®¡ç†å‘˜è·¯ç”±
        .route("/api/admin/users", get(list_users))
        .layer(middleware::from_fn(require_role("admin")))
        
        .with_state(permission_service);
    
    let listener = tokio::net::TcpListener::bind("127.0.0.1:3000")
        .await
        .unwrap();
    
    println!("ğŸš€ Server running on http://127.0.0.1:3000");
    axum::serve(listener, app).await.unwrap();
}</code></pre>
<h2 id="æµ‹è¯•-1"><a class="header" href="#æµ‹è¯•-1">æµ‹è¯•</a></h2>
<pre><code class="language-bash"># ä»¥ç®¡ç†å‘˜èº«ä»½ç™»å½•
TOKEN=$(curl -X POST http://localhost:3000/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"username":"admin","password":"admin123"}' \
  | jq -r '.token')

# è®¿é—®ç®¡ç†å‘˜è·¯ç”±
curl http://localhost:3000/api/admin/users \
  -H "Authorization: Bearer $TOKEN"

# åˆ›å»ºæ–‡ç« ï¼ˆéœ€è¦ç¼–è¾‘æƒé™ï¼‰
curl -X POST http://localhost:3000/api/posts \
  -H "Authorization: Bearer $TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"title":"New Post","content":"Content here"}'
</code></pre>
<h2 id="ç»ƒä¹ -8"><a class="header" href="#ç»ƒä¹ -8">ç»ƒä¹ </a></h2>
<ol>
<li>å®ç°èµ„æºçº§æƒé™ï¼ˆå¦‚åªèƒ½ç¼–è¾‘è‡ªå·±çš„æ–‡ç« ï¼‰</li>
<li>æ·»åŠ æƒé™ç»§æ‰¿æœºåˆ¶</li>
<li>å®ç°åŠ¨æ€æƒé™åŠ è½½</li>
<li>åˆ›å»ºæƒé™ç®¡ç† API</li>
<li>æ·»åŠ æƒé™ç¼“å­˜æœºåˆ¶</li>
</ol>
<h2 id="ä¸‹ä¸€æ­¥-10"><a class="header" href="#ä¸‹ä¸€æ­¥-10">ä¸‹ä¸€æ­¥</a></h2>
<p>Day 71 å°†å­¦ä¹ æ¨¡æ¿å¼•æ“ï¼Œå®ç°æœåŠ¡ç«¯æ¸²æŸ“ã€‚</p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-71-æ¨¡æ¿å¼•æ“-askamatera-1"><a class="header" href="#day-71-æ¨¡æ¿å¼•æ“-askamatera-1">Day 71: æ¨¡æ¿å¼•æ“ (Askama/Tera)</a></h1>
<h2 id="å­¦ä¹ ç›®æ ‡-10"><a class="header" href="#å­¦ä¹ ç›®æ ‡-10">å­¦ä¹ ç›®æ ‡</a></h2>
<ul>
<li>æŒæ¡ Askama æ¨¡æ¿å¼•æ“</li>
<li>å­¦ä¹ æ¨¡æ¿è¯­æ³•</li>
<li>å®ç°æœåŠ¡ç«¯æ¸²æŸ“</li>
<li>ç†è§£æ¨¡æ¿ç»§æ‰¿</li>
</ul>
<h2 id="askama-ç®€ä»‹"><a class="header" href="#askama-ç®€ä»‹">Askama ç®€ä»‹</a></h2>
<p>Askama æ˜¯ä¸€ä¸ªç±»å‹å®‰å…¨çš„æ¨¡æ¿å¼•æ“ï¼Œåœ¨ç¼–è¯‘æ—¶æ£€æŸ¥æ¨¡æ¿ã€‚</p>
<h3 id="å®‰è£…"><a class="header" href="#å®‰è£…">å®‰è£…</a></h3>
<pre><code class="language-toml">[dependencies]
askama = "0.15"
axum = "0.8"
tokio = { version = "1", features = ["full"] }
tracing = "0.1"
tracing-subscriber = { version = "0.3", features = ["env-filter"] }
</code></pre>
<h2 id="åŸºæœ¬ä½¿ç”¨-1"><a class="header" href="#åŸºæœ¬ä½¿ç”¨-1">åŸºæœ¬ä½¿ç”¨</a></h2>
<h3 id="ç®€å•æ¨¡æ¿ä¸-axum-é›†æˆ"><a class="header" href="#ç®€å•æ¨¡æ¿ä¸-axum-é›†æˆ">ç®€å•æ¨¡æ¿ä¸ Axum é›†æˆ</a></h3>
<p>ç”±äº Askama 0.13+ ç§»é™¤äº† <code>askama_axum</code> é›†æˆåº“ï¼Œæˆ‘ä»¬éœ€è¦æ‰‹åŠ¨å®ç° <code>IntoResponse</code> åŒ…è£…å™¨ï¼š</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use askama::Template;
use axum::{
    response::{Html, IntoResponse, Response},
    routing::get,
    Router,
    http::StatusCode,
};

#[derive(Template)]
#[template(path = "hello.html")]
struct HelloTemplate {
    name: String,
}

// åŒ…è£…å™¨ç»“æ„ä½“ï¼Œç”¨äºä¸ºä»»æ„ Askama æ¨¡æ¿å®ç° IntoResponse
struct HtmlTemplate&lt;T&gt;(T);

impl&lt;T&gt; IntoResponse for HtmlTemplate&lt;T&gt;
where
    T: Template,
{
    fn into_response(self) -&gt; Response {
        match self.0.render() {
            Ok(html) =&gt; Html(html).into_response(),
            Err(err) =&gt; (
                StatusCode::INTERNAL_SERVER_ERROR,
                format!("Failed to render template. Error: {}", err),
            )
                .into_response(),
        }
    }
}

async fn hello() -&gt; impl IntoResponse {
    let template = HelloTemplate {
        name: "World".to_string(),
    };
    HtmlTemplate(template)
}
<span class="boring">}</span></code></pre>
<pre><code class="language-html">&lt;!-- templates/hello.html --&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Hello&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;Hello, {{ name }}!&lt;/h1&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<h2 id="æ¨¡æ¿è¯­æ³•"><a class="header" href="#æ¨¡æ¿è¯­æ³•">æ¨¡æ¿è¯­æ³•</a></h2>
<h3 id="å˜é‡"><a class="header" href="#å˜é‡">å˜é‡</a></h3>
<pre><code class="language-html">&lt;p&gt;{{ user.username }}&lt;/p&gt;
&lt;p&gt;{{ user.email }}&lt;/p&gt;
</code></pre>
<h3 id="æ¡ä»¶"><a class="header" href="#æ¡ä»¶">æ¡ä»¶</a></h3>
<pre><code class="language-html">{% if user.is_admin %}
    &lt;p&gt;Admin Panel&lt;/p&gt;
{% else %}
    &lt;p&gt;User Panel&lt;/p&gt;
{% endif %}
</code></pre>
<h3 id="å¾ªç¯"><a class="header" href="#å¾ªç¯">å¾ªç¯</a></h3>
<pre><code class="language-html">&lt;ul&gt;
{% for post in posts %}
    &lt;li&gt;{{ post.title }}&lt;/li&gt;
{% endfor %}
&lt;/ul&gt;
</code></pre>
<h3 id="è¿‡æ»¤å™¨"><a class="header" href="#è¿‡æ»¤å™¨">è¿‡æ»¤å™¨</a></h3>
<pre><code class="language-html">&lt;p&gt;{{ text|upper }}&lt;/p&gt;
&lt;p&gt;{{ text|truncate(50) }}&lt;/p&gt;
</code></pre>
<h2 id="æ¨¡æ¿ç»§æ‰¿"><a class="header" href="#æ¨¡æ¿ç»§æ‰¿">æ¨¡æ¿ç»§æ‰¿</a></h2>
<h3 id="åŸºç¡€æ¨¡æ¿"><a class="header" href="#åŸºç¡€æ¨¡æ¿">åŸºç¡€æ¨¡æ¿</a></h3>
<pre><code class="language-html">&lt;!-- templates/base.html --&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;{% block title %}My Site{% endblock %}&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;nav&gt;
        &lt;a href="/"&gt;Home&lt;/a&gt;
        &lt;a href="/about"&gt;About&lt;/a&gt;
    &lt;/nav&gt;
    
    &lt;main&gt;
        {% block content %}{% endblock %}
    &lt;/main&gt;
    
    &lt;footer&gt;
        &lt;p&gt;&amp;copy; 2024 My Site&lt;/p&gt;
    &lt;/footer&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<h3 id="å­æ¨¡æ¿"><a class="header" href="#å­æ¨¡æ¿">å­æ¨¡æ¿</a></h3>
<pre><code class="language-html">&lt;!-- templates/index.html --&gt;
{% extends "base.html" %}

{% block title %}Home - My Site{% endblock %}

{% block content %}
    &lt;h1&gt;Welcome&lt;/h1&gt;
    &lt;p&gt;This is the home page.&lt;/p&gt;
{% endblock %}
</code></pre>
<h2 id="å®Œæ•´åšå®¢ç¤ºä¾‹"><a class="header" href="#å®Œæ•´åšå®¢ç¤ºä¾‹">å®Œæ•´åšå®¢ç¤ºä¾‹</a></h2>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use askama::Template;
use axum::{
    Router,
    routing::get,
    extract::{State, Path},
    response::Html,
};

#[derive(Template)]
#[template(path = "blog/index.html")]
struct BlogIndexTemplate {
    posts: Vec&lt;Post&gt;,
}

#[derive(Template)]
#[template(path = "blog/post.html")]
struct BlogPostTemplate {
    post: Post,
    comments: Vec&lt;Comment&gt;,
}

async fn blog_index(State(state): State&lt;AppState&gt;) -&gt; impl IntoResponse {
    let posts = get_all_posts(&amp;state.db).await.unwrap();
    let template = BlogIndexTemplate { posts };
    HtmlTemplate(template)
}

async fn blog_post(
    State(state): State&lt;AppState&gt;,
    Path(id): Path&lt;i32&gt;
) -&gt; impl IntoResponse {
    let post = get_post(&amp;state.db, id).await.unwrap();
    let comments = get_comments(&amp;state.db, id).await.unwrap();
    let template = BlogPostTemplate { post, comments };
    HtmlTemplate(template)
}
<span class="boring">}</span></code></pre>
<p>è¯¦ç»†å†…å®¹è¯·å‚è€ƒ Day61-80/STAGE5_OVERVIEW.mdã€‚</p>
<h2 id="ç»ƒä¹ -9"><a class="header" href="#ç»ƒä¹ -9">ç»ƒä¹ </a></h2>
<ol>
<li>åˆ›å»ºå®Œæ•´çš„åšå®¢æ¨¡æ¿</li>
<li>å®ç°ç”¨æˆ·ä»ªè¡¨æ¿</li>
<li>æ·»åŠ è¡¨å•éªŒè¯æ˜¾ç¤º</li>
<li>å®ç°åˆ†é¡µç»„ä»¶</li>
<li>åˆ›å»ºå¯å¤ç”¨çš„æ¨¡æ¿ç‰‡æ®µ</li>
</ol>
<h2 id="ä¸‹ä¸€æ­¥-11"><a class="header" href="#ä¸‹ä¸€æ­¥-11">ä¸‹ä¸€æ­¥</a></h2>
<p>Day 72 å°†å­¦ä¹  WebAssembly (WASM) ç®€ä»‹ã€‚</p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-72-webassembly-wasm-ç®€ä»‹-1"><a class="header" href="#day-72-webassembly-wasm-ç®€ä»‹-1">Day 72: WebAssembly (WASM) ç®€ä»‹</a></h1>
<h2 id="å­¦ä¹ ç›®æ ‡-11"><a class="header" href="#å­¦ä¹ ç›®æ ‡-11">å­¦ä¹ ç›®æ ‡</a></h2>
<ul>
<li>ç†è§£ WebAssembly æ¦‚å¿µ</li>
<li>æŒæ¡ Rust åˆ° WASM ç¼–è¯‘</li>
<li>å­¦ä¹  wasm-bindgen ä½¿ç”¨</li>
<li>å®ç°ç®€å•çš„ WASM åº”ç”¨</li>
</ul>
<h2 id="webassembly-ç®€ä»‹"><a class="header" href="#webassembly-ç®€ä»‹">WebAssembly ç®€ä»‹</a></h2>
<p>WebAssembly (WASM) æ˜¯ä¸€ç§å¯ä»¥åœ¨ç°ä»£æµè§ˆå™¨ä¸­è¿è¡Œçš„æ–°å‹ä»£ç æ ¼å¼ã€‚</p>
<h3 id="ä¼˜åŠ¿"><a class="header" href="#ä¼˜åŠ¿">ä¼˜åŠ¿</a></h3>
<ul>
<li>æ¥è¿‘åŸç”Ÿçš„æ€§èƒ½</li>
<li>å®‰å…¨çš„æ²™ç®±æ‰§è¡Œç¯å¢ƒ</li>
<li>è·¨å¹³å°</li>
<li>ä¸ JavaScript äº’æ“ä½œ</li>
</ul>
<h2 id="ç¯å¢ƒå‡†å¤‡-1"><a class="header" href="#ç¯å¢ƒå‡†å¤‡-1">ç¯å¢ƒå‡†å¤‡</a></h2>
<pre><code class="language-bash"># å®‰è£… wasm-pack
curl https://rustwasm.github.io/wasm-pack/installer/init.sh -sSf | sh

# æ·»åŠ  WASM ç›®æ ‡
rustup target add wasm32-unknown-unknown
</code></pre>
<h2 id="åˆ›å»º-wasm-é¡¹ç›®"><a class="header" href="#åˆ›å»º-wasm-é¡¹ç›®">åˆ›å»º WASM é¡¹ç›®</a></h2>
<pre><code class="language-bash">cargo new --lib wasm_demo
cd wasm_demo
</code></pre>
<pre><code class="language-toml"># Cargo.toml
[package]
name = "wasm_demo"
version = "0.1.0"
edition = "2021"

[lib]
crate-type = ["cdylib"]

[dependencies]
wasm-bindgen = "0.2"
</code></pre>
<h2 id="åŸºæœ¬ç¤ºä¾‹"><a class="header" href="#åŸºæœ¬ç¤ºä¾‹">åŸºæœ¬ç¤ºä¾‹</a></h2>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// src/lib.rs
use wasm_bindgen::prelude::*;

#[wasm_bindgen]
pub fn greet(name: &amp;str) -&gt; String {
    format!("Hello, {}!", name)
}

#[wasm_bindgen]
pub fn add(a: i32, b: i32) -&gt; i32 {
    a + b
}
<span class="boring">}</span></code></pre>
<h3 id="ç¼–è¯‘"><a class="header" href="#ç¼–è¯‘">ç¼–è¯‘</a></h3>
<pre><code class="language-bash">wasm-pack build --target web
</code></pre>
<h3 id="åœ¨-html-ä¸­ä½¿ç”¨"><a class="header" href="#åœ¨-html-ä¸­ä½¿ç”¨">åœ¨ HTML ä¸­ä½¿ç”¨</a></h3>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;meta charset="utf-8"&gt;
    &lt;title&gt;WASM Demo&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;script type="module"&gt;
        import init, { greet, add } from './pkg/wasm_demo.js';
        
        async function run() {
            await init();
            
            console.log(greet('World'));
            console.log(add(5, 3));
        }
        
        run();
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<h2 id="ä¸-javascript-äº¤äº’"><a class="header" href="#ä¸-javascript-äº¤äº’">ä¸ JavaScript äº¤äº’</a></h2>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use wasm_bindgen::prelude::*;

// è°ƒç”¨ JavaScript å‡½æ•°
#[wasm_bindgen]
extern "C" {
    fn alert(s: &amp;str);
    
    #[wasm_bindgen(js_namespace = console)]
    fn log(s: &amp;str);
}

#[wasm_bindgen]
pub fn show_alert() {
    alert("Hello from Rust!");
}

#[wasm_bindgen]
pub fn log_message(msg: &amp;str) {
    log(msg);
}
<span class="boring">}</span></code></pre>
<h2 id="å®ç”¨ç¤ºä¾‹"><a class="header" href="#å®ç”¨ç¤ºä¾‹">å®ç”¨ç¤ºä¾‹</a></h2>
<h3 id="å›¾åƒå¤„ç†"><a class="header" href="#å›¾åƒå¤„ç†">å›¾åƒå¤„ç†</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use wasm_bindgen::prelude::*;

#[wasm_bindgen]
pub fn grayscale(data: &amp;mut [u8]) {
    for chunk in data.chunks_mut(4) {
        let avg = (chunk[0] as u32 + chunk[1] as u32 + chunk[2] as u32) / 3;
        chunk[0] = avg as u8;
        chunk[1] = avg as u8;
        chunk[2] = avg as u8;
    }
}
<span class="boring">}</span></code></pre>
<p>è¯¦ç»†å†…å®¹è¯·å‚è€ƒ Day61-80/STAGE5_OVERVIEW.mdã€‚</p>
<h2 id="ç»ƒä¹ -10"><a class="header" href="#ç»ƒä¹ -10">ç»ƒä¹ </a></h2>
<ol>
<li>åˆ›å»ºè®¡ç®—å™¨ WASM æ¨¡å—</li>
<li>å®ç°å›¾åƒæ»¤é•œ</li>
<li>æ„å»ºæ¸¸æˆé€»è¾‘</li>
<li>åˆ›å»ºåŠ å¯†å·¥å…·</li>
<li>å®ç°æ•°æ®å¯è§†åŒ–</li>
</ol>
<h2 id="ä¸‹ä¸€æ­¥-12"><a class="header" href="#ä¸‹ä¸€æ­¥-12">ä¸‹ä¸€æ­¥</a></h2>
<p>Day 73 å°†å­¦ä¹ å‰ç«¯é›†æˆå®æˆ˜ã€‚</p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-73-å‰ç«¯é›†æˆå®æˆ˜-1"><a class="header" href="#day-73-å‰ç«¯é›†æˆå®æˆ˜-1">Day 73: å‰ç«¯é›†æˆå®æˆ˜</a></h1>
<p>æœ¬ç« èŠ‚é€šè¿‡ä¸€ä¸ªå®Œæ•´çš„ç¤ºä¾‹æ¼”ç¤ºå¦‚ä½•åœ¨ Axum é¡¹ç›®ä¸­é›†æˆå‰ç«¯ SPA (Single Page Application) åº”ç”¨ã€‚</p>
<h2 id="é¡¹ç›®ç»“æ„"><a class="header" href="#é¡¹ç›®ç»“æ„">é¡¹ç›®ç»“æ„</a></h2>
<pre><code>frontend-integration-demo/
â”œâ”€â”€ Cargo.toml      # Rust é¡¹ç›®é…ç½®
â”œâ”€â”€ assets/         # å‰ç«¯é™æ€èµ„æº (æ¨¡æ‹Ÿæ„å»ºäº§ç‰©)
â”‚   â”œâ”€â”€ app.js      # ç®€å•çš„ SPA è·¯ç”±é€»è¾‘
â”‚   â”œâ”€â”€ index.html  # å…¥å£ HTML
â”‚   â””â”€â”€ style.css   # æ ·å¼
â””â”€â”€ src/
    â””â”€â”€ main.rs     # åç«¯æœåŠ¡
</code></pre>
<h2 id="æ ¸å¿ƒåŠŸèƒ½"><a class="header" href="#æ ¸å¿ƒåŠŸèƒ½">æ ¸å¿ƒåŠŸèƒ½</a></h2>
<ol>
<li><strong>é™æ€æ–‡ä»¶æœåŠ¡</strong>: ä½¿ç”¨ <code>tower_http::services::ServeDir</code> æœåŠ¡ <code>assets</code> ç›®å½•ã€‚</li>
<li><strong>SPA è·¯ç”± fallback</strong>: å‰ç«¯è·¯ç”±ï¼ˆå¦‚ <code>/users</code>, <code>/about</code>ï¼‰åœ¨åç«¯ä¸å­˜åœ¨å¯¹åº” API æ—¶ï¼Œç»Ÿä¸€è¿”å› <code>index.html</code>ï¼Œç”±å‰ç«¯ JS æ¥ç®¡è·¯ç”±ã€‚</li>
<li><strong>API ä»£ç†</strong>: æä¾› <code>/api/users</code> ç­‰åç«¯æ¥å£ï¼Œä¾›å‰ç«¯è°ƒç”¨ã€‚</li>
</ol>
<h2 id="è¿è¡Œ-demo"><a class="header" href="#è¿è¡Œ-demo">è¿è¡Œ demo</a></h2>
<p>è¿›å…¥ <code>frontend-integration-demo</code> ç›®å½•å¹¶è¿è¡Œï¼š</p>
<pre><code class="language-bash">cd frontend-integration-demo
cargo run
</code></pre>
<p>ç„¶åè®¿é—® <code>http://localhost:3000</code>ã€‚</p>
<h3 id="æ¼”ç¤ºæ•ˆæœ"><a class="header" href="#æ¼”ç¤ºæ•ˆæœ">æ¼”ç¤ºæ•ˆæœ</a></h3>
<ol>
<li><strong>Home</strong>: é»˜è®¤é¦–é¡µã€‚</li>
<li><strong>Users</strong>: ç‚¹å‡»å¯¼èˆªæ çš„ â€œUsersâ€ï¼Œå‰ç«¯ JS ä¼šå‘èµ· <code>fetch('/api/users')</code> è¯·æ±‚ï¼Œå¹¶å°†è¿”å›çš„ JSON æ•°æ®æ¸²æŸ“åˆ°é¡µé¢ä¸Šã€‚è¿™å±•ç¤ºäº†å‰åç«¯åˆ†ç¦»çš„æ•°æ®äº¤äº’ã€‚</li>
<li><strong>About</strong>: çº¯å‰ç«¯é¡µé¢åˆ‡æ¢ã€‚</li>
<li><strong>SPA Routing</strong>: å°è¯•ç›´æ¥è®¿é—® <code>http://localhost:3000/about</code>ï¼Œåç«¯ä¼šè¿”å› <code>index.html</code>ï¼Œå‰ç«¯ JS åˆå§‹åŒ–åä¼šè§£æ URL å¹¶æ˜¾ç¤º About é¡µé¢ã€‚</li>
</ol>
<h2 id="ä»£ç è§£æ"><a class="header" href="#ä»£ç è§£æ">ä»£ç è§£æ</a></h2>
<h3 id="åç«¯-axum"><a class="header" href="#åç«¯-axum">åç«¯ (Axum)</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// å®šä¹‰é™æ€æ–‡ä»¶æœåŠ¡ï¼Œå¦‚æœæ–‡ä»¶æ‰¾ä¸åˆ°åˆ™è¿”å› index.html (SPA æ¨¡å¼)
let assets_path = std::env::current_dir().unwrap().join("assets");
let spa_service = ServeDir::new(&amp;assets_path)
    .fallback(ServeFile::new(assets_path.join("index.html")));

let app = Router::new()
    .nest("/api", api_routes) // ä¼˜å…ˆåŒ¹é… API
    .fallback_service(spa_service); // å…¶ä»–æ‰€æœ‰è¯·æ±‚äº¤ç»™é™æ€æ–‡ä»¶æœåŠ¡
<span class="boring">}</span></code></pre>
<h3 id="å‰ç«¯-js"><a class="header" href="#å‰ç«¯-js">å‰ç«¯ (JS)</a></h3>
<p>å‰ç«¯ä½¿ç”¨ HTML5 History API å®ç°æ— åˆ·æ–°è·³è½¬ï¼Œå¹¶åœ¨é¡µé¢åŠ è½½æ—¶æ ¹æ® URL æ¸²æŸ“ä¸åŒç»„ä»¶ã€‚</p>
<h2 id="ä¸‹ä¸€æ­¥-13"><a class="header" href="#ä¸‹ä¸€æ­¥-13">ä¸‹ä¸€æ­¥</a></h2>
<p>Day 74 å°†å­¦ä¹  API æ–‡æ¡£ç”Ÿæˆ (OpenAPI)ï¼Œä¸ºå‰åç«¯åä½œæä¾›æ›´å¥½çš„æ–‡æ¡£æ”¯æŒã€‚</p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-74-api-æ–‡æ¡£ç”Ÿæˆ-openapi-1"><a class="header" href="#day-74-api-æ–‡æ¡£ç”Ÿæˆ-openapi-1">Day 74: API æ–‡æ¡£ç”Ÿæˆ (OpenAPI)</a></h1>
<h2 id="å­¦ä¹ ç›®æ ‡-12"><a class="header" href="#å­¦ä¹ ç›®æ ‡-12">å­¦ä¹ ç›®æ ‡</a></h2>
<ul>
<li>ç†è§£ OpenAPI (Swagger) è§„èŒƒçš„é‡è¦æ€§</li>
<li>æŒæ¡ <code>utoipa</code> crate çš„ä½¿ç”¨æ–¹æ³•</li>
<li>å­¦ä¹ å¦‚ä½•è‡ªåŠ¨ç”Ÿæˆ Rust Web API æ–‡æ¡£</li>
<li>é›†æˆ Swagger UI åˆ° Axum é¡¹ç›®ä¸­</li>
</ul>
<h2 id="æ ¸å¿ƒæ¦‚å¿µ-4"><a class="header" href="#æ ¸å¿ƒæ¦‚å¿µ-4">æ ¸å¿ƒæ¦‚å¿µ</a></h2>
<h3 id="1-openapi-è§„èŒƒ"><a class="header" href="#1-openapi-è§„èŒƒ">1. OpenAPI è§„èŒƒ</a></h3>
<p>OpenAPI Specification (OAS) æ˜¯ä¸€ç§ç”¨äº RESTful API çš„æ ‡å‡†æè¿°æ ¼å¼ã€‚å®ƒå…è®¸äººç±»å’Œè®¡ç®—æœºåœ¨ä¸è®¿é—®æºä»£ç ã€æ–‡æ¡£æˆ–é€šè¿‡ç½‘ç»œæµé‡æ£€æŸ¥çš„æƒ…å†µä¸‹å‘ç°å’Œç†è§£æœåŠ¡çš„åŠŸèƒ½ã€‚</p>
<h3 id="2-utoipa"><a class="header" href="#2-utoipa">2. Utoipa</a></h3>
<p><code>utoipa</code> æ˜¯ Rust ç”Ÿæ€ä¸­ä¸€ä¸ªæµè¡Œçš„åº“ï¼Œç”¨äºä»ä»£ç ä¸­è‡ªåŠ¨ç”Ÿæˆ OpenAPI æ–‡æ¡£ã€‚å®ƒé€šè¿‡æ´¾ç”Ÿå®ï¼ˆDerive Macrosï¼‰å’Œå±æ€§å®ï¼ˆAttribute Macrosï¼‰æ¥å‡å°‘æ ·æ¿ä»£ç ã€‚</p>
<ul>
<li><code>#[derive(ToSchema)]</code>: ä¸ºç»“æ„ä½“ç”Ÿæˆ JSON Schemaã€‚</li>
<li><code>#[utoipa::path(...)]</code>: ä¸ºå¤„ç†å‡½æ•°å®šä¹‰ API è·¯å¾„ã€å‚æ•°å’Œå“åº”ã€‚</li>
<li><code>#[derive(OpenApi)]</code>: èšåˆæ‰€æœ‰è·¯å¾„å’Œç»„ä»¶ï¼Œç”Ÿæˆæœ€ç»ˆçš„æ–‡æ¡£ã€‚</li>
</ul>
<h3 id="3-swagger-ui"><a class="header" href="#3-swagger-ui">3. Swagger UI</a></h3>
<p>Swagger UI æ˜¯ä¸€ä¸ªåŸºäº HTML/JS çš„å·¥å…·ï¼Œå®ƒå¯ä»¥å°† OpenAPI è§„èŒƒå¯è§†åŒ–ï¼Œå¹¶æä¾›ä¸€ä¸ªäº¤äº’å¼çš„ç•Œé¢æ¥æµ‹è¯• APIã€‚</p>
<h2 id="ä»£ç ç¤ºä¾‹"><a class="header" href="#ä»£ç ç¤ºä¾‹">ä»£ç ç¤ºä¾‹</a></h2>
<p>æœ¬èŠ‚ä»£ç æ¼”ç¤ºäº†å¦‚ä½•ä½¿ç”¨ <code>utoipa</code> å’Œ <code>utoipa-swagger-ui</code> ä¸ <code>axum</code> é›†æˆã€‚</p>
<h3 id="å®šä¹‰æ•°æ®æ¨¡å‹"><a class="header" href="#å®šä¹‰æ•°æ®æ¨¡å‹">å®šä¹‰æ•°æ®æ¨¡å‹</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use utoipa::ToSchema;
use serde::{Serialize, Deserialize};

#[derive(Serialize, Deserialize, ToSchema)]
struct User {
    id: i32,
    username: String,
}
<span class="boring">}</span></code></pre>
<h3 id="å®šä¹‰-api-è·¯å¾„"><a class="header" href="#å®šä¹‰-api-è·¯å¾„">å®šä¹‰ API è·¯å¾„</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use axum::Json;
use utoipa::OpenApi;

#[utoipa::path(
    get,
    path = "/users",
    responses(
        (status = 200, description = "List all users", body = [User])
    )
)]
async fn list_users() -&gt; Json&lt;Vec&lt;User&gt;&gt; {
    // ...
}
<span class="boring">}</span></code></pre>
<h3 id="é›†æˆ-swagger-ui"><a class="header" href="#é›†æˆ-swagger-ui">é›†æˆ Swagger UI</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use utoipa_swagger_ui::SwaggerUi;
use axum::Router;

// å®šä¹‰ OpenAPI ç»“æ„
#[derive(OpenApi)]
#[openapi(paths(list_users), components(schemas(User)))]
struct ApiDoc;

// åœ¨ Router ä¸­æŒ‚è½½
let app = Router::new()
    .merge(SwaggerUi::new("/swagger-ui").url("/api-docs/openapi.json", ApiDoc::openapi()));
<span class="boring">}</span></code></pre>
<h2 id="è¿è¡Œç¤ºä¾‹"><a class="header" href="#è¿è¡Œç¤ºä¾‹">è¿è¡Œç¤ºä¾‹</a></h2>
<p>è¿›å…¥ <code>openapi-demo</code> ç›®å½•å¹¶è¿è¡Œï¼š</p>
<pre><code class="language-bash">cd openapi-demo
cargo run
</code></pre>
<p>å¯åŠ¨åï¼Œè®¿é—®æµè§ˆå™¨ï¼š</p>
<ul>
<li><strong>Swagger UI</strong>: <a href="http://localhost:3000/swagger-ui">http://localhost:3000/swagger-ui</a></li>
<li><strong>JSON Spec</strong>: <a href="http://localhost:3000/api-docs/openapi.json">http://localhost:3000/api-docs/openapi.json</a></li>
</ul>
<p>ä½ å¯ä»¥åœ¨ Swagger UI é¡µé¢ä¸­ç›´æ¥æµ‹è¯• APIï¼Œä¾‹å¦‚å°è¯• <code>POST /users</code> åˆ›å»ºç”¨æˆ·ï¼Œç„¶å <code>GET /users</code> æŸ¥çœ‹åˆ—è¡¨ã€‚</p>
<h2 id="ç»ƒä¹ -11"><a class="header" href="#ç»ƒä¹ -11">ç»ƒä¹ </a></h2>
<ol>
<li>ä¸º <code>User</code> ç»“æ„ä½“æ·»åŠ æ›´å¤šå­—æ®µï¼ˆå¦‚ <code>age</code>, <code>role</code>ï¼‰ï¼Œå¹¶æ›´æ–°æ–‡æ¡£ã€‚</li>
<li>æ·»åŠ ä¸€ä¸ª <code>DELETE /users/{id}</code> æ¥å£ï¼Œå¹¶ä¸ºå…¶ç¼–å†™æ–‡æ¡£ï¼Œæ³¨æ„å¤„ç† 404 å“åº”ã€‚</li>
<li>å°è¯•ä½¿ç”¨ <code>SecurityScheme</code> ä¸º API æ·»åŠ  JWT è®¤è¯æè¿°ã€‚</li>
</ol>
<h2 id="ä¸‹ä¸€æ­¥-14"><a class="header" href="#ä¸‹ä¸€æ­¥-14">ä¸‹ä¸€æ­¥</a></h2>
<p>Day 75 å°†å­¦ä¹ å®¹å™¨åŒ–éƒ¨ç½² (Docker)ã€‚</p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-75-å®¹å™¨åŒ–éƒ¨ç½²-docker-1"><a class="header" href="#day-75-å®¹å™¨åŒ–éƒ¨ç½²-docker-1">Day 75: å®¹å™¨åŒ–éƒ¨ç½² (Docker)</a></h1>
<h2 id="å­¦ä¹ ç›®æ ‡-13"><a class="header" href="#å­¦ä¹ ç›®æ ‡-13">å­¦ä¹ ç›®æ ‡</a></h2>
<ul>
<li>ç†è§£å®¹å™¨åŒ–æŠ€æœ¯åŠå…¶åœ¨ Rust é¡¹ç›®ä¸­çš„åº”ç”¨</li>
<li>æŒæ¡ç¼–å†™é«˜æ•ˆ Rust Dockerfile çš„æŠ€å·§ï¼ˆå¤šé˜¶æ®µæ„å»ºï¼‰</li>
<li>å­¦ä¹ ä½¿ç”¨ Docker Compose ç¼–æ’æœåŠ¡</li>
<li>äº†è§£å¦‚ä½•åœ¨ç”Ÿäº§ç¯å¢ƒä¸­éƒ¨ç½² Rust åº”ç”¨</li>
</ul>
<h2 id="æ ¸å¿ƒæ¦‚å¿µ-5"><a class="header" href="#æ ¸å¿ƒæ¦‚å¿µ-5">æ ¸å¿ƒæ¦‚å¿µ</a></h2>
<h3 id="1-dockerfile-ä¸å¤šé˜¶æ®µæ„å»º"><a class="header" href="#1-dockerfile-ä¸å¤šé˜¶æ®µæ„å»º">1. Dockerfile ä¸å¤šé˜¶æ®µæ„å»º</a></h3>
<p>Rust ç¼–è¯‘äº§ç‰©æ˜¯äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œä¸éœ€è¦è¿è¡Œæ—¶ç¯å¢ƒï¼ˆå¦‚ Node.js æˆ– Python è§£é‡Šå™¨ï¼‰ã€‚
<strong>å¤šé˜¶æ®µæ„å»º (Multi-stage builds)</strong> æ˜¯ Rust å®¹å™¨åŒ–çš„æœ€ä½³å®è·µï¼š</p>
<ol>
<li><strong>Builder Stage</strong>: ä½¿ç”¨åŒ…å« Rust ç¼–è¯‘å™¨ (<code>rust:slim</code>) çš„å¤§é•œåƒè¿›è¡Œç¼–è¯‘ã€‚</li>
<li><strong>Runtime Stage</strong>: å°†ç¼–è¯‘å¥½çš„äºŒè¿›åˆ¶æ–‡ä»¶å¤åˆ¶åˆ°è½»é‡çº§é•œåƒ (<code>debian:slim</code> æˆ– <code>alpine</code>) ä¸­è¿è¡Œã€‚</li>
</ol>
<p>è¿™æ ·å¯ä»¥æ˜¾è‘—å‡å°æœ€ç»ˆé•œåƒçš„ä½“ç§¯ï¼ˆä» &gt;1GB å‡å°åˆ° &lt;100MBï¼‰ã€‚</p>
<h3 id="2-ä¾èµ–ç¼“å­˜"><a class="header" href="#2-ä¾èµ–ç¼“å­˜">2. ä¾èµ–ç¼“å­˜</a></h3>
<p>ä¸ºäº†åŠ å¿«æ„å»ºé€Ÿåº¦ï¼Œé€šå¸¸å…ˆæ‹·è´ <code>Cargo.toml</code> å’Œ <code>Cargo.lock</code> å¹¶ç¼–è¯‘ä¾èµ–ï¼Œç„¶åå†æ‹·è´æºç ç¼–è¯‘åº”ç”¨ã€‚åˆ©ç”¨ Docker çš„å±‚ç¼“å­˜æœºåˆ¶ï¼Œå½“æºç æ”¹å˜ä½†ä¾èµ–æœªå˜æ—¶ï¼Œå¯ä»¥è·³è¿‡ä¾èµ–ç¼–è¯‘æ­¥éª¤ã€‚</p>
<h3 id="3-docker-compose"><a class="header" href="#3-docker-compose">3. Docker Compose</a></h3>
<p>ç”¨äºå®šä¹‰å’Œè¿è¡Œå¤šå®¹å™¨ Docker åº”ç”¨ç¨‹åºã€‚é€šè¿‡ <code>docker-compose.yml</code> æ–‡ä»¶é…ç½®åº”ç”¨æœåŠ¡ã€‚</p>
<h2 id="ä»£ç ç¤ºä¾‹-1"><a class="header" href="#ä»£ç ç¤ºä¾‹-1">ä»£ç ç¤ºä¾‹</a></h2>
<p>æœ¬èŠ‚åŒ…å«ä¸€ä¸ªç®€å•çš„ Axum Web æœåŠ¡åŠå…¶ Dockerfileã€‚</p>
<h3 id="dockerfile-å…³é”®éƒ¨åˆ†"><a class="header" href="#dockerfile-å…³é”®éƒ¨åˆ†">Dockerfile å…³é”®éƒ¨åˆ†</a></h3>
<pre><code class="language-dockerfile"># Builder
FROM rust:1.80-slim-bookworm as builder
WORKDIR /app
COPY . .
RUN cargo build --release

# Runtime
FROM debian:bookworm-slim
COPY --from=builder /app/target/release/docker-demo /usr/local/bin/app
CMD ["app"]
</code></pre>
<h2 id="è¿è¡Œç¤ºä¾‹-1"><a class="header" href="#è¿è¡Œç¤ºä¾‹-1">è¿è¡Œç¤ºä¾‹</a></h2>
<p>è¿›å…¥ <code>docker-demo</code> ç›®å½•ï¼š</p>
<h3 id="1-æœ¬åœ°è¿è¡Œ-cargo"><a class="header" href="#1-æœ¬åœ°è¿è¡Œ-cargo">1. æœ¬åœ°è¿è¡Œ (Cargo)</a></h3>
<pre><code class="language-bash">cd docker-demo
cargo run
# è®¿é—® http://localhost:3000
</code></pre>
<h3 id="2-æ„å»º-docker-é•œåƒ"><a class="header" href="#2-æ„å»º-docker-é•œåƒ">2. æ„å»º Docker é•œåƒ</a></h3>
<pre><code class="language-bash">docker build -t rust-docker-demo .
</code></pre>
<h3 id="3-è¿è¡Œå®¹å™¨"><a class="header" href="#3-è¿è¡Œå®¹å™¨">3. è¿è¡Œå®¹å™¨</a></h3>
<pre><code class="language-bash">docker run -p 3000:3000 rust-docker-demo
# è®¿é—® http://localhost:3000
</code></pre>
<p>ä½ åº”å½“çœ‹åˆ°è¿”å›çš„ JSON ä¸­åŒ…å«ä¸»æœºåï¼Œåœ¨å®¹å™¨ä¸­è¿è¡Œæ—¶è¿™é€šå¸¸æ˜¯å®¹å™¨ IDã€‚</p>
<h2 id="ç»ƒä¹ -12"><a class="header" href="#ç»ƒä¹ -12">ç»ƒä¹ </a></h2>
<ol>
<li>ä¸ºè¯¥é¡¹ç›®æ·»åŠ  <code>docker-compose.yml</code>ï¼Œå¹¶é›†æˆä¸€ä¸ª Redis æœåŠ¡ã€‚</li>
<li>å°è¯•ä½¿ç”¨ <code>distroless</code> é•œåƒä½œä¸ºåŸºç¡€é•œåƒ (<code>gcr.io/distroless/cc-debian12</code>) ä»¥è¿›ä¸€æ­¥å‡å°ä½“ç§¯å¹¶æé«˜å®‰å…¨æ€§ã€‚</li>
<li>ç¼–å†™ GitHub Actions è„šæœ¬ï¼Œè‡ªåŠ¨æ„å»ºå¹¶æ¨é€é•œåƒåˆ° Docker Hub æˆ– GHCRã€‚</li>
</ol>
<h2 id="ä¸‹ä¸€æ­¥-15"><a class="header" href="#ä¸‹ä¸€æ­¥-15">ä¸‹ä¸€æ­¥</a></h2>
<p>Day 76-80 å°†å¼€å§‹å®Œæ•´çš„åšå®¢ç³»ç»Ÿé¡¹ç›®å®æˆ˜ã€‚</p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-76-åšå®¢ç³»ç»Ÿ---éœ€æ±‚åˆ†æä¸è®¾è®¡"><a class="header" href="#day-76-åšå®¢ç³»ç»Ÿ---éœ€æ±‚åˆ†æä¸è®¾è®¡">Day 76: åšå®¢ç³»ç»Ÿ - éœ€æ±‚åˆ†æä¸è®¾è®¡</a></h1>
<p>è¯¦ç»†å†…å®¹è¯·å‚è€ƒ Day61-80/STAGE5_OVERVIEW.md ä¸­çš„åšå®¢ç³»ç»Ÿè®¾è®¡éƒ¨åˆ†ã€‚</p>
<h2 id="æ ¸å¿ƒå†…å®¹"><a class="header" href="#æ ¸å¿ƒå†…å®¹">æ ¸å¿ƒå†…å®¹</a></h2>
<ul>
<li>åŠŸèƒ½éœ€æ±‚åˆ†æ</li>
<li>æ•°æ®åº“è®¾è®¡</li>
<li>æ¶æ„è®¾è®¡</li>
<li>æŠ€æœ¯é€‰å‹</li>
</ul>
<h2 id="ä¸‹ä¸€æ­¥-16"><a class="header" href="#ä¸‹ä¸€æ­¥-16">ä¸‹ä¸€æ­¥</a></h2>
<p>Day 77 å°†å®ç°æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ã€‚</p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-77-åšå®¢ç³»ç»Ÿ---æ ¸å¿ƒä¸šåŠ¡å®ç°"><a class="header" href="#day-77-åšå®¢ç³»ç»Ÿ---æ ¸å¿ƒä¸šåŠ¡å®ç°">Day 77: åšå®¢ç³»ç»Ÿ - æ ¸å¿ƒä¸šåŠ¡å®ç°</a></h1>
<p>è¯¦ç»†å†…å®¹è¯·å‚è€ƒ Day61-80/STAGE5_OVERVIEW.md ä¸­çš„æ ¸å¿ƒä¸šåŠ¡å®ç°éƒ¨åˆ†ã€‚</p>
<h2 id="æ ¸å¿ƒå†…å®¹-1"><a class="header" href="#æ ¸å¿ƒå†…å®¹-1">æ ¸å¿ƒå†…å®¹</a></h2>
<ul>
<li>ç”¨æˆ·æœåŠ¡å®ç°</li>
<li>æ–‡ç« æœåŠ¡å®ç°</li>
<li>è¯„è®ºæœåŠ¡å®ç°</li>
<li>æ ‡ç­¾æœåŠ¡å®ç°</li>
</ul>
<h2 id="ä¸‹ä¸€æ­¥-17"><a class="header" href="#ä¸‹ä¸€æ­¥-17">ä¸‹ä¸€æ­¥</a></h2>
<p>Day 78 å°†å¼€å‘ API æ¥å£ã€‚</p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-78-åšå®¢ç³»ç»Ÿ---api-æ¥å£å¼€å‘"><a class="header" href="#day-78-åšå®¢ç³»ç»Ÿ---api-æ¥å£å¼€å‘">Day 78: åšå®¢ç³»ç»Ÿ - API æ¥å£å¼€å‘</a></h1>
<p>è¯¦ç»†å†…å®¹è¯·å‚è€ƒ Day61-80/STAGE5_OVERVIEW.md ä¸­çš„ API æ¥å£å¼€å‘éƒ¨åˆ†ã€‚</p>
<h2 id="æ ¸å¿ƒå†…å®¹-2"><a class="header" href="#æ ¸å¿ƒå†…å®¹-2">æ ¸å¿ƒå†…å®¹</a></h2>
<ul>
<li>RESTful API è®¾è®¡</li>
<li>è·¯ç”±é…ç½®</li>
<li>è¯·æ±‚éªŒè¯</li>
<li>å“åº”æ ¼å¼åŒ–</li>
</ul>
<h2 id="ä¸‹ä¸€æ­¥-18"><a class="header" href="#ä¸‹ä¸€æ­¥-18">ä¸‹ä¸€æ­¥</a></h2>
<p>Day 79 å°†è¿›è¡Œæµ‹è¯•ä¸ä¼˜åŒ–ã€‚</p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-79-åšå®¢ç³»ç»Ÿ---æµ‹è¯•ä¸ä¼˜åŒ–"><a class="header" href="#day-79-åšå®¢ç³»ç»Ÿ---æµ‹è¯•ä¸ä¼˜åŒ–">Day 79: åšå®¢ç³»ç»Ÿ - æµ‹è¯•ä¸ä¼˜åŒ–</a></h1>
<p>è¯¦ç»†å†…å®¹è¯·å‚è€ƒ Day61-80/STAGE5_OVERVIEW.md ä¸­çš„æµ‹è¯•ä¸ä¼˜åŒ–éƒ¨åˆ†ã€‚</p>
<h2 id="æ ¸å¿ƒå†…å®¹-3"><a class="header" href="#æ ¸å¿ƒå†…å®¹-3">æ ¸å¿ƒå†…å®¹</a></h2>
<ul>
<li>å•å…ƒæµ‹è¯•</li>
<li>é›†æˆæµ‹è¯•</li>
<li>API æµ‹è¯•</li>
<li>æ€§èƒ½ä¼˜åŒ–</li>
</ul>
<h2 id="ä¸‹ä¸€æ­¥-19"><a class="header" href="#ä¸‹ä¸€æ­¥-19">ä¸‹ä¸€æ­¥</a></h2>
<p>Day 80 å°†å®Œæˆé¡¹ç›®æ€»ç»“ã€‚</p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-80-åšå®¢ç³»ç»Ÿå®Œæ•´ç‰ˆ"><a class="header" href="#day-80-åšå®¢ç³»ç»Ÿå®Œæ•´ç‰ˆ">Day 80: åšå®¢ç³»ç»Ÿå®Œæ•´ç‰ˆ</a></h1>
<h2 id="é¡¹ç›®ç®€ä»‹"><a class="header" href="#é¡¹ç›®ç®€ä»‹">é¡¹ç›®ç®€ä»‹</a></h2>
<p>è¿™æ˜¯ä¸€ä¸ªåŸºäº Rust çš„ç°ä»£åŒ–åšå®¢ API ç³»ç»Ÿï¼Œé‡‡ç”¨äº† Rust Web å¼€å‘çš„æœ€ä½³å®è·µã€‚</p>
<h2 id="æŠ€æœ¯æ ˆ"><a class="header" href="#æŠ€æœ¯æ ˆ">æŠ€æœ¯æ ˆ</a></h2>
<ul>
<li><strong>Web æ¡†æ¶</strong>: Axum 0.7</li>
<li><strong>æ•°æ®åº“</strong>: SQLx (SQLite)</li>
<li><strong>è®¤è¯</strong>: JWT (Json Web Token) + Argon2 (å¯†ç å“ˆå¸Œ)</li>
<li><strong>å¼‚æ­¥è¿è¡Œæ—¶</strong>: Tokio</li>
<li><strong>åºåˆ—åŒ–</strong>: Serde</li>
<li><strong>æ—¥å¿—</strong>: Tracing</li>
<li><strong>é”™è¯¯å¤„ç†</strong>: Anyhow + Thiserror</li>
<li><strong>æµ‹è¯•</strong>: Tower + Tokio Test</li>
</ul>
<h2 id="åŠŸèƒ½ç‰¹æ€§"><a class="header" href="#åŠŸèƒ½ç‰¹æ€§">åŠŸèƒ½ç‰¹æ€§</a></h2>
<ul>
<li>ç”¨æˆ·æ³¨å†Œä¸ç™»å½•</li>
<li>JWT è®¤è¯ä¿æŠ¤</li>
<li>æ–‡ç«  CRUD æ“ä½œ</li>
<li>å¯†ç åŠ å¯†å­˜å‚¨</li>
<li>æ•°æ®åº“è¿ç§»</li>
<li>é›†æˆæµ‹è¯•è¦†ç›–</li>
</ul>
<h2 id="è¿è¡ŒæŒ‡å—"><a class="header" href="#è¿è¡ŒæŒ‡å—">è¿è¡ŒæŒ‡å—</a></h2>
<h3 id="1-å‡†å¤‡ç¯å¢ƒ"><a class="header" href="#1-å‡†å¤‡ç¯å¢ƒ">1. å‡†å¤‡ç¯å¢ƒ</a></h3>
<p>ç¡®ä¿å®‰è£…äº† Rust å·¥å…·é“¾ã€‚</p>
<h3 id="2-è¿è¡Œé¡¹ç›®"><a class="header" href="#2-è¿è¡Œé¡¹ç›®">2. è¿è¡Œé¡¹ç›®</a></h3>
<pre><code class="language-bash">cd blog-api
cargo run
</code></pre>
<p>æœåŠ¡å°†åœ¨ <code>http://localhost:3000</code> å¯åŠ¨ã€‚</p>
<h3 id="3-è¿è¡Œæµ‹è¯•"><a class="header" href="#3-è¿è¡Œæµ‹è¯•">3. è¿è¡Œæµ‹è¯•</a></h3>
<pre><code class="language-bash">cargo test
</code></pre>
<h2 id="api-æ¥å£"><a class="header" href="#api-æ¥å£">API æ¥å£</a></h2>
<h3 id="è®¤è¯"><a class="header" href="#è®¤è¯">è®¤è¯</a></h3>
<ul>
<li><code>POST /api/auth/register</code> - æ³¨å†Œ</li>
<li><code>POST /api/auth/login</code> - ç™»å½•</li>
</ul>
<h3 id="æ–‡ç« "><a class="header" href="#æ–‡ç« ">æ–‡ç« </a></h3>
<ul>
<li><code>GET /api/posts</code> - è·å–æ–‡ç« åˆ—è¡¨</li>
<li><code>GET /api/posts/:id</code> - è·å–æ–‡ç« è¯¦æƒ…</li>
<li><code>POST /api/posts</code> - åˆ›å»ºæ–‡ç«  (éœ€è®¤è¯)</li>
<li><code>PUT /api/posts/:id</code> - æ›´æ–°æ–‡ç«  (éœ€è®¤è¯)</li>
<li><code>DELETE /api/posts/:id</code> - åˆ é™¤æ–‡ç«  (éœ€è®¤è¯)</li>
</ul>
<h2 id="ç›®å½•ç»“æ„"><a class="header" href="#ç›®å½•ç»“æ„">ç›®å½•ç»“æ„</a></h2>
<ul>
<li><code>src/api</code>: API è·¯ç”±å¤„ç†å‡½æ•°</li>
<li><code>src/models</code>: æ•°æ®åº“æ¨¡å‹</li>
<li><code>src/repository</code>: æ•°æ®è®¿é—®å±‚</li>
<li><code>src/utils</code>: å·¥å…·å‡½æ•° (JWT, Password)</li>
<li><code>src/middleware</code>: ä¸­é—´ä»¶</li>
<li><code>tests</code>: é›†æˆæµ‹è¯•</li>
<li><code>migrations</code>: SQL è¿ç§»æ–‡ä»¶</li>
</ul>
<h2 id="æ€»ç»“"><a class="header" href="#æ€»ç»“">æ€»ç»“</a></h2>
<p>æœ¬é¡¹ç›®å±•ç¤ºäº†å¦‚ä½•æ„å»ºä¸€ä¸ªç»“æ„æ¸…æ™°ã€å¯æµ‹è¯•ã€åŠŸèƒ½å®Œæ•´çš„ Rust Web åº”ç”¨ã€‚</p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="ç¬¬å…­é˜¶æ®µç³»ç»Ÿç¼–ç¨‹ä¸æ‹“å±•-days-81-90---å®Œæ•´æ¦‚è§ˆ"><a class="header" href="#ç¬¬å…­é˜¶æ®µç³»ç»Ÿç¼–ç¨‹ä¸æ‹“å±•-days-81-90---å®Œæ•´æ¦‚è§ˆ">ç¬¬å…­é˜¶æ®µï¼šç³»ç»Ÿç¼–ç¨‹ä¸æ‹“å±• (Days 81-90) - å®Œæ•´æ¦‚è§ˆ</a></h1>
<h2 id="é˜¶æ®µç›®æ ‡-1"><a class="header" href="#é˜¶æ®µç›®æ ‡-1">é˜¶æ®µç›®æ ‡</a></h2>
<p>æ·±å…¥ç³»ç»Ÿåº•å±‚ç¼–ç¨‹ï¼ŒæŒæ¡æ€§èƒ½ä¼˜åŒ–æŠ€æœ¯å’Œå·¥ç¨‹åŒ–å®è·µã€‚</p>
<h2 id="å­¦ä¹ è·¯å¾„-3"><a class="header" href="#å­¦ä¹ è·¯å¾„-3">å­¦ä¹ è·¯å¾„</a></h2>
<h3 id="week-1-ç³»ç»Ÿç¼–ç¨‹-days-81-85-1"><a class="header" href="#week-1-ç³»ç»Ÿç¼–ç¨‹-days-81-85-1">Week 1: ç³»ç»Ÿç¼–ç¨‹ (Days 81-85)</a></h3>
<h4 id="day-81-æ“ä½œç³»ç»Ÿæ¦‚å¿µå›é¡¾"><a class="header" href="#day-81-æ“ä½œç³»ç»Ÿæ¦‚å¿µå›é¡¾">Day 81: æ“ä½œç³»ç»Ÿæ¦‚å¿µå›é¡¾</a></h4>
<p><strong>æ ¸å¿ƒå†…å®¹ï¼š</strong></p>
<ul>
<li>è¿›ç¨‹ä¸çº¿ç¨‹</li>
<li>å†…å­˜ç®¡ç†</li>
<li>æ–‡ä»¶ç³»ç»Ÿ</li>
<li>I/O æ¨¡å‹</li>
<li>ç³»ç»Ÿè°ƒç”¨</li>
</ul>
<p><strong>Rust ç³»ç»Ÿç¼–ç¨‹ç‰¹ç‚¹ï¼š</strong></p>
<pre class="playground"><code class="language-rust">use std::process::Command;
use std::env;

fn main() {
    // è·å–ç¯å¢ƒå˜é‡
    let path = env::var("PATH").unwrap();
    println!("PATH: {}", path);
    
    // æ‰§è¡Œç³»ç»Ÿå‘½ä»¤
    let output = Command::new("ls")
        .arg("-la")
        .output()
        .expect("Failed to execute command");
    
    println!("Status: {}", output.status);
    println!("Stdout: {}", String::from_utf8_lossy(&amp;output.stdout));
}</code></pre>
<h4 id="day-82-æ–‡ä»¶ç³»ç»Ÿæ“ä½œæ·±å…¥"><a class="header" href="#day-82-æ–‡ä»¶ç³»ç»Ÿæ“ä½œæ·±å…¥">Day 82: æ–‡ä»¶ç³»ç»Ÿæ“ä½œæ·±å…¥</a></h4>
<p><strong>æ ¸å¿ƒå†…å®¹ï¼š</strong></p>
<ul>
<li>æ–‡ä»¶å…ƒæ•°æ®</li>
<li>ç›®å½•éå†</li>
<li>ç¬¦å·é“¾æ¥</li>
<li>æ–‡ä»¶æƒé™</li>
<li>å†…å­˜æ˜ å°„æ–‡ä»¶</li>
</ul>
<p><strong>ç¤ºä¾‹ä»£ç ï¼š</strong></p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use std::fs::{self, File, OpenOptions};
use std::io::{Read, Write, Seek, SeekFrom};
use std::os::unix::fs::PermissionsExt;

// é€’å½’éå†ç›®å½•
fn walk_dir(path: &amp;Path) -&gt; io::Result&lt;()&gt; {
    for entry in fs::read_dir(path)? {
        let entry = entry?;
        let path = entry.path();
        
        if path.is_dir() {
            walk_dir(&amp;path)?;
        } else {
            println!("File: {:?}", path);
        }
    }
    Ok(())
}

// å†…å­˜æ˜ å°„æ–‡ä»¶
use memmap2::MmapOptions;

fn mmap_file(path: &amp;Path) -&gt; io::Result&lt;()&gt; {
    let file = File::open(path)?;
    let mmap = unsafe { MmapOptions::new().map(&amp;file)? };
    
    // ç›´æ¥è®¿é—®å†…å­˜
    let data = &amp;mmap[0..100];
    println!("First 100 bytes: {:?}", data);
    
    Ok(())
}

// æ–‡ä»¶é”
use fs2::FileExt;

fn file_lock_example() -&gt; io::Result&lt;()&gt; {
    let file = File::open("data.txt")?;
    
    // ç‹¬å é”
    file.lock_exclusive()?;
    // æ‰§è¡Œæ“ä½œ
    file.unlock()?;
    
    Ok(())
}
<span class="boring">}</span></code></pre>
<h4 id="day-83-è¿›ç¨‹ç®¡ç†ä¸ä¿¡å·å¤„ç†"><a class="header" href="#day-83-è¿›ç¨‹ç®¡ç†ä¸ä¿¡å·å¤„ç†">Day 83: è¿›ç¨‹ç®¡ç†ä¸ä¿¡å·å¤„ç†</a></h4>
<p><strong>æ ¸å¿ƒå†…å®¹ï¼š</strong></p>
<ul>
<li>è¿›ç¨‹åˆ›å»ºå’Œç®¡ç†</li>
<li>è¿›ç¨‹é—´é€šä¿¡ï¼ˆIPCï¼‰</li>
<li>ä¿¡å·å¤„ç†</li>
<li>å®ˆæŠ¤è¿›ç¨‹</li>
</ul>
<p><strong>ç¤ºä¾‹ä»£ç ï¼š</strong></p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use std::process::{Command, Stdio};
use std::io::{BufReader, BufRead};

// ç®¡é“é€šä¿¡
fn pipe_example() -&gt; io::Result&lt;()&gt; {
    let mut child = Command::new("ls")
        .stdout(Stdio::piped())
        .spawn()?;
    
    if let Some(stdout) = child.stdout.take() {
        let reader = BufReader::new(stdout);
        for line in reader.lines() {
            println!("Line: {}", line?);
        }
    }
    
    child.wait()?;
    Ok(())
}

// ä¿¡å·å¤„ç†
use signal_hook::{consts::SIGINT, iterator::Signals};

fn signal_handler() -&gt; Result&lt;()&gt; {
    let mut signals = Signals::new(&amp;[SIGINT])?;
    
    for sig in signals.forever() {
        match sig {
            SIGINT =&gt; {
                println!("Received SIGINT, shutting down...");
                break;
            }
            _ =&gt; unreachable!(),
        }
    }
    
    Ok(())
}

// å®ˆæŠ¤è¿›ç¨‹
use daemonize::Daemonize;

fn create_daemon() -&gt; Result&lt;()&gt; {
    let daemonize = Daemonize::new()
        .pid_file("/tmp/myapp.pid")
        .working_directory("/tmp");
    
    match daemonize.start() {
        Ok(_) =&gt; println!("Daemon started"),
        Err(e) =&gt; eprintln!("Error: {}", e),
    }
    
    Ok(())
}
<span class="boring">}</span></code></pre>
<h4 id="day-84-åŸå§‹å¥—æ¥å­—-raw-sockets"><a class="header" href="#day-84-åŸå§‹å¥—æ¥å­—-raw-sockets">Day 84: åŸå§‹å¥—æ¥å­— (Raw Sockets)</a></h4>
<p><strong>æ ¸å¿ƒå†…å®¹ï¼š</strong></p>
<ul>
<li>TCP/UDP åº•å±‚æ“ä½œ</li>
<li>åŸå§‹å¥—æ¥å­—ç¼–ç¨‹</li>
<li>ç½‘ç»œåè®®å®ç°</li>
<li>æ•°æ®åŒ…æ•è·</li>
</ul>
<p><strong>ç¤ºä¾‹ä»£ç ï¼š</strong></p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use std::net::{TcpListener, TcpStream};
use std::io::{Read, Write};

// ä½çº§ TCP æœåŠ¡å™¨
fn raw_tcp_server() -&gt; io::Result&lt;()&gt; {
    let listener = TcpListener::bind("127.0.0.1:8080")?;
    
    for stream in listener.incoming() {
        match stream {
            Ok(stream) =&gt; {
                std::thread::spawn(|| handle_client(stream));
            }
            Err(e) =&gt; eprintln!("Connection failed: {}", e),
        }
    }
    
    Ok(())
}

fn handle_client(mut stream: TcpStream) -&gt; io::Result&lt;()&gt; {
    let mut buffer = [0; 1024];
    
    loop {
        let n = stream.read(&amp;mut buffer)?;
        if n == 0 {
            break;
        }
        
        stream.write_all(&amp;buffer[0..n])?;
    }
    
    Ok(())
}

// ä½¿ç”¨ socket2 è¿›è¡Œæ›´åº•å±‚çš„æ§åˆ¶
use socket2::{Socket, Domain, Type, Protocol};

fn create_raw_socket() -&gt; io::Result&lt;Socket&gt; {
    let socket = Socket::new(
        Domain::IPV4,
        Type::STREAM,
        Some(Protocol::TCP),
    )?;
    
    socket.set_nonblocking(true)?;
    socket.set_reuse_address(true)?;
    
    Ok(socket)
}
<span class="boring">}</span></code></pre>
<h4 id="day-85-åµŒå…¥å¼-rust-ç®€ä»‹"><a class="header" href="#day-85-åµŒå…¥å¼-rust-ç®€ä»‹">Day 85: åµŒå…¥å¼ Rust ç®€ä»‹</a></h4>
<p><strong>æ ¸å¿ƒå†…å®¹ï¼š</strong></p>
<ul>
<li>no_std ç¯å¢ƒ</li>
<li>åµŒå…¥å¼ HAL</li>
<li>è£¸æœºç¼–ç¨‹</li>
<li>RTIC æ¡†æ¶</li>
</ul>
<p><strong>ç¤ºä¾‹ä»£ç ï¼š</strong></p>
<pre class="playground"><code class="language-rust">#![no_std]
#![no_main]

use panic_halt as _;
use cortex_m_rt::entry;

#[entry]
fn main() -&gt; ! {
    // åµŒå…¥å¼ä¸»å¾ªç¯
    loop {
        // ç¡¬ä»¶æ“ä½œ
    }
}

// ä½¿ç”¨ embedded-hal
use embedded_hal::digital::v2::OutputPin;

fn blink_led&lt;P: OutputPin&gt;(led: &amp;mut P) {
    led.set_high().ok();
    delay_ms(1000);
    led.set_low().ok();
    delay_ms(1000);
}</code></pre>
<h3 id="week-2-æ€§èƒ½ä¸å·¥ç¨‹åŒ–-days-86-90-1"><a class="header" href="#week-2-æ€§èƒ½ä¸å·¥ç¨‹åŒ–-days-86-90-1">Week 2: æ€§èƒ½ä¸å·¥ç¨‹åŒ– (Days 86-90)</a></h3>
<h4 id="day-86-æ€§èƒ½åˆ†æå·¥å…·-flamegraph"><a class="header" href="#day-86-æ€§èƒ½åˆ†æå·¥å…·-flamegraph">Day 86: æ€§èƒ½åˆ†æå·¥å…· (Flamegraph)</a></h4>
<p><strong>æ ¸å¿ƒå†…å®¹ï¼š</strong></p>
<ul>
<li>CPU æ€§èƒ½åˆ†æ</li>
<li>å†…å­˜åˆ†æ</li>
<li>Flamegraph ç”Ÿæˆ</li>
<li>perf å·¥å…·ä½¿ç”¨</li>
</ul>
<p><strong>å·¥å…·ä½¿ç”¨ï¼š</strong></p>
<pre><code class="language-bash"># å®‰è£… cargo-flamegraph
cargo install flamegraph

# ç”Ÿæˆç«ç„°å›¾
cargo flamegraph --bin myapp

# ä½¿ç”¨ perf
perf record -g ./target/release/myapp
perf report

# ä½¿ç”¨ valgrind
valgrind --tool=callgrind ./target/release/myapp
</code></pre>
<p><strong>ä»£ç ç¤ºä¾‹ï¼š</strong></p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use std::time::Instant;

fn benchmark_function() {
    let start = Instant::now();
    
    // æ‰§è¡Œæ“ä½œ
    expensive_operation();
    
    let duration = start.elapsed();
    println!("Time elapsed: {:?}", duration);
}

// ä½¿ç”¨ criterion è¿›è¡ŒåŸºå‡†æµ‹è¯•
use criterion::{black_box, criterion_group, criterion_main, Criterion};

fn fibonacci_benchmark(c: &amp;mut Criterion) {
    c.bench_function("fib 20", |b| {
        b.iter(|| fibonacci(black_box(20)))
    });
}

criterion_group!(benches, fibonacci_benchmark);
criterion_main!(benches);
<span class="boring">}</span></code></pre>
<h4 id="day-87-å†…å­˜ä¼˜åŒ–æŠ€å·§"><a class="header" href="#day-87-å†…å­˜ä¼˜åŒ–æŠ€å·§">Day 87: å†…å­˜ä¼˜åŒ–æŠ€å·§</a></h4>
<p><strong>æ ¸å¿ƒå†…å®¹ï¼š</strong></p>
<ul>
<li>å†…å­˜å¸ƒå±€ä¼˜åŒ–</li>
<li>é›¶æ‹·è´æŠ€æœ¯</li>
<li>å†…å­˜æ± </li>
<li>è‡ªå®šä¹‰åˆ†é…å™¨</li>
</ul>
<p><strong>ç¤ºä¾‹ä»£ç ï¼š</strong></p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// å†…å­˜å¸ƒå±€ä¼˜åŒ–
#[repr(C)]
struct OptimizedStruct {
    a: u64,  // 8 bytes
    b: u32,  // 4 bytes
    c: u16,  // 2 bytes
    d: u8,   // 1 byte
    // æ€»å…± 16 bytes (å¸¦å¯¹é½)
}

// é›¶æ‹·è´
use bytes::{Bytes, BytesMut};

fn zero_copy_example() {
    let mut buf = BytesMut::with_capacity(1024);
    buf.extend_from_slice(b"Hello");
    
    // é›¶æ‹·è´è½¬æ¢
    let frozen: Bytes = buf.freeze();
}

// å¯¹è±¡æ± 
use object_pool::Pool;

struct Connection {
    // è¿æ¥æ•°æ®
}

fn pool_example() {
    let pool = Pool::new(10, || Connection::new());
    
    let conn = pool.pull();
    // ä½¿ç”¨è¿æ¥
    // è‡ªåŠ¨å½’è¿˜åˆ°æ± ä¸­
}

// è‡ªå®šä¹‰åˆ†é…å™¨
use std::alloc::{GlobalAlloc, Layout};

struct MyAllocator;

unsafe impl GlobalAlloc for MyAllocator {
    unsafe fn alloc(&amp;self, layout: Layout) -&gt; *mut u8 {
        // è‡ªå®šä¹‰åˆ†é…é€»è¾‘
        std::alloc::System.alloc(layout)
    }
    
    unsafe fn dealloc(&amp;self, ptr: *mut u8, layout: Layout) {
        std::alloc::System.dealloc(ptr, layout)
    }
}

#[global_allocator]
static GLOBAL: MyAllocator = MyAllocator;
<span class="boring">}</span></code></pre>
<h4 id="day-88-simd-ä¸åº•å±‚ä¼˜åŒ–"><a class="header" href="#day-88-simd-ä¸åº•å±‚ä¼˜åŒ–">Day 88: SIMD ä¸åº•å±‚ä¼˜åŒ–</a></h4>
<p><strong>æ ¸å¿ƒå†…å®¹ï¼š</strong></p>
<ul>
<li>SIMD æŒ‡ä»¤é›†</li>
<li>å‘é‡åŒ–è®¡ç®—</li>
<li>ç¼–è¯‘å™¨ä¼˜åŒ–</li>
<li>å†…è”æ±‡ç¼–</li>
</ul>
<p><strong>ç¤ºä¾‹ä»£ç ï¼š</strong></p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// ä½¿ç”¨ SIMD
use std::arch::x86_64::*;

#[target_feature(enable = "avx2")]
unsafe fn simd_add(a: &amp;[f32], b: &amp;[f32], result: &amp;mut [f32]) {
    for i in (0..a.len()).step_by(8) {
        let va = _mm256_loadu_ps(a.as_ptr().add(i));
        let vb = _mm256_loadu_ps(b.as_ptr().add(i));
        let vr = _mm256_add_ps(va, vb);
        _mm256_storeu_ps(result.as_mut_ptr().add(i), vr);
    }
}

// ä½¿ç”¨ packed_simd
use packed_simd::*;

fn vectorized_sum(data: &amp;[f32]) -&gt; f32 {
    let mut sum = f32x8::splat(0.0);
    
    for chunk in data.chunks_exact(8) {
        sum += f32x8::from_slice_unaligned(chunk);
    }
    
    sum.sum()
}

// å†…è”æ±‡ç¼–
use std::arch::asm;

fn inline_asm_example() {
    let x: u64;
    unsafe {
        asm!(
            "mov {}, 42",
            out(reg) x,
        );
    }
    println!("x = {}", x);
}

// ç¼–è¯‘å™¨ä¼˜åŒ–æç¤º
#[inline(always)]
fn hot_function() {
    // æ€»æ˜¯å†…è”
}

#[cold]
fn error_handler() {
    // æ ‡è®°ä¸ºå†·è·¯å¾„
}

#[inline(never)]
fn debug_function() {
    // ä»ä¸å†…è”
}
<span class="boring">}</span></code></pre>
<h4 id="day-89-æŒç»­é›†æˆæµæ°´çº¿"><a class="header" href="#day-89-æŒç»­é›†æˆæµæ°´çº¿">Day 89: æŒç»­é›†æˆæµæ°´çº¿</a></h4>
<p><strong>æ ¸å¿ƒå†…å®¹ï¼š</strong></p>
<ul>
<li>GitHub Actions é…ç½®</li>
<li>è‡ªåŠ¨åŒ–æµ‹è¯•</li>
<li>ä»£ç è¦†ç›–ç‡</li>
<li>è‡ªåŠ¨å‘å¸ƒ</li>
</ul>
<p><strong>GitHub Actions é…ç½®ï¼š</strong></p>
<pre><code class="language-yaml"># .github/workflows/ci.yml
name: CI

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

env:
  CARGO_TERM_COLOR: always

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v3
    
    - name: Install Rust
      uses: actions-rs/toolchain@v1
      with:
        toolchain: stable
        override: true
        components: rustfmt, clippy
    
    - name: Cache cargo registry
      uses: actions/cache@v3
      with:
        path: ~/.cargo/registry
        key: ${{ runner.os }}-cargo-registry-${{ hashFiles('**/Cargo.lock') }}
    
    - name: Check formatting
      run: cargo fmt -- --check
    
    - name: Run clippy
      run: cargo clippy -- -D warnings
    
    - name: Run tests
      run: cargo test --verbose
    
    - name: Run tests with coverage
      run: |
        cargo install cargo-tarpaulin
        cargo tarpaulin --out Xml
    
    - name: Upload coverage
      uses: codecov/codecov-action@v3

  build:
    runs-on: ${{ matrix.os }}
    strategy:
      matrix:
        os: [ubuntu-latest, windows-latest, macos-latest]
    steps:
    - uses: actions/checkout@v3
    - name: Build
      run: cargo build --release --verbose

  release:
    needs: [test, build]
    runs-on: ubuntu-latest
    if: startsWith(github.ref, 'refs/tags/')
    steps:
    - uses: actions/checkout@v3
    - name: Build release
      run: cargo build --release
    - name: Create Release
      uses: softprops/action-gh-release@v1
      with:
        files: target/release/myapp
</code></pre>
<h4 id="day-90-rust-ç¼–è¯‘ä¼˜åŒ–ä¸é…ç½®"><a class="header" href="#day-90-rust-ç¼–è¯‘ä¼˜åŒ–ä¸é…ç½®">Day 90: Rust ç¼–è¯‘ä¼˜åŒ–ä¸é…ç½®</a></h4>
<p><strong>æ ¸å¿ƒå†…å®¹ï¼š</strong></p>
<ul>
<li>Cargo.toml ä¼˜åŒ–é…ç½®</li>
<li>ç¼–è¯‘æ—¶é—´ä¼˜åŒ–</li>
<li>äºŒè¿›åˆ¶å¤§å°ä¼˜åŒ–</li>
<li>äº¤å‰ç¼–è¯‘</li>
</ul>
<p><strong>Cargo.toml ä¼˜åŒ–ï¼š</strong></p>
<pre><code class="language-toml">[profile.release]
opt-level = 3              # æœ€é«˜ä¼˜åŒ–çº§åˆ«
lto = true                 # é“¾æ¥æ—¶ä¼˜åŒ–
codegen-units = 1          # å•ä¸ªä»£ç ç”Ÿæˆå•å…ƒ
strip = true               # ç§»é™¤ç¬¦å·ä¿¡æ¯
panic = 'abort'            # panic æ—¶ç›´æ¥ç»ˆæ­¢

[profile.release-small]
inherits = "release"
opt-level = 'z'            # ä¼˜åŒ–å¤§å°
lto = true
codegen-units = 1
strip = true

[profile.dev]
opt-level = 0              # å¼€å‘æ—¶ä¸ä¼˜åŒ–
debug = true               # åŒ…å«è°ƒè¯•ä¿¡æ¯

[profile.dev.package."*"]
opt-level = 2              # ä¾èµ–åŒ…ä½¿ç”¨ä¼˜åŒ–

# ç¼–è¯‘æ—¶é—´ä¼˜åŒ–
[build]
incremental = true         # å¢é‡ç¼–è¯‘
pipelining = true          # æµæ°´çº¿ç¼–è¯‘

# ä¾èµ–ä¼˜åŒ–
[dependencies]
serde = { version = "1", features = ["derive"], default-features = false }
</code></pre>
<p><strong>ç¼–è¯‘ä¼˜åŒ–æŠ€å·§ï¼š</strong></p>
<pre><code class="language-bash"># ä½¿ç”¨ sccache ç¼“å­˜ç¼–è¯‘ç»“æœ
cargo install sccache
export RUSTC_WRAPPER=sccache

# ä½¿ç”¨ mold é“¾æ¥å™¨åŠ é€Ÿé“¾æ¥
cargo install mold
export RUSTFLAGS="-C link-arg=-fuse-ld=mold"

# å¹¶è¡Œç¼–è¯‘
cargo build -j 8

# äº¤å‰ç¼–è¯‘
rustup target add x86_64-unknown-linux-musl
cargo build --target x86_64-unknown-linux-musl --release

# æ£€æŸ¥äºŒè¿›åˆ¶å¤§å°
cargo bloat --release
cargo bloat --release --crates

# åˆ†æç¼–è¯‘æ—¶é—´
cargo build --timings
</code></pre>
<h2 id="æ€§èƒ½ä¼˜åŒ–æ£€æŸ¥æ¸…å•"><a class="header" href="#æ€§èƒ½ä¼˜åŒ–æ£€æŸ¥æ¸…å•">æ€§èƒ½ä¼˜åŒ–æ£€æŸ¥æ¸…å•</a></h2>
<ul>
<li><input disabled="" type="checkbox"> ä½¿ç”¨ release æ¨¡å¼ç¼–è¯‘</li>
<li><input disabled="" type="checkbox"> å¯ç”¨ LTO</li>
<li><input disabled="" type="checkbox"> ä¼˜åŒ–çƒ­è·¯å¾„ä»£ç </li>
<li><input disabled="" type="checkbox"> å‡å°‘ä¸å¿…è¦çš„å…‹éš†</li>
<li><input disabled="" type="checkbox"> ä½¿ç”¨åˆé€‚çš„æ•°æ®ç»“æ„</li>
<li><input disabled="" type="checkbox"> é¿å…ä¸å¿…è¦çš„åˆ†é…</li>
<li><input disabled="" type="checkbox"> ä½¿ç”¨ SIMD åŠ é€Ÿè®¡ç®—å¯†é›†å‹ä»»åŠ¡</li>
<li><input disabled="" type="checkbox"> å®ç°é›¶æ‹·è´ä¼ è¾“</li>
<li><input disabled="" type="checkbox"> ä½¿ç”¨å¯¹è±¡æ± å¤ç”¨å¯¹è±¡</li>
<li><input disabled="" type="checkbox"> æ€§èƒ½æµ‹è¯•å’ŒåŸºå‡†æµ‹è¯•</li>
</ul>
<h2 id="å·¥ç¨‹åŒ–æœ€ä½³å®è·µ"><a class="header" href="#å·¥ç¨‹åŒ–æœ€ä½³å®è·µ">å·¥ç¨‹åŒ–æœ€ä½³å®è·µ</a></h2>
<h3 id="ä»£ç è´¨é‡"><a class="header" href="#ä»£ç è´¨é‡">ä»£ç è´¨é‡</a></h3>
<pre><code class="language-bash"># æ ¼å¼åŒ–
cargo fmt

# Lint æ£€æŸ¥
cargo clippy -- -D warnings

# å®‰å…¨å®¡è®¡
cargo audit

# ä¾èµ–æ›´æ–°
cargo update
cargo outdated
</code></pre>
<h3 id="æ–‡æ¡£-2"><a class="header" href="#æ–‡æ¡£-2">æ–‡æ¡£</a></h3>
<pre><code class="language-bash"># ç”Ÿæˆæ–‡æ¡£
cargo doc --open

# æ–‡æ¡£æµ‹è¯•
cargo test --doc
</code></pre>
<h3 id="æµ‹è¯•-2"><a class="header" href="#æµ‹è¯•-2">æµ‹è¯•</a></h3>
<pre><code class="language-bash"># å•å…ƒæµ‹è¯•
cargo test

# é›†æˆæµ‹è¯•
cargo test --test integration_test

# åŸºå‡†æµ‹è¯•
cargo bench
</code></pre>
<h2 id="å­¦ä¹ èµ„æº-2"><a class="header" href="#å­¦ä¹ èµ„æº-2">å­¦ä¹ èµ„æº</a></h2>
<h3 id="ä¹¦ç±-1"><a class="header" href="#ä¹¦ç±-1">ä¹¦ç±</a></h3>
<ul>
<li>Programming Rust (2nd Edition)</li>
<li>Rust for Rustaceans</li>
<li>The Rustonomicon</li>
</ul>
<h3 id="å·¥å…·-1"><a class="header" href="#å·¥å…·-1">å·¥å…·</a></h3>
<ul>
<li><a href="https://github.com/flamegraph-rs/flamegraph">cargo-flamegraph</a></li>
<li><a href="https://github.com/RazrFalcon/cargo-bloat">cargo-bloat</a></li>
<li><a href="https://github.com/rustsec/rustsec">cargo-audit</a></li>
<li><a href="https://github.com/xd009642/tarpaulin">cargo-tarpaulin</a></li>
</ul>
<h3 id="æ–‡æ¡£-1-1"><a class="header" href="#æ–‡æ¡£-1-1">æ–‡æ¡£</a></h3>
<ul>
<li><a href="https://nnethercote.github.io/perf-book/">Rust Performance Book</a></li>
<li><a href="https://doc.rust-lang.org/cargo/">The Cargo Book</a></li>
<li><a href="https://rustc-dev-guide.rust-lang.org/">Rust Compiler Development Guide</a></li>
</ul>
<h2 id="ä¸‹ä¸€é˜¶æ®µé¢„å‘Š-1"><a class="header" href="#ä¸‹ä¸€é˜¶æ®µé¢„å‘Š-1">ä¸‹ä¸€é˜¶æ®µé¢„å‘Š</a></h2>
<p>ç¬¬ä¸ƒé˜¶æ®µï¼ˆDays 91-100ï¼‰æ˜¯æ¯•ä¸šè®¾è®¡é˜¶æ®µï¼Œå°†ç»¼åˆè¿ç”¨æ‰€æœ‰å­¦åˆ°çš„çŸ¥è¯†å®Œæˆä¸€ä¸ªå®Œæ•´çš„é¡¹ç›®ã€‚</p>
<p>å‡†å¤‡å¥½è¿æ¥æœ€åçš„æŒ‘æˆ˜ï¼ğŸš€</p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-81-æ“ä½œç³»ç»Ÿæ¦‚å¿µå›é¡¾-1"><a class="header" href="#day-81-æ“ä½œç³»ç»Ÿæ¦‚å¿µå›é¡¾-1">Day 81: æ“ä½œç³»ç»Ÿæ¦‚å¿µå›é¡¾</a></h1>
<p>è¯¦ç»†å†…å®¹è¯·å‚è€ƒ <a href="#ç¬¬å…­é˜¶æ®µç³»ç»Ÿç¼–ç¨‹ä¸æ‹“å±•-days-81-90---å®Œæ•´æ¦‚è§ˆ">Stage 6 Overview</a>ã€‚</p>
<h2 id="æ ¸å¿ƒå†…å®¹-4"><a class="header" href="#æ ¸å¿ƒå†…å®¹-4">æ ¸å¿ƒå†…å®¹</a></h2>
<ul>
<li>è¿›ç¨‹ä¸çº¿ç¨‹</li>
<li>å†…å­˜ç®¡ç†</li>
<li>æ–‡ä»¶ç³»ç»Ÿ</li>
<li>I/O æ¨¡å‹</li>
<li>ç³»ç»Ÿè°ƒç”¨</li>
</ul>
<h2 id="ç¤ºä¾‹é¡¹ç›®-os-concepts"><a class="header" href="#ç¤ºä¾‹é¡¹ç›®-os-concepts">ç¤ºä¾‹é¡¹ç›® <code>os-concepts</code></a></h2>
<p>æœ¬é¡¹ç›®æ¼”ç¤ºäº† Rust ä¸­çš„ä¸€äº›åŸºæœ¬ç³»ç»Ÿç¼–ç¨‹æ¦‚å¿µã€‚</p>
<h3 id="åŠŸèƒ½æ¼”ç¤º"><a class="header" href="#åŠŸèƒ½æ¼”ç¤º">åŠŸèƒ½æ¼”ç¤º</a></h3>
<ul>
<li><strong>ç¯å¢ƒå˜é‡</strong>: è¯»å– <code>PATH</code> ç­‰ç¯å¢ƒå˜é‡ã€‚</li>
<li><strong>è¿›ç¨‹ç®¡ç†</strong>: ä½¿ç”¨ <code>Command</code> æ‰§è¡Œç³»ç»Ÿå‘½ä»¤ (<code>ls</code>)ã€‚</li>
<li><strong>å¤šçº¿ç¨‹</strong>: åˆ›å»ºçº¿ç¨‹å¹¶ç­‰å¾…ç»“æœã€‚</li>
<li><strong>å†…å­˜æ¦‚å¿µ</strong>: æŸ¥çœ‹ä¸åŒç±»å‹çš„å†…å­˜å ç”¨å¤§å°ã€‚</li>
</ul>
<h3 id="è¿è¡Œä»£ç "><a class="header" href="#è¿è¡Œä»£ç ">è¿è¡Œä»£ç </a></h3>
<pre><code class="language-bash">cd Day81-90/81.OSConcepts
cargo run
</code></pre>
<h2 id="ä¸‹ä¸€æ­¥-20"><a class="header" href="#ä¸‹ä¸€æ­¥-20">ä¸‹ä¸€æ­¥</a></h2>
<p>Day 82 å°†æ·±å…¥å­¦ä¹ æ–‡ä»¶ç³»ç»Ÿæ“ä½œã€‚</p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-82-æ–‡ä»¶ç³»ç»Ÿæ“ä½œæ·±å…¥-1"><a class="header" href="#day-82-æ–‡ä»¶ç³»ç»Ÿæ“ä½œæ·±å…¥-1">Day 82: æ–‡ä»¶ç³»ç»Ÿæ“ä½œæ·±å…¥</a></h1>
<h2 id="å­¦ä¹ ç›®æ ‡-14"><a class="header" href="#å­¦ä¹ ç›®æ ‡-14">å­¦ä¹ ç›®æ ‡</a></h2>
<ul>
<li>æŒæ¡ Rust ä¸­çš„ç›®å½•éå†æŠ€æœ¯</li>
<li>ç†è§£å¹¶å®ç°å†…å­˜æ˜ å°„æ–‡ä»¶ (Memory Mapped Files)</li>
<li>å­¦ä¹ æ–‡ä»¶é”æœºåˆ¶ä»¥å¤„ç†å¹¶å‘è®¿é—®</li>
<li>ç†Ÿæ‚‰æ–‡ä»¶å…ƒæ•°æ®å’Œæƒé™æ“ä½œ</li>
</ul>
<h2 id="æ ¸å¿ƒæ¦‚å¿µ-6"><a class="header" href="#æ ¸å¿ƒæ¦‚å¿µ-6">æ ¸å¿ƒæ¦‚å¿µ</a></h2>
<h3 id="1-ç›®å½•éå†"><a class="header" href="#1-ç›®å½•éå†">1. ç›®å½•éå†</a></h3>
<p>æ ‡å‡†åº“ <code>std::fs</code> æä¾›äº†åŸºæœ¬çš„ç›®å½•æ“ä½œã€‚é€’å½’éå†é€šå¸¸éœ€è¦æ‰‹åŠ¨å®ç°ï¼Œæˆ–è€…ä½¿ç”¨ <code>walkdir</code> ç­‰ç¬¬ä¸‰æ–¹åº“ã€‚æœ¬ç¤ºä¾‹å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨æ ‡å‡†åº“å®ç°ç®€å•çš„é€’å½’éå†ã€‚</p>
<h3 id="2-å†…å­˜æ˜ å°„æ–‡ä»¶-mmap"><a class="header" href="#2-å†…å­˜æ˜ å°„æ–‡ä»¶-mmap">2. å†…å­˜æ˜ å°„æ–‡ä»¶ (mmap)</a></h3>
<p>å†…å­˜æ˜ å°„æ–‡ä»¶å…è®¸å°†æ–‡ä»¶çš„ä¸€éƒ¨åˆ†æˆ–å…¨éƒ¨ç›´æ¥æ˜ å°„åˆ°è¿›ç¨‹çš„å†…å­˜ç©ºé—´ã€‚è¿™å¯¹äºå¤„ç†å¤§æ–‡ä»¶æˆ–å®ç°é«˜æ€§èƒ½ I/O éå¸¸æœ‰ç”¨ã€‚Rust ä¸­å¸¸ç”¨ <code>memmap2</code> crate æ¥å®ç°ã€‚</p>
<ul>
<li><strong>ä¼˜ç‚¹</strong>ï¼šå‡å°‘ç³»ç»Ÿè°ƒç”¨ï¼Œåƒè®¿é—®å†…å­˜ä¸€æ ·è®¿é—®æ–‡ä»¶ã€‚</li>
<li><strong>Unsafe</strong>ï¼šåˆ›å»º mmap é€šå¸¸æ˜¯ <code>unsafe</code> çš„ï¼Œå› ä¸ºåº•å±‚æ–‡ä»¶å¯èƒ½åœ¨æ˜ å°„æœŸé—´è¢«å…¶ä»–è¿›ç¨‹ä¿®æ”¹ï¼Œå¯¼è‡´æœªå®šä¹‰è¡Œä¸ºã€‚</li>
</ul>
<h3 id="3-æ–‡ä»¶é”"><a class="header" href="#3-æ–‡ä»¶é”">3. æ–‡ä»¶é”</a></h3>
<p>å½“å¤šä¸ªè¿›ç¨‹å°è¯•åŒæ—¶è¯»å†™åŒä¸€ä¸ªæ–‡ä»¶æ—¶ï¼Œå¯èƒ½ä¼šå¯¼è‡´æ•°æ®æŸåã€‚æ–‡ä»¶é”ï¼ˆFile Lockingï¼‰æ˜¯ä¸€ç§åŒæ­¥æœºåˆ¶ã€‚</p>
<ul>
<li><strong>ç‹¬å é” (Exclusive Lock)</strong>ï¼šé€šå¸¸ç”¨äºå†™æ“ä½œï¼Œä¸€æ¬¡åªæœ‰ä¸€ä¸ªè¿›ç¨‹èƒ½æŒæœ‰ã€‚</li>
<li><strong>å…±äº«é” (Shared Lock)</strong>ï¼šé€šå¸¸ç”¨äºè¯»æ“ä½œï¼Œå¤šä¸ªè¿›ç¨‹å¯ä»¥åŒæ—¶æŒæœ‰ã€‚
Rust ä¸­å¯ä»¥ä½¿ç”¨ <code>fs2</code> crate æ¥è¿›è¡Œè·¨å¹³å°çš„æ–‡ä»¶é”å®šã€‚</li>
</ul>
<h2 id="ä»£ç ç¤ºä¾‹-2"><a class="header" href="#ä»£ç ç¤ºä¾‹-2">ä»£ç ç¤ºä¾‹</a></h2>
<p>æœ¬èŠ‚ä»£ç æ¼”ç¤ºäº†ä¸Šè¿°ä¸‰ä¸ªæ ¸å¿ƒæ¦‚å¿µçš„ç”¨æ³•ã€‚</p>
<h3 id="é€’å½’éå†ç›®å½•"><a class="header" href="#é€’å½’éå†ç›®å½•">é€’å½’éå†ç›®å½•</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use std::fs;
use std::path::Path;
use std::io;

fn walk_dir(path: &amp;Path) -&gt; io::Result&lt;()&gt; {
    if path.is_dir() {
        for entry in fs::read_dir(path)? {
            let entry = entry?;
            let path = entry.path();

            if path.is_dir() {
                walk_dir(&amp;path)?;
            } else {
                println!("File: {:?}", path);
            }
        }
    }
    Ok(())
}
<span class="boring">}</span></code></pre>
<h3 id="å†…å­˜æ˜ å°„æ–‡ä»¶"><a class="header" href="#å†…å­˜æ˜ å°„æ–‡ä»¶">å†…å­˜æ˜ å°„æ–‡ä»¶</a></h3>
<p>éœ€è¦ä¾èµ– <code>memmap2</code> crateã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use std::fs::File;
use memmap2::MmapOptions;

fn mmap_file(path: &amp;Path) -&gt; io::Result&lt;()&gt; {
    let file = File::open(path)?;
    // unsafe: è°ƒç”¨è€…å¿…é¡»ç¡®ä¿æ–‡ä»¶ä¸ä¼šè¢«å¤–éƒ¨ä¿®æ”¹ä»è€Œå¯¼è‡´æ•°æ®ç«äº‰
    let mmap = unsafe { MmapOptions::new().map(&amp;file)? };

    // åƒè®¿é—®åˆ‡ç‰‡ä¸€æ ·è®¿é—®æ–‡ä»¶å†…å®¹
    if !mmap.is_empty() {
        println!("First byte: {}", mmap[0]);
    }

    Ok(())
}
<span class="boring">}</span></code></pre>
<h3 id="æ–‡ä»¶é”"><a class="header" href="#æ–‡ä»¶é”">æ–‡ä»¶é”</a></h3>
<p>éœ€è¦ä¾èµ– <code>fs2</code> crateã€‚</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use std::fs::File;
use fs2::FileExt;

fn file_lock_example(path: &amp;str) -&gt; io::Result&lt;()&gt; {
    let file = File::open(path)?;

    // è·å–ç‹¬å é”ï¼Œå¦‚æœå·²è¢«å ç”¨åˆ™é˜»å¡ç›´åˆ°å¯ç”¨
    file.lock_exclusive()?;
    println!("Lock acquired");

    // æ‰§è¡Œå…³é”®åŒºæ“ä½œ...

    // è§£é”
    file.unlock()?;
    println!("Lock released");

    Ok(())
}
<span class="boring">}</span></code></pre>
<h2 id="è¿è¡Œç¤ºä¾‹-2"><a class="header" href="#è¿è¡Œç¤ºä¾‹-2">è¿è¡Œç¤ºä¾‹</a></h2>
<p>è¿›å…¥ <code>fs-demo</code> ç›®å½•å¹¶è¿è¡Œï¼š</p>
<pre><code class="language-bash">cd fs-demo
cargo run
</code></pre>
<p>ä½ å°†çœ‹åˆ°ç¨‹åºéå†æºä»£ç ç›®å½•ï¼Œåˆ›å»ºæµ‹è¯•æ–‡ä»¶è¿›è¡Œå†…å­˜æ˜ å°„è¯»å–ï¼Œå¹¶æ¼”ç¤ºæ–‡ä»¶é”çš„è·å–ä¸é‡Šæ”¾ã€‚</p>
<h2 id="ç»ƒä¹ -13"><a class="header" href="#ç»ƒä¹ -13">ç»ƒä¹ </a></h2>
<ol>
<li>ä¿®æ”¹ <code>walk_dir</code> å‡½æ•°ï¼Œè®¡ç®—ç›®å½•ä¸­æ‰€æœ‰æ–‡ä»¶çš„æ€»å¤§å°ã€‚</li>
<li>å°è¯•ä½¿ç”¨ <code>notify</code> crate ç›‘å¬æ–‡ä»¶ç³»ç»Ÿçš„å˜åŒ–ï¼ˆå¦‚æ–‡ä»¶åˆ›å»ºã€ä¿®æ”¹ï¼‰ã€‚</li>
<li>ç¼–å†™ä¸€ä¸ªç¨‹åºï¼Œä½¿ç”¨ mmap å®ç°å¤§æ–‡ä»¶çš„é«˜æ•ˆå¤åˆ¶ã€‚</li>
</ol>
<h2 id="ä¸‹ä¸€æ­¥-21"><a class="header" href="#ä¸‹ä¸€æ­¥-21">ä¸‹ä¸€æ­¥</a></h2>
<p>Day 83 å°†æ·±å…¥è®²è§£è¿›ç¨‹ç®¡ç†ä¸ä¿¡å·å¤„ç†ã€‚</p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-83-è¿›ç¨‹ç®¡ç†ä¸ä¿¡å·å¤„ç†-1"><a class="header" href="#day-83-è¿›ç¨‹ç®¡ç†ä¸ä¿¡å·å¤„ç†-1">Day 83: è¿›ç¨‹ç®¡ç†ä¸ä¿¡å·å¤„ç†</a></h1>
<h2 id="å­¦ä¹ ç›®æ ‡-15"><a class="header" href="#å­¦ä¹ ç›®æ ‡-15">å­¦ä¹ ç›®æ ‡</a></h2>
<ul>
<li>æŒæ¡ Rust ä¸­åˆ›å»ºå’Œç®¡ç†å­è¿›ç¨‹çš„æ–¹æ³•</li>
<li>ç†è§£è¿›ç¨‹é—´é€šä¿¡ (IPC) çš„åŸºæœ¬æ–¹å¼ï¼ˆç®¡é“ï¼‰</li>
<li>å­¦ä¹ å¦‚ä½•æ•è·å’Œå¤„ç† Unix ä¿¡å· (Signals)</li>
<li>äº†è§£å®ˆæŠ¤è¿›ç¨‹ (Daemon) çš„æ¦‚å¿µä¸å®ç°</li>
</ul>
<h2 id="æ ¸å¿ƒæ¦‚å¿µ-7"><a class="header" href="#æ ¸å¿ƒæ¦‚å¿µ-7">æ ¸å¿ƒæ¦‚å¿µ</a></h2>
<h3 id="1-è¿›ç¨‹åˆ›å»ºä¸ç®¡é“é€šä¿¡"><a class="header" href="#1-è¿›ç¨‹åˆ›å»ºä¸ç®¡é“é€šä¿¡">1. è¿›ç¨‹åˆ›å»ºä¸ç®¡é“é€šä¿¡</a></h3>
<p>Rust æ ‡å‡†åº“ <code>std::process::Command</code> æä¾›äº†å¼ºå¤§çš„è¿›ç¨‹åˆ›å»ºåŠŸèƒ½ã€‚é€šè¿‡é…ç½® <code>Stdio</code>ï¼Œæˆ‘ä»¬å¯ä»¥é‡å®šå‘å­è¿›ç¨‹çš„è¾“å…¥è¾“å‡ºæµï¼Œä»è€Œå®ç°çˆ¶å­è¿›ç¨‹é—´çš„é€šä¿¡ã€‚</p>
<ul>
<li><strong>Spawn</strong>: å¼‚æ­¥å¯åŠ¨è¿›ç¨‹ã€‚</li>
<li><strong>Output</strong>: å¯åŠ¨è¿›ç¨‹å¹¶ç­‰å¾…å…¶å®Œæˆï¼Œæ”¶é›†è¾“å‡ºã€‚</li>
<li><strong>Stdio::piped()</strong>: åˆ›å»ºç®¡é“ï¼Œå…è®¸çˆ¶è¿›ç¨‹è¯»å†™å­è¿›ç¨‹çš„æ ‡å‡†è¾“å…¥/è¾“å‡ºã€‚</li>
</ul>
<h3 id="2-ä¿¡å·å¤„ç†-signal-handling"><a class="header" href="#2-ä¿¡å·å¤„ç†-signal-handling">2. ä¿¡å·å¤„ç† (Signal Handling)</a></h3>
<p>Unix ä¿¡å·æ˜¯æ“ä½œç³»ç»Ÿå‘è¿›ç¨‹å‘é€çš„å¼‚æ­¥é€šçŸ¥ï¼ˆå¦‚ SIGINT, SIGTERMï¼‰ã€‚Rust æ ‡å‡†åº“å¯¹ä¿¡å·çš„æ”¯æŒè¾ƒä¸ºåŸºç¡€ï¼Œé€šå¸¸æ¨èä½¿ç”¨ <code>signal-hook</code> crate æ¥å¤„ç† POSIX ä¿¡å·ã€‚</p>
<ul>
<li><strong>SIGINT</strong>: ä¸­æ–­ä¿¡å· (Ctrl+C)ã€‚</li>
<li><strong>SIGTERM</strong>: ç»ˆæ­¢ä¿¡å·ã€‚</li>
<li><strong>å¤„ç†æ–¹å¼</strong>: é€šå¸¸åœ¨ä¸€ä¸ªç‹¬ç«‹çš„çº¿ç¨‹ä¸­é˜»å¡ç­‰å¾…ä¿¡å·ï¼Œæˆ–è€…æ³¨å†Œå›è°ƒã€‚</li>
</ul>
<h3 id="3-å®ˆæŠ¤è¿›ç¨‹-daemon"><a class="header" href="#3-å®ˆæŠ¤è¿›ç¨‹-daemon">3. å®ˆæŠ¤è¿›ç¨‹ (Daemon)</a></h3>
<p>å®ˆæŠ¤è¿›ç¨‹æ˜¯åœ¨åå°è¿è¡Œçš„é•¿æœŸæœåŠ¡è¿›ç¨‹ï¼Œä¸ä¸ä»»ä½•æ§åˆ¶ç»ˆç«¯å…³è”ã€‚åˆ›å»ºå®ˆæŠ¤è¿›ç¨‹é€šå¸¸æ¶‰åŠä»¥ä¸‹æ­¥éª¤ï¼š</p>
<ol>
<li><code>fork</code> å¹¶é€€å‡ºçˆ¶è¿›ç¨‹ã€‚</li>
<li>è°ƒç”¨ <code>setsid</code> åˆ›å»ºæ–°ä¼šè¯ã€‚</li>
<li>æ›´æ”¹å·¥ä½œç›®å½•ã€‚</li>
<li>é‡è®¾æ–‡ä»¶æƒé™æ©ç  (umask)ã€‚</li>
<li>é‡å®šå‘æ ‡å‡† IO æµã€‚</li>
</ol>
<p>Rust ç”Ÿæ€ä¸­ <code>daemonize</code> crate å°è£…äº†è¿™äº›å¤æ‚æ“ä½œã€‚</p>
<h2 id="ä»£ç ç¤ºä¾‹-3"><a class="header" href="#ä»£ç ç¤ºä¾‹-3">ä»£ç ç¤ºä¾‹</a></h2>
<p>æœ¬èŠ‚ä»£ç æ¼”ç¤ºäº†ä¸Šè¿°ä¸‰ä¸ªæ ¸å¿ƒæ¦‚å¿µçš„ç”¨æ³•ã€‚</p>
<h3 id="å¯åŠ¨å­è¿›ç¨‹å¹¶ä½¿ç”¨ç®¡é“"><a class="header" href="#å¯åŠ¨å­è¿›ç¨‹å¹¶ä½¿ç”¨ç®¡é“">å¯åŠ¨å­è¿›ç¨‹å¹¶ä½¿ç”¨ç®¡é“</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use std::process::{Command, Stdio};
use std::io::{Write, Read};

fn run_pipe() -&gt; std::io::Result&lt;()&gt; {
    // å¯åŠ¨ 'tr' å‘½ä»¤ï¼Œå°†å°å†™è½¬æ¢ä¸ºå¤§å†™
    let mut child = Command::new("tr")
        .arg("a-z")
        .arg("A-Z")
        .stdin(Stdio::piped())
        .stdout(Stdio::piped())
        .spawn()?;

    // å†™å…¥æ•°æ®åˆ°å­è¿›ç¨‹ stdin
    if let Some(mut stdin) = child.stdin.take() {
        stdin.write_all(b"hello rust world")?;
    }

    // è¯»å–å­è¿›ç¨‹ stdout
    let output = child.wait_with_output()?;
    println!("Output: {}", String::from_utf8_lossy(&amp;output.stdout));
    Ok(())
}
<span class="boring">}</span></code></pre>
<h3 id="æ•è·-sigint-ä¿¡å·"><a class="header" href="#æ•è·-sigint-ä¿¡å·">æ•è· SIGINT ä¿¡å·</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use signal_hook::{consts::SIGINT, iterator::Signals};
use std::thread;

fn handle_signals() -&gt; std::io::Result&lt;()&gt; {
    let mut signals = Signals::new(&amp;[SIGINT])?;

    thread::spawn(move || {
        for sig in signals.forever() {
            println!("Received signal {:?}", sig);
            // æ‰§è¡Œæ¸…ç†æ“ä½œ...
            break;
        }
    });

    Ok(())
}
<span class="boring">}</span></code></pre>
<h2 id="è¿è¡Œç¤ºä¾‹-3"><a class="header" href="#è¿è¡Œç¤ºä¾‹-3">è¿è¡Œç¤ºä¾‹</a></h2>
<p>è¿›å…¥ <code>process-demo</code> ç›®å½•å¹¶è¿è¡Œï¼š</p>
<pre><code class="language-bash">cd process-demo
# è¿è¡Œ IPC å’Œä¿¡å·å¤„ç†æ¼”ç¤º
cargo run

# è¿è¡Œå®ˆæŠ¤è¿›ç¨‹æ¨¡å¼
cargo run -- daemon
</code></pre>
<h3 id="é¢„æœŸè¾“å‡º"><a class="header" href="#é¢„æœŸè¾“å‡º">é¢„æœŸè¾“å‡º</a></h3>
<ol>
<li><strong>IPC ç¤ºä¾‹</strong>: ç¨‹åºä¼šè°ƒç”¨ <code>tr</code> å‘½ä»¤ï¼Œå°† â€œhello process worldâ€ è½¬æ¢ä¸ºå¤§å†™å¹¶è¾“å‡ºã€‚</li>
<li><strong>ä¿¡å·ç¤ºä¾‹</strong>: ç¨‹åºä¼šç­‰å¾… 5 ç§’ã€‚åœ¨æ­¤æœŸé—´å¦‚æœä½ æŒ‰ä¸‹ <code>Ctrl+C</code>ï¼Œç¨‹åºä¼šæ•è·è¯¥ä¿¡å·å¹¶æ‰“å°æç¤ºä¿¡æ¯ï¼Œè€Œä¸æ˜¯ç›´æ¥å¼ºè¡Œç»ˆæ­¢ã€‚</li>
<li><strong>å®ˆæŠ¤è¿›ç¨‹</strong>: å¦‚æœè¿è¡Œ <code>daemon</code> æ¨¡å¼ï¼Œç¨‹åºå°†è½¬å…¥åå°è¿è¡Œã€‚ä½ å¯ä»¥æŸ¥çœ‹ <code>/tmp/daemon.out</code> ç¡®è®¤å…¶çŠ¶æ€ã€‚</li>
</ol>
<h2 id="ç»ƒä¹ -14"><a class="header" href="#ç»ƒä¹ -14">ç»ƒä¹ </a></h2>
<ol>
<li>ä¿®æ”¹ IPC ç¤ºä¾‹ï¼Œè®©çˆ¶è¿›ç¨‹è¿ç»­å‘é€å¤šè¡Œæ•°æ®ï¼Œå­è¿›ç¨‹å®æ—¶å¤„ç†å¹¶è¿”å›ã€‚</li>
<li>å®ç°ä¸€ä¸ªèƒ½å¤Ÿä¼˜é›…å…³é—­ï¼ˆGraceful Shutdownï¼‰çš„ Web æœåŠ¡å™¨åŸå‹ï¼Œæ¥æ”¶ SIGTERM ä¿¡å·ååœæ­¢æ¥å—æ–°è¿æ¥å¹¶ç­‰å¾…ç°æœ‰è¯·æ±‚å®Œæˆã€‚</li>
<li>å°è¯•ä½¿ç”¨ Unix Domain Socket (<code>std::os::unix::net::UnixStream</code>) è¿›è¡Œæ›´é«˜æ•ˆçš„æœ¬åœ°è¿›ç¨‹é—´é€šä¿¡ã€‚</li>
</ol>
<h2 id="ä¸‹ä¸€æ­¥-22"><a class="header" href="#ä¸‹ä¸€æ­¥-22">ä¸‹ä¸€æ­¥</a></h2>
<p>Day 84 å°†æ·±å…¥è®²è§£åŸå§‹å¥—æ¥å­— (Raw Sockets) ä¸ç½‘ç»œåè®®å®ç°ã€‚</p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-84-åŸå§‹å¥—æ¥å­—-raw-sockets-1"><a class="header" href="#day-84-åŸå§‹å¥—æ¥å­—-raw-sockets-1">Day 84: åŸå§‹å¥—æ¥å­— (Raw Sockets)</a></h1>
<p>è¯¦ç»†å†…å®¹è¯·å‚è€ƒ <a href="#ç¬¬å…­é˜¶æ®µç³»ç»Ÿç¼–ç¨‹ä¸æ‹“å±•-days-81-90---å®Œæ•´æ¦‚è§ˆ">Stage 6 Overview</a>ã€‚</p>
<h2 id="æ ¸å¿ƒå†…å®¹-5"><a class="header" href="#æ ¸å¿ƒå†…å®¹-5">æ ¸å¿ƒå†…å®¹</a></h2>
<ul>
<li>TCP/UDP åº•å±‚æ“ä½œ</li>
<li><code>socket2</code> crate çš„ä½¿ç”¨</li>
<li>åŸå§‹å¥—æ¥å­—ç¼–ç¨‹åŸºç¡€</li>
<li>ç½‘ç»œåè®®å®ç°</li>
</ul>
<h2 id="ç¤ºä¾‹é¡¹ç›®-raw-sockets"><a class="header" href="#ç¤ºä¾‹é¡¹ç›®-raw-sockets">ç¤ºä¾‹é¡¹ç›® <code>raw-sockets</code></a></h2>
<p>æœ¬é¡¹ç›®æ¼”ç¤ºäº†å¦‚ä½•ä½¿ç”¨ <code>socket2</code> è¿›è¡Œæ›´åº•å±‚çš„å¥—æ¥å­—é…ç½®ï¼Œä»¥åŠæ ‡å‡†çš„ <code>std::net</code> TCP ç¼–ç¨‹ã€‚</p>
<h3 id="åŠŸèƒ½æ¼”ç¤º-1"><a class="header" href="#åŠŸèƒ½æ¼”ç¤º-1">åŠŸèƒ½æ¼”ç¤º</a></h3>
<ol>
<li><strong>Socket2 Creation</strong>: æ¼”ç¤ºä½¿ç”¨ <code>socket2</code> crate åˆ›å»ºå¹¶é…ç½®ï¼ˆéé˜»å¡ã€åœ°å€å¤ç”¨ï¼‰ä¸€ä¸ª TCP å¥—æ¥å­—ã€‚</li>
<li><strong>TCP Echo Server</strong>: ä¸€ä¸ªè¿è¡Œåœ¨åå°çº¿ç¨‹çš„ç®€å• TCP æœåŠ¡å™¨ã€‚</li>
<li><strong>TCP Client</strong>: ä¸€ä¸ªè¿æ¥åˆ°æœåŠ¡å™¨å¹¶å‘é€/æ¥æ”¶æ•°æ®çš„å®¢æˆ·ç«¯ã€‚</li>
</ol>
<h3 id="è¿è¡Œä»£ç -1"><a class="header" href="#è¿è¡Œä»£ç -1">è¿è¡Œä»£ç </a></h3>
<pre><code class="language-bash">cd Day81-90/84.RawSockets
cargo run
</code></pre>
<h2 id="ä¸‹ä¸€æ­¥-23"><a class="header" href="#ä¸‹ä¸€æ­¥-23">ä¸‹ä¸€æ­¥</a></h2>
<p>Day 85 å°†å­¦ä¹ åµŒå…¥å¼ Rust ç®€ä»‹ã€‚</p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-85-åµŒå…¥å¼-rust-ç®€ä»‹-embedded-rust-introduction"><a class="header" href="#day-85-åµŒå…¥å¼-rust-ç®€ä»‹-embedded-rust-introduction">Day 85: åµŒå…¥å¼ Rust ç®€ä»‹ (Embedded Rust Introduction)</a></h1>
<h2 id="ç®€ä»‹"><a class="header" href="#ç®€ä»‹">ç®€ä»‹</a></h2>
<p>åµŒå…¥å¼ Rust å¼€å‘å…è®¸æˆ‘ä»¬åœ¨æ²¡æœ‰æ“ä½œç³»ç»Ÿï¼ˆ<code>no_std</code>ï¼‰çš„ç¯å¢ƒä¸‹ç›´æ¥æ§åˆ¶ç¡¬ä»¶ã€‚Rust çš„æ‰€æœ‰æƒæ¨¡å‹å’Œç±»å‹ç³»ç»Ÿåœ¨åµŒå…¥å¼é¢†åŸŸæä¾›äº†æé«˜çš„å®‰å…¨æ€§å’Œä¾¿åˆ©æ€§ã€‚</p>
<h2 id="æ ¸å¿ƒæ¦‚å¿µ-8"><a class="header" href="#æ ¸å¿ƒæ¦‚å¿µ-8">æ ¸å¿ƒæ¦‚å¿µ</a></h2>
<ol>
<li><strong>no_std</strong>: åµŒå…¥å¼ç¯å¢ƒé€šå¸¸æ²¡æœ‰å®Œæ•´çš„æ ‡å‡†åº“æ”¯æŒï¼ˆå¦‚å †åˆ†é…ã€æ–‡ä»¶ç³»ç»Ÿã€çº¿ç¨‹ï¼‰ï¼Œå› æ­¤éœ€è¦ä½¿ç”¨ <code>#![no_std]</code> å±æ€§ç¦ç”¨æ ‡å‡†åº“ï¼Œä»…ä½¿ç”¨ <code>core</code> åº“ã€‚</li>
<li><strong>embedded-hal</strong>: è¿™æ˜¯ä¸€ä¸ªç¡¬ä»¶æŠ½è±¡å±‚ï¼ˆHardware Abstraction Layerï¼‰çš„ Trait é›†åˆã€‚é©±åŠ¨ç¨‹åºç¼–å†™è€…åªéœ€é’ˆå¯¹ <code>embedded-hal</code> ç¼–å†™ä»£ç ï¼Œå³å¯åœ¨ä»»ä½•å®ç°äº†è¯¥ HAL çš„èŠ¯ç‰‡ä¸Šè¿è¡Œã€‚</li>
<li><strong>PAC (Peripheral Access Crate)</strong>: æä¾›å¯¹èŠ¯ç‰‡å¯„å­˜å™¨çš„åº•å±‚è®¿é—®ã€‚</li>
<li><strong>Board Support Crate (BSP)</strong>: é’ˆå¯¹ç‰¹å®šå¼€å‘æ¿çš„å°è£…ã€‚</li>
</ol>
<h2 id="æœ¬æ—¥é¡¹ç›®-embedded-demo"><a class="header" href="#æœ¬æ—¥é¡¹ç›®-embedded-demo">æœ¬æ—¥é¡¹ç›®: <code>embedded-demo</code></a></h2>
<p>ç”±äºåœ¨é€šç”¨è®¡ç®—æœºï¼ˆHostï¼‰ä¸Šæ— æ³•ç›´æ¥è¿è¡Œé’ˆå¯¹ç‰¹å®šå¾®æ§åˆ¶å™¨ï¼ˆå¦‚ STM32, ESP32ï¼‰çš„ä»£ç ï¼Œæœ¬é¡¹ç›®å±•ç¤ºäº†å¦‚ä½•ç¼–å†™<strong>å¹³å°æ— å…³</strong>çš„é©±åŠ¨ç¨‹åºï¼Œå¹¶åœ¨ Host ä¸Šè¿›è¡Œæ¨¡æ‹Ÿè¿è¡Œã€‚</p>
<h3 id="é¡¹ç›®ç»“æ„-1"><a class="header" href="#é¡¹ç›®ç»“æ„-1">é¡¹ç›®ç»“æ„</a></h3>
<ul>
<li><code>src/lib.rs</code>: åŒ…å«ä¸€ä¸ªé€šç”¨çš„ <code>Blinky</code> é©±åŠ¨ã€‚å®ƒä¾èµ–äº <code>embedded-hal</code>ï¼Œä¸ä¾èµ–äºå…·ä½“ç¡¬ä»¶ï¼Œä¹Ÿä¸ä¾èµ– <code>std</code>ã€‚è¿™æ„å‘³ç€è¿™æ®µä»£ç å¯ä»¥ç›´æ¥ç¼–è¯‘å¹¶è¿è¡Œåœ¨çœŸæ­£çš„å¾®æ§åˆ¶å™¨ä¸Šã€‚</li>
<li><code>src/main.rs</code>: è¿™æ˜¯ä¸€ä¸ªåœ¨ Host (Windows/Linux/macOS) ä¸Šè¿è¡Œçš„ç¨‹åºã€‚å®ƒå®ç°äº† <code>embedded-hal</code> å®šä¹‰çš„ Traits (<code>OutputPin</code>, <code>DelayNs</code>) çš„æ¨¡æ‹Ÿç‰ˆæœ¬ï¼ˆMockï¼‰ï¼Œå¹¶ä½¿ç”¨ <code>Blinky</code> é©±åŠ¨æ¥æ§åˆ¶è¿™ä¸ªâ€œè™šæ‹Ÿç¡¬ä»¶â€ã€‚</li>
</ul>
<h3 id="è¿è¡Œæ–¹å¼"><a class="header" href="#è¿è¡Œæ–¹å¼">è¿è¡Œæ–¹å¼</a></h3>
<p>åœ¨ <code>embedded-demo</code> ç›®å½•ä¸‹è¿è¡Œï¼š</p>
<pre><code class="language-bash">cargo run
</code></pre>
<p>ä½ å°†çœ‹åˆ°ç»ˆç«¯è¾“å‡ºæ¨¡æ‹Ÿçš„ LED å¼€å…³çŠ¶æ€ï¼Œè¿™è¯æ˜äº†æˆ‘ä»¬çš„é©±åŠ¨é€»è¾‘æ˜¯æ­£ç¡®çš„ã€‚</p>
<h3 id="å¦‚ä½•è¿ç§»åˆ°çœŸå®ç¡¬ä»¶"><a class="header" href="#å¦‚ä½•è¿ç§»åˆ°çœŸå®ç¡¬ä»¶">å¦‚ä½•è¿ç§»åˆ°çœŸå®ç¡¬ä»¶ï¼Ÿ</a></h3>
<p>è¦åœ¨çœŸå®ç¡¬ä»¶ï¼ˆä¾‹å¦‚ STM32F103ï¼‰ä¸Šè¿è¡Œ <code>Blinky</code>ï¼Œä½ éœ€è¦ï¼š</p>
<ol>
<li>åˆ›å»ºä¸€ä¸ªæ–°çš„ Binary Target (é€šå¸¸åœ¨ <code>examples/</code> ä¸‹)ã€‚</li>
<li>å¼•å…¥èŠ¯ç‰‡çš„ HAL åº“ï¼ˆå¦‚ <code>stm32f1xx-hal</code>ï¼‰ã€‚</li>
<li>åœ¨ <code>main</code> å‡½æ•°ä¸­åˆå§‹åŒ–ç¡¬ä»¶ï¼Œè·å–çœŸæ­£çš„ GPIO å¼•è„šå’Œå»¶æ—¶å™¨ã€‚</li>
<li>å°†è¿™äº›çœŸæ­£çš„ç¡¬ä»¶å¯¹è±¡ä¼ é€’ç»™ <code>Blinky::new()</code>ã€‚</li>
<li>ä½¿ç”¨ <code>cargo build --target thumbv7m-none-eabihf</code> ç¼–è¯‘ã€‚</li>
</ol>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-86-æ€§èƒ½åˆ†æå·¥å…·-flamegraph-1"><a class="header" href="#day-86-æ€§èƒ½åˆ†æå·¥å…·-flamegraph-1">Day 86: æ€§èƒ½åˆ†æå·¥å…· (Flamegraph)</a></h1>
<h2 id="å­¦ä¹ ç›®æ ‡-16"><a class="header" href="#å­¦ä¹ ç›®æ ‡-16">å­¦ä¹ ç›®æ ‡</a></h2>
<ul>
<li>æŒæ¡æ€§èƒ½åˆ†æå·¥å…·</li>
<li>å­¦ä¹ ç«ç„°å›¾åˆ†æ</li>
<li>ç†è§£æ€§èƒ½ç“¶é¢ˆè¯†åˆ«</li>
<li>æŒæ¡åŸºå‡†æµ‹è¯•æ–¹æ³•</li>
</ul>
<h2 id="æ€§èƒ½åˆ†æå·¥å…·æ¦‚è§ˆ"><a class="header" href="#æ€§èƒ½åˆ†æå·¥å…·æ¦‚è§ˆ">æ€§èƒ½åˆ†æå·¥å…·æ¦‚è§ˆ</a></h2>
<h3 id="å·¥å…·åˆ—è¡¨"><a class="header" href="#å·¥å…·åˆ—è¡¨">å·¥å…·åˆ—è¡¨</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>å·¥å…·</th><th>ç”¨é€”</th><th>å¹³å°</th></tr>
</thead>
<tbody>
<tr><td><strong>cargo-flamegraph</strong></td><td>CPU ç«ç„°å›¾</td><td>Linux, macOS</td></tr>
<tr><td><strong>perf</strong></td><td>Linux æ€§èƒ½åˆ†æ</td><td>Linux</td></tr>
<tr><td><strong>Instruments</strong></td><td>macOS æ€§èƒ½åˆ†æ</td><td>macOS</td></tr>
<tr><td><strong>valgrind</strong></td><td>å†…å­˜åˆ†æ</td><td>Linux, macOS</td></tr>
<tr><td><strong>heaptrack</strong></td><td>å †å†…å­˜åˆ†æ</td><td>Linux</td></tr>
<tr><td><strong>criterion</strong></td><td>åŸºå‡†æµ‹è¯•</td><td>All</td></tr>
</tbody>
</table>
</div>
<h2 id="flamegraph-å®‰è£…å’Œä½¿ç”¨"><a class="header" href="#flamegraph-å®‰è£…å’Œä½¿ç”¨">Flamegraph å®‰è£…å’Œä½¿ç”¨</a></h2>
<h3 id="å®‰è£…-1"><a class="header" href="#å®‰è£…-1">å®‰è£…</a></h3>
<pre><code class="language-bash"># å®‰è£… cargo-flamegraph
cargo install flamegraph

# Linux éœ€è¦å®‰è£… perf
sudo apt-get install linux-tools-common linux-tools-generic

# macOS ä½¿ç”¨ DTrace (å·²å†…ç½®)
</code></pre>
<h3 id="åŸºæœ¬ä½¿ç”¨-2"><a class="header" href="#åŸºæœ¬ä½¿ç”¨-2">åŸºæœ¬ä½¿ç”¨</a></h3>
<pre><code class="language-bash"># ç”Ÿæˆç«ç„°å›¾
cargo flamegraph --bin myapp

# æŒ‡å®šè¾“å‡ºæ–‡ä»¶
cargo flamegraph --bin myapp -o my-flamegraph.svg

# åˆ†æç‰¹å®šåŠŸèƒ½
cargo flamegraph --bin myapp -- --bench

# ä½¿ç”¨ release æ¨¡å¼
cargo flamegraph --release --bin myapp
</code></pre>
<h3 id="ç¤ºä¾‹ç¨‹åº"><a class="header" href="#ç¤ºä¾‹ç¨‹åº">ç¤ºä¾‹ç¨‹åº</a></h3>
<pre class="playground"><code class="language-rust">// src/main.rs
use std::time::Duration;
use std::thread;

fn expensive_computation() {
    let mut sum = 0u64;
    for i in 0..10_000_000 {
        sum = sum.wrapping_add(i);
    }
}

fn io_operation() {
    thread::sleep(Duration::from_millis(100));
}

fn process_data() {
    for _ in 0..10 {
        expensive_computation();
    }
}

fn main() {
    println!("Starting performance test...");
    
    for _ in 0..5 {
        process_data();
        io_operation();
    }
    
    println!("Performance test completed");
}</code></pre>
<h2 id="ç«ç„°å›¾è§£è¯»"><a class="header" href="#ç«ç„°å›¾è§£è¯»">ç«ç„°å›¾è§£è¯»</a></h2>
<h3 id="ç«ç„°å›¾ç»“æ„"><a class="header" href="#ç«ç„°å›¾ç»“æ„">ç«ç„°å›¾ç»“æ„</a></h3>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         main (100%)                 â”‚  â† æœ€é¡¶å±‚ï¼šç¨‹åºå…¥å£
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ process_dataâ”‚    io_operation       â”‚  â† ç¬¬äºŒå±‚ï¼šä¸»è¦å‡½æ•°
â”‚   (70%)     â”‚       (30%)           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                       â”‚
â”‚ expensive_  â”‚                       â”‚  â† ç¬¬ä¸‰å±‚ï¼šå…·ä½“å®ç°
â”‚ computation â”‚                       â”‚
â”‚   (70%)     â”‚                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 id="å…³é”®æŒ‡æ ‡"><a class="header" href="#å…³é”®æŒ‡æ ‡">å…³é”®æŒ‡æ ‡</a></h3>
<ul>
<li><strong>å®½åº¦</strong>: å‡½æ•°å ç”¨ CPU æ—¶é—´æ¯”ä¾‹</li>
<li><strong>é¢œè‰²</strong>: é€šå¸¸éšæœºï¼Œç”¨äºåŒºåˆ†ä¸åŒå‡½æ•°</li>
<li><strong>é«˜åº¦</strong>: è°ƒç”¨æ ˆæ·±åº¦</li>
</ul>
<h3 id="åˆ†æè¦ç‚¹"><a class="header" href="#åˆ†æè¦ç‚¹">åˆ†æè¦ç‚¹</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// çƒ­ç‚¹å‡½æ•°è¯†åˆ«
// 1. å®½åº¦æœ€å¤§çš„å‡½æ•° = CPU æ—¶é—´æœ€å¤š
// 2. å¹³é¡¶ = è¯¥å‡½æ•°æœ¬èº«è€—æ—¶
// 3. å°–é¡¶ = è°ƒç”¨å…¶ä»–å‡½æ•°è€—æ—¶

// ä¼˜åŒ–ç›®æ ‡
// - å‡å°‘å®½å‡½æ•°çš„æ‰§è¡Œæ—¶é—´
// - å‡å°‘å‡½æ•°è°ƒç”¨æ¬¡æ•°
// - ä¼˜åŒ–ç®—æ³•å¤æ‚åº¦
<span class="boring">}</span></code></pre>
<h2 id="perf-å·¥å…·ä½¿ç”¨"><a class="header" href="#perf-å·¥å…·ä½¿ç”¨">perf å·¥å…·ä½¿ç”¨</a></h2>
<h3 id="åŸºæœ¬å‘½ä»¤"><a class="header" href="#åŸºæœ¬å‘½ä»¤">åŸºæœ¬å‘½ä»¤</a></h3>
<pre><code class="language-bash"># è®°å½•æ€§èƒ½æ•°æ®
perf record -g ./target/release/myapp

# æŸ¥çœ‹æŠ¥å‘Š
perf report

# å®æ—¶ç›‘æ§
perf top

# ç»Ÿè®¡ä¿¡æ¯
perf stat ./target/release/myapp
</code></pre>
<h3 id="é«˜çº§ç”¨æ³•"><a class="header" href="#é«˜çº§ç”¨æ³•">é«˜çº§ç”¨æ³•</a></h3>
<pre><code class="language-bash"># è®°å½•ç‰¹å®šäº‹ä»¶
perf record -e cycles,instructions -g ./target/release/myapp

# è®°å½•ç‰¹å®š CPU
perf record -C 0 -g ./target/release/myapp

# è®°å½•ç‰¹å®šè¿›ç¨‹
perf record -p &lt;PID&gt; -g

# ç”Ÿæˆç«ç„°å›¾
perf script | stackcollapse-perf.pl | flamegraph.pl &gt; perf.svg
</code></pre>
<h2 id="criterion-åŸºå‡†æµ‹è¯•"><a class="header" href="#criterion-åŸºå‡†æµ‹è¯•">Criterion åŸºå‡†æµ‹è¯•</a></h2>
<h3 id="å®‰è£…å’Œé…ç½®"><a class="header" href="#å®‰è£…å’Œé…ç½®">å®‰è£…å’Œé…ç½®</a></h3>
<pre><code class="language-toml">[dev-dependencies]
criterion = { version = "0.5", features = ["html_reports"] }

[[bench]]
name = "my_benchmark"
harness = false
</code></pre>
<h3 id="åŸºæœ¬ç¤ºä¾‹-1"><a class="header" href="#åŸºæœ¬ç¤ºä¾‹-1">åŸºæœ¬ç¤ºä¾‹</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// benches/my_benchmark.rs
use criterion::{black_box, criterion_group, criterion_main, Criterion};

fn fibonacci(n: u64) -&gt; u64 {
    match n {
        0 =&gt; 0,
        1 =&gt; 1,
        n =&gt; fibonacci(n - 1) + fibonacci(n - 2),
    }
}

fn fibonacci_iterative(n: u64) -&gt; u64 {
    let mut a = 0;
    let mut b = 1;
    for _ in 0..n {
        let temp = a;
        a = b;
        b = temp + b;
    }
    a
}

fn criterion_benchmark(c: &amp;mut Criterion) {
    c.bench_function("fib 20", |b| {
        b.iter(|| fibonacci(black_box(20)))
    });
    
    c.bench_function("fib_iter 20", |b| {
        b.iter(|| fibonacci_iterative(black_box(20)))
    });
}

criterion_group!(benches, criterion_benchmark);
criterion_main!(benches);
<span class="boring">}</span></code></pre>
<h3 id="è¿è¡ŒåŸºå‡†æµ‹è¯•"><a class="header" href="#è¿è¡ŒåŸºå‡†æµ‹è¯•">è¿è¡ŒåŸºå‡†æµ‹è¯•</a></h3>
<pre><code class="language-bash"># è¿è¡Œæ‰€æœ‰åŸºå‡†æµ‹è¯•
cargo bench

# è¿è¡Œç‰¹å®šåŸºå‡†æµ‹è¯•
cargo bench --bench my_benchmark

# ä¿å­˜åŸºçº¿
cargo bench -- --save-baseline my-baseline

# ä¸åŸºçº¿æ¯”è¾ƒ
cargo bench -- --baseline my-baseline
</code></pre>
<h3 id="é«˜çº§åŸºå‡†æµ‹è¯•"><a class="header" href="#é«˜çº§åŸºå‡†æµ‹è¯•">é«˜çº§åŸºå‡†æµ‹è¯•</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use criterion::{BenchmarkId, Criterion, Throughput};

fn bench_with_input(c: &amp;mut Criterion) {
    let mut group = c.benchmark_group("sorting");
    
    for size in [100, 1000, 10000].iter() {
        group.throughput(Throughput::Elements(*size as u64));
        
        group.bench_with_input(
            BenchmarkId::from_parameter(size),
            size,
            |b, &amp;size| {
                let mut data: Vec&lt;i32&gt; = (0..size).collect();
                b.iter(|| {
                    data.sort();
                });
            },
        );
    }
    
    group.finish();
}
<span class="boring">}</span></code></pre>
<h2 id="å†…å­˜åˆ†æ"><a class="header" href="#å†…å­˜åˆ†æ">å†…å­˜åˆ†æ</a></h2>
<h3 id="valgrind"><a class="header" href="#valgrind">Valgrind</a></h3>
<pre><code class="language-bash"># å†…å­˜æ³„æ¼æ£€æµ‹
valgrind --leak-check=full ./target/release/myapp

# ç¼“å­˜åˆ†æ
valgrind --tool=cachegrind ./target/release/myapp

# è°ƒç”¨å›¾åˆ†æ
valgrind --tool=callgrind ./target/release/myapp
</code></pre>
<h3 id="heaptrack"><a class="header" href="#heaptrack">Heaptrack</a></h3>
<pre><code class="language-bash"># å®‰è£…
sudo apt-get install heaptrack

# è¿è¡Œåˆ†æ
heaptrack ./target/release/myapp

# æŸ¥çœ‹ç»“æœ
heaptrack_gui heaptrack.myapp.*.gz
</code></pre>
<h2 id="å®æˆ˜ç¤ºä¾‹"><a class="header" href="#å®æˆ˜ç¤ºä¾‹">å®æˆ˜ç¤ºä¾‹</a></h2>
<h3 id="1-å­—ç¬¦ä¸²å¤„ç†ä¼˜åŒ–"><a class="header" href="#1-å­—ç¬¦ä¸²å¤„ç†ä¼˜åŒ–">1. å­—ç¬¦ä¸²å¤„ç†ä¼˜åŒ–</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use criterion::{black_box, criterion_group, criterion_main, Criterion};

// æœªä¼˜åŒ–ç‰ˆæœ¬
fn concat_strings_v1(strings: &amp;[&amp;str]) -&gt; String {
    let mut result = String::new();
    for s in strings {
        result = result + s;  // æ¯æ¬¡éƒ½é‡æ–°åˆ†é…
    }
    result
}

// ä¼˜åŒ–ç‰ˆæœ¬ 1: ä½¿ç”¨ push_str
fn concat_strings_v2(strings: &amp;[&amp;str]) -&gt; String {
    let mut result = String::new();
    for s in strings {
        result.push_str(s);
    }
    result
}

// ä¼˜åŒ–ç‰ˆæœ¬ 2: é¢„åˆ†é…å®¹é‡
fn concat_strings_v3(strings: &amp;[&amp;str]) -&gt; String {
    let total_len: usize = strings.iter().map(|s| s.len()).sum();
    let mut result = String::with_capacity(total_len);
    for s in strings {
        result.push_str(s);
    }
    result
}

// ä¼˜åŒ–ç‰ˆæœ¬ 3: ä½¿ç”¨ join
fn concat_strings_v4(strings: &amp;[&amp;str]) -&gt; String {
    strings.join("")
}

fn benchmark_concat(c: &amp;mut Criterion) {
    let strings: Vec&lt;&amp;str&gt; = vec!["hello"; 1000];
    
    c.bench_function("concat_v1", |b| {
        b.iter(|| concat_strings_v1(black_box(&amp;strings)))
    });
    
    c.bench_function("concat_v2", |b| {
        b.iter(|| concat_strings_v2(black_box(&amp;strings)))
    });
    
    c.bench_function("concat_v3", |b| {
        b.iter(|| concat_strings_v3(black_box(&amp;strings)))
    });
    
    c.bench_function("concat_v4", |b| {
        b.iter(|| concat_strings_v4(black_box(&amp;strings)))
    });
}

criterion_group!(benches, benchmark_concat);
criterion_main!(benches);
<span class="boring">}</span></code></pre>
<h3 id="2-é›†åˆæ“ä½œä¼˜åŒ–"><a class="header" href="#2-é›†åˆæ“ä½œä¼˜åŒ–">2. é›†åˆæ“ä½œä¼˜åŒ–</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use std::collections::{HashMap, HashSet};

// æŸ¥æ‰¾é‡å¤å…ƒç´  - æœªä¼˜åŒ–
fn find_duplicates_v1(numbers: &amp;[i32]) -&gt; Vec&lt;i32&gt; {
    let mut duplicates = Vec::new();
    for i in 0..numbers.len() {
        for j in (i + 1)..numbers.len() {
            if numbers[i] == numbers[j] &amp;&amp; !duplicates.contains(&amp;numbers[i]) {
                duplicates.push(numbers[i]);
            }
        }
    }
    duplicates
}

// æŸ¥æ‰¾é‡å¤å…ƒç´  - ä¼˜åŒ–ç‰ˆæœ¬
fn find_duplicates_v2(numbers: &amp;[i32]) -&gt; Vec&lt;i32&gt; {
    let mut seen = HashSet::new();
    let mut duplicates = HashSet::new();
    
    for &amp;num in numbers {
        if !seen.insert(num) {
            duplicates.insert(num);
        }
    }
    
    duplicates.into_iter().collect()
}

fn benchmark_duplicates(c: &amp;mut Criterion) {
    let numbers: Vec&lt;i32&gt; = (0..1000).cycle().take(10000).collect();
    
    c.bench_function("duplicates_v1", |b| {
        b.iter(|| find_duplicates_v1(black_box(&amp;numbers)))
    });
    
    c.bench_function("duplicates_v2", |b| {
        b.iter(|| find_duplicates_v2(black_box(&amp;numbers)))
    });
}
<span class="boring">}</span></code></pre>
<h3 id="3-å¹¶è¡Œå¤„ç†ä¼˜åŒ–"><a class="header" href="#3-å¹¶è¡Œå¤„ç†ä¼˜åŒ–">3. å¹¶è¡Œå¤„ç†ä¼˜åŒ–</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use rayon::prelude::*;

// ä¸²è¡Œå¤„ç†
fn process_serial(data: &amp;[i32]) -&gt; Vec&lt;i32&gt; {
    data.iter()
        .map(|&amp;x| x * x)
        .filter(|&amp;x| x % 2 == 0)
        .collect()
}

// å¹¶è¡Œå¤„ç†
fn process_parallel(data: &amp;[i32]) -&gt; Vec&lt;i32&gt; {
    data.par_iter()
        .map(|&amp;x| x * x)
        .filter(|&amp;x| x % 2 == 0)
        .collect()
}

fn benchmark_parallel(c: &amp;mut Criterion) {
    let data: Vec&lt;i32&gt; = (0..1_000_000).collect();
    
    c.bench_function("serial", |b| {
        b.iter(|| process_serial(black_box(&amp;data)))
    });
    
    c.bench_function("parallel", |b| {
        b.iter(|| process_parallel(black_box(&amp;data)))
    });
}
<span class="boring">}</span></code></pre>
<h2 id="æ€§èƒ½åˆ†ææµç¨‹"><a class="header" href="#æ€§èƒ½åˆ†ææµç¨‹">æ€§èƒ½åˆ†ææµç¨‹</a></h2>
<h3 id="1-è¯†åˆ«ç“¶é¢ˆ"><a class="header" href="#1-è¯†åˆ«ç“¶é¢ˆ">1. è¯†åˆ«ç“¶é¢ˆ</a></h3>
<pre><code class="language-bash"># ç”Ÿæˆç«ç„°å›¾
cargo flamegraph --release --bin myapp

# æŸ¥çœ‹ CPU ä½¿ç”¨æƒ…å†µ
perf stat cargo run --release
</code></pre>
<h3 id="2-åŸºå‡†æµ‹è¯•"><a class="header" href="#2-åŸºå‡†æµ‹è¯•">2. åŸºå‡†æµ‹è¯•</a></h3>
<pre><code class="language-bash"># å»ºç«‹åŸºçº¿
cargo bench -- --save-baseline before

# ä¼˜åŒ–ä»£ç åæµ‹è¯•
cargo bench -- --baseline before
</code></pre>
<h3 id="3-éªŒè¯æ”¹è¿›"><a class="header" href="#3-éªŒè¯æ”¹è¿›">3. éªŒè¯æ”¹è¿›</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// ä½¿ç”¨ criterion æ¯”è¾ƒ
use criterion::Criterion;

fn compare_implementations(c: &amp;mut Criterion) {
    let mut group = c.benchmark_group("comparison");
    
    group.bench_function("old", |b| b.iter(|| old_implementation()));
    group.bench_function("new", |b| b.iter(|| new_implementation()));
    
    group.finish();
}
<span class="boring">}</span></code></pre>
<h2 id="æ€§èƒ½ä¼˜åŒ–æ£€æŸ¥æ¸…å•-1"><a class="header" href="#æ€§èƒ½ä¼˜åŒ–æ£€æŸ¥æ¸…å•-1">æ€§èƒ½ä¼˜åŒ–æ£€æŸ¥æ¸…å•</a></h2>
<ul>
<li><input disabled="" type="checkbox"> ä½¿ç”¨ release æ¨¡å¼ç¼–è¯‘</li>
<li><input disabled="" type="checkbox"> å¯ç”¨ LTO (Link Time Optimization)</li>
<li><input disabled="" type="checkbox"> åˆ†æç«ç„°å›¾æ‰¾å‡ºçƒ­ç‚¹</li>
<li><input disabled="" type="checkbox"> å‡å°‘ä¸å¿…è¦çš„åˆ†é…</li>
<li><input disabled="" type="checkbox"> ä½¿ç”¨åˆé€‚çš„æ•°æ®ç»“æ„</li>
<li><input disabled="" type="checkbox"> è€ƒè™‘å¹¶è¡Œå¤„ç†</li>
<li><input disabled="" type="checkbox"> ç¼“å­˜é‡å¤è®¡ç®—</li>
<li><input disabled="" type="checkbox"> é¿å…ä¸å¿…è¦çš„å…‹éš†</li>
<li><input disabled="" type="checkbox"> ä½¿ç”¨è¿­ä»£å™¨è€Œéå¾ªç¯</li>
<li><input disabled="" type="checkbox"> é¢„åˆ†é…å®¹é‡</li>
</ul>
<h2 id="ç»ƒä¹ -15"><a class="header" href="#ç»ƒä¹ -15">ç»ƒä¹ </a></h2>
<ol>
<li>åˆ†æä¸€ä¸ªå®é™…é¡¹ç›®çš„æ€§èƒ½ç“¶é¢ˆ</li>
<li>ä¼˜åŒ–å­—ç¬¦ä¸²å¤„ç†å‡½æ•°</li>
<li>æ¯”è¾ƒä¸åŒæ’åºç®—æ³•çš„æ€§èƒ½</li>
<li>å®ç°å¹¶è¡Œç‰ˆæœ¬çš„æ•°æ®å¤„ç†</li>
<li>åˆ›å»ºå®Œæ•´çš„åŸºå‡†æµ‹è¯•å¥—ä»¶</li>
</ol>
<h2 id="ä¸‹ä¸€æ­¥-24"><a class="header" href="#ä¸‹ä¸€æ­¥-24">ä¸‹ä¸€æ­¥</a></h2>
<p>Day 87 å°†å­¦ä¹ å†…å­˜ä¼˜åŒ–æŠ€å·§ï¼ŒåŒ…æ‹¬é›¶æ‹·è´ã€å†…å­˜æ± ç­‰ã€‚</p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-87-å†…å­˜ä¼˜åŒ–æŠ€å·§-1"><a class="header" href="#day-87-å†…å­˜ä¼˜åŒ–æŠ€å·§-1">Day 87: å†…å­˜ä¼˜åŒ–æŠ€å·§</a></h1>
<p>è¯¦ç»†å†…å®¹è¯·å‚è€ƒ Day81-90/STAGE6_OVERVIEW.mdã€‚</p>
<h2 id="æ ¸å¿ƒå†…å®¹-6"><a class="header" href="#æ ¸å¿ƒå†…å®¹-6">æ ¸å¿ƒå†…å®¹</a></h2>
<ul>
<li>å†…å­˜å¸ƒå±€ä¼˜åŒ–</li>
<li>é›¶æ‹·è´æŠ€æœ¯</li>
<li>å†…å­˜æ± </li>
<li>è‡ªå®šä¹‰åˆ†é…å™¨</li>
</ul>
<h2 id="ä¸‹ä¸€æ­¥-25"><a class="header" href="#ä¸‹ä¸€æ­¥-25">ä¸‹ä¸€æ­¥</a></h2>
<p>Day 88 å°†å­¦ä¹  SIMD ä¸åº•å±‚ä¼˜åŒ–ã€‚</p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-88-simd-ä¸åº•å±‚ä¼˜åŒ–-1"><a class="header" href="#day-88-simd-ä¸åº•å±‚ä¼˜åŒ–-1">Day 88: SIMD ä¸åº•å±‚ä¼˜åŒ–</a></h1>
<p>è¯¦ç»†å†…å®¹è¯·å‚è€ƒ Day81-90/STAGE6_OVERVIEW.mdã€‚</p>
<h2 id="æ ¸å¿ƒå†…å®¹-7"><a class="header" href="#æ ¸å¿ƒå†…å®¹-7">æ ¸å¿ƒå†…å®¹</a></h2>
<ul>
<li>SIMD æŒ‡ä»¤é›†</li>
<li>å‘é‡åŒ–è®¡ç®—</li>
<li>ç¼–è¯‘å™¨ä¼˜åŒ–</li>
<li>å†…è”æ±‡ç¼–</li>
</ul>
<h2 id="ä¸‹ä¸€æ­¥-26"><a class="header" href="#ä¸‹ä¸€æ­¥-26">ä¸‹ä¸€æ­¥</a></h2>
<p>Day 89 å°†å­¦ä¹ æŒç»­é›†æˆæµæ°´çº¿ã€‚</p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-89-æŒç»­é›†æˆæµæ°´çº¿-1"><a class="header" href="#day-89-æŒç»­é›†æˆæµæ°´çº¿-1">Day 89: æŒç»­é›†æˆæµæ°´çº¿</a></h1>
<p>è¯¦ç»†å†…å®¹è¯·å‚è€ƒ Day81-90/STAGE6_OVERVIEW.mdã€‚</p>
<h2 id="æ ¸å¿ƒå†…å®¹-8"><a class="header" href="#æ ¸å¿ƒå†…å®¹-8">æ ¸å¿ƒå†…å®¹</a></h2>
<ul>
<li>GitHub Actions é…ç½®</li>
<li>è‡ªåŠ¨åŒ–æµ‹è¯•</li>
<li>ä»£ç è¦†ç›–ç‡</li>
<li>è‡ªåŠ¨å‘å¸ƒ</li>
</ul>
<h2 id="ä¸‹ä¸€æ­¥-27"><a class="header" href="#ä¸‹ä¸€æ­¥-27">ä¸‹ä¸€æ­¥</a></h2>
<p>Day 90 å°†å­¦ä¹  Rust ç¼–è¯‘ä¼˜åŒ–ä¸é…ç½®ã€‚</p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-90-rust-ç¼–è¯‘ä¼˜åŒ–ä¸é…ç½®-compiler-optimization"><a class="header" href="#day-90-rust-ç¼–è¯‘ä¼˜åŒ–ä¸é…ç½®-compiler-optimization">Day 90: Rust ç¼–è¯‘ä¼˜åŒ–ä¸é…ç½® (Compiler Optimization)</a></h1>
<h2 id="ç®€ä»‹-1"><a class="header" href="#ç®€ä»‹-1">ç®€ä»‹</a></h2>
<p>æœ¬é¡¹ç›®æ¼”ç¤ºäº†å¦‚ä½•é€šè¿‡é…ç½® <code>Cargo.toml</code> ä¸­çš„ Profile æ¥ä¼˜åŒ– Rust äºŒè¿›åˆ¶æ–‡ä»¶çš„å¤§å°å’Œæ€§èƒ½ã€‚</p>
<h2 id="é…ç½®è¯´æ˜"><a class="header" href="#é…ç½®è¯´æ˜">é…ç½®è¯´æ˜</a></h2>
<p>æˆ‘ä»¬å®šä¹‰äº†ä¸¤ä¸ª Profileï¼š</p>
<ol>
<li><strong>release</strong> (é»˜è®¤): å…³æ³¨æ€§èƒ½ï¼Œå¹³è¡¡ç¼–è¯‘æ—¶é—´ã€‚</li>
<li><strong>min-size</strong>: å…³æ³¨äºŒè¿›åˆ¶æ–‡ä»¶å¤§å°ã€‚</li>
</ol>
<pre><code class="language-toml">[profile.min-size]
inherits = "release"
opt-level = "z"     # ä¼˜åŒ–å¤§å° (Optimize for size)
lto = true          # é“¾æ¥æ—¶ä¼˜åŒ– (Link Time Optimization)
codegen-units = 1   # å‡å°‘å¹¶è¡Œä»£ç ç”Ÿæˆå•å…ƒ (Reduce parallelism for better optimization)
panic = "abort"     # Panic æ—¶ç›´æ¥ç»ˆæ­¢ (Abort on panic, removes unwinding symbols)
strip = true        # å‰¥ç¦»ç¬¦å· (Strip symbols)
</code></pre>
<h2 id="å®éªŒç»“æœ"><a class="header" href="#å®éªŒç»“æœ">å®éªŒç»“æœ</a></h2>
<p>åœ¨æœ¬é¡¹ç›®ä¸­ (åŒ…å« <code>serde</code> å’Œ <code>serde_json</code>)ï¼Œå¯¹æ¯”ç»“æœå¦‚ä¸‹ï¼ˆç¤ºä¾‹ï¼‰ï¼š</p>
<pre><code class="language-bash"># æ„å»º Release ç‰ˆæœ¬
cargo build --release

# æ„å»º Min-Size ç‰ˆæœ¬
cargo build --profile min-size
</code></pre>
<p>æ–‡ä»¶å¤§å°å¯¹æ¯” (approx):</p>
<ul>
<li><code>target/release/optimization-demo</code>: ~560K</li>
<li><code>target/min-size/optimization-demo</code>: ~350K</li>
</ul>
<p><strong>å‡å°‘äº†çº¦ 37% çš„ä½“ç§¯ï¼</strong></p>
<p>æ³¨æ„ï¼š</p>
<ul>
<li><code>strip = true</code> ä¼šç§»é™¤è°ƒè¯•ç¬¦å·ï¼Œä½¿å¾—è°ƒè¯•å˜å¾—å›°éš¾ã€‚</li>
<li><code>panic = "abort"</code> ä¼šå¯¼è‡´ panic æ—¶æ— æ³•æ•è· (catch_unwind)ï¼Œç¨‹åºä¼šç›´æ¥é€€å‡ºã€‚</li>
<li><code>lto = true</code> ä¼šæ˜¾è‘—å¢åŠ ç¼–è¯‘æ—¶é—´ã€‚</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="ç¬¬ä¸ƒé˜¶æ®µæ¯•ä¸šè®¾è®¡-days-91-100---å®Œæ•´æ¦‚è§ˆ"><a class="header" href="#ç¬¬ä¸ƒé˜¶æ®µæ¯•ä¸šè®¾è®¡-days-91-100---å®Œæ•´æ¦‚è§ˆ">ç¬¬ä¸ƒé˜¶æ®µï¼šæ¯•ä¸šè®¾è®¡ (Days 91-100) - å®Œæ•´æ¦‚è§ˆ</a></h1>
<h2 id="é˜¶æ®µç›®æ ‡-2"><a class="header" href="#é˜¶æ®µç›®æ ‡-2">é˜¶æ®µç›®æ ‡</a></h2>
<p>ç»¼åˆè¿ç”¨å‰ 90 å¤©æ‰€å­¦çŸ¥è¯†ï¼Œå®Œæˆä¸€ä¸ªç”Ÿäº§çº§åˆ«çš„å®Œæ•´é¡¹ç›®ã€‚</p>
<h2 id="é¡¹ç›®é€‰é¢˜å»ºè®®"><a class="header" href="#é¡¹ç›®é€‰é¢˜å»ºè®®">é¡¹ç›®é€‰é¢˜å»ºè®®</a></h2>
<h3 id="é€‰é¡¹-1-åˆ†å¸ƒå¼ä»»åŠ¡è°ƒåº¦ç³»ç»Ÿ"><a class="header" href="#é€‰é¡¹-1-åˆ†å¸ƒå¼ä»»åŠ¡è°ƒåº¦ç³»ç»Ÿ">é€‰é¡¹ 1: åˆ†å¸ƒå¼ä»»åŠ¡è°ƒåº¦ç³»ç»Ÿ</a></h3>
<p><strong>æŠ€æœ¯æ ˆï¼š</strong></p>
<ul>
<li>Tokio å¼‚æ­¥è¿è¡Œæ—¶</li>
<li>gRPC æœåŠ¡é—´é€šä¿¡</li>
<li>Redis ä»»åŠ¡é˜Ÿåˆ—</li>
<li>PostgreSQL æŒä¹…åŒ–</li>
<li>Raft å…±è¯†ç®—æ³•</li>
</ul>
<p><strong>æ ¸å¿ƒåŠŸèƒ½ï¼š</strong></p>
<ul>
<li>ä»»åŠ¡æäº¤å’Œè°ƒåº¦</li>
<li>åˆ†å¸ƒå¼æ‰§è¡Œ</li>
<li>å¤±è´¥é‡è¯•</li>
<li>ç›‘æ§å’Œæ—¥å¿—</li>
<li>Web ç®¡ç†ç•Œé¢</li>
</ul>
<h3 id="é€‰é¡¹-2-å®æ—¶èŠå¤©ç³»ç»Ÿ"><a class="header" href="#é€‰é¡¹-2-å®æ—¶èŠå¤©ç³»ç»Ÿ">é€‰é¡¹ 2: å®æ—¶èŠå¤©ç³»ç»Ÿ</a></h3>
<p><strong>æŠ€æœ¯æ ˆï¼š</strong></p>
<ul>
<li>Axum Web æ¡†æ¶</li>
<li>WebSocket å®æ—¶é€šä¿¡</li>
<li>Redis Pub/Sub</li>
<li>PostgreSQL æ¶ˆæ¯å­˜å‚¨</li>
<li>JWT è®¤è¯</li>
</ul>
<p><strong>æ ¸å¿ƒåŠŸèƒ½ï¼š</strong></p>
<ul>
<li>ç”¨æˆ·è®¤è¯</li>
<li>å®æ—¶æ¶ˆæ¯</li>
<li>ç¾¤ç»„èŠå¤©</li>
<li>æ–‡ä»¶ä¼ è¾“</li>
<li>æ¶ˆæ¯å†å²</li>
</ul>
<h3 id="é€‰é¡¹-3-å¾®æœåŠ¡-api-ç½‘å…³"><a class="header" href="#é€‰é¡¹-3-å¾®æœåŠ¡-api-ç½‘å…³">é€‰é¡¹ 3: å¾®æœåŠ¡ API ç½‘å…³</a></h3>
<p><strong>æŠ€æœ¯æ ˆï¼š</strong></p>
<ul>
<li>Axum/Actix-web</li>
<li>Tower ä¸­é—´ä»¶</li>
<li>Redis ç¼“å­˜</li>
<li>Prometheus ç›‘æ§</li>
<li>Jaeger é“¾è·¯è¿½è¸ª</li>
</ul>
<p><strong>æ ¸å¿ƒåŠŸèƒ½ï¼š</strong></p>
<ul>
<li>è·¯ç”±è½¬å‘</li>
<li>è´Ÿè½½å‡è¡¡</li>
<li>é™æµç†”æ–­</li>
<li>è®¤è¯æˆæƒ</li>
<li>ç›‘æ§å‘Šè­¦</li>
</ul>
<h3 id="é€‰é¡¹-4-é«˜æ€§èƒ½-kv-å­˜å‚¨"><a class="header" href="#é€‰é¡¹-4-é«˜æ€§èƒ½-kv-å­˜å‚¨">é€‰é¡¹ 4: é«˜æ€§èƒ½ KV å­˜å‚¨</a></h3>
<p><strong>æŠ€æœ¯æ ˆï¼š</strong></p>
<ul>
<li>Tokio å¼‚æ­¥ I/O</li>
<li>LSM-Tree å­˜å‚¨å¼•æ“</li>
<li>RESP åè®®</li>
<li>Raft å¤åˆ¶</li>
<li>RocksDB åç«¯</li>
</ul>
<p><strong>æ ¸å¿ƒåŠŸèƒ½ï¼š</strong></p>
<ul>
<li>åŸºæœ¬ KV æ“ä½œ</li>
<li>æŒä¹…åŒ–</li>
<li>ä¸»ä»å¤åˆ¶</li>
<li>é›†ç¾¤æ¨¡å¼</li>
<li>æ€§èƒ½ä¼˜åŒ–</li>
</ul>
<h2 id="è¯¦ç»†æ—¶é—´è§„åˆ’"><a class="header" href="#è¯¦ç»†æ—¶é—´è§„åˆ’">è¯¦ç»†æ—¶é—´è§„åˆ’</a></h2>
<h3 id="day-91-é€‰é¢˜ä¸æ¶æ„è®¾è®¡"><a class="header" href="#day-91-é€‰é¢˜ä¸æ¶æ„è®¾è®¡">Day 91: é€‰é¢˜ä¸æ¶æ„è®¾è®¡</a></h3>
<h4 id="éœ€æ±‚åˆ†æ"><a class="header" href="#éœ€æ±‚åˆ†æ">éœ€æ±‚åˆ†æ</a></h4>
<pre><code class="language-markdown">## åŠŸèƒ½éœ€æ±‚
1. æ ¸å¿ƒåŠŸèƒ½åˆ—è¡¨
2. ç”¨æˆ·è§’è‰²å®šä¹‰
3. ä½¿ç”¨åœºæ™¯æè¿°
4. æ€§èƒ½æŒ‡æ ‡è¦æ±‚

## éåŠŸèƒ½éœ€æ±‚
1. å¯ç”¨æ€§ï¼š99.9%
2. æ€§èƒ½ï¼šQPS &gt; 10000
3. å¯æ‰©å±•æ€§ï¼šæ°´å¹³æ‰©å±•
4. å®‰å…¨æ€§ï¼šè®¤è¯æˆæƒ
</code></pre>
<h4 id="æ¶æ„è®¾è®¡"><a class="header" href="#æ¶æ„è®¾è®¡">æ¶æ„è®¾è®¡</a></h4>
<blockquote>
<p>ğŸ’¡ <strong>è¯¦ç»†æ¶æ„æ–‡æ¡£</strong>: æŸ¥çœ‹ <a href="Day91-100/ARCHITECTURE.html">DTask Architecture Design</a> è·å–ç³»ç»Ÿæ¶æ„å›¾ã€æ—¶åºå›¾ã€çŠ¶æ€æœºå›¾å’Œ ER å›¾ã€‚</p>
</blockquote>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å®¢æˆ·ç«¯     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      API Gateway            â”‚
â”‚  (è®¤è¯/é™æµ/è·¯ç”±)            â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”
â”‚   æœåŠ¡ A    â”‚ æœåŠ¡ B  â”‚ æœåŠ¡ Câ”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”¬â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”˜
       â”‚           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
â”‚    æ•°æ®å±‚ (DB/Cache)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h4 id="æŠ€æœ¯é€‰å‹æ–‡æ¡£"><a class="header" href="#æŠ€æœ¯é€‰å‹æ–‡æ¡£">æŠ€æœ¯é€‰å‹æ–‡æ¡£</a></h4>
<pre><code class="language-markdown">## åç«¯æ¡†æ¶
- **é€‰æ‹©**: Axum
- **ç†ç”±**: ç±»å‹å®‰å…¨ã€æ€§èƒ½ä¼˜ç§€ã€ç”Ÿæ€å®Œå–„

## æ•°æ®åº“
- **é€‰æ‹©**: PostgreSQL + Redis
- **ç†ç”±**: å¯é æ€§é«˜ã€åŠŸèƒ½ä¸°å¯Œ

## éƒ¨ç½²æ–¹æ¡ˆ
- **é€‰æ‹©**: Docker + Kubernetes
- **ç†ç”±**: å®¹å™¨åŒ–ã€æ˜“æ‰©å±•
</code></pre>
<h3 id="day-92-åŸå‹éªŒè¯-poc"><a class="header" href="#day-92-åŸå‹éªŒè¯-poc">Day 92: åŸå‹éªŒè¯ (PoC)</a></h3>
<h4 id="æ ¸å¿ƒåŠŸèƒ½éªŒè¯"><a class="header" href="#æ ¸å¿ƒåŠŸèƒ½éªŒè¯">æ ¸å¿ƒåŠŸèƒ½éªŒè¯</a></h4>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// éªŒè¯å…³é”®æŠ€æœ¯å¯è¡Œæ€§

// 1. æ•°æ®åº“è¿æ¥
async fn test_db_connection() -&gt; Result&lt;()&gt; {
    let pool = PgPoolOptions::new()
        .max_connections(5)
        .connect("postgres://localhost/testdb")
        .await?;
    
    sqlx::query("SELECT 1").fetch_one(&amp;pool).await?;
    println!("âœ“ Database connection works");
    Ok(())
}

// 2. ç¼“å­˜ç³»ç»Ÿ
async fn test_cache() -&gt; Result&lt;()&gt; {
    let client = redis::Client::open("redis://127.0.0.1/")?;
    let mut con = client.get_async_connection().await?;
    
    redis::cmd("SET")
        .arg("test_key")
        .arg("test_value")
        .query_async(&amp;mut con)
        .await?;
    
    println!("âœ“ Cache system works");
    Ok(())
}

// 3. æ¶ˆæ¯é˜Ÿåˆ—
async fn test_message_queue() -&gt; Result&lt;()&gt; {
    let (tx, mut rx) = tokio::sync::mpsc::channel(100);
    
    tokio::spawn(async move {
        while let Some(msg) = rx.recv().await {
            println!("Received: {}", msg);
        }
    });
    
    tx.send("test message".to_string()).await?;
    println!("âœ“ Message queue works");
    Ok(())
}
<span class="boring">}</span></code></pre>
<h4 id="æ€§èƒ½åŸºå‡†æµ‹è¯•"><a class="header" href="#æ€§èƒ½åŸºå‡†æµ‹è¯•">æ€§èƒ½åŸºå‡†æµ‹è¯•</a></h4>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use criterion::{black_box, criterion_group, criterion_main, Criterion};

fn benchmark_core_operations(c: &amp;mut Criterion) {
    c.bench_function("db_query", |b| {
        b.iter(|| {
            // æ•°æ®åº“æŸ¥è¯¢åŸºå‡†
        });
    });
    
    c.bench_function("cache_get", |b| {
        b.iter(|| {
            // ç¼“å­˜è¯»å–åŸºå‡†
        });
    });
}

criterion_group!(benches, benchmark_core_operations);
criterion_main!(benches);
<span class="boring">}</span></code></pre>
<h3 id="day-93-94-æ ¸å¿ƒæ¨¡å—å¼€å‘"><a class="header" href="#day-93-94-æ ¸å¿ƒæ¨¡å—å¼€å‘">Day 93-94: æ ¸å¿ƒæ¨¡å—å¼€å‘</a></h3>
<h4 id="é¡¹ç›®ç»“æ„-2"><a class="header" href="#é¡¹ç›®ç»“æ„-2">é¡¹ç›®ç»“æ„</a></h4>
<pre><code>project/
â”œâ”€â”€ Cargo.toml
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.rs
â”‚   â”œâ”€â”€ lib.rs
â”‚   â”œâ”€â”€ api/              # API å±‚
â”‚   â”‚   â”œâ”€â”€ mod.rs
â”‚   â”‚   â”œâ”€â”€ handlers.rs
â”‚   â”‚   â””â”€â”€ routes.rs
â”‚   â”œâ”€â”€ service/          # ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”‚   â”œâ”€â”€ mod.rs
â”‚   â”‚   â”œâ”€â”€ user.rs
â”‚   â”‚   â””â”€â”€ task.rs
â”‚   â”œâ”€â”€ repository/       # æ•°æ®è®¿é—®å±‚
â”‚   â”‚   â”œâ”€â”€ mod.rs
â”‚   â”‚   â”œâ”€â”€ user.rs
â”‚   â”‚   â””â”€â”€ task.rs
â”‚   â”œâ”€â”€ models/           # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ mod.rs
â”‚   â”‚   â”œâ”€â”€ user.rs
â”‚   â”‚   â””â”€â”€ task.rs
â”‚   â”œâ”€â”€ middleware/       # ä¸­é—´ä»¶
â”‚   â”‚   â”œâ”€â”€ mod.rs
â”‚   â”‚   â”œâ”€â”€ auth.rs
â”‚   â”‚   â””â”€â”€ logging.rs
â”‚   â”œâ”€â”€ config/           # é…ç½®
â”‚   â”‚   â”œâ”€â”€ mod.rs
â”‚   â”‚   â””â”€â”€ settings.rs
â”‚   â””â”€â”€ utils/            # å·¥å…·å‡½æ•°
â”‚       â”œâ”€â”€ mod.rs
â”‚       â””â”€â”€ error.rs
â”œâ”€â”€ migrations/           # æ•°æ®åº“è¿ç§»
â”œâ”€â”€ tests/               # é›†æˆæµ‹è¯•
â”œâ”€â”€ benches/             # æ€§èƒ½æµ‹è¯•
â””â”€â”€ docker/              # Docker é…ç½®
</code></pre>
<h4 id="æ ¸å¿ƒä»£ç ç¤ºä¾‹"><a class="header" href="#æ ¸å¿ƒä»£ç ç¤ºä¾‹">æ ¸å¿ƒä»£ç ç¤ºä¾‹</a></h4>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// src/models/user.rs
use serde::{Deserialize, Serialize};
use sqlx::FromRow;

#[derive(Debug, Clone, Serialize, Deserialize, FromRow)]
pub struct User {
    pub id: i32,
    pub username: String,
    pub email: String,
    pub created_at: chrono::DateTime&lt;chrono::Utc&gt;,
}

#[derive(Debug, Deserialize)]
pub struct CreateUser {
    pub username: String,
    pub email: String,
    pub password: String,
}

// src/repository/user.rs
use sqlx::PgPool;
use crate::models::user::{User, CreateUser};

pub struct UserRepository {
    pool: PgPool,
}

impl UserRepository {
    pub fn new(pool: PgPool) -&gt; Self {
        Self { pool }
    }
    
    pub async fn create(&amp;self, user: CreateUser) -&gt; Result&lt;User&gt; {
        let user = sqlx::query_as!(
            User,
            r#"
            INSERT INTO users (username, email, password_hash)
            VALUES ($1, $2, $3)
            RETURNING id, username, email, created_at
            "#,
            user.username,
            user.email,
            hash_password(&amp;user.password)?
        )
        .fetch_one(&amp;self.pool)
        .await?;
        
        Ok(user)
    }
    
    pub async fn find_by_id(&amp;self, id: i32) -&gt; Result&lt;Option&lt;User&gt;&gt; {
        let user = sqlx::query_as!(
            User,
            "SELECT id, username, email, created_at FROM users WHERE id = $1",
            id
        )
        .fetch_optional(&amp;self.pool)
        .await?;
        
        Ok(user)
    }
}

// src/service/user.rs
use crate::repository::user::UserRepository;
use crate::models::user::{User, CreateUser};

pub struct UserService {
    repo: UserRepository,
}

impl UserService {
    pub fn new(repo: UserRepository) -&gt; Self {
        Self { repo }
    }
    
    pub async fn register(&amp;self, user: CreateUser) -&gt; Result&lt;User&gt; {
        // ä¸šåŠ¡é€»è¾‘éªŒè¯
        if user.username.len() &lt; 3 {
            return Err(Error::InvalidUsername);
        }
        
        // è°ƒç”¨ä»“å‚¨å±‚
        self.repo.create(user).await
    }
    
    pub async fn get_user(&amp;self, id: i32) -&gt; Result&lt;User&gt; {
        self.repo
            .find_by_id(id)
            .await?
            .ok_or(Error::UserNotFound)
    }
}

// src/api/handlers.rs
use axum::{extract::{State, Path}, Json};
use crate::service::user::UserService;
use crate::models::user::{User, CreateUser};

pub async fn register_user(
    State(service): State&lt;UserService&gt;,
    Json(payload): Json&lt;CreateUser&gt;,
) -&gt; Result&lt;Json&lt;User&gt;&gt; {
    let user = service.register(payload).await?;
    Ok(Json(user))
}

pub async fn get_user(
    State(service): State&lt;UserService&gt;,
    Path(id): Path&lt;i32&gt;,
) -&gt; Result&lt;Json&lt;User&gt;&gt; {
    let user = service.get_user(id).await?;
    Ok(Json(user))
}
<span class="boring">}</span></code></pre>
<h3 id="day-95-å¤–å›´æ¨¡å—ä¸é›†æˆ"><a class="header" href="#day-95-å¤–å›´æ¨¡å—ä¸é›†æˆ">Day 95: å¤–å›´æ¨¡å—ä¸é›†æˆ</a></h3>
<h4 id="è®¤è¯ä¸­é—´ä»¶"><a class="header" href="#è®¤è¯ä¸­é—´ä»¶">è®¤è¯ä¸­é—´ä»¶</a></h4>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use axum::{
    extract::Request,
    middleware::Next,
    response::Response,
    http::StatusCode,
};
use jsonwebtoken::{decode, DecodingKey, Validation};

pub async fn auth_middleware(
    mut req: Request,
    next: Next,
) -&gt; Result&lt;Response, StatusCode&gt; {
    let auth_header = req
        .headers()
        .get("Authorization")
        .and_then(|h| h.to_str().ok())
        .ok_or(StatusCode::UNAUTHORIZED)?;
    
    let token = auth_header
        .strip_prefix("Bearer ")
        .ok_or(StatusCode::UNAUTHORIZED)?;
    
    let claims = decode::&lt;Claims&gt;(
        token,
        &amp;DecodingKey::from_secret("secret".as_ref()),
        &amp;Validation::default(),
    )
    .map_err(|_| StatusCode::UNAUTHORIZED)?;
    
    req.extensions_mut().insert(claims.claims);
    
    Ok(next.run(req).await)
}
<span class="boring">}</span></code></pre>
<h4 id="æ—¥å¿—ç³»ç»Ÿ"><a class="header" href="#æ—¥å¿—ç³»ç»Ÿ">æ—¥å¿—ç³»ç»Ÿ</a></h4>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use tracing::{info, error, warn};
use tracing_subscriber::{layer::SubscriberExt, util::SubscriberInitExt};

pub fn init_logging() {
    tracing_subscriber::registry()
        .with(
            tracing_subscriber::EnvFilter::try_from_default_env()
                .unwrap_or_else(|_| "info".into()),
        )
        .with(tracing_subscriber::fmt::layer())
        .init();
}

// ä½¿ç”¨
info!("Server started on port 8080");
error!("Database connection failed: {}", err);
<span class="boring">}</span></code></pre>
<h4 id="ç›‘æ§æŒ‡æ ‡"><a class="header" href="#ç›‘æ§æŒ‡æ ‡">ç›‘æ§æŒ‡æ ‡</a></h4>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use prometheus::{Counter, Histogram, Registry};

pub struct Metrics {
    pub requests_total: Counter,
    pub request_duration: Histogram,
}

impl Metrics {
    pub fn new(registry: &amp;Registry) -&gt; Self {
        let requests_total = Counter::new(
            "http_requests_total",
            "Total HTTP requests"
        ).unwrap();
        
        let request_duration = Histogram::new(
            "http_request_duration_seconds",
            "HTTP request duration"
        ).unwrap();
        
        registry.register(Box::new(requests_total.clone())).unwrap();
        registry.register(Box::new(request_duration.clone())).unwrap();
        
        Self {
            requests_total,
            request_duration,
        }
    }
}
<span class="boring">}</span></code></pre>
<h3 id="day-96-æ€§èƒ½æµ‹è¯•ä¸è°ƒä¼˜"><a class="header" href="#day-96-æ€§èƒ½æµ‹è¯•ä¸è°ƒä¼˜">Day 96: æ€§èƒ½æµ‹è¯•ä¸è°ƒä¼˜</a></h3>
<h4 id="è´Ÿè½½æµ‹è¯•"><a class="header" href="#è´Ÿè½½æµ‹è¯•">è´Ÿè½½æµ‹è¯•</a></h4>
<pre><code class="language-bash"># ä½¿ç”¨ wrk è¿›è¡Œè´Ÿè½½æµ‹è¯•
wrk -t12 -c400 -d30s http://localhost:8080/api/users

# ä½¿ç”¨ ab (Apache Bench)
ab -n 10000 -c 100 http://localhost:8080/api/users

# ä½¿ç”¨ hey
hey -n 10000 -c 100 http://localhost:8080/api/users
</code></pre>
<h4 id="æ€§èƒ½åˆ†æ"><a class="header" href="#æ€§èƒ½åˆ†æ">æ€§èƒ½åˆ†æ</a></h4>
<pre><code class="language-bash"># CPU åˆ†æ
cargo flamegraph --bin myapp

# å†…å­˜åˆ†æ
valgrind --tool=massif ./target/release/myapp

# æ€§èƒ½åŸºå‡†
cargo bench
</code></pre>
<h4 id="ä¼˜åŒ–æ¸…å•"><a class="header" href="#ä¼˜åŒ–æ¸…å•">ä¼˜åŒ–æ¸…å•</a></h4>
<pre><code class="language-markdown">- [ ] æ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–ï¼ˆç´¢å¼•ã€æŸ¥è¯¢è®¡åˆ’ï¼‰
- [ ] è¿æ¥æ± é…ç½®è°ƒä¼˜
- [ ] ç¼“å­˜ç­–ç•¥å®æ–½
- [ ] å¼‚æ­¥æ“ä½œä¼˜åŒ–
- [ ] å†…å­˜åˆ†é…ä¼˜åŒ–
- [ ] ç¼–è¯‘ä¼˜åŒ–é…ç½®
- [ ] è´Ÿè½½å‡è¡¡é…ç½®
</code></pre>
<h3 id="day-97-æ–‡æ¡£ç¼–å†™ä¸ä»£ç æ¸…ç†"><a class="header" href="#day-97-æ–‡æ¡£ç¼–å†™ä¸ä»£ç æ¸…ç†">Day 97: æ–‡æ¡£ç¼–å†™ä¸ä»£ç æ¸…ç†</a></h3>
<h4 id="api-æ–‡æ¡£"><a class="header" href="#api-æ–‡æ¡£">API æ–‡æ¡£</a></h4>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use utoipa::{OpenApi, ToSchema};

#[derive(OpenApi)]
#[openapi(
    paths(
        api::handlers::register_user,
        api::handlers::get_user,
    ),
    components(
        schemas(User, CreateUser)
    ),
    tags(
        (name = "users", description = "User management endpoints")
    )
)]
struct ApiDoc;

// ç”Ÿæˆ OpenAPI æ–‡æ¡£
let openapi = ApiDoc::openapi();
<span class="boring">}</span></code></pre>
<h4 id="readme-æ–‡æ¡£"><a class="header" href="#readme-æ–‡æ¡£">README æ–‡æ¡£</a></h4>
<pre><code class="language-markdown"># é¡¹ç›®åç§°

## ç®€ä»‹
ç®€è¦æè¿°é¡¹ç›®åŠŸèƒ½å’Œç‰¹ç‚¹

## åŠŸèƒ½ç‰¹æ€§
- âœ… åŠŸèƒ½ 1
- âœ… åŠŸèƒ½ 2
- âœ… åŠŸèƒ½ 3

## æŠ€æœ¯æ ˆ
- Rust 1.75+
- Axum 0.7
- PostgreSQL 15
- Redis 7

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Rust 1.75+
- Docker &amp; Docker Compose

### å®‰è£…æ­¥éª¤
\`\`\`bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/username/project.git

# å¯åŠ¨æœåŠ¡
docker-compose up -d

# è¿è¡Œè¿ç§»
cargo sqlx migrate run

# å¯åŠ¨åº”ç”¨
cargo run --release
\`\`\`

## API æ–‡æ¡£
è®¿é—® http://localhost:8080/swagger-ui

## æµ‹è¯•
\`\`\`bash
cargo test
\`\`\`

## æ€§èƒ½æŒ‡æ ‡
- QPS: 15000+
- å»¶è¿Ÿ: P99 &lt; 50ms
- å¯ç”¨æ€§: 99.9%

## è®¸å¯è¯
MIT
</code></pre>
<h3 id="day-98-å‘å¸ƒå‡†å¤‡ä¸ç‰ˆæœ¬ç®¡ç†"><a class="header" href="#day-98-å‘å¸ƒå‡†å¤‡ä¸ç‰ˆæœ¬ç®¡ç†">Day 98: å‘å¸ƒå‡†å¤‡ä¸ç‰ˆæœ¬ç®¡ç†</a></h3>
<h4 id="ç‰ˆæœ¬å‘å¸ƒæµç¨‹"><a class="header" href="#ç‰ˆæœ¬å‘å¸ƒæµç¨‹">ç‰ˆæœ¬å‘å¸ƒæµç¨‹</a></h4>
<pre><code class="language-bash"># 1. æ›´æ–°ç‰ˆæœ¬å·
# Cargo.toml
[package]
version = "1.0.0"

# 2. æ›´æ–° CHANGELOG
# CHANGELOG.md
## [1.0.0] - 2024-01-16
### Added
- åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- ç”¨æˆ·è®¤è¯ç³»ç»Ÿ
- æ ¸å¿ƒ API åŠŸèƒ½

### Fixed
- ä¿®å¤å†…å­˜æ³„æ¼é—®é¢˜

# 3. åˆ›å»º Git æ ‡ç­¾
git tag -a v1.0.0 -m "Release version 1.0.0"
git push origin v1.0.0

# 4. æ„å»ºå‘å¸ƒç‰ˆæœ¬
cargo build --release

# 5. åˆ›å»º Docker é•œåƒ
docker build -t myapp:1.0.0 .
docker push myapp:1.0.0
</code></pre>
<h4 id="cicd-é…ç½®"><a class="header" href="#cicd-é…ç½®">CI/CD é…ç½®</a></h4>
<pre><code class="language-yaml"># .github/workflows/release.yml
name: Release

on:
  push:
    tags:
      - 'v*'

jobs:
  release:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      
      - name: Build
        run: cargo build --release
      
      - name: Create Release
        uses: softprops/action-gh-release@v1
        with:
          files: |
            target/release/myapp
            README.md
            CHANGELOG.md
</code></pre>
<h3 id="day-99-é¡¹ç›®å±•ç¤ºä¸å¤ç›˜"><a class="header" href="#day-99-é¡¹ç›®å±•ç¤ºä¸å¤ç›˜">Day 99: é¡¹ç›®å±•ç¤ºä¸å¤ç›˜</a></h3>
<h4 id="é¡¹ç›®å±•ç¤ºæ–‡æ¡£"><a class="header" href="#é¡¹ç›®å±•ç¤ºæ–‡æ¡£">é¡¹ç›®å±•ç¤ºæ–‡æ¡£</a></h4>
<pre><code class="language-markdown"># é¡¹ç›®å±•ç¤º

## é¡¹ç›®æ¦‚è¿°
- **é¡¹ç›®åç§°**: XXX ç³»ç»Ÿ
- **å¼€å‘å‘¨æœŸ**: 10 å¤©
- **ä»£ç è¡Œæ•°**: 5000+
- **æµ‹è¯•è¦†ç›–ç‡**: 85%

## æŠ€æœ¯äº®ç‚¹
1. **é«˜æ€§èƒ½**: QPS è¾¾åˆ° 15000+
2. **é«˜å¯ç”¨**: 99.9% å¯ç”¨æ€§
3. **å¯æ‰©å±•**: æ”¯æŒæ°´å¹³æ‰©å±•
4. **å®‰å…¨æ€§**: å®Œå–„çš„è®¤è¯æˆæƒ

## æ¶æ„è®¾è®¡
[æ¶æ„å›¾]

## æ ¸å¿ƒåŠŸèƒ½æ¼”ç¤º
[åŠŸèƒ½æˆªå›¾/è§†é¢‘]

## æ€§èƒ½æŒ‡æ ‡
| æŒ‡æ ‡ | æ•°å€¼ |
|------|------|
| QPS | 15000+ |
| P99 å»¶è¿Ÿ | 45ms |
| å†…å­˜å ç”¨ | 50MB |
| CPU ä½¿ç”¨ç‡ | 30% |

## é‡åˆ°çš„æŒ‘æˆ˜
1. **æŒ‘æˆ˜ 1**: æ•°æ®åº“æ€§èƒ½ç“¶é¢ˆ
   - **è§£å†³æ–¹æ¡ˆ**: æ·»åŠ ç´¢å¼•ã€æŸ¥è¯¢ä¼˜åŒ–
   
2. **æŒ‘æˆ˜ 2**: å¹¶å‘å®‰å…¨é—®é¢˜
   - **è§£å†³æ–¹æ¡ˆ**: ä½¿ç”¨ Arc&lt;RwLock&gt;

## æœªæ¥æ”¹è¿›
- [ ] æ·»åŠ åˆ†å¸ƒå¼è¿½è¸ª
- [ ] å®ç°æœåŠ¡ç½‘æ ¼
- [ ] æ”¯æŒå¤šç§Ÿæˆ·
</code></pre>
<h4 id="æŠ€æœ¯å¤ç›˜"><a class="header" href="#æŠ€æœ¯å¤ç›˜">æŠ€æœ¯å¤ç›˜</a></h4>
<pre><code class="language-markdown">## å­¦åˆ°çš„ç»éªŒ

### åšå¾—å¥½çš„åœ°æ–¹
1. æ¶æ„è®¾è®¡æ¸…æ™°
2. ä»£ç è´¨é‡é«˜
3. æµ‹è¯•è¦†ç›–å®Œå–„
4. æ–‡æ¡£è¯¦ç»†

### éœ€è¦æ”¹è¿›çš„åœ°æ–¹
1. åˆæœŸè®¾è®¡ä¸å¤Ÿå……åˆ†
2. æŸäº›æ¨¡å—è€¦åˆåº¦é«˜
3. æ€§èƒ½ä¼˜åŒ–ä¸å¤ŸåŠæ—¶

### æŠ€æœ¯æ”¶è·
1. æ·±å…¥ç†è§£å¼‚æ­¥ç¼–ç¨‹
2. æŒæ¡æ•°æ®åº“ä¼˜åŒ–æŠ€å·§
3. å­¦ä¼šæ€§èƒ½åˆ†ææ–¹æ³•
4. æå‡ç³»ç»Ÿè®¾è®¡èƒ½åŠ›
</code></pre>
<h3 id="day-100-æˆä¸º-rustacean-ä¹‹è·¯"><a class="header" href="#day-100-æˆä¸º-rustacean-ä¹‹è·¯">Day 100: æˆä¸º Rustacean ä¹‹è·¯</a></h3>
<h4 id="å­¦ä¹ å›é¡¾"><a class="header" href="#å­¦ä¹ å›é¡¾">å­¦ä¹ å›é¡¾</a></h4>
<pre><code class="language-markdown"># 100 å¤© Rust å­¦ä¹ æ€»ç»“

## ç¬¬ä¸€é˜¶æ®µ (Days 1-15): åŸºç¡€å…¥é—¨
- âœ… å˜é‡å’Œç±»å‹
- âœ… æ‰€æœ‰æƒç³»ç»Ÿ
- âœ… ç»“æ„ä½“å’Œæšä¸¾
- âœ… é”™è¯¯å¤„ç†

## ç¬¬äºŒé˜¶æ®µ (Days 16-30): è¿›é˜¶ç‰¹æ€§
- âœ… é—­åŒ…å’Œè¿­ä»£å™¨
- âœ… æ™ºèƒ½æŒ‡é’ˆ
- âœ… å¹¶å‘ç¼–ç¨‹
- âœ… é«˜çº§ç‰¹æ€§

## ç¬¬ä¸‰é˜¶æ®µ (Days 31-45): å®ç”¨æŠ€èƒ½
- âœ… æ–‡ä»¶ I/O
- âœ… ç½‘ç»œç¼–ç¨‹
- âœ… å¼‚æ­¥ç¼–ç¨‹
- âœ… æ•°æ®åº“æ“ä½œ

## ç¬¬å››é˜¶æ®µ (Days 46-60): é¡¹ç›®å®æˆ˜
- âœ… Redis å…‹éš†é¡¹ç›®
- âœ… é›†ç¾¤æ¨¡å¼
- âœ… æŒä¹…åŒ–
- âœ… CI/CD

## ç¬¬äº”é˜¶æ®µ (Days 61-80): Web å¼€å‘
- âœ… Web æ¡†æ¶
- âœ… æ•°æ®åº“é›†æˆ
- âœ… è®¤è¯æˆæƒ
- âœ… åšå®¢ç³»ç»Ÿ

## ç¬¬å…­é˜¶æ®µ (Days 81-90): ç³»ç»Ÿç¼–ç¨‹
- âœ… æ–‡ä»¶ç³»ç»Ÿ
- âœ… è¿›ç¨‹ç®¡ç†
- âœ… æ€§èƒ½ä¼˜åŒ–
- âœ… å·¥ç¨‹åŒ–

## ç¬¬ä¸ƒé˜¶æ®µ (Days 91-100): æ¯•ä¸šè®¾è®¡
- âœ… å®Œæ•´é¡¹ç›®
- âœ… ç”Ÿäº§éƒ¨ç½²
- âœ… æ€§èƒ½è°ƒä¼˜
- âœ… é¡¹ç›®å±•ç¤º
</code></pre>
<h4 id="ç»§ç»­å­¦ä¹ è·¯å¾„"><a class="header" href="#ç»§ç»­å­¦ä¹ è·¯å¾„">ç»§ç»­å­¦ä¹ è·¯å¾„</a></h4>
<pre><code class="language-markdown">## æ·±å…¥æ–¹å‘

### 1. ç³»ç»Ÿç¼–ç¨‹
- æ“ä½œç³»ç»Ÿå¼€å‘
- åµŒå…¥å¼å¼€å‘
- é©±åŠ¨ç¨‹åºå¼€å‘

### 2. Web å¼€å‘
- å¾®æœåŠ¡æ¶æ„
- äº‘åŸç”Ÿåº”ç”¨
- Serverless

### 3. åŒºå—é“¾
- æ™ºèƒ½åˆçº¦
- å…±è¯†ç®—æ³•
- åŠ å¯†è´§å¸

### 4. æ¸¸æˆå¼€å‘
- Bevy å¼•æ“
- å›¾å½¢ç¼–ç¨‹
- ç‰©ç†å¼•æ“

### 5. æœºå™¨å­¦ä¹ 
- Rust ML åº“
- æ€§èƒ½ä¼˜åŒ–
- æ¨¡å‹éƒ¨ç½²

## æ¨èèµ„æº

### ä¹¦ç±
- The Rust Programming Language
- Programming Rust
- Rust for Rustaceans
- Zero To Production In Rust

### ç¤¾åŒº
- Rust å®˜æ–¹è®ºå›
- Reddit r/rust
- Rust ä¸­æ–‡ç¤¾åŒº
- Discord Rust é¢‘é“

### é¡¹ç›®
- å‚ä¸å¼€æºé¡¹ç›®
- é˜…è¯»ä¼˜ç§€æºç 
- ç¼–å†™è‡ªå·±çš„åº“
- åˆ†äº«æŠ€æœ¯æ–‡ç« 

## æœ€åçš„è¯

æ­å–œä½ å®Œæˆäº† 100 å¤©çš„ Rust å­¦ä¹ ä¹‹æ—…ï¼

ä½ å·²ç»ï¼š
- âœ… æŒæ¡äº† Rust æ ¸å¿ƒæ¦‚å¿µ
- âœ… å®Œæˆäº†å¤šä¸ªå®æˆ˜é¡¹ç›®
- âœ… å…·å¤‡äº†ç”Ÿäº§çº§å¼€å‘èƒ½åŠ›
- âœ… æˆä¸ºäº†çœŸæ­£çš„ Rustacean

ä½†è¿™åªæ˜¯å¼€å§‹ï¼ŒRust çš„ä¸–ç•Œè¿˜æœ‰æ›´å¤šç²¾å½©ç­‰å¾…æ¢ç´¢ã€‚

ä¿æŒå­¦ä¹ ï¼Œä¿æŒç¼–ç ï¼Œä¿æŒçƒ­æƒ…ï¼

ğŸ¦€ Happy Coding! ğŸ¦€
</code></pre>
<h2 id="é¡¹ç›®è¯„ä¼°æ ‡å‡†"><a class="header" href="#é¡¹ç›®è¯„ä¼°æ ‡å‡†">é¡¹ç›®è¯„ä¼°æ ‡å‡†</a></h2>
<h3 id="ä»£ç è´¨é‡-30"><a class="header" href="#ä»£ç è´¨é‡-30">ä»£ç è´¨é‡ (30%)</a></h3>
<ul>
<li><input disabled="" type="checkbox"> ä»£ç è§„èŒƒç»Ÿä¸€</li>
<li><input disabled="" type="checkbox"> æ³¨é‡Šæ¸…æ™°å®Œæ•´</li>
<li><input disabled="" type="checkbox"> é”™è¯¯å¤„ç†å®Œå–„</li>
<li><input disabled="" type="checkbox"> æ—  Clippy è­¦å‘Š</li>
</ul>
<h3 id="åŠŸèƒ½å®Œæ•´æ€§-30"><a class="header" href="#åŠŸèƒ½å®Œæ•´æ€§-30">åŠŸèƒ½å®Œæ•´æ€§ (30%)</a></h3>
<ul>
<li><input disabled="" type="checkbox"> æ ¸å¿ƒåŠŸèƒ½å®ç°</li>
<li><input disabled="" type="checkbox"> è¾¹ç•Œæƒ…å†µå¤„ç†</li>
<li><input disabled="" type="checkbox"> ç”¨æˆ·ä½“éªŒè‰¯å¥½</li>
<li><input disabled="" type="checkbox"> æ–‡æ¡£å®Œæ•´</li>
</ul>
<h3 id="æ€§èƒ½æŒ‡æ ‡-20"><a class="header" href="#æ€§èƒ½æŒ‡æ ‡-20">æ€§èƒ½æŒ‡æ ‡ (20%)</a></h3>
<ul>
<li><input disabled="" type="checkbox"> å“åº”æ—¶é—´è¾¾æ ‡</li>
<li><input disabled="" type="checkbox"> ååé‡è¾¾æ ‡</li>
<li><input disabled="" type="checkbox"> èµ„æºå ç”¨åˆç†</li>
<li><input disabled="" type="checkbox"> å¯æ‰©å±•æ€§å¥½</li>
</ul>
<h3 id="å·¥ç¨‹å®è·µ-20"><a class="header" href="#å·¥ç¨‹å®è·µ-20">å·¥ç¨‹å®è·µ (20%)</a></h3>
<ul>
<li><input disabled="" type="checkbox"> æµ‹è¯•è¦†ç›–å……åˆ†</li>
<li><input disabled="" type="checkbox"> CI/CD é…ç½®</li>
<li><input disabled="" type="checkbox"> å®¹å™¨åŒ–éƒ¨ç½²</li>
<li><input disabled="" type="checkbox"> ç›‘æ§å‘Šè­¦</li>
</ul>
<h2 id="æ­å–œæ¯•ä¸š"><a class="header" href="#æ­å–œæ¯•ä¸š">æ­å–œæ¯•ä¸šï¼</a></h2>
<p>å®Œæˆè¿™ 100 å¤©çš„å­¦ä¹ ï¼Œä½ å·²ç»å…·å¤‡äº†ï¼š</p>
<ul>
<li>ğŸ¯ æ‰å®çš„ Rust åŸºç¡€</li>
<li>ğŸš€ å®æˆ˜é¡¹ç›®ç»éªŒ</li>
<li>ğŸ’ª è§£å†³é—®é¢˜èƒ½åŠ›</li>
<li>ğŸŒŸ æŒç»­å­¦ä¹ ä¹ æƒ¯</li>
</ul>
<p>æ¬¢è¿åŠ å…¥ Rustacean å¤§å®¶åº­ï¼ğŸ¦€</p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-91-é€‰é¢˜ä¸æ¶æ„è®¾è®¡-1"><a class="header" href="#day-91-é€‰é¢˜ä¸æ¶æ„è®¾è®¡-1">Day 91: é€‰é¢˜ä¸æ¶æ„è®¾è®¡</a></h1>
<p>æœ¬é¡¹ç›®é€‰æ‹©äº† <strong>Option 1: åˆ†å¸ƒå¼ä»»åŠ¡è°ƒåº¦ç³»ç»Ÿ</strong> ä½œä¸ºæ¯•ä¸šè®¾è®¡è¯¾é¢˜ã€‚</p>
<p>é¡¹ç›®åç§°ï¼š<strong>DTask</strong> (Distributed Task Scheduler)</p>
<h2 id="å®Œæˆå†…å®¹"><a class="header" href="#å®Œæˆå†…å®¹">å®Œæˆå†…å®¹</a></h2>
<p>è¯¦ç»†çš„è®¾è®¡æ–‡æ¡£å·²åˆ›å»ºäº <a href="Day91-100/91.ProjectDesign/design.html">DESIGN.md</a>ã€‚</p>
<p>ä¸»è¦åŒ…å«ï¼š</p>
<ol>
<li><strong>éœ€æ±‚åˆ†æ</strong>ï¼šå®šä¹‰äº†ä»»åŠ¡æäº¤ã€åˆ†å¸ƒå¼æ‰§è¡Œã€é›†ç¾¤ç®¡ç†ç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚</li>
<li><strong>æ¶æ„è®¾è®¡</strong>ï¼šé‡‡ç”¨ Leader-Follower æ¶æ„ï¼Œåˆ©ç”¨ Raft ç®—æ³•ä¿è¯è°ƒåº¦å™¨çš„é«˜å¯ç”¨ï¼ŒWorker èŠ‚ç‚¹æ”¯æŒæ°´å¹³æ‰©å±•ã€‚</li>
<li><strong>æŠ€æœ¯é€‰å‹</strong>ï¼šRust + Tokio + Tonic (gRPC) + OpenRaft + PostgreSQLã€‚</li>
<li><strong>æ•°æ®æ¨¡å‹</strong>ï¼šè®¾è®¡äº†ä»»åŠ¡è¡¨å’Œæ‰§è¡Œæ—¥å¿—è¡¨çš„æ•°æ®åº“ Schemaã€‚</li>
<li><strong>æ¥å£è®¾è®¡</strong>ï¼šåˆæ­¥å®šä¹‰äº† gRPC æœåŠ¡æ¥å£ã€‚</li>
</ol>
<h2 id="ä¸‹ä¸€æ­¥è®¡åˆ’"><a class="header" href="#ä¸‹ä¸€æ­¥è®¡åˆ’">ä¸‹ä¸€æ­¥è®¡åˆ’</a></h2>
<p>Day 92 å°†è¿›è¡ŒåŸå‹éªŒè¯ (PoC)ï¼Œä¸»è¦éªŒè¯ gRPC é€šä¿¡é“¾è·¯å’Œ Raft èŠ‚ç‚¹çš„åŸºæœ¬ç»„ç½‘ã€‚</p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-92-åŸå‹éªŒè¯-poc-1"><a class="header" href="#day-92-åŸå‹éªŒè¯-poc-1">Day 92: åŸå‹éªŒè¯ (PoC)</a></h1>
<p>æœ¬é¡¹ç›® (<strong>DTask</strong>) çš„åŸå‹éªŒè¯é˜¶æ®µã€‚</p>
<h2 id="éªŒè¯ç›®æ ‡"><a class="header" href="#éªŒè¯ç›®æ ‡">éªŒè¯ç›®æ ‡</a></h2>
<ol>
<li><strong>gRPC é€šä¿¡</strong>: éªŒè¯ Client -&gt; Server çš„ RPC è°ƒç”¨é“¾è·¯ã€‚</li>
<li><strong>Raft å…±è¯†</strong>: éªŒè¯ OpenRaft åº“çš„é›†æˆå’Œç±»å‹å®šä¹‰ã€‚</li>
</ol>
<h2 id="éªŒè¯ç»“æœ"><a class="header" href="#éªŒè¯ç»“æœ">éªŒè¯ç»“æœ</a></h2>
<h3 id="1-grpc-é€šä¿¡-æˆåŠŸ"><a class="header" href="#1-grpc-é€šä¿¡-æˆåŠŸ">1. gRPC é€šä¿¡ (æˆåŠŸ)</a></h3>
<p>ä½¿ç”¨ <code>tonic</code> å®ç°äº†ç®€å•çš„ Echo æœåŠ¡ã€‚</p>
<ul>
<li>Server ç›‘å¬ <code>[::1]:50051</code>ã€‚</li>
<li>Client å‘é€ â€œHello Tonicâ€ã€‚</li>
<li>æˆåŠŸæ¥æ”¶å“åº” â€œEcho: Hello Tonicâ€ã€‚</li>
</ul>
<h3 id="2-raft-é›†æˆ-éƒ¨åˆ†å®Œæˆ"><a class="header" href="#2-raft-é›†æˆ-éƒ¨åˆ†å®Œæˆ">2. Raft é›†æˆ (éƒ¨åˆ†å®Œæˆ)</a></h3>
<ul>
<li>æˆåŠŸå®šä¹‰äº† Raft ç±»å‹ (<code>TypeConfig</code>, <code>Request</code>, <code>Response</code>)ã€‚</li>
<li>æˆåŠŸæ­å»ºäº† <code>RaftNetwork</code> å’Œ <code>RaftStorage</code> çš„åŸºç¡€ç»“æ„ã€‚</li>
<li><strong>å‘ç°é—®é¢˜</strong>: <code>openraft</code> 0.9 ç‰ˆæœ¬å¼•å…¥äº†è¾ƒå¤§çš„ API å˜æ›´ (V2 Storage)ï¼Œå®ç°å®Œæ•´çš„ <code>RaftStorage</code> trait éœ€è¦å¤„ç†å¤æ‚çš„ç±»å‹çº¦æŸå’Œå® (<code>async_trait</code>) å…¼å®¹æ€§é—®é¢˜ã€‚</li>
<li><strong>å†³ç­–</strong>: åœ¨ Day 93 (Core Development) ä¸­é›†ä¸­è§£å†³ Storage å®ç°é—®é¢˜ï¼Œæˆ–è€…å›é€€åˆ°æ›´ç¨³å®šçš„ <code>openraft</code> ç‰ˆæœ¬ï¼Œæˆ–è€…ä½¿ç”¨ <code>openraft</code> æä¾›çš„é»˜è®¤ <code>MemStore</code> (å¦‚æœé€‚ç”¨)ã€‚</li>
</ul>
<h2 id="è¿è¡Œæ–¹å¼-1"><a class="header" href="#è¿è¡Œæ–¹å¼-1">è¿è¡Œæ–¹å¼</a></h2>
<pre><code class="language-bash">cd Day91-100/92.PoC/dtask-poc

# ç¼–è¯‘
cargo build

# è¿è¡Œ gRPC Server
./target/debug/grpc_server &amp;

# è¿è¡Œ gRPC Client
./target/debug/grpc_client
</code></pre>
<h2 id="é¡¹ç›®ç»“æ„-3"><a class="header" href="#é¡¹ç›®ç»“æ„-3">é¡¹ç›®ç»“æ„</a></h2>
<ul>
<li><code>dtask-poc/</code>: Cargo é¡¹ç›®æ ¹ç›®å½•
<ul>
<li><code>proto/</code>: gRPC åè®®å®šä¹‰</li>
<li><code>src/bin/grpc_server.rs</code>: gRPC æœåŠ¡ç«¯</li>
<li><code>src/bin/grpc_client.rs</code>: gRPC å®¢æˆ·ç«¯</li>
<li><code>src/lib.rs</code>: Raft ç±»å‹å®šä¹‰</li>
<li><code>src/store.rs</code>: Raft å­˜å‚¨æ¥å£å­˜æ ¹</li>
<li><code>src/network.rs</code>: Raft ç½‘ç»œæ¥å£å­˜æ ¹</li>
</ul>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-93-æ ¸å¿ƒæ¨¡å—å¼€å‘-ä¸€"><a class="header" href="#day-93-æ ¸å¿ƒæ¨¡å—å¼€å‘-ä¸€">Day 93: æ ¸å¿ƒæ¨¡å—å¼€å‘ (ä¸€)</a></h1>
<p>æœ¬é¡¹ç›® (<strong>DTask</strong>) çš„æ ¸å¿ƒå¼€å‘ç¬¬ä¸€é˜¶æ®µã€‚</p>
<h2 id="å¼€å‘ç›®æ ‡"><a class="header" href="#å¼€å‘ç›®æ ‡">å¼€å‘ç›®æ ‡</a></h2>
<ol>
<li><strong>é¡¹ç›®éª¨æ¶æ­å»º</strong>: å»ºç«‹åŸºæœ¬çš„ Cargo é¡¹ç›®ç»“æ„ã€‚</li>
<li><strong>Raft å­˜å‚¨å±‚å®ç°</strong>: å®ç° <code>openraft</code> æ‰€éœ€çš„ <code>RaftStorage</code> traitã€‚</li>
<li><strong>æ ¸å¿ƒæ•°æ®æ¨¡å‹</strong>: å®šä¹‰ä»»åŠ¡ (<code>Task</code>) å’ŒçŠ¶æ€æœºæ‰€éœ€çš„ç±»å‹ã€‚</li>
</ol>
<h2 id="å®Œæˆå†…å®¹-1"><a class="header" href="#å®Œæˆå†…å®¹-1">å®Œæˆå†…å®¹</a></h2>
<h3 id="1-raft-å­˜å‚¨å®ç°-memstorage"><a class="header" href="#1-raft-å­˜å‚¨å®ç°-memstorage">1. Raft å­˜å‚¨å®ç° (<code>MemStorage</code>)</a></h3>
<p>ç”±äº <code>openraft</code> 0.9+ çš„ API å˜æ›´ï¼Œæœ¬é˜¶æ®µé¦–å…ˆå®ç°äº†ä¸€ä¸ªåŸºäºå†…å­˜çš„å­˜å‚¨å±‚ <code>MemStorage</code>ï¼Œç”¨äºå¿«é€ŸéªŒè¯å…±è¯†é€»è¾‘ã€‚</p>
<ul>
<li>å®ç°äº† <code>RaftLogReader</code>ã€<code>RaftStorage</code>ã€<code>RaftSnapshotBuilder</code> ç­‰ Traitã€‚</li>
<li>ä½¿ç”¨ <code>RwLock</code> ä¿æŠ¤å†…å­˜ä¸­çš„æ—¥å¿— (<code>log</code>) å’ŒçŠ¶æ€æœº (<code>state_machine</code>)ã€‚</li>
<li>æ”¯æŒåŸºæœ¬çš„æ—¥å¿—è¿½åŠ ã€è¯»å–å’Œå¿«ç…§æ“ä½œã€‚</li>
</ul>
<h3 id="2-æ ¸å¿ƒæ¨¡å‹å®šä¹‰"><a class="header" href="#2-æ ¸å¿ƒæ¨¡å‹å®šä¹‰">2. æ ¸å¿ƒæ¨¡å‹å®šä¹‰</a></h3>
<p>åœ¨ <code>src/models.rs</code> ä¸­å®šä¹‰äº†æ ¸å¿ƒæ•°æ®ç»“æ„ï¼š</p>
<ul>
<li><code>Task</code>: åŒ…å«ä»»åŠ¡ IDã€å‘½ä»¤ã€çŠ¶æ€ç­‰å­—æ®µã€‚</li>
<li><code>Request</code>: Raft çŠ¶æ€æœºçš„å†™è¯·æ±‚ï¼ˆå¦‚ <code>Set</code> ä»»åŠ¡ï¼‰ã€‚</li>
<li><code>Response</code>: Raft çŠ¶æ€æœºçš„è¯»å“åº”ã€‚</li>
</ul>
<h3 id="3-æœåŠ¡éª¨æ¶"><a class="header" href="#3-æœåŠ¡éª¨æ¶">3. æœåŠ¡éª¨æ¶</a></h3>
<ul>
<li><code>scheduler.rs</code>: å®šä¹‰äº† <code>TaskScheduler</code> ç»“æ„ä½“ï¼Œä½œä¸ºç³»ç»Ÿçš„æ ¸å¿ƒè°ƒåº¦ç»„ä»¶ã€‚</li>
<li><code>dispatcher.rs</code>: å®šä¹‰äº† <code>Dispatcher</code>ï¼Œè´Ÿè´£åå°ä»»åŠ¡çš„åˆ†å‘å’Œæ‰§è¡Œã€‚</li>
</ul>
<h2 id="è¿è¡Œæ–¹å¼-2"><a class="header" href="#è¿è¡Œæ–¹å¼-2">è¿è¡Œæ–¹å¼</a></h2>
<p>æœ¬é˜¶æ®µä¸»è¦å…³æ³¨ç¼–è¯‘é€šè¿‡å’Œå•å…ƒæµ‹è¯•ï¼Œå°šæœªæä¾›å®Œæ•´çš„å¯è¿è¡Œ Serverã€‚</p>
<pre><code class="language-bash">cd Day91-100/93.CoreDevelopment1/dtask
cargo build
cargo test
</code></pre>
<h2 id="ä¸‹ä¸€æ­¥-28"><a class="header" href="#ä¸‹ä¸€æ­¥-28">ä¸‹ä¸€æ­¥</a></h2>
<p>Day 94 å°†å®Œå–„ <code>TaskScheduler</code> çš„ gRPC æ¥å£ï¼Œå¹¶å®ç° <code>Dispatcher</code> çš„å®é™…è½®è¯¢é€»è¾‘ã€‚</p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-94-æ ¸å¿ƒæ¨¡å—å¼€å‘-äºŒ"><a class="header" href="#day-94-æ ¸å¿ƒæ¨¡å—å¼€å‘-äºŒ">Day 94: æ ¸å¿ƒæ¨¡å—å¼€å‘ (äºŒ)</a></h1>
<p>æœ¬é¡¹ç›® (<strong>DTask</strong>) çš„æ ¸å¿ƒå¼€å‘ç¬¬äºŒé˜¶æ®µã€‚</p>
<h2 id="å¼€å‘ç›®æ ‡-1"><a class="header" href="#å¼€å‘ç›®æ ‡-1">å¼€å‘ç›®æ ‡</a></h2>
<ol>
<li><strong>gRPC æœåŠ¡å®ç°</strong>: å®Œå–„ <code>TaskScheduler</code> çš„ gRPC æ¥å£å®ç°ã€‚</li>
<li><strong>ä»»åŠ¡åˆ†å‘å™¨</strong>: å®ç° <code>Dispatcher</code> çš„åå°è½®è¯¢å’Œæ‰§è¡Œé€»è¾‘ã€‚</li>
<li><strong>çŠ¶æ€å…±äº«</strong>: è§£å†³æœåŠ¡é—´çš„æ•°æ®å…±äº«å’Œå¹¶å‘è®¿é—®é—®é¢˜ã€‚</li>
</ol>
<h2 id="å®Œæˆå†…å®¹-2"><a class="header" href="#å®Œæˆå†…å®¹-2">å®Œæˆå†…å®¹</a></h2>
<h3 id="1-grpc-è°ƒåº¦å™¨-taskscheduler"><a class="header" href="#1-grpc-è°ƒåº¦å™¨-taskscheduler">1. gRPC è°ƒåº¦å™¨ (<code>TaskScheduler</code>)</a></h3>
<ul>
<li>åŸºäº <code>tonic</code> å®ç°äº† <code>dtask.proto</code> ä¸­å®šä¹‰çš„ <code>Scheduler</code> æœåŠ¡ã€‚</li>
<li>å®ç°äº† <code>submit_task</code> æ¥å£ï¼Œæ¥æ”¶å®¢æˆ·ç«¯è¯·æ±‚å¹¶å°†ä»»åŠ¡å­˜å…¥å…±äº«çŠ¶æ€ã€‚</li>
<li>ä½¿ç”¨äº† <code>Arc&lt;Mutex&lt;Vec&lt;Task&gt;&gt;&gt;</code> ä½œä¸ºä¸´æ—¶çš„å…±äº«å­˜å‚¨ï¼ˆåç»­å°†å¯¹æ¥ Raftï¼‰ã€‚</li>
</ul>
<h3 id="2-ä»»åŠ¡åˆ†å‘å™¨-dispatcher"><a class="header" href="#2-ä»»åŠ¡åˆ†å‘å™¨-dispatcher">2. ä»»åŠ¡åˆ†å‘å™¨ (<code>Dispatcher</code>)</a></h3>
<ul>
<li>å®ç°äº†åå°è½®è¯¢å¾ªç¯ï¼Œå®šæœŸæ£€æŸ¥å¾…å¤„ç†ä»»åŠ¡ã€‚</li>
<li>æ¨¡æ‹Ÿäº†ä»»åŠ¡æ‰§è¡Œè¿‡ç¨‹ï¼ˆç®€å•çš„æ‰“å°æ—¥å¿—å’ŒçŠ¶æ€æ›´æ–°ï¼‰ã€‚</li>
<li>ä¸ <code>TaskScheduler</code> å…±äº«åŒä¸€ä¸ªä»»åŠ¡åˆ—è¡¨ï¼Œç¡®ä¿æ•°æ®ä¸€è‡´æ€§ã€‚</li>
</ul>
<h3 id="3-ä¸»ç¨‹åºå…¥å£-mainrs"><a class="header" href="#3-ä¸»ç¨‹åºå…¥å£-mainrs">3. ä¸»ç¨‹åºå…¥å£ (<code>main.rs</code>)</a></h3>
<ul>
<li>åœ¨ <code>tokio</code> è¿è¡Œæ—¶ä¸­åŒæ—¶å¯åŠ¨ gRPC Server å’Œ Dispatcher åå°ä»»åŠ¡ã€‚</li>
<li>ä½¿ç”¨ <code>tokio::spawn</code> è¿è¡Œ Dispatcherï¼Œé¿å…é˜»å¡ gRPC æœåŠ¡ã€‚</li>
</ul>
<h2 id="è¿è¡Œæ–¹å¼-3"><a class="header" href="#è¿è¡Œæ–¹å¼-3">è¿è¡Œæ–¹å¼</a></h2>
<pre><code class="language-bash">cd Day91-100/94.CoreDevelopment2/dtask

# å¯åŠ¨æœåŠ¡ç«¯
cargo run

# åœ¨å¦ä¸€ä¸ªç»ˆç«¯è¿è¡Œæµ‹è¯•å®¢æˆ·ç«¯
cargo run --example client
</code></pre>
<h2 id="ä¸‹ä¸€æ­¥-29"><a class="header" href="#ä¸‹ä¸€æ­¥-29">ä¸‹ä¸€æ­¥</a></h2>
<p>Day 95 å°†é›†æˆ Web API (Axum) å’Œè®¤è¯æ¨¡å—ï¼Œå¯¹å¤–æä¾› HTTP æ¥å£ã€‚</p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-95-å¤–å›´æ¨¡å—ä¸é›†æˆ-1"><a class="header" href="#day-95-å¤–å›´æ¨¡å—ä¸é›†æˆ-1">Day 95: å¤–å›´æ¨¡å—ä¸é›†æˆ</a></h1>
<p>æœ¬é¡¹ç›® (<strong>DTask</strong>) çš„é›†æˆé˜¶æ®µï¼Œå¼•å…¥äº† Web API å’Œç›‘æ§ä½“ç³»ã€‚</p>
<h2 id="å¼€å‘ç›®æ ‡-2"><a class="header" href="#å¼€å‘ç›®æ ‡-2">å¼€å‘ç›®æ ‡</a></h2>
<ol>
<li><strong>Web API</strong>: ä½¿ç”¨ <code>Axum</code> æä¾› RESTful æ¥å£ï¼Œæ–¹ä¾¿å‰ç«¯å’Œç¬¬ä¸‰æ–¹ç³»ç»Ÿé›†æˆã€‚</li>
<li><strong>è®¤è¯æˆæƒ</strong>: å®ç°åŸºäº JWT çš„ç”¨æˆ·è®¤è¯ã€‚</li>
<li><strong>ç›‘æ§æŒ‡æ ‡</strong>: é›†æˆ Prometheus ç›‘æ§æŒ‡æ ‡ã€‚</li>
<li><strong>æœåŠ¡å¹¶å­˜</strong>: åœ¨åŒä¸€ä¸ªè¿›ç¨‹ä¸­åŒæ—¶è¿è¡Œ gRPC Server å’Œ HTTP Serverã€‚</li>
</ol>
<h2 id="å®Œæˆå†…å®¹-3"><a class="header" href="#å®Œæˆå†…å®¹-3">å®Œæˆå†…å®¹</a></h2>
<h3 id="1-web-api-é›†æˆ-apirs"><a class="header" href="#1-web-api-é›†æˆ-apirs">1. Web API é›†æˆ (<code>api.rs</code>)</a></h3>
<ul>
<li>ä½¿ç”¨ <code>Axum</code> 0.7 æ„å»ºäº† HTTP æœåŠ¡ã€‚</li>
<li>æä¾›äº† <code>/api/login</code> (è·å– Token) å’Œ <code>/api/tasks</code> (æäº¤/æŸ¥è¯¢ä»»åŠ¡) æ¥å£ã€‚</li>
<li>ä¸ gRPC æœåŠ¡å…±äº«åº•å±‚çš„ <code>Arc&lt;Mutex&lt;Vec&lt;Task&gt;&gt;&gt;</code> æ•°æ®çŠ¶æ€ã€‚</li>
</ul>
<h3 id="2-jwt-è®¤è¯-authrs"><a class="header" href="#2-jwt-è®¤è¯-authrs">2. JWT è®¤è¯ (<code>auth.rs</code>)</a></h3>
<ul>
<li>ä½¿ç”¨ <code>jsonwebtoken</code> åº“å®ç°äº† Token çš„ç”Ÿæˆ (<code>create_jwt</code>) å’ŒéªŒè¯ (<code>verify_jwt</code>)ã€‚</li>
<li>å®ç°äº† <code>auth_middleware</code> ä¸­é—´ä»¶ï¼Œä¿æŠ¤æ•æ„Ÿ API æ¥å£ã€‚</li>
</ul>
<h3 id="3-å¯è§‚æµ‹æ€§-metrics"><a class="header" href="#3-å¯è§‚æµ‹æ€§-metrics">3. å¯è§‚æµ‹æ€§ (<code>metrics</code>)</a></h3>
<ul>
<li>é›†æˆ <code>prometheus</code> crateï¼Œå®šä¹‰äº† <code>http_requests_total</code> ç­‰åŸºç¡€æŒ‡æ ‡ã€‚</li>
<li>æ·»åŠ äº† <code>/metrics</code> ç«¯ç‚¹ï¼Œä¾› Prometheus Server æŠ“å–æ•°æ®ã€‚</li>
</ul>
<h3 id="4-æœåŠ¡ç¼–æ’-mainrs"><a class="header" href="#4-æœåŠ¡ç¼–æ’-mainrs">4. æœåŠ¡ç¼–æ’ (<code>main.rs</code>)</a></h3>
<ul>
<li>ä¿®æ”¹äº† <code>main.rs</code>ï¼Œä½¿ç”¨ <code>tokio::select!</code> æˆ– <code>join!</code> åŒæ—¶å¯åŠ¨ï¼š
<ul>
<li>gRPC Server (Port 50051)</li>
<li>Axum HTTP Server (Port 3000)</li>
<li>Dispatcher Loop</li>
</ul>
</li>
</ul>
<h2 id="è¿è¡Œæ–¹å¼-4"><a class="header" href="#è¿è¡Œæ–¹å¼-4">è¿è¡Œæ–¹å¼</a></h2>
<pre><code class="language-bash">cd Day91-100/95.Integration/dtask

# å¯åŠ¨æœåŠ¡
cargo run

# æµ‹è¯• HTTP æ¥å£
# 1. ç™»å½•è·å– Token (æ¨¡æ‹Ÿ)
curl -X POST http://localhost:3000/api/login -H "Content-Type: application/json" -d '{"username":"admin", "password":"password"}'

# 2. è·å– Metrics
curl http://localhost:3000/metrics
</code></pre>
<h2 id="ä¸‹ä¸€æ­¥-30"><a class="header" href="#ä¸‹ä¸€æ­¥-30">ä¸‹ä¸€æ­¥</a></h2>
<p>Day 96 å°†è¿›è¡Œæ€§èƒ½æµ‹è¯•ä¸è°ƒä¼˜ï¼Œå¼•å…¥ SQLite æŒä¹…åŒ–å¹¶ä¼˜åŒ–å¹¶å‘æ€§èƒ½ã€‚</p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-96-æ€§èƒ½æµ‹è¯•ä¸è°ƒä¼˜-1"><a class="header" href="#day-96-æ€§èƒ½æµ‹è¯•ä¸è°ƒä¼˜-1">Day 96: æ€§èƒ½æµ‹è¯•ä¸è°ƒä¼˜</a></h1>
<p>æœ¬ç›®å½•åŒ…å«ç»è¿‡æ€§èƒ½ä¼˜åŒ–çš„ <code>dtask</code> é¡¹ç›®ç‰ˆæœ¬ã€‚</p>
<h2 id="å˜æ›´å†…å®¹"><a class="header" href="#å˜æ›´å†…å®¹">å˜æ›´å†…å®¹</a></h2>
<ol>
<li><strong>æ•°æ®åº“è¿ç§»</strong>: ä»å†…å­˜ä¸­çš„ <code>Vec&lt;Task&gt;</code> è¿ç§»åˆ° <code>SQLite</code>ï¼Œä½¿ç”¨ <code>sqlx</code> è¿›è¡Œå¼‚æ­¥è®¿é—®ã€‚</li>
<li><strong>Schema ä¼˜åŒ–</strong>: æ·»åŠ äº† <code>tasks</code> è¡¨ï¼Œå¹¶åœ¨ <code>status</code> å­—æ®µä¸Šåˆ›å»ºäº†ç´¢å¼•ä»¥ä¼˜åŒ–æŸ¥è¯¢ã€‚</li>
<li><strong>è¿æ¥æ± </strong>: é…ç½®äº† <code>SqlitePool</code>ï¼Œå¹¶è°ƒä¼˜äº†æœ€å¤§è¿æ¥æ•°ã€‚</li>
<li><strong>æ„å»ºé…ç½®</strong>: åœ¨ <code>Cargo.toml</code> ä¸­æ·»åŠ äº† <code>release</code> é…ç½®ï¼Œå¯ç”¨äº† <code>LTO</code> (é“¾æ¥æ—¶ä¼˜åŒ–) å’Œ <code>strip</code>ã€‚</li>
</ol>
<h2 id="è¿è¡Œæ–¹å¼-5"><a class="header" href="#è¿è¡Œæ–¹å¼-5">è¿è¡Œæ–¹å¼</a></h2>
<ol>
<li>
<p><strong>å¯åŠ¨æœåŠ¡å™¨</strong>:</p>
<pre><code class="language-bash">cd Day91-100/96.Performance/dtask
cargo run --release
</code></pre>
</li>
<li>
<p><strong>è¿è¡Œè´Ÿè½½æµ‹è¯•</strong>:</p>
<pre><code class="language-bash"># åœ¨å¦ä¸€ä¸ªç»ˆç«¯
cd Day91-100/96.Performance/dtask
cargo run --example load_test --release
</code></pre>
</li>
</ol>
<h2 id="ä¼˜åŒ–æ¸…å•-1"><a class="header" href="#ä¼˜åŒ–æ¸…å•-1">ä¼˜åŒ–æ¸…å•</a></h2>
<ul>
<li><input disabled="" type="checkbox" checked=""> <strong>æ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–</strong>: åœ¨ <code>status</code> å­—æ®µæ·»åŠ ç´¢å¼• (è§ migration <code>20240101000001_add_index.sql</code>)ã€‚</li>
<li><input disabled="" type="checkbox" checked=""> <strong>è¿æ¥æ± è°ƒä¼˜</strong>: è®¾ç½® <code>max_connections(50)</code>ã€‚</li>
<li><input disabled="" type="checkbox" checked=""> <strong>ç¼–è¯‘ä¼˜åŒ–</strong>: å¯ç”¨ <code>lto = true</code>, <code>strip = true</code>, <code>opt-level = 3</code>ã€‚</li>
<li><input disabled="" type="checkbox" checked=""> <strong>å¼‚æ­¥ I/O</strong>: å…¨é¢ä½¿ç”¨ <code>tokio</code> å’Œ <code>sqlx</code> çš„å¼‚æ­¥èƒ½åŠ›ã€‚</li>
</ul>
<h2 id="åŸºå‡†æµ‹è¯•ç»“æœ"><a class="header" href="#åŸºå‡†æµ‹è¯•ç»“æœ">åŸºå‡†æµ‹è¯•ç»“æœ</a></h2>
<p>(è¿è¡Œ load_test ç¤ºä¾‹å¯æŸ¥çœ‹å½“å‰ç¯å¢ƒä¸‹çš„ QPS)</p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-97-æ–‡æ¡£ç¼–å†™ä¸ä»£ç æ¸…ç†-1"><a class="header" href="#day-97-æ–‡æ¡£ç¼–å†™ä¸ä»£ç æ¸…ç†-1">Day 97: æ–‡æ¡£ç¼–å†™ä¸ä»£ç æ¸…ç†</a></h1>
<p>æœ¬é¡¹ç›® (<strong>DTask</strong>) çš„æ–‡æ¡£å®Œå–„é˜¶æ®µã€‚</p>
<h2 id="å¼€å‘ç›®æ ‡-3"><a class="header" href="#å¼€å‘ç›®æ ‡-3">å¼€å‘ç›®æ ‡</a></h2>
<ol>
<li><strong>OpenAPI é›†æˆ</strong>: è‡ªåŠ¨ç”Ÿæˆ REST API æ–‡æ¡£ã€‚</li>
<li><strong>ä»£ç æ³¨é‡Š</strong>: ä¸ºæ ¸å¿ƒæ¨¡å—æ·»åŠ  Rustdoc é£æ ¼çš„æ³¨é‡Šã€‚</li>
<li><strong>ä»£ç æ¸…ç†</strong>: è¿è¡Œ <code>cargo clippy</code> å’Œ <code>cargo fmt</code> è§„èŒƒä»£ç ã€‚</li>
</ol>
<h2 id="å®Œæˆå†…å®¹-4"><a class="header" href="#å®Œæˆå†…å®¹-4">å®Œæˆå†…å®¹</a></h2>
<h3 id="1-openapi--swagger-ui-apirs"><a class="header" href="#1-openapi--swagger-ui-apirs">1. OpenAPI / Swagger UI (<code>api.rs</code>)</a></h3>
<ul>
<li>é›†æˆ <code>utoipa</code> å’Œ <code>utoipa-swagger-ui</code>ã€‚</li>
<li>ä½¿ç”¨ <code>#[derive(OpenApi)]</code> å’Œ <code>#[utoipa::path]</code> å®æ ‡æ³¨ API ç»“æ„ä½“å’Œå¤„ç†å‡½æ•°ã€‚</li>
<li>åœ¨ <code>/swagger-ui</code> è·¯å¾„æä¾›äº¤äº’å¼ API æ–‡æ¡£ã€‚</li>
</ul>
<h3 id="2-rustdoc-æ³¨é‡Š"><a class="header" href="#2-rustdoc-æ³¨é‡Š">2. Rustdoc æ³¨é‡Š</a></h3>
<ul>
<li>ä¸º <code>TaskScheduler</code> (è°ƒåº¦å™¨)ã€<code>Dispatcher</code> (åˆ†å‘å™¨) å’Œ <code>Raft</code> æ¨¡å—æ·»åŠ äº†è¯¦ç»†çš„æ–‡æ¡£æ³¨é‡Š (<code>///</code>)ã€‚</li>
<li>è§£é‡Šäº†æ ¸å¿ƒå‡½æ•°çš„å‚æ•°ã€è¿”å›å€¼å’Œå¯èƒ½çš„é”™è¯¯ã€‚</li>
</ul>
<h3 id="3-ä»£ç è´¨é‡"><a class="header" href="#3-ä»£ç è´¨é‡">3. ä»£ç è´¨é‡</a></h3>
<ul>
<li>ä¿®å¤äº† Clippy æå‡ºçš„å»ºè®®å’Œè­¦å‘Šã€‚</li>
<li>ä½¿ç”¨ <code>rustfmt</code> ç»Ÿä¸€äº†ä»£ç é£æ ¼ã€‚</li>
</ul>
<h2 id="è¿è¡Œæ–¹å¼-6"><a class="header" href="#è¿è¡Œæ–¹å¼-6">è¿è¡Œæ–¹å¼</a></h2>
<pre><code class="language-bash">cd Day91-100/97.Documentation/dtask

# å¯åŠ¨æœåŠ¡
cargo run

# è®¿é—® Swagger UI
# æ‰“å¼€æµè§ˆå™¨è®¿é—®: http://localhost:3000/swagger-ui/
</code></pre>
<h2 id="ä¸‹ä¸€æ­¥-31"><a class="header" href="#ä¸‹ä¸€æ­¥-31">ä¸‹ä¸€æ­¥</a></h2>
<p>Day 98 å°†è¿›è¡Œå‘å¸ƒå‡†å¤‡ï¼ŒåŒ…æ‹¬ç‰ˆæœ¬ç®¡ç†ã€Docker é•œåƒæ„å»ºå’Œå‘å¸ƒæ¸…å•æ£€æŸ¥ã€‚</p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-98-å‘å¸ƒå‡†å¤‡ä¸ç‰ˆæœ¬ç®¡ç†-1"><a class="header" href="#day-98-å‘å¸ƒå‡†å¤‡ä¸ç‰ˆæœ¬ç®¡ç†-1">Day 98: å‘å¸ƒå‡†å¤‡ä¸ç‰ˆæœ¬ç®¡ç†</a></h1>
<p>æœ¬é¡¹ç›® (<strong>DTask</strong>) çš„å‘å¸ƒå‡†å¤‡é˜¶æ®µã€‚</p>
<h2 id="å¼€å‘ç›®æ ‡-4"><a class="header" href="#å¼€å‘ç›®æ ‡-4">å¼€å‘ç›®æ ‡</a></h2>
<ol>
<li><strong>å‘å¸ƒåˆ¶å“</strong>: å‡†å¤‡å‘å¸ƒæ‰€éœ€çš„äºŒè¿›åˆ¶æ–‡ä»¶å’Œèµ„æºã€‚</li>
<li><strong>Docker é•œåƒ</strong>: æ„å»ºç”Ÿäº§å¯ç”¨çš„ Docker é•œåƒã€‚</li>
<li><strong>ç‰ˆæœ¬ç®¡ç†</strong>: ç»´æŠ¤ CHANGELOG å’Œç‰ˆæœ¬å·ã€‚</li>
<li><strong>å‘å¸ƒæ¸…å•</strong>: åˆ¶å®šå‘å¸ƒå‰çš„æ£€æŸ¥æµç¨‹ã€‚</li>
</ol>
<h2 id="å®Œæˆå†…å®¹-5"><a class="header" href="#å®Œæˆå†…å®¹-5">å®Œæˆå†…å®¹</a></h2>
<h3 id="1-dockerfile"><a class="header" href="#1-dockerfile">1. Dockerfile</a></h3>
<ul>
<li>åˆ›å»ºäº†å¤šé˜¶æ®µæ„å»º (Multi-stage Build) çš„ <code>Dockerfile</code>ã€‚
<ul>
<li><strong>æ„å»ºé˜¶æ®µ</strong>: ä½¿ç”¨ <code>rust:latest</code> ç¼–è¯‘é¡¹ç›®ã€‚</li>
<li><strong>è¿è¡Œé˜¶æ®µ</strong>: ä½¿ç”¨ <code>debian:bookworm-slim</code> ä½œä¸ºè½»é‡çº§è¿è¡Œæ—¶ç¯å¢ƒã€‚</li>
</ul>
</li>
<li>é…ç½®äº†å¿…è¦çš„è¿è¡Œæ—¶ä¾èµ– (å¦‚ <code>libssl</code>, <code>ca-certificates</code>)ã€‚</li>
</ul>
<h3 id="2-å‘å¸ƒæ–‡æ¡£"><a class="header" href="#2-å‘å¸ƒæ–‡æ¡£">2. å‘å¸ƒæ–‡æ¡£</a></h3>
<ul>
<li><strong>CHANGELOG.md</strong>: è®°å½•äº†ç‰ˆæœ¬ <code>1.0.0</code> çš„å˜æ›´æ—¥å¿—ï¼ŒåŒ…å« Added, Changed, Fixed ç­‰éƒ¨åˆ†ã€‚</li>
<li><strong>RELEASE_CHECKLIST.md</strong>: åˆ—å‡ºäº†å‘å¸ƒå‰å¿…é¡»æ‰§è¡Œçš„æ£€æŸ¥é¡¹ï¼ˆæµ‹è¯•ã€æ–‡æ¡£ã€ç‰ˆæœ¬å·ç­‰ï¼‰ã€‚</li>
</ul>
<h3 id="3-cicd-é…ç½®-æ¨¡æ‹Ÿ"><a class="header" href="#3-cicd-é…ç½®-æ¨¡æ‹Ÿ">3. CI/CD é…ç½® (æ¨¡æ‹Ÿ)</a></h3>
<ul>
<li>è™½ç„¶æœ¬é¡¹ç›®æœªè¿æ¥çœŸå®çš„ GitHub Actions Runnerï¼Œä½†æä¾›äº† <code>release.yml</code> çš„é…ç½®ç¤ºä¾‹ï¼Œç”¨äºè‡ªåŠ¨åˆ›å»º GitHub Releaseã€‚</li>
</ul>
<h2 id="è¿è¡Œæ–¹å¼-7"><a class="header" href="#è¿è¡Œæ–¹å¼-7">è¿è¡Œæ–¹å¼</a></h2>
<h3 id="æ„å»º-docker-é•œåƒ"><a class="header" href="#æ„å»º-docker-é•œåƒ">æ„å»º Docker é•œåƒ</a></h3>
<pre><code class="language-bash">cd Day91-100/98.Release/dtask
docker build -t dtask:1.0.0 .
</code></pre>
<h3 id="è¿è¡Œ-docker-å®¹å™¨"><a class="header" href="#è¿è¡Œ-docker-å®¹å™¨">è¿è¡Œ Docker å®¹å™¨</a></h3>
<pre><code class="language-bash">docker run -p 3000:3000 -p 50051:50051 dtask:1.0.0
</code></pre>
<h2 id="ä¸‹ä¸€æ­¥-32"><a class="header" href="#ä¸‹ä¸€æ­¥-32">ä¸‹ä¸€æ­¥</a></h2>
<p>Day 99 å°†å¯¹æ•´ä¸ªé¡¹ç›®è¿›è¡Œå¤ç›˜å’Œå±•ç¤ºã€‚</p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-99-é¡¹ç›®å±•ç¤ºä¸å¤ç›˜-1"><a class="header" href="#day-99-é¡¹ç›®å±•ç¤ºä¸å¤ç›˜-1">Day 99: é¡¹ç›®å±•ç¤ºä¸å¤ç›˜</a></h1>
<p>æœ¬é¡¹ç›® (<strong>DTask</strong>) çš„æ€»ç»“ã€å±•ç¤ºä¸å¤ç›˜é˜¶æ®µã€‚</p>
<h2 id="ç›®æ ‡"><a class="header" href="#ç›®æ ‡">ç›®æ ‡</a></h2>
<ol>
<li><strong>é¡¹ç›®å±•ç¤º</strong>: æ¢³ç†é¡¹ç›®æ¶æ„ã€åŠŸèƒ½å’Œäº®ç‚¹ï¼Œå‡†å¤‡æ¼”ç¤ºææ–™ã€‚</li>
<li><strong>æŠ€æœ¯å¤ç›˜</strong>: æ€»ç»“å¼€å‘è¿‡ç¨‹ä¸­çš„ç»éªŒæ•™è®­ï¼Œè¯†åˆ«æ”¹è¿›ç‚¹ã€‚</li>
</ol>
<h2 id="å®Œæˆå†…å®¹-6"><a class="header" href="#å®Œæˆå†…å®¹-6">å®Œæˆå†…å®¹</a></h2>
<h3 id="1-æ¼”ç¤ºæ–‡æ¡£-presentationmd"><a class="header" href="#1-æ¼”ç¤ºæ–‡æ¡£-presentationmd">1. æ¼”ç¤ºæ–‡æ¡£ (<code>PRESENTATION.md</code>)</a></h3>
<ul>
<li><strong>é¡¹ç›®æ¦‚è§ˆ</strong>: ä»‹ç»äº† DTask çš„å®šä½ï¼ˆåˆ†å¸ƒå¼ä»»åŠ¡è°ƒåº¦ç³»ç»Ÿï¼‰ã€‚</li>
<li><strong>æ¶æ„å›¾</strong>: å±•ç¤ºäº† Client -&gt; Server (gRPC/HTTP) -&gt; Raft Consensus -&gt; Storage çš„æ•°æ®æµå‘ã€‚</li>
<li><strong>æ ¸å¿ƒç‰¹æ€§</strong>: åˆ—ä¸¾äº†é«˜å¯ç”¨ã€å¼ºä¸€è‡´æ€§ã€æ°´å¹³æ‰©å±•ç­‰å…³é”®æŠ€æœ¯ç‚¹ã€‚</li>
<li><strong>æ€§èƒ½æŒ‡æ ‡</strong>: å±•ç¤ºäº†å‹æµ‹æ•°æ®ï¼ˆQPSã€å»¶è¿Ÿï¼‰ã€‚</li>
</ul>
<h3 id="2-å¤ç›˜æŠ¥å‘Š-reviewmd"><a class="header" href="#2-å¤ç›˜æŠ¥å‘Š-reviewmd">2. å¤ç›˜æŠ¥å‘Š (<code>REVIEW.md</code>)</a></h3>
<ul>
<li><strong>æŠ€æœ¯éš¾ç‚¹</strong>:
<ul>
<li>OpenRaft ç‰ˆæœ¬çš„ API é€‚é…é—®é¢˜ã€‚</li>
<li>Rust å¼‚æ­¥ç¼–ç¨‹ä¸­çš„ç”Ÿå‘½å‘¨æœŸå’Œé”ç«äº‰é—®é¢˜ (SQLite Locking)ã€‚</li>
</ul>
</li>
<li><strong>åšå¾—å¥½çš„</strong>: é¡¹ç›®ç»“æ„æ¸…æ™°ï¼Œæµ‹è¯•è¦†ç›–ç‡é€æ­¥æå‡ã€‚</li>
<li><strong>å¾…æ”¹è¿›</strong>: æ•°æ®åº“å¹¶å‘å†™å…¥æ€§èƒ½ï¼ˆSQLite WAL æ¨¡å¼ä¼˜åŒ–ï¼‰ï¼Œåˆ†å¸ƒå¼èŠ‚ç‚¹é—´çš„åŠ¨æ€å‘ç°ã€‚</li>
</ul>
<h2 id="æŸ¥é˜…æ–‡æ¡£"><a class="header" href="#æŸ¥é˜…æ–‡æ¡£">æŸ¥é˜…æ–‡æ¡£</a></h2>
<ul>
<li><a href="Day91-100/99.Presentation/PRESENTATION.html">é¡¹ç›®æ¼”ç¤º (PRESENTATION.md)</a></li>
<li><a href="Day91-100/99.Presentation/REVIEW.html">æŠ€æœ¯å¤ç›˜ (REVIEW.md)</a></li>
</ul>
<h2 id="ä¸‹ä¸€æ­¥-33"><a class="header" href="#ä¸‹ä¸€æ­¥-33">ä¸‹ä¸€æ­¥</a></h2>
<p>Day 100 å°†åº†ç¥å®Œæˆ 100 å¤© Rust æŒ‘æˆ˜ï¼Œå¹¶å±•æœ›æœªæ¥ã€‚</p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="day-100-æˆä¸º-rustacean-ä¹‹è·¯-1"><a class="header" href="#day-100-æˆä¸º-rustacean-ä¹‹è·¯-1">Day 100: æˆä¸º Rustacean ä¹‹è·¯</a></h1>
<p>ğŸ‰ <strong>æ­å–œï¼ä½ å·²ç»å®Œæˆäº† 100 å¤©çš„ Rust å­¦ä¹ æŒ‘æˆ˜ï¼</strong></p>
<p>æœ¬ç›®å½•åŒ…å« <strong>DTask</strong> é¡¹ç›®çš„æœ€ç»ˆå®Œæ•´å½¢æ€ï¼Œä¹Ÿæ˜¯è¿™ 100 å¤©æ—…ç¨‹çš„ç»ˆç‚¹ã€‚</p>
<h2 id="-æ¯•ä¸šé¡¹ç›®dtask-distributed-task-scheduler"><a class="header" href="#-æ¯•ä¸šé¡¹ç›®dtask-distributed-task-scheduler">ğŸ“ æ¯•ä¸šé¡¹ç›®ï¼šDTask (Distributed Task Scheduler)</a></h2>
<p>åœ¨æœ€åçš„ 10 å¤©é‡Œï¼Œæˆ‘ä»¬ä»é›¶å¼€å§‹æ„å»ºäº†ä¸€ä¸ªåˆ†å¸ƒå¼ä»»åŠ¡è°ƒåº¦ç³»ç»Ÿï¼š</p>
<ol>
<li><strong>æ¶æ„è®¾è®¡</strong>: é‡‡ç”¨ Raft å…±è¯†ç®—æ³•ä¿è¯é«˜å¯ç”¨ï¼ŒgRPC å®ç°é«˜æ•ˆé€šä¿¡ã€‚</li>
<li><strong>æ ¸å¿ƒå¼€å‘</strong>: å®ç°äº† Leader é€‰ä¸¾ã€æ—¥å¿—å¤åˆ¶ã€çŠ¶æ€æœºåº”ç”¨ã€‚</li>
<li><strong>ç³»ç»Ÿé›†æˆ</strong>: èåˆäº† Axum Web APIã€JWT è®¤è¯ã€Prometheus ç›‘æ§ã€‚</li>
<li><strong>å·¥ç¨‹åŒ–</strong>: å®Œæˆäº† Docker å®¹å™¨åŒ–ã€æ–‡æ¡£ç¼–å†™ã€CI/CD æµç¨‹è®¾è®¡ã€‚</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–</strong>: é€šè¿‡ SQLite è°ƒä¼˜å’Œå¼‚æ­¥å¹¶å‘æå‡äº†ç³»ç»Ÿååé‡ã€‚</li>
</ol>
<h3 id="æœ€ç»ˆåŠŸèƒ½ç‰¹æ€§"><a class="header" href="#æœ€ç»ˆåŠŸèƒ½ç‰¹æ€§">æœ€ç»ˆåŠŸèƒ½ç‰¹æ€§</a></h3>
<ul>
<li><input disabled="" type="checkbox" checked=""> <strong>å¼ºä¸€è‡´æ€§</strong>: åŸºäº OpenRaft çš„åˆ†å¸ƒå¼å…±è¯†ã€‚</li>
<li><input disabled="" type="checkbox" checked=""> <strong>å¤šæ¥å£æ”¯æŒ</strong>: åŒæ—¶æ”¯æŒ gRPC (é«˜æ€§èƒ½) å’Œ HTTP (æ˜“ç”¨æ€§) æ¥å£ã€‚</li>
<li><input disabled="" type="checkbox" checked=""> <strong>å®‰å…¨æ€§</strong>: åŸºäº JWT çš„ API è®¿é—®æ§åˆ¶ã€‚</li>
<li><input disabled="" type="checkbox" checked=""> <strong>å¯è§‚æµ‹æ€§</strong>: å®Œæ•´çš„ Prometheus Metrics æŒ‡æ ‡ã€‚</li>
<li><input disabled="" type="checkbox" checked=""> <strong>æŒä¹…åŒ–</strong>: SQLite å­˜å‚¨ä»»åŠ¡çŠ¶æ€å’Œ Raft æ—¥å¿—ã€‚</li>
</ul>
<h2 id="-è¿è¡Œæœ€ç»ˆç‰ˆ"><a class="header" href="#-è¿è¡Œæœ€ç»ˆç‰ˆ">ğŸš€ è¿è¡Œæœ€ç»ˆç‰ˆ</a></h2>
<pre><code class="language-bash">cd Day91-100/100.Rustacean/dtask

# å¯åŠ¨ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ (Node 1)
cargo run --release -- --id 1 --http-addr 127.0.0.1:3001 --grpc-addr 127.0.0.1:50051

# (å¯é€‰) å¯åŠ¨æ›´å¤šèŠ‚ç‚¹ç»„æˆé›†ç¾¤...
</code></pre>
<h2 id="-100-å¤©æ—…ç¨‹å›é¡¾"><a class="header" href="#-100-å¤©æ—…ç¨‹å›é¡¾">ğŸŒŸ 100 å¤©æ—…ç¨‹å›é¡¾</a></h2>
<p>ä» Hello World åˆ°åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œæˆ‘ä»¬ç»å†äº†ï¼š</p>
<ol>
<li><strong>åŸºç¡€ç¯‡ (Day 1-15)</strong>: æ‰€æœ‰æƒã€å€Ÿç”¨ã€ç”Ÿå‘½å‘¨æœŸ â€”â€” ç¿»è¶Š Rust çš„ç¬¬ä¸€åº§å¤§å±±ã€‚</li>
<li><strong>è¿›é˜¶ç¯‡ (Day 16-30)</strong>: Traitã€æ³›å‹ã€é—­åŒ…ã€æ™ºèƒ½æŒ‡é’ˆ â€”â€” æŒæ¡æŠ½è±¡çš„èƒ½åŠ›ã€‚</li>
<li><strong>å¹¶å‘ç¯‡ (Day 31-45)</strong>: çº¿ç¨‹ã€é€šé“ã€Async/Await â€”â€” é‡Šæ”¾å¤šæ ¸æ€§èƒ½ã€‚</li>
<li><strong>å®æˆ˜ç¯‡ (Day 46-90)</strong>: æ„å»º Redis å®¢æˆ·ç«¯ã€Web Serverã€OS å†…æ ¸ç»„ä»¶ â€”â€” ç†è®ºä»˜è¯¸å®è·µã€‚</li>
<li><strong>æ¯•ä¸šè®¾è®¡ (Day 91-100)</strong>: DTask åˆ†å¸ƒå¼ç³»ç»Ÿ â€”â€” ç»¼åˆå®åŠ›çš„ä½“ç°ã€‚</li>
</ol>
<h2 id="-æœªæ¥å±•æœ›"><a class="header" href="#-æœªæ¥å±•æœ›">ğŸ”® æœªæ¥å±•æœ›</a></h2>
<p>Rust çš„å­¦ä¹ æ°¸æ— æ­¢å¢ƒï¼Œä½†è¿™ 100 å¤©ä¸ºä½ æ‰“ä¸‹äº†åšå®çš„åŸºç¡€ã€‚æ¥ä¸‹æ¥ä½ å¯ä»¥æ¢ç´¢ï¼š</p>
<ul>
<li><strong>Cloud Native</strong>: Kubernetes Operator, WebAssembly (WasmEdge).</li>
<li><strong>Systems</strong>: Linux Kernel (Rust for Linux), Embedded (Embedded HAL).</li>
<li><strong>Database</strong>: æ·±å…¥æ•°æ®åº“å†…æ ¸å¼€å‘ (å¦‚ TiKV, Databend).</li>
<li><strong>AI/ML</strong>: ä½¿ç”¨ Rust è¿›è¡Œé«˜æ€§èƒ½æ¨¡å‹æ¨ç† (Candle, Burn).</li>
</ul>
<p><strong>Keep Hacking, Rustacean! ğŸ¦€</strong></p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>

        <template id=fa-eye><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM432 256c0 79.5-64.5 144-144 144s-144-64.5-144-144s64.5-144 144-144s144 64.5 144 144zM288 192c0 35.3-28.7 64-64 64c-11.5 0-22.3-3-31.6-8.4c-.2 2.8-.4 5.5-.4 8.4c0 53 43 96 96 96s96-43 96-96s-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6z"/></svg></span></template>
        <template id=fa-eye-slash><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L525.6 386.7c39.6-40.6 66.4-86.1 79.9-118.4c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C465.5 68.8 400.8 32 320 32c-68.2 0-125 26.3-169.3 60.8L38.8 5.1zM223.1 149.5C248.6 126.2 282.7 112 320 112c79.5 0 144 64.5 144 144c0 24.9-6.3 48.3-17.4 68.7L408 294.5c5.2-11.8 8-24.8 8-38.5c0-53-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6c0 10.2-2.4 19.8-6.6 28.3l-90.3-70.8zm223.1 298L373 389.9c-16.4 6.5-34.3 10.1-53 10.1c-79.5 0-144-64.5-144-144c0-6.9 .5-13.6 1.4-20.2L83.1 161.5C60.3 191.2 44 220.8 34.5 243.7c-3.3 7.9-3.3 16.7 0 24.6c14.9 35.7 46.2 87.7 93 131.1C174.5 443.2 239.2 480 320 480c47.8 0 89.9-12.9 126.2-32.5z"/></svg></span></template>
        <template id=fa-copy><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M502.6 70.63l-61.25-61.25C435.4 3.371 427.2 0 418.7 0H255.1c-35.35 0-64 28.66-64 64l.0195 256C192 355.4 220.7 384 256 384h192c35.2 0 64-28.8 64-64V93.25C512 84.77 508.6 76.63 502.6 70.63zM464 320c0 8.836-7.164 16-16 16H255.1c-8.838 0-16-7.164-16-16L239.1 64.13c0-8.836 7.164-16 16-16h128L384 96c0 17.67 14.33 32 32 32h47.1V320zM272 448c0 8.836-7.164 16-16 16H63.1c-8.838 0-16-7.164-16-16L47.98 192.1c0-8.836 7.164-16 16-16H160V128H63.99c-35.35 0-64 28.65-64 64l.0098 256C.002 483.3 28.66 512 64 512h192c35.2 0 64-28.8 64-64v-32h-47.1L272 448z"/></svg></span></template>
        <template id=fa-play><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80V432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"/></svg></span></template>
        <template id=fa-clock-rotate-left><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M75 75L41 41C25.9 25.9 0 36.6 0 57.9V168c0 13.3 10.7 24 24 24H134.1c21.4 0 32.1-25.9 17-41l-30.8-30.8C155 85.5 203 64 256 64c106 0 192 86 192 192s-86 192-192 192c-40.8 0-78.6-12.7-109.7-34.4c-14.5-10.1-34.4-6.6-44.6 7.9s-6.6 34.4 7.9 44.6C151.2 495 201.7 512 256 512c141.4 0 256-114.6 256-256S397.4 0 256 0C185.3 0 121.3 28.7 75 75zm181 53c-13.3 0-24 10.7-24 24V256c0 6.4 2.5 12.5 7 17l72 72c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-65-65V152c0-13.3-10.7-24-24-24z"/></svg></span></template>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr-ef4e11c1.min.js"></script>
        <script src="mark-09e88c2c.min.js"></script>
        <script src="searcher-c2a407aa.js"></script>

        <script src="clipboard-1626706a.min.js"></script>
        <script src="highlight-abc7f01d.js"></script>
        <script src="book-a0b12cfe.js"></script>

        <!-- Custom JS scripts -->
        <script src="mermaid-616a109f.min.js"></script>
        <script src="mermaid-init-777d3606.js"></script>

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>


    </div>
    </body>
</html>
